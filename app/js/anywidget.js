import { $APP, shadow$provide, $jscomp } from "./common.js";
var sI=function(){var a=$APP.Mm(1);$APP.qm(function(){var b=function(){function d(e){var f=e[1];if(f===7){var g=e[7];f=$APP.u(nI);f=!$APP.Vd(f,g);e[8]=f;e[1]=f?10:11;return $APP.Im}if(f===1)return f=$APP.u(oI),f=$APP.Gh(f),g=$APP.D(f),e[9]=g,e[2]=null,e[1]=2,$APP.Im;if(f===4){g=e[9];var k=$APP.E(g),n=$APP.gw.g(k);f=$APP.If(k,new $APP.V(null,2,5,$APP.X,[$APP.nw,$APP.By],null));g=[$APP.r.g(n),"$",$APP.r.g(f)].join("");var p=$APP.u(pI),q=["models:",$APP.r.g(n)].join(""),t=$APP.qi.g(f);p=$APP.If(p,new $APP.V(null,
4,5,$APP.X,[q,$APP.Nv,t,$APP.cz],null));k=$APP.zi($APP.N([k]));n=$APP.zi($APP.N(["cell",n,"model",f,"schem",g,"typ",p]));e[10]=f;e[7]=g;e[11]=p;e[12]=k;e[13]=n;e[1]=$APP.m(f)?7:8;return $APP.Im}return f===15?(e[2]=e[2],e[1]=6,$APP.Im):f===13?(g=e[7],f=$APP.Z.s(qI,$APP.Y,g,$APP.Lg),g=$APP.an(rI,g,$APP.Ol(qI,new $APP.V(null,1,5,$APP.X,[g],null))),n=$APP.Z.s(nI,$APP.Y,g.group,g.cache),k=g.fc,e[15]=f,e[14]=g,e[16]=n,$APP.Jm(e,16,k)):f===6?(e[2]=e[2],e[1]=3,$APP.Im):f===3?$APP.Km(e,e[2]):f===12?(e[2]=
e[2],e[1]=9,$APP.Im):f===2?(g=e[9],f=$APP.D(g),e[1]=f?4:5,$APP.Im):f===11?(f=e[8],e[2]=f,e[1]=12,$APP.Im):f===9?(e[1]=$APP.m(e[2])?13:14,$APP.Im):f===5?(e[2]=null,e[1]=6,$APP.Im):f===14?(g=e[9],g=$APP.G(g),e[9]=g,e[2]=null,e[1]=2,$APP.Im):f===16?(g=e[9],n=e[14],f=e[2],g=$APP.G(g),n=$APP.u(n),n=$APP.Gh(n),n=$APP.D(n),g=$APP.Cf.h(g,n),e[17]=f,e[9]=g,e[2]=null,e[1]=2,$APP.Im):f===10?(f=e[11],f=$APP.K.h(f,"schematic"),e[2]=f,e[1]=12,$APP.Im):f===8?(f=e[10],e[2]=f,e[1]=9,$APP.Im):null}return function(){function e(k){for(;;){a:{try{for(;;){var n=
d(k);if(!$APP.R(n,$APP.Im)){var p=n;break a}}}catch(q){p=q;k[2]=p;if($APP.D(k[4]))k[1]=$APP.E(k[4]);else throw p;p=$APP.Im;break a}p=void 0}if(!$APP.R(p,$APP.Im))return p}}function f(){var k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[0]=g;k[1]=1;return k}var g=null;g=function(k){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,k)}throw Error("Invalid arity: "+arguments.length);};g.o=f;g.g=e;return g}()}(),c=function(){var d=
b();d[6]=a;return d}();return $APP.Hm(c)})},tI=new $APP.Q("nyancad.mosaic.anywidget","anywidget-sync","nyancad.mosaic.anywidget/anywidget-sync",-1693447253);var uI=new URLSearchParams(window.location.search),vI,wI=uI.get("schem");vI=$APP.m(wI)?wI:"myschem";var xI=uI.get("db"),rI=new $APP.rz($APP.m(xI)?xI:"schematics"),qI=$APP.Nl($APP.Ze([vI,$APP.S,"models",$APP.S])),oI=$APP.an(rI,vI,$APP.Ol(qI,new $APP.V(null,1,5,$APP.X,[vI],null))),pI=$APP.an(rI,"models",$APP.Ol(qI,new $APP.V(null,1,5,$APP.X,["models"],null))),nI=$APP.Zm(rI,$APP.N([oI,pI]));export const render=function(a){var b=a.model;a.el.innerHTML="Connected to editor.";b.set("schematic_data",$APP.ul($APP.u(qI)));b.save_changes();$APP.Ei(qI,tI,function(c,d,e,f){$APP.zi($APP.N(["Schematic updated, syncing to anywidget model"]));sI();b.set("schematic_data",$APP.ul(f));return b.save_changes()});return null};