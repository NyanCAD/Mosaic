const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./tracing-CQm8yTjH.js","./index-_Zd2Tjcq.js","./index-BVt8Dtzn.css","./compile-DMqlw2f3.js","./time-BJthvF8K.js","./timer-B5eI7Tcu.js","./linear-D5JcW2cD.js","./init-DLRA0X12.js","./range-CtcPcB_L.js","./zoom-COrs4lFh.js","./ordinal-DDUp3AbE.js","./colors-bszWmPJw.js","./arc-ZB5pDULS.js","./step-BwsUM5iJ.js","./storage-CIvwacNq.js","./index-BHWDo0SJ.js","./index-ClIpEuqy.js","./index-ChUupid3.js","./index-BRKrWs_D.js","./index-Crlijsf-.js","./index-CtknHNa6.js","./index-D_KrWDAY.js","./index-Cx_Febir.js","./index-DP2Hem3Q.js","./index-BfQujoc3.js","./index-C1g5-CPL.js","./index-Cz3-y_u2.js","./index-O2nR5_1b.js","./apl-CXdQSnD-.js","./asciiarmor-D5V0T9Cu.js","./asterisk-B46aRdXb.js","./brainfuck-CtZaYBKt.js","./clike-BgBwzOhw.js","./cmake-DXn5xaP-.js","./cobol-stawOqaz.js","./coffeescript-BTDxI-eT.js","./commonlisp-vq6DHwts.js","./crystal-CRzZ78HM.js","./cypher-gJDei3ni.js","./d-BShv7fp-.js","./diff-UJJ5BM9S.js","./dockerfile-knGOOxt4.js","./simple-mode-C3vEBAcb.js","./dtd-DI9Herc-.js","./dylan-CHJ5qNM_.js","./ebnf-B-Df8AvO.js","./ecl-DPFc0Uaf.js","./eiffel-DR5c0IrL.js","./elm-D7xaZ7Da.js","./erlang-BuqgqA5h.js","./factor-CFXhaUWb.js","./fcl-CVaBTCzQ.js","./forth-Dri_5nFc.js","./fortran-DL7KluxX.js","./gas-5kEe4nk0.js","./gherkin-B6X1vGSW.js","./groovy-DnIzCrpZ.js","./haskell-CmdsSjFB.js","./haxe-D25e-2l-.js","./http-BKJkqRj4.js","./idl-pcmmZuaN.js","./jinja2-DhgKlfW7.js","./julia-DjdwvFuI.js","./livescript-HO6ttBFx.js","./lua-8DXOpKDz.js","./mathematica-IIbmv7SK.js","./mbox-z_N2Mo3d.js","./mirc-DkvFAiy5.js","./modelica-DSrSSXCg.js","./mscgen-B2igx18G.js","./mumps-zvxmGV4l.js","./nginx-B4hAVlXN.js","./nsis-BvKfQ9lQ.js","./ntriples-FFvkTduk.js","./octave-C4hdQ5Hf.js","./oz-qQq7irPq.js","./pascal-CafrKXZF.js","./perl-tdMlh9QA.js","./pig-CwGJVRC4.js","./powershell-D1ly3AHC.js","./properties-_nPj978X.js","./protobuf-B4y9do6W.js","./puppet-Bc-yJKzi.js","./q-B0kTJ4cI.js","./r-BA4EbLKE.js","./ruby-CR-u2WLS.js","./sas-Bqaci40L.js","./scheme-qjP0V5Ag.js","./shell-BLav31RL.js","./sieve-r025o_jW.js","./smalltalk-C7J3IyEP.js","./solr-78MBEUkU.js","./sparql-BRLJFz69.js","./spreadsheet-CGlWr0eM.js","./stylus-OdhglgkO.js","./swift-B_XXVlXX.js","./tcl-B2fODqDH.js","./textile-BuVhTOzU.js","./tiddlywiki-BgR6AEZu.js","./tiki-CI-ztowC.js","./toml-BQXy8elZ.js","./troff-Ce85hlLp.js","./ttcn-BxnYHtq8.js","./turtle-BkSuIpt-.js","./vb-BHgjm0DN.js","./vbscript-Dawdd5GZ.js","./velocity-BdD_26Jv.js","./verilog-B4LBqg_1.js","./vhdl-CWWH2SUo.js","./webidl-CGwyPRYs.js","./xquery-CVDBqZPY.js","./yacas-I8QjZlxf.js","./z80-D8p3gKXp.js","./storage-De8XnUVS.css","./shutdown-button-DPmuCF_V.js","./index-mKg8eShI.js","./shutdown-button-C1rhMrxo.css","./circle-play-DQ5ulCX1.js","./_createAggregator-DLooNR_b.js","./_baseEach-Db3oykFl.js","./transform-BzDy4yXW.js","./sortBy-DJxmB991.js","./_baseMap-YxkxzdBo.js","./terminal-BKOpNk0B.js","./terminal-WqMRJt5Z.css"])))=>i.map(i=>d[i]);
var GF=Object.defineProperty;var E3=Bt=>{throw TypeError(Bt)};var YF=(Bt,It,gn)=>It in Bt?GF(Bt,It,{enumerable:!0,configurable:!0,writable:!0,value:gn}):Bt[It]=gn;var ee=(Bt,It,gn)=>YF(Bt,typeof It!="symbol"?It+"":It,gn),JF=(Bt,It,gn)=>It.has(Bt)||E3("Cannot "+gn);var I3=(Bt,It,gn)=>(JF(Bt,It,"read from private field"),gn?gn.call(Bt):It.get(Bt)),A3=(Bt,It,gn)=>It.has(Bt)?E3("Cannot add the same private member more than once"):It instanceof WeakSet?It.add(Bt):It.set(Bt,gn);import{u as Fe,Q as A,i9 as KF,ia as XF,ib as T3,ic as ZF,id as QF,ie as ez,a as K,ig as tz,ih as Rr,ii as nz,ij as om,ik as M3,il as oz,im as rz,io as O3,ip as dc,c as X,ey as sz,ao as lt,j as h,ae as to,al as lr,ak as Os,am as Ds,be as cr,W as Pe,an as xn,iq as na,aj as dr,bt as $n,ap as Rs,a4 as Le,a0 as Zt,dV as rm,eJ as Ps,ir as iz,bp as tt,a8 as Ft,is as az,eD as po,it as D3,iu as R3,iv as sm,iw as P3,ix as lz,L as Qt,dC as uc,aJ as ur,iy as hc,aL as im,as as En,iz as cz,a7 as am,iA as dz,iB as L3,eO as F3,_ as en,aS as z3,cE as lm,iC as uz,dM as ct,iD as B3,dT as fc,iE as hz,iF as mc,Z as $e,a_ as Wn,iG as pc,iH as Ls,eE as Fs,iI as fz,iJ as oa,iK as mz,eM as pz,iL as U3,iM as V3,em as gz,iN as hr,iO as Pr,aH as gc,iP as _z,iQ as _c,iR as H3,a5 as ra,ea as $3,a6 as bc,iS as bz,iT as cm,iU as Lr,bg as Fr,U as Fo,eF as zs,fk as W3,g4 as Bs,fz as yz,b2 as fn,iV as xz,iW as wz,g2 as dm,aG as yc,iX as um,iY as vz,iZ as q3,i_ as hm,i$ as kz,j0 as Sz,j1 as go,j2 as G3,g8 as fm,j3 as sa,j4 as xc,er as Ae,j5 as Ke,j6 as mm,j7 as Ct,j8 as Y3,dw as pm,ds as gm,dt as _m,du as bm,dr as ym,j9 as Cz,fx as xm,aR as In,aT as qn,fn as J3,fp as K3,fq as Nz,fv as jz,fr as X3,V as Oe,el as Ez,aE as Us,aP as Vs,aF as Hs,aM as sn,eN as zo,ja as Iz,ft as Z3,jb as Az,fl as Q3,fm as e4,jc as $s,dv as t4,jd as n4,je as Tz,jf as Mz,ai as Oz,ah as Dz,jg as wm,dz as Rz,dB as vm,f9 as wc,jh as km,ji as Sm,bj as An,jj as Pz,eI as ia,f6 as mn,b7 as o4,dW as mt,jk as Lz,eg as Fz,af as Cm,jl as aa,jm as vc,jn as zz,jo as Bz,jp as r4,jq as pn,g7 as s4,en as kc,ba as Uz,jr as Vz,ar as Nm,aI as Hz,js as $z,gt as i4,b6 as Sc,jt as jm,aq as la,ez as a4,ju as Wz,ag as qz,jv as l4,jw as Gz,jx as Yz,jy as Jz,jz as Kz,jA as Xz,dx as Bo,jB as Zz,jC as Cc,jD as Ws,o as Uo,n as st,fO as Tn,jE as Mn,jF as ut,jG as qs,jH as zt,g3 as Gt,jI as Em,eq as no,jJ as Qz,jK as eB,b4 as c4,b5 as d4,jL as u4,jM as tB,gw as Gs,jN as Nc,b1 as jc,gv as zr,eP as Im,jO as nB,jP as oB,jQ as rB,jR as sB,jS as h4,jT as ca,jU as f4,jV as iB,jW as m4,jX as p4,jY as aB,jZ as g4,j_ as _4,eQ as Ec,j$ as lB,k0 as b4,k1 as da,k2 as ua,k3 as Ic,k4 as fr,k5 as y4,k6 as Vo,k7 as Ys,k8 as Am,k9 as ha,ka as Js,kb as Tm,kc as Mm,kd as x4,ke as Ac,kf as cB,S as fa,kg as ma,kh as dB,dS as Tc,ki as uB,kj as Om,kk as hB,kl as fB,km as Mc,d$ as mB,kn as Dm,ko as Ks,kp as Oc,kq as Xs,fN as Gn,fY as Ho,fK as w4,co as v4,kr as Rm,fw as pa,ks as k4,kt as S4,ku as C4,kv as Pm,kw as ga,kx as _a,ky as ba,kz as pB,fG as Dc,kA as Rc,kB as Pc,ef as gB,fH as _B,kC as bB,kD as yB,r as xB,kE as wB,kF as vB,kG as kB,fR as SB,kH as mr,kI as CB,kJ as N4,t as D,kK as NB,kL as jB,kM as EB,kN as IB,kO as AB,kP as TB,kQ as MB,kR as OB,kS as DB,kT as RB,kU as PB,kV as LB,kW as FB,kX as zB,kY as BB,kZ as UB,k_ as VB,k$ as HB,l0 as $B,l1 as WB,l2 as qB,l3 as GB,l4 as YB,l5 as JB,l6 as KB,l7 as XB,l8 as j4,l9 as ZB,la as QB,lb as eU,lc as Lm,ld as Lc,le as E4,lf as tU,lg as nU,lh as I4,li as oU,lj as Zs,lk as Yn,ll as rU,lm as sU,ln as iU,lo as aU,lp as lU,lq as cU,lr as dU,ls as uU,lt as hU,lu as fU,lv as pr,lw as mU,lx as pU,ly as gU,lz as _U,dY as bU,lA as yU,lB as A4,e0 as xU,lC as Fc,lD as wU,lE as vU,lF as kU,lG as SU,X as gr,lH as zc,lI as CU,lJ as NU,lK as T4,lL as Fm,gu as Qs,lM as jU,lN as EU,lO as IU,lP as AU,fW as TU,bd as MU,$ as zm,lQ as M4,lR as OU,lS as DU,lT as Bm,lU as Um,lV as RU,lW as O4,lX as D4,lY as ya,fJ as PU,ab as R4,dK as LU,lZ as P4,fi as Et,l_ as xa,l$ as ei,m0 as FU,m1 as zU,m2 as Vm,m3 as BU,cn as Hm,m4 as UU,b3 as L4,m5 as VU,m6 as HU,m7 as Bc,m8 as F4,dI as $m,bf as z4,m9 as $U,ma as WU,mb as B4,mc as qU,md as GU,me as U4,mf as Wm,mg as YU,bh as V4,mh as JU,eH as KU,mi as $o,ej as H4,mj as $4,eL as W4,fA as qm,mk as Gm,ml as q4,bv as Ym,ek as Uc,mm as G4,mn as XU,mo as ZU,mp as QU,mq as Y4,mr as eV,ms as J4,mt as tV,gl as nV,fo as oV,fs as Jm,go as rV,bc as wa,mu as sV,mv as K4,mw as Km,mx as iV,a$ as Jn,my as aV,mz as lV,mA as X4,fb as Xm,mB as cV,mC as dV,mD as uV,bq as hV,mE as fV,mF as mV,mG as pV,mH as gV,a9 as _V,mI as Vc,aa as bV,mJ as Z4,f7 as yV,mK as Q4,fE as xV,dE as wV,mL as vV,mM as kV,mN as eS,mO as SV,mP as ti,mQ as CV,mR as Hc,mS as NV,mT as jV,y as tS,mU as EV,dk as IV,mV as va,mW as AV,mX as TV,mY as MV,mZ as OV,C as nS,m_ as DV,eV as RV,E as ni,b0 as PV,aZ as LV,m$ as FV,n0 as zV,a2 as $c,n1 as BV,a3 as _r,dH as oS,n2 as Zm,n3 as UV,dU as rS,n4 as VV,n5 as sS,n6 as HV,n7 as iS,n8 as $V,n9 as WV,na as aS,nb as lS,nc as cS,f5 as dS,nd as qV,ne as GV,nf as uS,ng as hS,nh as Wc,ni as fS,nj as YV,nk as mS,nl as JV,nm as KV,nn as pS,no as XV,np as ZV,nq as QV,nr as eH,ns as tH,nt as nH,nu as oH,dR as rH,nv as sH,nw as iH,fX as gS,nx as aH,ny as lH,nz as cH,nA as dH,nB as uH,nC as hH,nD as fH,nE as mH,nF as pH,nG as _S,nH as gH,fM as _H,nI as bH,nJ as yH,nK as xH,nL as wH,nM as vH,a1 as kH,eB as SH,gd as CH,nN as bS,nO as yS,ge as xS,gf as Qm,gb as oi,gg as Br,gc as Ur,gh as ep,gi as tp,nP as NH,nQ as br,nR as wS,eC as jH,gn as EH,nS as IH,nT as AH,nU as TH,nV as MH,nW as OH,nX as DH,nY as vS,es as RH,nZ as np,at as qc,n_ as kS,n$ as SS,av as CS,au as PH,dQ as LH,__tla as FH}from"./index-_Zd2Tjcq.js";import{b as ka,A as zH,L as NS,g as BH,G as UH,s as VH,k as HH,B as jS,a as $H,M as WH,Y as qH,c as wn,u as Sa,C as GH,S as YH,K as JH,d as KH,i as XH,e as ES,f as ZH,h as QH,j as Ca,P as op,l as IS,m as e$,n as t$,o as n$,p as rp,T as o$}from"./shutdown-button-DPmuCF_V.js";import{V as AS,d as ri,I as sp,e as r$,f as TS,N as MS,S as OS,g as DS,h as RS,L as PS,F as LS,i as FS,M as s$,l as zS,j as i$,E as BS,k as a$,m as ip,n as l$,o as c$,p as d$,q as u$,s as h$,t as f$,v as m$,w as p$,x as g$,a as _$,C as b$,R as US,b as y$,A as x$,T as w$,y as v$,z as k$,B as S$,D as C$,O as N$,c as j$,P as E$,__tla as I$}from"./storage-CIvwacNq.js";import{c as A$}from"./_createAggregator-DLooNR_b.js";import{s as oo,i as yr,T as ap,a as lp}from"./transform-BzDy4yXW.js";import{g as VS}from"./timer-B5eI7Tcu.js";import{i as T$}from"./zoom-COrs4lFh.js";import{s as Na}from"./sortBy-DJxmB991.js";let cp,Gc,On,Yc,HS,ja,dp,M$=Promise.all([(()=>{try{return FH}catch{}})(),(()=>{try{return I$}catch{}})()]).then(async()=>{var ac,j3;var Bt=A$(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});let It,gn,up,Jc,si,ii,hp,fp,mp,pp,Ea,Kc,gp,Ia,_p,Xc,bp,yp,Zc,xp,wp,vp,Aa,kp,Qc,Sp,Cp,Np,jp,Ep,Ip,ed,Ap,td,Tp,Mp,Op,Dp,Rp,Ta,Pp,Lp,nd,Fp,zp,Bp,od,Up,Vp,Hp,Ma,rd,sd,$p,Wp,qp,Gp,Yp,Jp,Kp,Xp,Zp,id,ad,Qp,eg,tg,Oa,xr,wr;It=Fe("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),gn=Fe("arrow-right-from-line",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]]),up=Fe("arrow-right-to-line",[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]]),Jc=Fe("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),si=Fe("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),ii=Fe("between-horizontal-start",[["rect",{width:"13",height:"7",x:"8",y:"3",rx:"1",key:"pkso9a"}],["path",{d:"m2 9 3 3-3 3",key:"1agib5"}],["rect",{width:"13",height:"7",x:"8",y:"14",rx:"1",key:"1q5fc1"}]]),hp=Fe("chevrons-down",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]),fp=Fe("chevrons-up",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),Yc=Fe("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),mp=Fe("circle-chevron-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 10-4 4-4-4",key:"894hmk"}]]),pp=Fe("circle-chevron-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m10 8 4 4-4 4",key:"1wy4r4"}]]),Ea=Fe("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Kc=Fe("clipboard-copy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),gp=Fe("clipboard-paste",[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]]),Ia=Fe("cloud-download",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]),_p=Fe("code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Xc=Fe("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),bp=Fe("copy-minus",[["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),yp=Fe("diamond-plus",[["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z",key:"1ey20j"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),Zc=Fe("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),xp=Fe("eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]),wp=Fe("fast-forward",[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]]),vp=Fe("file-pen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),Aa=Fe("file-plus-2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]),kp=Fe("files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]),Qc=Fe("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Sp=Fe("folder-tree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]),Cp=Fe("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Np=Fe("hard-drive-download",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 18h.01",key:"h775k"}]]),jp=Fe("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Ep=Fe("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Ip=Fe("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),ed=Fe("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Ap=Fe("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),td=Fe("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),Tp=Fe("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Mp=Fe("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Op=Fe("memory-stick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]),Dp=Fe("message-circle-question",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Rp=Fe("microchip",[["path",{d:"M18 12h2",key:"quuxs7"}],["path",{d:"M18 16h2",key:"zsn3lv"}],["path",{d:"M18 20h2",key:"9x5y9y"}],["path",{d:"M18 4h2",key:"1luxfb"}],["path",{d:"M18 8h2",key:"nxqzg"}],["path",{d:"M4 12h2",key:"1ltxp0"}],["path",{d:"M4 16h2",key:"8a5zha"}],["path",{d:"M4 20h2",key:"27dk57"}],["path",{d:"M4 4h2",key:"10groj"}],["path",{d:"M4 8h2",key:"18vq6w"}],["path",{d:"M8 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-1.5c-.276 0-.494.227-.562.495a2 2 0 0 1-3.876 0C9.994 2.227 9.776 2 9.5 2z",key:"1681fp"}]]),Ta=Fe("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Pp=Fe("octagon-alert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),Lp=Fe("package-check",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),nd=Fe("package-x",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),Fp=Fe("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),zp=Fe("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),Bp=Fe("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),od=Fe("presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),Up=Fe("regex",[["path",{d:"M17 3v10",key:"15fgeh"}],["path",{d:"m12.67 5.5 8.66 5",key:"1gpheq"}],["path",{d:"m12.67 10.5 8.66-5",key:"1dkfa6"}],["path",{d:"M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z",key:"swwfx4"}]]),Vp=Fe("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Hp=Fe("rows-3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]),Ma=Fe("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),rd=Fe("scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),sd=Fe("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),$p=Fe("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Wp=Fe("square-code",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),qp=Fe("square-dashed-bottom-code",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["path",{d:"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2",key:"as5y1o"}],["path",{d:"M9 21h1",key:"15o7lz"}]]),Gp=Fe("square-equal",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M7 14h10",key:"1mhdw3"}]]),Yp=Fe("square-m",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 16V8l4 4 4-4v8",key:"141u4e"}]]),Jp=Fe("square-play",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]]),Kp=Fe("square-power",[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M7.998 9.003a5 5 0 1 0 8-.005",key:"1pek45"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]]),Xp=Fe("square-terminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]),Zp=Fe("text-cursor-input",[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]]),id=Fe("text-search",[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 18H3",key:"13769t"}],["circle",{cx:"17",cy:"15",r:"3",key:"1upz2a"}],["path",{d:"m21 19-1.9-1.9",key:"dwi7p8"}]]),ad=Fe("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),Qp=Fe("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),eg=Fe("view",[["path",{d:"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2",key:"mrq65r"}],["path",{d:"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2",key:"be3xqs"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]]),tg=Fe("whole-word",[["circle",{cx:"7",cy:"12",r:"3",key:"12clwm"}],["path",{d:"M10 9v6",key:"17i7lo"}],["circle",{cx:"17",cy:"12",r:"3",key:"gl7c2s"}],["path",{d:"M14 7v8",key:"dl84cr"}],["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1",key:"lt2kga"}]]),Oa=Fe("workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),xr=Fe("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),wr=Fe("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);const $S=A.createContext({}),WS=A.forwardRef(function(t,e){[t,e]=QF(t,e,$S);let{toolbarProps:n}=function(s,i){const{"aria-label":a,"aria-labelledby":l,orientation:c="horizontal"}=s;let[d,u]=A.useState(!1);KF(()=>{var p;u(!(!i.current||!(!((p=i.current.parentElement)===null||p===void 0)&&p.closest('[role="toolbar"]'))))});const{direction:f}=XF(),m=f==="rtl"&&c==="horizontal";let _=ZF(i);const g=A.useRef(null);return{toolbarProps:{...T3(s,{labelable:!0}),role:d?"group":"toolbar","aria-orientation":c,"aria-label":a,"aria-labelledby":a==null?l:void 0,onKeyDownCapture:d?void 0:p=>{if(p.currentTarget.contains(p.target)){if(c==="horizontal"&&p.key==="ArrowRight"||c==="vertical"&&p.key==="ArrowDown")m?_.focusPrevious():_.focusNext();else{if(!(c==="horizontal"&&p.key==="ArrowLeft"||c==="vertical"&&p.key==="ArrowUp"))return p.key==="Tab"?(p.stopPropagation(),g.current=document.activeElement,void(p.shiftKey?_.focusFirst():_.focusLast())):void 0;m?_.focusNext():_.focusPrevious()}p.stopPropagation(),p.preventDefault()}},onFocusCapture:d?void 0:p=>{var b,y;g.current&&!p.currentTarget.contains(p.relatedTarget)&&(!((b=i.current)===null||b===void 0)&&b.contains(p.target))&&((y=g.current)===null||y===void 0||y.focus(),g.current=null)},onBlurCapture:d?void 0:p=>{p.currentTarget.contains(p.relatedTarget)||g.current||(g.current=p.target)}}}}(t,e),o=ez({...t,values:{orientation:t.orientation||"horizontal"},defaultClassName:"react-aria-Toolbar"}),r=T3(t);return delete r.id,K.createElement("div",{...tz(n,r),...o,ref:e,slot:t.slot||void 0,"data-orientation":t.orientation||"horizontal"},o.children)});function Da(t,e){const n=+Rr(t)-+Rr(e);return n<0?-1:n>0?1:n}function qS(t,e){const n=Rr(t,e==null?void 0:e.in);return+function(o,r){const s=Rr(o,r==null?void 0:r.in);return s.setHours(23,59,59,999),s}(n,e)==+function(o,r){const s=Rr(o,r==null?void 0:r.in),i=s.getMonth();return s.setFullYear(s.getFullYear(),i+1,0),s.setHours(23,59,59,999),s}(n,e)}function GS(t,e,n){const[o,r,s]=om(n==null?void 0:n.in,t,t,e),i=Da(r,s),a=Math.abs(function(d,u,f){const[m,_]=om(f==null?void 0:f.in,d,u);return 12*(m.getFullYear()-_.getFullYear())+(m.getMonth()-_.getMonth())}(r,s));if(a<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let l=Da(r,s)===-i;qS(o)&&a===1&&Da(o,s)===1&&(l=!1);const c=i*(a-+l);return c===0?0:c}function YS(t,e,n){const o=function(r,s){return+Rr(r)-+Rr(s)}(t,e)/1e3;return(r=>{const s=(0,Math.trunc)(r);return s===0?0:s})(o)}function JS(t,e){return function(n,o,r){const s=oz(),i=(r==null?void 0:r.locale)??s.locale??rz,a=Da(n,o);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:a}),[c,d]=om(r==null?void 0:r.in,...a>0?[o,n]:[n,o]),u=YS(d,c),f=(M3(d)-M3(c))/1e3,m=Math.round((u-f)/60);let _;if(m<2)return m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<O3){const g=Math.round(m/60);return i.formatDistance("aboutXHours",g,l)}if(m<2520)return i.formatDistance("xDays",1,l);if(m<dc){const g=Math.round(m/O3);return i.formatDistance("xDays",g,l)}if(m<2*dc)return _=Math.round(m/dc),i.formatDistance("aboutXMonths",_,l);if(_=GS(d,c),_<12){const g=Math.round(m/dc);return i.formatDistance("xMonths",g,l)}{const g=_%12,p=Math.trunc(_/12);return g<3?i.formatDistance("aboutXYears",p,l):g<9?i.formatDistance("overXYears",p,l):i.formatDistance("almostXYears",p+1,l)}}(t,function(n){return nz(n,Date.now())}(t),e)}const Ra="https://static.marimo.app",KS=t=>{const e=X.c(24),{onClose:n}=t,[o,r]=A.useState("");let s;s=Math.random().toString(36).slice(2,6);const i=`${o}-${s}`,a=`${Ra}/static/${i}`;let l,c,d,u,f,m,_,g,p,b,y;return e[0]!==n||e[1]!==i?(l=async x=>{x.preventDefault(),n();const v=await sz({download:!1,includeCode:!0,files:AS.INSTANCE.filenames()}),S=lt({title:"Uploading static notebook...",description:"Please wait."});await fetch(`${Ra}/api/static`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html:v,path:i})}).catch(()=>{S.dismiss(),lt({title:"Error uploading static page",description:h.jsxs("div",{children:["Please try again later. If the problem persists, please file a bug report on"," ",h.jsx("a",{href:to.issuesPage,target:"_blank",className:"underline",children:"GitHub"}),"."]})})}),S.dismiss(),lt({title:"Static page uploaded!",description:h.jsxs("div",{children:["The URL has been copied to your clipboard.",h.jsx("br",{}),"You can share it with anyone."]})})},e[0]=n,e[1]=i,e[2]=l):l=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(lr,{children:"Share static notebook"}),e[3]=c):c=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsxs(Os,{children:[c,h.jsxs(Ds,{children:["You can publish a static, non-interactive version of this notebook to the public web. We will create a link for you that lives on"," ",h.jsx("a",{href:Ra,target:"_blank",children:Ra}),"."]})]}),e[4]=d):d=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(u=x=>{const v=x.target.value.toLowerCase().replaceAll(/\s/g,"-").replaceAll(/[^\da-z-]/g,"");r(v)},e[5]=u):u=e[5],e[6]!==o?(f=h.jsx(cr,{"data-testid":"slug-input",id:"slug",autoFocus:!0,value:o,placeholder:"Notebook slug",onChange:u,required:!0,autoComplete:"off"}),e[6]=o,e[7]=f):f=e[7],e[8]!==a?(m=h.jsxs("div",{className:"font-semibold text-sm text-muted-foreground gap-2 flex flex-col",children:["Anyone will be able to access your notebook at this URL:",h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(XS,{text:a}),h.jsx("span",{className:"text-primary",children:a})]})]}),e[8]=a,e[9]=m):m=e[9],e[10]!==f||e[11]!==m?(_=h.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[f,m]}),e[10]=f,e[11]=m,e[12]=_):_=e[12],e[13]!==n?(g=h.jsx(Pe,{"data-testid":"cancel-share-static-notebook-button",variant:"secondary",onClick:n,children:"Cancel"}),e[13]=n,e[14]=g):g=e[14],e[15]!==a?(p=h.jsx(Pe,{"data-testid":"share-static-notebook-button","aria-label":"Save",variant:"default",type:"submit",onClick:async()=>{await xn(a)},children:"Create"}),e[15]=a,e[16]=p):p=e[16],e[17]!==p||e[18]!==g?(b=h.jsxs(na,{children:[g,p]}),e[17]=p,e[18]=g,e[19]=b):b=e[19],e[20]!==b||e[21]!==l||e[22]!==_?(y=h.jsx(dr,{className:"w-fit",children:h.jsxs("form",{onSubmit:l,children:[d,_,b]})}),e[20]=b,e[21]=l,e[22]=_,e[23]=y):y=e[23],y},XS=t=>{const e=X.c(8),[n,o]=K.useState(!1);let r;e[0]!==t.text?(r=$n.stopPropagation(async c=>{c.preventDefault(),await xn(t.text),o(!0),setTimeout(()=>o(!1),2e3)}),e[0]=t.text,e[1]=r):r=e[1];const s=r;let i,a,l;return e[2]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(Rs,{size:14,strokeWidth:1.5}),e[2]=i):i=e[2],e[3]!==s?(a=h.jsx(Pe,{"data-testid":"copy-static-notebook-url-button",onClick:s,size:"xs",variant:"secondary",children:i}),e[3]=s,e[4]=a):a=e[4],e[5]!==n||e[6]!==a?(l=h.jsx(Le,{content:"Copied!",open:n,children:a}),e[5]=n,e[6]=a,e[7]=l):l=e[7],l};function ng(){const t=X.c(2),e=Zt(rm);let n;return t[0]!==e?(n=()=>{const o=document.getElementsByClassName("output-area"),r=window.innerHeight||document.documentElement.clientHeight;let s;s=null;for(const i of Array.from(o)){const a=i.getBoundingClientRect();if(a.top>=0&&a.top<=r||a.bottom>=0&&a.bottom<=r){s=Ps.parse(i.parentNode.id);break}}e(i=>({mode:iz(i.mode),cellAnchor:s})),requestAnimationFrame(()=>{var i;s!==null&&((i=document.getElementById(Ps.create(s)))==null||i.scrollIntoView())})},t[0]=e,t[1]=n):n=t[1],n}function ld(t){const e=X.c(3),n=cd();let o;return e[0]!==t||e[1]!==n?(o=()=>{t!==void 0&&n([t])},e[0]=t,e[1]=n,e[2]=o):o=e[2],tt(o)}function og(){const t=X.c(2),e=cd();let n;return t[0]!==e?(n=()=>e(D3(po())),t[0]=e,t[1]=n):n=t[1],tt(n)}function cd(){const t=X.c(2),{prepareForRun:e}=Ft();let n;return t[0]!==e?(n=async o=>{var a,l;if(o.length===0)return;const{cellHandles:r,cellData:s}=po(),i=[];for(const c of o){const d=r[c],u=(a=d==null?void 0:d.current)==null?void 0:a.editorView;let f;u?(R3(u)!=="markdown"&&sm(u),f=P3(u)):f=((l=s[c])==null?void 0:l.code)||"",i.push(f),e({cellId:c})}await lz({cellIds:o,codes:i}).catch(ZS)},t[0]=e,t[1]=n):n=t[1],tt(n)}function ZS(t){Qt.error(t)}const dd=[{type:"files",Icon:Sp,tooltip:"View files",position:"sidebar"},{type:"variables",Icon:uc,tooltip:"Explore variables",position:"sidebar"},{type:"datasources",Icon:ur,tooltip:"Explore data sources",position:"sidebar"},{type:"dependencies",Icon:Ta,tooltip:"Explore dependencies",position:"sidebar"},{type:"packages",Icon:ka,tooltip:"Manage packages",position:"sidebar"},{type:"outline",Icon:sd,tooltip:"View outline",position:"sidebar"},{type:"chat",Icon:hc,tooltip:"Chat with AI",position:"sidebar"},{type:"documentation",Icon:id,tooltip:"View live docs",position:"sidebar"},{type:"logs",Icon:im,tooltip:"Notebook logs",position:"sidebar"},{type:"tracing",Icon:zH,tooltip:"Tracing",position:"sidebar"},{type:"snippets",Icon:qp,tooltip:"Snippets",position:"sidebar"},{type:"secrets",Icon:Ip,tooltip:"Secrets",hidden:En(),position:"sidebar"},{type:"scratchpad",Icon:cz,tooltip:"Scratchpad",position:"sidebar"},{type:"errors",Icon:am,tooltip:"View errors",position:"footer"}];function QS(){const t=X.c(7);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0];const[n,o]=function(i,a){const l=X.c(11);let c;l[0]!==a?(c=new dz(a),l[0]=a,l[1]=c):c=l[1];const d=c;let u;l[2]!==i||l[3]!==d?(u=()=>d.get(i),l[2]=i,l[3]=d,l[4]=u):u=l[4];const[f,m]=A.useState(u);let _;l[5]!==i||l[6]!==d?(_=b=>{m(b),d.set(i,b)},l[5]=i,l[6]=d,l[7]=_):_=l[7];const g=_;let p;return l[8]!==g||l[9]!==f?(p=[f,g],l[8]=g,l[9]=f,l[10]=p):p=l[10],p}("marimo:commands",e);let r,s;return t[1]!==n||t[2]!==o?(r=i=>{const a=(l=[i,...n],[...new Set(l)]);var l;o(a.slice(0,3))},t[1]=n,t[2]=o,t[3]=r):r=t[3],t[4]!==n||t[5]!==r?(s={recentCommands:n,addRecentCommand:r},t[4]=n,t[5]=r,t[6]=s):s=t[6],s}function rg(t){return t.dropdown!==void 0}function Pa(t,e=""){return t.flatMap(n=>n.label?rg(n)?Pa(n.dropdown,`${e+n.label} > `):{...n,label:e+n.label}:[])}const ai=t=>{const e=X.c(8),{children:n,layerTop:o}=t,r=o!==void 0&&o;let s;e[0]!==n?(s=K.Children.toArray(n),e[0]=n,e[1]=s):s=e[1];const[i,a]=s,l=`second-icon absolute ${r?"top-[-2px] left-[-2px]":"bottom-[-2px] right-[-2px]"} rounded-full`;let c,d;return e[2]!==a||e[3]!==l?(c=h.jsx("div",{className:l,children:a}),e[2]=a,e[3]=l,e[4]=c):c=e[4],e[5]!==i||e[6]!==c?(d=h.jsxs("div",{className:"multi-icon relative w-fit",children:[i,c]}),e[5]=i,e[6]=c,e[7]=d):d=e[7],d},La=en(null),eC=en(!1),ud=z3("marimo:ai:chatState:v2",{chats:[],activeChatId:null}),tC=en(t=>{const e=t(ud);return e.chats.find(n=>n.id===e.activeChatId)},(t,e,n)=>{e(ud,o=>({...o,activeChatId:n}))}),hd=t=>{const e=X.c(7);let n,o;e[0]!==t?(n=a=>{var l;(a.ctrlKey||a.metaKey)&&a.key==="z"&&(a.preventDefault(),a.stopPropagation(),(l=t.onClick)==null||l.call(t,a))},e[0]=t,e[1]=n):n=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(o={capture:!0},e[2]=o):o=e[2],lm(window,"keydown",n,o);const r=t.children??"Undo";let s,i;return e[3]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsx(uz,{className:"ml-2",shortcut:"cmd-z"}),e[3]=s):s=e[3],e[4]!==r||e[5]!==t?(i=h.jsxs(Pe,{"data-testid":"undo-button",size:"sm",variant:"outline",...t,children:[r," ",s]}),e[4]=r,e[5]=t,e[6]=i):i=e[6],i};function fd(){const t=X.c(3),{deleteCell:e,undoDeleteCell:n}=Ft();let o;return t[0]!==e||t[1]!==n?(o=r=>{var l;if(ct.get(B3))return;const{cellId:s}=r,i=ct.get(fc),a=(((l=i.cellData[s])==null?void 0:l.code)??"").trim()==="";if(e({cellId:s}),hz({cellId:s}).catch(()=>{n()}),!a){const{dismiss:c}=lt({title:"Cell deleted",description:"You can bring it back by clicking undo or through the command palette.",action:h.jsx(hd,{"data-testid":"undo-delete-button",onClick:()=>{n(),d()}})}),d=c}},t[0]=e,t[1]=n,t[2]=o):o=t[2],tt(o)}function sg(){const t=X.c(3),{splitCell:e,undoSplitCell:n}=Ft();let o;return t[0]!==e||t[1]!==n?(o=r=>{const s=mc(r.cellId);if(!s)return;const i=P3(s);e(r);const{dismiss:a}=lt({title:"Cell split",action:h.jsx(hd,{"data-testid":"undo-split-button",size:"sm",variant:"outline",onClick:()=>{n({...r,snapshot:i}),l()},children:"Undo"})}),l=a},t[0]=e,t[1]=n,t[2]=o):o=t[2],tt(o)}function md(t){const e=X.c(49),{cell:n}=t,{createNewCell:o,updateCellConfig:r,updateCellName:s,moveCell:i,sendToTop:a,sendToBottom:l,addColumnBreakpoint:c,clearCellOutput:d}=Ft(),u=sg(),f=ld(n==null?void 0:n.cellId),m=!$e(B3),_=fd(),{openModal:g}=Wn(),p=Zt(La),b=$e(pc),y=$e(Ls),x=$e(Fs),v=$e(fz);if(!n||x){let N;return e[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],e[0]=N):N=e[0],N}const{cellId:S,config:k,getEditorView:E,name:j,hasOutput:I,hasConsoleOutput:T,status:M}=n;let L;e[1]!==S||e[2]!==k.disabled||e[3]!==r?(L=async()=>{const N={disabled:!k.disabled};await Lr({configs:{[S]:N}}),r({cellId:S,config:N})},e[1]=S,e[2]=k.disabled,e[3]=r,e[4]=L):L=e[4];const B=L;let O;e[5]!==S||e[6]!==k.hide_code||e[7]!==E||e[8]!==r?(O=async()=>{const N={hide_code:!k.hide_code};await Lr({configs:{[S]:N}}),r({cellId:S,config:N});const $=E();$&&(N.hide_code?$.contentDOM.blur():$.focus())},e[5]=S,e[6]=k.hide_code,e[7]=E,e[8]=r,e[9]=O):O=e[9];const z=O;let F,V,R,C,H;return e[10]===Symbol.for("react.memo_cache_sentinel")?(F=h.jsx(Zp,{size:13,strokeWidth:1.5}),e[10]=F):F=e[10],e[11]!==S||e[12]!==j||e[13]!==g||e[14]!==s?(V=()=>{g(h.jsxs(dr,{children:[h.jsx(Os,{children:h.jsx(lr,{children:"Rename cell"})}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Fr,{htmlFor:"cell-name",children:"Cell name"}),h.jsx(MS,{placeholder:"cell name",value:j,onKeyDown:N=>{N.key==="Enter"&&(N.preventDefault(),N.stopPropagation(),g(null))},onChange:N=>s({cellId:S,name:N})})]})]}))},e[11]=S,e[12]=j,e[13]=g,e[14]=s,e[15]=V):V=e[15],e[16]!==S||e[17]!==s?(R=N=>s({cellId:S,name:N}),e[16]=S,e[17]=s,e[18]=R):R=e[18],e[19]!==j||e[20]!==R?(C=h.jsx(MS,{placeholder:"cell name",value:j,onChange:R}),e[19]=j,e[20]=R,e[21]=C):C=e[21],e[22]!==c||e[23]!==b||e[24]!==v||e[25]!==y||e[26]!==m||e[27]!==S||e[28]!==d||e[29]!==k.disabled||e[30]!==k.hide_code||e[31]!==o||e[32]!==_||e[33]!==E||e[34]!==T||e[35]!==I||e[36]!==i||e[37]!==j||e[38]!==f||e[39]!==l||e[40]!==a||e[41]!==p||e[42]!==u||e[43]!==M||e[44]!==V||e[45]!==C||e[46]!==B||e[47]!==z?(H=[[{icon:F,label:"Name",disableClick:!0,handle:sC,handleHeadless:V,rightElement:C},{icon:h.jsx(ri,{size:13,strokeWidth:1.5}),label:"Run cell",hotkey:"cell.run",hidden:M==="running"||M==="queued"||M==="disabled-transitively"||k.disabled,handle:()=>f()},{icon:h.jsx(oa,{size:13,strokeWidth:1.5}),label:"AI completion",hidden:!b,handle:()=>{p(N=>(N==null?void 0:N.cellId)===S?null:{cellId:S})},hotkey:"cell.aiCompletion"},{icon:h.jsx(rd,{size:13,strokeWidth:1.5}),label:"Split cell",hotkey:"cell.splitCell",handle:()=>u({cellId:S})},{icon:h.jsx(sp,{size:13,strokeWidth:1.5}),label:"Export output as PNG",hidden:!I,handle:()=>function(N){const $=document.getElementById(L3.create(N));$&&($.classList.add("printing-output"),F3($,"result.png").finally(()=>{$.classList.remove("printing-output")}))}(S)},{icon:h.jsx(pz,{size:13,strokeWidth:1.5}),label:"Format cell",hotkey:"cell.format",handle:()=>{const N=E();N&&mz({[S]:N})}},{icon:k.hide_code?h.jsx(U3,{size:13,strokeWidth:1.5}):h.jsx(V3,{size:13,strokeWidth:1.5}),label:k.hide_code?"Show code":"Hide code",handle:z,hotkey:"cell.hideCode"},{icon:k.disabled?h.jsx(xr,{size:13,strokeWidth:1.5}):h.jsx(wr,{size:13,strokeWidth:1.5}),label:"Reactive execution",rightElement:h.jsx(gz,{"data-testid":"cell-disable-switch",checked:!k.disabled,size:"sm",onCheckedChange:B}),handle:B},{icon:h.jsx(am,{size:13,strokeWidth:1.5}),label:"Clear output",hidden:!(I||T),handle:()=>{d({cellId:S})}}],[{icon:h.jsx(gc,{}),label:"Convert to Markdown",hotkey:"cell.viewAsMarkdown",handle:()=>{const N=E();N&&(hr(y,o),Pr(N,"markdown",{keepCodeAsIs:!1}))}},{icon:h.jsx(ur,{size:13,strokeWidth:1.5}),label:"Convert to SQL",handle:()=>{const N=E();N&&(hr(y,o),Pr(N,"sql",{keepCodeAsIs:!1}))}},{icon:h.jsx(_c,{}),label:"Toggle as Python",handle:()=>{const N=E();N&&(hr(y,o),_z(N,"python",{force:!0}))}}],[{icon:h.jsxs(ai,{children:[h.jsx(Ea,{size:13,strokeWidth:1.5}),h.jsx(H3,{size:8,strokeWidth:2})]}),label:"Create cell above",hotkey:"cell.createAbove",handle:()=>o({cellId:S,before:!0})},{icon:h.jsxs(ai,{children:[h.jsx(Ea,{size:13,strokeWidth:1.5}),h.jsx(ra,{size:8,strokeWidth:2})]}),label:"Create cell below",hotkey:"cell.createBelow",handle:()=>o({cellId:S,before:!1})},{icon:h.jsx(H3,{size:13,strokeWidth:1.5}),label:"Move cell up",hotkey:"cell.moveUp",handle:()=>i({cellId:S,before:!0})},{icon:h.jsx(ra,{size:13,strokeWidth:1.5}),label:"Move cell down",hotkey:"cell.moveDown",handle:()=>i({cellId:S,before:!1})},{icon:h.jsx($3,{size:13,strokeWidth:1.5}),label:"Move cell left",hotkey:"cell.moveLeft",handle:()=>i({cellId:S,direction:"left"}),hidden:v!=="columns"},{icon:h.jsx(bc,{size:13,strokeWidth:1.5}),label:"Move cell right",hotkey:"cell.moveRight",handle:()=>i({cellId:S,direction:"right"}),hidden:v!=="columns"},{icon:h.jsx(fp,{size:13,strokeWidth:1.5}),label:"Send to top",hotkey:"cell.sendToTop",handle:()=>a({cellId:S})},{icon:h.jsx(hp,{size:13,strokeWidth:1.5}),label:"Send to bottom",hotkey:"cell.sendToBottom",handle:()=>l({cellId:S})},{icon:h.jsx(bz,{size:13,strokeWidth:1.5}),label:"Break into new column",hotkey:"cell.addColumnBreakpoint",hidden:v!=="columns",handle:()=>c({cellId:S})}],[{icon:h.jsx(NS,{size:13,strokeWidth:1.5}),label:"Copy link to cell",disabled:!TS(j),tooltip:TS(j)?void 0:"Only named cells can be linked to",handle:async()=>{await xn(r$(j)),lt({description:"Link copied to clipboard"})}}],[{label:"Delete",hidden:!m,variant:"danger",icon:h.jsx(cm,{size:13,strokeWidth:1.5}),handle:()=>{_({cellId:S})}}]].map(oC).filter(nC),e[22]=c,e[23]=b,e[24]=v,e[25]=y,e[26]=m,e[27]=S,e[28]=d,e[29]=k.disabled,e[30]=k.hide_code,e[31]=o,e[32]=_,e[33]=E,e[34]=T,e[35]=I,e[36]=i,e[37]=j,e[38]=f,e[39]=l,e[40]=a,e[41]=p,e[42]=u,e[43]=M,e[44]=V,e[45]=C,e[46]=B,e[47]=z,e[48]=H):H=e[48],H}function nC(t){return t.length>0}function oC(t){return t.filter(rC)}function rC(t){return!t.hidden}function sC(t){t==null||t.stopPropagation(),t==null||t.preventDefault()}function iC(t){return!t.hidden}const pd=en(!1),ig=()=>{const t=X.c(37),[e,n]=fn(pd),o=xz(),r=$e(wz),s=$e(dm);let i;t[0]!==r?(i={cell:r},t[0]=r,t[1]=i):i=t[1];let a=md(i).flat();a=Pa(a);const l=function(){const R=X.c(45),{theme:C}=Fo(),[H,N]=zs(),[$,Y]=W3();let Z;R[0]!==N?(Z=async ce=>{await Bs({config:ce}).then(()=>{N(ce)})},R[0]=N,R[1]=Z):Z=R[1];const q=Z;let re;R[2]!==Y?(re=async ce=>{await yz({config:ce}).then(()=>{Y(ce)})},R[2]=Y,R[3]=re):re=R[3];const ne=re;let oe;if(R[4]!==$||R[5]!==H||R[6]!==ne||R[7]!==q||R[8]!==C){let ce,me,de;R[10]!==$?(ce=qe=>qe!==$.width,R[10]=$,R[11]=ce):ce=R[11],R[12]!==$||R[13]!==ne?(me=qe=>({label:`App config > Set width=${qe}`,handle:()=>{ne({...$,width:qe})}}),R[12]=$,R[13]=ne,R[14]=me):me=R[14],R[15]!==H||R[16]!==q||R[17]!==C?(de={label:"Config > Toggle dark mode",handle:()=>{q({...H,display:{...H.display,theme:C==="dark"?"light":"dark"}})}},R[15]=H,R[16]=q,R[17]=C,R[18]=de):de=R[18];const ge=H.keymap.preset==="vim";let ie,we;R[19]!==H||R[20]!==q?(ie=()=>{q({...H,keymap:{...H.keymap,preset:"vim"}})},R[19]=H,R[20]=q,R[21]=ie):ie=R[21],R[22]!==ge||R[23]!==ie?(we={label:"Config > Switch keymap to  VIM",hidden:ge,handle:ie},R[22]=ge,R[23]=ie,R[24]=we):we=R[24];const ve=H.keymap.preset==="default";let ae,Se,pe;R[25]!==H||R[26]!==q?(ae=()=>{q({...H,keymap:{...H.keymap,preset:"default"}})},R[25]=H,R[26]=q,R[27]=ae):ae=R[27],R[28]!==ae||R[29]!==ve?(Se={label:"Config > Switch keymap to default (current: VIM)",hidden:ve,handle:ae},R[28]=ae,R[29]=ve,R[30]=Se):Se=R[30],R[31]!==H||R[32]!==q?(pe=()=>{q({...H,completion:{...H.completion,copilot:!1}})},R[31]=H,R[32]=q,R[33]=pe):pe=R[33];const Te=H.completion.copilot!=="github";let Re,We;R[34]!==pe||R[35]!==Te?(Re={label:"Config > Disable GitHub Copilot",handle:pe,hidden:Te},R[34]=pe,R[35]=Te,R[36]=Re):Re=R[36],R[37]!==H||R[38]!==q?(We=()=>{q({...H,completion:{...H.completion,copilot:"github"}})},R[37]=H,R[38]=q,R[39]=We):We=R[39];const ze=H.completion.copilot==="github";let Ce;R[40]!==We||R[41]!==ze?(Ce={label:"Config > Enable GitHub Copilot",handle:We,hidden:ze},R[40]=We,R[41]=ze,R[42]=Ce):Ce=R[42],oe=[...BH().filter(ce).map(me),de,we,Se,Re,Ce],R[4]=$,R[5]=H,R[6]=ne,R[7]=q,R[8]=C,R[9]=oe}else oe=R[9];const G=oe;let Q;return R[43]!==G?(Q=G.filter(iC),R[43]=G,R[44]=Q):Q=R[44],Q}();let c=Pg();c=[...Pa(c),...Pa(l)];const d=c.filter(aC),u=yc.keyBy(d,lC),{recentCommands:f,addRecentCommand:m}=QS();let _;t[2]!==f?(_=new Set(f),t[2]=f,t[3]=_):_=t[3];const g=_;let p,b;t[4]!==s||t[5]!==n?(p=R=>{Sz(s.getHotkey("global.commandPalette").key)(R)&&(R.preventDefault(),n(cC))},t[4]=s,t[5]=n,t[6]=p):p=t[6],lm(document,"keydown",p),t[7]!==m||t[8]!==s||t[9]!==o||t[10]!==n?(b=(R,C)=>{const H=o[R];if(!H)return null;const N=s.getHotkey(R);return h.jsxs(go,{disabled:C.disabled,onSelect:()=>{m(R),n(!1),requestAnimationFrame(()=>{H()})},value:N.name,children:[h.jsxs("span",{children:[N.name,C.tooltip&&h.jsx("span",{className:"ml-2",children:C.tooltip})]}),h.jsx(G3,{children:h.jsx(fm,{shortcut:N.key})})]},R)},t[7]=m,t[8]=s,t[9]=o,t[10]=n,t[11]=b):b=t[11];const y=b;let x;t[12]!==m||t[13]!==s||t[14]!==n?(x=(R,C,H,N)=>{const $=H===void 0?{}:H;return h.jsxs(go,{disabled:$.disabled,onSelect:()=>{m(R),n(!1),requestAnimationFrame(()=>{C()})},value:R,children:[h.jsxs("span",{children:[R,$.tooltip&&h.jsxs("span",{className:"ml-2",children:["(",$.tooltip,")"]})]}),N&&h.jsx(G3,{children:h.jsx(fm,{shortcut:s.getHotkey(N).key})})]},R)},t[12]=m,t[13]=s,t[14]=n,t[15]=x):x=t[15];const v=x,S=kz;let k;t[16]===Symbol.for("react.memo_cache_sentinel")?(k=h.jsx(sa,{placeholder:"Type to search..."}),t[16]=k):k=t[16];const E=hm;let j;t[17]===Symbol.for("react.memo_cache_sentinel")?(j=h.jsx(xc,{children:"No results found."}),t[17]=j):j=t[17];const I=f.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(um,{heading:"Recently Used",children:f.map(R=>{const C=u[R];return vz(R)?y(R,{disabled:C==null?void 0:C.disabled,tooltip:C==null?void 0:C.tooltip}):C&&!rg(C)?v(C.label,C.handleHeadless||C.handle,{disabled:C.disabled,tooltip:C.tooltip}):null})}),h.jsx(q3,{})]}),T=um,M=s.iterate().map(R=>{if(g.has(R))return null;const C=u[R];return y(R,{disabled:C==null?void 0:C.disabled,tooltip:C==null?void 0:C.tooltip})}),L=d.map(R=>g.has(R.label)?null:v(R.label,R.handleHeadless||R.handle,{disabled:R.disabled,tooltip:R.tooltip}));let B;t[18]!==g||t[19]!==v?(B=R=>g.has(R.label)?null:v(`Cell > ${R.label}`,R.handleHeadless||R.handle,{disabled:R.disabled,tooltip:R.tooltip}),t[18]=g,t[19]=v,t[20]=B):B=t[20];const O=a.map(B);let z,F,V;return t[21]!==T||t[22]!==L||t[23]!==O||t[24]!==M?(z=h.jsxs(T,{heading:"Commands",children:[M,L,O]}),t[21]=T,t[22]=L,t[23]=O,t[24]=M,t[25]=z):z=t[25],t[26]!==E||t[27]!==z||t[28]!==j||t[29]!==I?(F=h.jsxs(E,{children:[j,I,z]}),t[26]=E,t[27]=z,t[28]=j,t[29]=I,t[30]=F):F=t[30],t[31]!==S||t[32]!==e||t[33]!==n||t[34]!==F||t[35]!==k?(V=h.jsxs(S,{open:e,onOpenChange:n,children:[k,F]}),t[31]=S,t[32]=e,t[33]=n,t[34]=F,t[35]=k,t[36]=V):V=t[36],V};function aC(t){return!t.hotkey}function lC(t){return t.label}function cC(t){return!t}function vr(){return Ae.string().optional().describe(Ke.of({label:"Password",inputType:"password",placeholder:"password",optionRegex:".*password.*"}))}function ag(){return Ae.string().optional().describe(Ke.of({label:"Token",inputType:"password",placeholder:"token",optionRegex:".*token.*"}))}function Fa(){return Ae.string().optional().describe(Ke.of({label:"Warehouse Name",placeholder:"warehouse",optionRegex:".*warehouse.*"}))}function lg(){return Ae.string().optional().describe(Ke.of({label:"URI",optionRegex:".*uri.*"}))}function kr(){return Ae.string().nonempty().describe(Ke.of({label:"Host",placeholder:"localhost",optionRegex:".*host.*"}))}function _o(){return Ae.string().describe(Ke.of({label:"Database",placeholder:"db name",optionRegex:".*database.*"}))}function Sr(){return Ae.string().nonempty().describe(Ke.of({label:"Username",placeholder:"username",optionRegex:".*username.*"}))}function Cr(t){const e=Ae.coerce.string().describe(Ke.of({label:"Port",inputType:"number",placeholder:t==null?void 0:t.toString()})).transform(Number).refine(n=>n>=0&&n<=65535,{message:"Port must be between 0 and 65535"});return t!==void 0?e.default(t.toString()):e}function cg(){return Ae.boolean().default(!1).describe(Ke.of({label:"Read Only"}))}const dg=Ae.object({type:Ae.literal("postgres"),host:kr(),port:Cr(5432).optional(),database:_o(),username:Sr(),password:vr(),ssl:Ae.boolean().default(!1).describe(Ke.of({label:"Use SSL"}))}).describe(Ke.of({direction:"two-columns"})),ug=Ae.object({type:Ae.literal("mysql"),host:kr(),port:Cr(3306),database:_o(),username:Sr(),password:vr(),ssl:Ae.boolean().default(!1).describe(Ke.of({label:"Use SSL"}))}).describe(Ke.of({direction:"two-columns"})),hg=Ae.object({type:Ae.literal("sqlite"),database:_o().describe(Ke.of({label:"Database Path"}))}).describe(Ke.of({direction:"two-columns"})),fg=Ae.object({type:Ae.literal("duckdb"),database:_o().describe(Ke.of({label:"Database Path"})),read_only:cg()}).describe(Ke.of({direction:"two-columns"})),mg=Ae.object({type:Ae.literal("motherduck"),database:_o().default("my_db").describe(Ke.of({label:"Database Name"})),token:ag()}).describe(Ke.of({direction:"two-columns"})),pg=Ae.object({type:Ae.literal("snowflake"),account:Ae.string().nonempty().describe(Ke.of({label:"Account",optionRegex:".*snowflake.*"})),warehouse:Ae.string().optional().describe(Ke.of({label:"Warehouse",optionRegex:".*snowflake.*"})),database:_o(),schema:Ae.string().optional().describe(Ke.of({label:"Schema",optionRegex:".*snowflake.*"})),username:Sr(),password:vr(),role:Ae.string().optional().describe(Ke.of({label:"Role"}))}).describe(Ke.of({direction:"two-columns"})),gg=Ae.object({type:Ae.literal("bigquery"),project:Ae.string().nonempty().describe(Ke.of({label:"Project ID",optionRegex:".*bigquery.*"})),dataset:Ae.string().nonempty().describe(Ke.of({label:"Dataset",optionRegex:".*bigquery.*"})),credentials_json:Ae.string().describe(Ke.of({label:"Credentials JSON",inputType:"textarea"}))}).describe(Ke.of({direction:"two-columns"})),_g=Ae.object({type:Ae.literal("clickhouse_connect"),host:kr(),port:Cr(8123).optional(),username:Sr(),password:vr(),secure:Ae.boolean().default(!1).describe(Ke.of({label:"Use HTTPs"}))}).describe(Ke.of({direction:"two-columns"})),bg=Ae.object({type:Ae.literal("timeplus"),host:kr().default("localhost"),port:Cr(8123).optional(),username:Sr().default("default"),password:vr().default("")}).describe(Ke.of({direction:"two-columns"})),yg=Ae.object({type:Ae.literal("chdb"),database:_o().describe(Ke.of({label:"Database Path"})),read_only:cg()}).describe(Ke.of({direction:"two-columns"})),xg=Ae.object({type:Ae.literal("trino"),host:kr(),port:Cr(8080),database:_o(),schema:Ae.string().describe(Ke.of({label:"Schema",placeholder:"schema name",optionRegex:".*schema.*"})).optional(),username:Sr(),password:vr(),async_support:Ae.boolean().default(!1).describe(Ke.of({label:"Async Support"}))}).describe(Ke.of({direction:"two-columns"})),wg=Ae.object({type:Ae.literal("iceberg"),name:Ae.string().describe(Ke.of({label:"Catalog Name"})),catalog:Ae.discriminatedUnion("type",[Ae.object({type:Ae.literal("REST"),warehouse:Fa(),uri:Ae.string().optional().describe(Ke.of({label:"URI",placeholder:"https://",optionRegex:".*uri.*"})),token:ag()}),Ae.object({type:Ae.literal("SQL"),warehouse:Fa(),uri:Ae.string().optional().describe(Ke.of({label:"URI",placeholder:"jdbc:iceberg://host:port/database",optionRegex:".*uri.*"}))}),Ae.object({type:Ae.literal("Hive"),warehouse:Fa(),uri:lg()}),Ae.object({type:Ae.literal("Glue"),warehouse:Fa(),uri:lg()}),Ae.object({type:Ae.literal("DynamoDB"),"dynamodb.profile-name":Ae.string().optional().describe(Ke.of({label:"Profile Name"})),"dynamodb.region":Ae.string().optional().describe(Ke.of({label:"Region"})),"dynamodb.access-key-id":Ae.string().optional().describe(Ke.of({label:"Access Key ID"})),"dynamodb.secret-access-key":Ae.string().optional().describe(Ke.of({label:"Secret Access Key",inputType:"password"})),"dynamodb.session-token":Ae.string().optional().describe(Ke.of({label:"Session Token",inputType:"password"}))})]).default({type:"REST"}).describe(Ke.of({special:"tabs"}))}),vg=Ae.object({type:Ae.literal("datafusion"),sessionContext:Ae.boolean().optional().describe(Ke.of({label:"Use Session Context"}))}),kg=Ae.object({type:Ae.literal("pyspark"),host:kr().optional(),port:Cr().optional()}),Sg=Ae.object({type:Ae.literal("redshift"),host:kr(),port:Cr(5439),connectionType:Ae.discriminatedUnion("type",[Ae.object({type:Ae.literal("IAM credentials"),region:Ae.string().describe(Ke.of({label:"Region"})),aws_access_key_id:Ae.string().nonempty().describe(Ke.of({label:"AWS Access Key ID",inputType:"password",optionRegex:".*aws_access_key_id.*"})),aws_secret_access_key:Ae.string().nonempty().describe(Ke.of({label:"AWS Secret Access Key",inputType:"password",optionRegex:".*aws_secret_access_key.*"})),aws_session_token:Ae.string().optional().describe(Ke.of({label:"AWS Session Token",inputType:"password",optionRegex:".*aws_session_token.*"}))}),Ae.object({type:Ae.literal("DB credentials"),user:Sr(),password:vr()})]).default({type:"IAM credentials",aws_access_key_id:"",aws_secret_access_key:"",region:""}),database:_o()}).describe(Ke.of({direction:"two-columns"})),dC=Ae.discriminatedUnion("type",[dg,ug,hg,fg,mg,pg,gg,_g,bg,yg,xg,wg,vg,kg,Sg]),gd="env:";function za(t){return typeof t=="string"&&t.startsWith(gd)}function _d(t){return`${gd}${t}`}const Cg={sqlmodel:"SQLModel",sqlalchemy:"SQLAlchemy",duckdb:"DuckDB",clickhouse_connect:"ClickHouse Connect",chdb:"chDB",pyiceberg:"PyIceberg",ibis:"Ibis",motherduck:"MotherDuck",redshift:"Redshift"};class an{constructor(e,n,o){this.connection=void 0,this.orm=void 0,this.secrets=void 0,this.connection=e,this.orm=n,this.secrets=o}get imports(){const e=new Set(this.generateImports());switch(this.orm){case"sqlalchemy":e.add("import sqlalchemy");break;case"sqlmodel":e.add("import sqlmodel");break;case"duckdb":e.add("import duckdb")}return e}}class uC{constructor(){this.secrets={}}get imports(){return Object.keys(this.secrets).length===0?new Set:new Set(["import os"])}print(e,n,o){if(e=(r=>`_${r}`)(e),za(n)){const r=n.replace(gd,""),s=o?`os.environ.get("${r}", "${o}")`:`os.environ.get("${r}")`;return this.secrets[e]=s,e}if(o!=null){const r=`os.environ.get("${n}", "${o}")`;return this.secrets[e]=r,e}return typeof n=="number"||typeof n=="number"?`${n}`:typeof n=="boolean"?Vr(n):n?`"${n}"`:""}printInFString(e,n,o){if(n===void 0)return"";if(typeof n=="number")return`${n}`;if(typeof n=="boolean")return Vr(n);const r=this.print(e,n,o);return r.startsWith('"')&&r.endsWith('"')?r.slice(1,-1):`{${r}}`}printPassword(e,n,o){const r=o?this.printInFString.bind(this):this.print.bind(this);return za(e)?r("password",e):r("password",n,e)}getSecrets(){return this.secrets}formatSecrets(){return Object.keys(this.secrets).length===0?"":Object.entries(this.secrets).map(([e,n])=>`${e} = ${n}`).join(`
`)}}class hC extends an{generateImports(){return[]}generateConnectionCode(){const e=this.connection.ssl?", connect_args={'sslmode': 'require'}":"",n=this.secrets.printPassword(this.connection.password,"POSTGRES_PASSWORD",!0),o=this.secrets.printInFString("username",this.connection.username),r=this.secrets.printInFString("host",this.connection.host),s=this.secrets.printInFString("port",this.connection.port),i=this.secrets.printInFString("database",this.connection.database);return Ct(`
      DATABASE_URL = f"postgresql://${o}:${n}@${r}:${s}/${i}"
      engine = ${this.orm}.create_engine(DATABASE_URL${e})
    `)}}class fC extends an{generateImports(){return[]}generateConnectionCode(){const e=this.connection.ssl?", connect_args={'ssl': {'ssl-mode': 'preferred'}}":"",n=this.secrets.printPassword(this.connection.password,"MYSQL_PASSWORD",!0),o=this.secrets.printInFString("database",this.connection.database),r=this.secrets.printInFString("username",this.connection.username),s=this.secrets.printInFString("host",this.connection.host),i=this.secrets.printInFString("port",this.connection.port);return Ct(`
      DATABASE_URL = f"mysql+pymysql://${r}:${n}@${s}:${i}/${o}"
      engine = ${this.orm}.create_engine(DATABASE_URL${e})
    `)}}class mC extends an{generateImports(){return[]}generateConnectionCode(){const e=this.connection.database?this.secrets.printInFString("database",this.connection.database):"",n=e.startsWith("{")&&e.endsWith("}")?`DATABASE_URL = f"sqlite:///${e}"`:`DATABASE_URL = "sqlite:///${e}"`;return Ct(`
      ${n}
      engine = ${this.orm}.create_engine(DATABASE_URL)
    `)}}class pC extends an{generateImports(){return["from snowflake.sqlalchemy import URL"]}generateConnectionCode(){const e=this.secrets.printPassword(this.connection.password,"SNOWFLAKE_PASSWORD",!1),n={account:this.secrets.print("account",this.connection.account),user:this.secrets.print("user",this.connection.username),database:this.secrets.print("database",this.connection.database),warehouse:this.connection.warehouse?this.secrets.print("warehouse",this.connection.warehouse):void 0,schema:this.connection.schema?this.secrets.print("schema",this.connection.schema):void 0,role:this.connection.role?this.secrets.print("role",this.connection.role):void 0,password:e};return Ct(`
      engine = ${this.orm}.create_engine(
        URL(
${Ba(n,o=>`          ${o}`)},
        )
      )
    `)}}class gC extends an{generateImports(){return["import json"]}generateConnectionCode(){const e=this.secrets.printInFString("project",this.connection.project),n=this.secrets.printInFString("dataset",this.connection.dataset);return Ct(`
      credentials = json.loads("""${this.connection.credentials_json}""")
      engine = ${this.orm}.create_engine(f"bigquery://${e}/${n}", credentials_info=credentials)
    `)}}class _C extends an{generateImports(){return[]}generateConnectionCode(){const e=this.secrets.printInFString("database",this.connection.database||":memory:");return Ct(`
      DATABASE_URL = "${e}"
      engine = ${this.orm}.connect(DATABASE_URL, read_only=${Vr(this.connection.read_only)})
    `)}}class bC extends an{generateImports(){return[]}generateConnectionCode(){const e=this.secrets.printInFString("database",this.connection.database);if(!this.connection.token)return Ct(`
        conn = duckdb.connect("md:${e}")
        `);const n=this.secrets.printPassword(this.connection.token,"MOTHERDUCK_TOKEN",!1);return Ct(`
      conn = duckdb.connect("md:${e}", config={"motherduck_token": ${n}})
    `)}}class yC extends an{generateImports(){return["import clickhouse_connect"]}generateConnectionCode(){const e=this.secrets.printPassword(this.connection.password,"CLICKHOUSE_PASSWORD",!1),n={host:this.secrets.print("host",this.connection.host),user:this.secrets.print("user",this.connection.username),secure:this.secrets.print("secure",this.connection.secure),port:this.connection.port?this.secrets.print("port",this.connection.port):void 0,password:this.connection.password?e:void 0};return Ct(`
      engine = ${this.orm}.get_client(
${Ba(n,o=>`        ${o}`)},
      )
    `)}}class xC extends an{generateImports(){return[]}generateConnectionCode(){const e=this.secrets.printPassword(this.connection.password,"TIMEPLUS_PASSWORD",!0),n=this.secrets.printInFString("username",this.connection.username),o=this.secrets.printInFString("host",this.connection.host),r=this.secrets.printInFString("port",this.connection.port);return Ct(`
      DATABASE_URL = f"timeplus://${n}:${e}@${o}:${r}"
      engine = ${this.orm}.create_engine(DATABASE_URL)
    `)}}class wC extends an{generateImports(){return["import chdb"]}generateConnectionCode(){const e=this.secrets.print("database",this.connection.database)||'""';return Ct(`
      engine = ${this.orm}.connect(${e}, read_only=${Vr(this.connection.read_only)})
    `)}}class vC extends an{generateImports(){return this.connection.async_support?["import aiotrino"]:["import trino.sqlalchemy"]}generateConnectionCode(){const e=this.connection.async_support?"aiotrino":"trino",n=this.connection.schema?`/${this.connection.schema}`:"",o=this.secrets.printInFString("username",this.connection.username),r=this.secrets.printInFString("host",this.connection.host),s=this.secrets.printInFString("port",this.connection.port),i=this.secrets.printInFString("database",this.connection.database),a=this.secrets.printPassword(this.connection.password,"TRINO_PASSWORD",!0);return Ct(`
      engine = ${this.orm}.create_engine(f"${e}://${o}:${a}@${r}:${s}/${i}${n}")
    `)}}class kC extends an{generateImports(){switch(this.connection.catalog.type){case"REST":return["from pyiceberg.catalog.rest import RestCatalog"];case"SQL":return["from pyiceberg.catalog.sql import SqlCatalog"];case"Hive":return["from pyiceberg.catalog.hive import HiveCatalog"];case"Glue":return["from pyiceberg.catalog.glue import GlueCatalog"];case"DynamoDB":return["from pyiceberg.catalog.dynamodb import DynamoDBCatalog"];default:mm(this.connection.catalog)}}generateConnectionCode(){let e={...this.connection.catalog};e=Object.fromEntries(Object.entries(e).filter(([i,a])=>a!=null&&a!==""&&i!=="type"));for(const[i,a]of Object.entries(e))za(a)?e[i]=this.secrets.print(i,a):typeof a=="string"&&(e[i]=`"${a}"`);const n=(o=e,r=i=>`              ${i}`,Object.entries(o).filter(([,i])=>i!=null&&i!=="").map(([i,a])=>{const l=`"${i}"`;return r(typeof a=="boolean"?`${l}: ${Vr(a)}`:`${l}: ${a}`)}).join(`,
`));var o,r;const s=`"${this.connection.name}"`;switch(this.connection.catalog.type){case"REST":return Ct(`
          catalog = RestCatalog(
            ${s},
            **{
${n}
            },
          )
        `);case"SQL":return Ct(`
          catalog = SqlCatalog(
            ${s},
            **{
${n}
            },
          )
        `);case"Hive":return Ct(`
          catalog = HiveCatalog(
            ${s},
            **{
${n}
            },
          )
        `);case"Glue":return Ct(`
          catalog = GlueCatalog(
            ${s},
            **{
${n}
            },
          )
        `);case"DynamoDB":return Ct(`
          catalog = DynamoDBCatalog(
            ${s},
            **{
${n}
            },
          )
        `);default:mm(this.connection.catalog)}}}class SC extends an{generateImports(){return["import ibis","from datafusion import SessionContext"]}generateConnectionCode(){return this.connection.sessionContext?Ct(`
        ctx = SessionContext()
        # Sample table
        _ = ctx.from_pydict({"a": [1, 2, 3]}, "my_table")

        con = ibis.datafusion.connect(ctx)
      `):Ct(`
      con = ibis.datafusion.connect()
    `)}}class CC extends an{generateImports(){return["import ibis","from pyspark.sql import SparkSession"]}generateConnectionCode(){if(this.connection.host||this.connection.port){const e=this.secrets.printInFString("host",this.connection.host),n=this.secrets.printInFString("port",this.connection.port);return Ct(`
        session = SparkSession.builder.remote(f"sc://${e}:${n}").getOrCreate()
        con = ibis.pyspark.connect(session)
      `)}return Ct(`
      con = ibis.pyspark.connect()
    `)}}class NC extends an{generateImports(){return["import redshift_connector"]}generateConnectionCode(){const e=this.secrets.print("host",this.connection.host),n=this.secrets.print("port",this.connection.port),o=this.secrets.print("database",this.connection.database);if(this.connection.connectionType.type==="IAM credentials"){const a=this.secrets.print("aws_access_key_id",this.connection.connectionType.aws_access_key_id),l=this.secrets.print("aws_secret_access_key",this.connection.connectionType.aws_secret_access_key),c=this.connection.connectionType.aws_session_token?this.secrets.print("aws_session_token",this.connection.connectionType.aws_session_token):void 0,d={iam:!0,host:e,port:n,region:`"${this.connection.connectionType.region}"`,database:o,access_key_id:a,secret_access_key:l,...c&&{session_token:c}};return Ct(`
        con = redshift_connector.connect(
${Ba(d,u=>`          ${u}`)},
        )
      `)}const r=this.connection.connectionType.user?this.secrets.print("user",this.connection.connectionType.user):void 0,s=this.connection.connectionType.password?this.secrets.printPassword(this.connection.connectionType.password,"REDSHIFT_PASSWORD",!1):void 0,i={host:e,port:n,database:o,...r&&{user:r},...s&&{password:s}};return Ct(`
      con = redshift_connector.connect(
${Ba(i,a=>`          ${a}`)},
      )
    `)}}class jC{constructor(){this.secrets=new uC}createGenerator(e,n){switch(e.type){case"postgres":return new hC(e,n,this.secrets);case"mysql":return new fC(e,n,this.secrets);case"sqlite":return new mC(e,n,this.secrets);case"snowflake":return new pC(e,n,this.secrets);case"bigquery":return new gC(e,n,this.secrets);case"duckdb":return new _C(e,n,this.secrets);case"motherduck":return new bC(e,n,this.secrets);case"clickhouse_connect":return new yC(e,n,this.secrets);case"timeplus":return new xC(e,n,this.secrets);case"chdb":return new wC(e,n,this.secrets);case"trino":return new vC(e,n,this.secrets);case"iceberg":return new kC(e,n,this.secrets);case"datafusion":return new SC(e,n,this.secrets);case"pyspark":return new CC(e,n,this.secrets);case"redshift":return new NC(e,n,this.secrets);default:mm(e)}}}function Vr(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function Ba(t,e){return Object.entries(t).filter(([,n])=>n!=null&&n!=="").map(([n,o])=>e(typeof o=="boolean"?`${n}=${Vr(o)}`:`${n}=${o}`)).join(`,
`)}function Ng(t){return t.sort((e,n)=>e.provider==="env"?1:n.provider==="env"?-1:0)}const jg=t=>{const e=X.c(42),{providerNames:n,onClose:o,onSuccess:r}=t,[s,i]=K.useState(""),[a,l]=K.useState(""),[c,d]=K.useState(n[0]);let u;e[0]!==s||e[1]!==c||e[2]!==r||e[3]!==a?(u=async V=>{if(V.preventDefault(),c)if(s&&a&&c)try{await Cz({key:s,value:a,provider:"dotenv",name:c}),lt({title:"Secret created",description:"The secret has been created successfully."}),r(s)}catch{lt({title:"Error",description:"Failed to create secret. Please try again.",variant:"danger"})}else lt({title:"Error",description:"Please fill in all fields.",variant:"danger"});else lt({title:"Error",description:"No location selected for the secret.",variant:"danger"})},e[0]=s,e[1]=c,e[2]=r,e[3]=a,e[4]=u):u=e[4];const f=u;let m,_,g,p,b,y,x,v,S,k,E,j,I,T,M,L;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsxs(Os,{children:[h.jsx(lr,{children:"Add Secret"}),h.jsx(Ds,{children:"Add a new secret to your environment variables."})]}),e[5]=m):m=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx(Fr,{htmlFor:"key",children:"Key"}),e[6]=_):_=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(g=V=>{i(V.target.value.replaceAll(/\W/g,"_"))},e[7]=g):g=e[7],e[8]!==s?(p=h.jsxs("div",{className:"grid gap-2",children:[_,h.jsx(cr,{id:"key",value:s,onChange:g,placeholder:"MY_SECRET_KEY",required:!0})]}),e[8]=s,e[9]=p):p=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(Fr,{htmlFor:"value",children:"Value"}),e[10]=b):b=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(y=V=>l(V.target.value),e[11]=y):y=e[11],e[12]!==a?(x=h.jsx(cr,{id:"value",type:"text",value:a,onChange:y,required:!0,autoComplete:"off"}),e[12]=a,e[13]=x):x=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(v=window.location.href.startsWith("http://")&&h.jsx(Y3,{children:"Note: You are sending this key over http."}),e[14]=v):v=e[14],e[15]!==x?(S=h.jsxs("div",{className:"grid gap-2",children:[b,x,v]}),e[15]=x,e[16]=S):S=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(k=h.jsx(Fr,{htmlFor:"location",children:"Location"}),e[17]=k):k=e[17],e[18]!==n.length?(E=n.length===0&&h.jsx("p",{className:"text-sm text-muted-foreground",children:"No dotenv locations configured."}),e[18]=n.length,e[19]=E):E=e[19],e[20]!==c||e[21]!==n?(j=n.length>0&&h.jsxs(pm,{value:c,onValueChange:V=>d(V),children:[h.jsx(gm,{children:h.jsx(_m,{placeholder:"Select a provider"})}),h.jsx(bm,{children:n.map(EC)})]}),e[20]=c,e[21]=n,e[22]=j):j=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(I=h.jsxs(Y3,{children:["You can configure the location by setting the"," ",h.jsx(xm,{href:"https://links.marimo.app/dotenv",children:"dotenv configuration"}),"."]}),e[23]=I):I=e[23],e[24]!==E||e[25]!==j?(T=h.jsxs("div",{className:"grid gap-2",children:[k,E,j,I]}),e[24]=E,e[25]=j,e[26]=T):T=e[26],e[27]!==S||e[28]!==T||e[29]!==p?(M=h.jsxs("div",{className:"grid gap-4 py-4",children:[p,S,T]}),e[27]=S,e[28]=T,e[29]=p,e[30]=M):M=e[30],e[31]!==o?(L=h.jsx(Pe,{type:"button",variant:"outline",onClick:o,children:"Cancel"}),e[31]=o,e[32]=L):L=e[32];const B=!s||!a||!c;let O,z,F;return e[33]!==B?(O=h.jsx(Pe,{type:"submit",disabled:B,children:"Add Secret"}),e[33]=B,e[34]=O):O=e[34],e[35]!==L||e[36]!==O?(z=h.jsxs(na,{children:[L,O]}),e[35]=L,e[36]=O,e[37]=z):z=e[37],e[38]!==f||e[39]!==M||e[40]!==z?(F=h.jsx(dr,{children:h.jsxs("form",{onSubmit:f,children:[m,M,z]})}),e[38]=f,e[39]=M,e[40]=z,e[41]=F):F=e[41],F};function EC(t){return h.jsx(ym,{value:t,children:t},t)}const Eg=A.createContext({providerNames:[],secretKeys:[],loading:!1,error:void 0,refreshSecrets:In.NOOP}),IC=t=>{const e=X.c(14),{children:n}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const{data:r,isPending:s,error:i,refetch:a}=qn(OC,o);let l,c,d,u;return e[1]!==(r==null?void 0:r.secretKeys)?(l=(r==null?void 0:r.secretKeys)||[],e[1]=r==null?void 0:r.secretKeys,e[2]=l):l=e[2],e[3]!==(r==null?void 0:r.providerNames)?(c=(r==null?void 0:r.providerNames)||[],e[3]=r==null?void 0:r.providerNames,e[4]=c):c=e[4],e[5]!==i||e[6]!==s||e[7]!==a||e[8]!==l||e[9]!==c?(d={secretKeys:l,providerNames:c,loading:s,error:i,refreshSecrets:a},e[5]=i,e[6]=s,e[7]=a,e[8]=l,e[9]=c,e[10]=d):d=e[10],e[11]!==n||e[12]!==d?(u=h.jsx(Eg,{value:d,children:n}),e[11]=n,e[12]=d,e[13]=u):u=e[13],u};function AC(t){return t.provider!=="env"}function TC(t){return t.name}function MC(t){return t.keys}async function OC(){const t=await OS.request({}),e=Ng(t.secrets).filter(AC).map(TC);return{secretKeys:t.secrets.flatMap(MC).sort(),providerNames:e}}const Ig=[{name:"PostgreSQL",schema:dg,color:"#336791",logo:"postgres",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"MySQL",schema:ug,color:"#00758F",logo:"mysql",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"SQLite",schema:hg,color:"#003B57",logo:"sqlite",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"DuckDB",schema:fg,color:"#FFD700",logo:"duckdb",connectionLibraries:{libraries:["duckdb"],preferred:"duckdb"}},{name:"MotherDuck",schema:mg,color:"#ff9538",logo:"motherduck",connectionLibraries:{libraries:["duckdb"],preferred:"duckdb"}},{name:"Snowflake",schema:pg,color:"#29B5E8",logo:"snowflake",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"ClickHouse",schema:_g,color:"#2C2C1D",logo:"clickhouse",connectionLibraries:{libraries:["clickhouse_connect"],preferred:"clickhouse_connect"}},{name:"Timeplus",schema:bg,color:"#B83280",logo:"timeplus",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"BigQuery",schema:gg,color:"#4285F4",logo:"bigquery",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"ClickHouse Embedded",schema:yg,color:"#f2b611",logo:"clickhouse",connectionLibraries:{libraries:["chdb"],preferred:"chdb"}},{name:"Trino",schema:xg,color:"#d466b6",logo:"trino",connectionLibraries:{libraries:["sqlalchemy","sqlmodel"],preferred:"sqlalchemy"}},{name:"DataFusion",schema:vg,color:"#202A37",logo:"datafusion",connectionLibraries:{libraries:["ibis"],preferred:"ibis"}},{name:"PySpark",schema:kg,color:"#1C5162",logo:"pyspark",connectionLibraries:{libraries:["ibis"],preferred:"ibis"}},{name:"Redshift",schema:Sg,color:"#522BAE",logo:"redshift",connectionLibraries:{libraries:["redshift"],preferred:"redshift"}}],Ag=[{name:"Iceberg",schema:wg,color:"#000000",logo:"iceberg",connectionLibraries:{libraries:["pyiceberg"],preferred:"pyiceberg"}}],DC=t=>{const e=X.c(14),{onSelect:n}=t;let o;e[0]!==n?(o=u=>{const{name:f,schema:m,color:_,logo:g}=u;return h.jsxs("button",{type:"button",className:"py-3 flex flex-col items-center justify-center gap-1 transition-all hover:scale-105 hover:brightness-110 rounded shadow-smSolid hover:shadow-mdSolid",style:{backgroundColor:_},onClick:()=>n(m),children:[h.jsx(n4,{name:g,className:"w-8 h-8 text-white brightness-0 invert dark:invert"}),h.jsx("span",{className:"text-white font-medium text-lg",children:f})]},f)},e[0]=n,e[1]=o):o=e[1];const r=o;let s,i,a,l,c,d;return e[2]!==r?(s=Ig.map(r),e[2]=r,e[3]=s):s=e[3],e[4]!==s?(i=h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:s}),e[4]=s,e[5]=i):i=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsxs("h4",{className:"font-semibold text-muted-foreground text-lg flex items-center gap-4",children:["Data Catalogs",h.jsx("hr",{className:"flex-1"})]}),e[6]=a):a=e[6],e[7]!==r?(l=Ag.map(r),e[7]=r,e[8]=l):l=e[8],e[9]!==l?(c=h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:l}),e[9]=l,e[10]=c):c=e[10],e[11]!==i||e[12]!==c?(d=h.jsxs(h.Fragment,{children:[i,a,c]}),e[11]=i,e[12]=c,e[13]=d):d=e[13],d},RC=[{isMatch:t=>{if(t instanceof Ae.ZodString||t instanceof Ae.ZodNumber){const{optionRegex:e}=Ke.parse(t._def.description||"");return!!e}return!1},Component:({schema:t,form:e,path:n})=>{const{secretKeys:o,providerNames:r,refreshSecrets:s}=A.use(Eg),{openModal:i,closeModal:a}=Wn(),{label:l,description:c,optionRegex:d=""}=Ke.parse(t._def.description||""),[u,f]=Bt(o,m=>new RegExp(d,"i").test(m));return h.jsx(J3,{control:e.control,name:n,render:({field:m})=>h.jsxs(K3,{children:[h.jsx(Nz,{children:l}),h.jsx(jz,{children:c}),h.jsx(X3,{children:h.jsxs("div",{className:"flex gap-2",children:[t instanceof Ae.ZodString?h.jsx(cr,{...m,value:m.value,onChange:m.onChange,className:Oe("flex-1")}):h.jsx(Ez,{...m,value:m.value,onChange:m.onChange,className:"flex-1"}),h.jsxs(Us,{children:[h.jsx(Vs,{asChild:!0,children:h.jsx(Pe,{variant:"outline",size:"icon",className:Oe(za(m.value)&&"bg-accent"),children:h.jsx(ed,{className:"h-3 w-3"})})}),h.jsxs(Hs,{align:"end",className:"max-h-60 overflow-y-auto",children:[h.jsxs(sn,{onSelect:()=>{i(h.jsx(jg,{providerNames:r,onSuccess:_=>{s(),m.onChange(_d(_)),a()},onClose:a}))},children:[h.jsx(Ea,{className:"mr-2 h-3.5 w-3.5"}),"Create a new secret"]}),u.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(zo,{}),h.jsx(Iz,{children:"Recommended"})]}),u.map(_=>h.jsx(sn,{onSelect:()=>m.onChange(_d(_)),children:_},_)),f.length>0&&h.jsx(zo,{}),f.map(_=>h.jsx(sn,{onSelect:()=>m.onChange(_d(_)),children:_},_))]})]})]})}),h.jsx(Z3,{})]})})}}],PC=t=>{var H;const e=X.c(49),{schema:n,onSubmit:o,onBack:r}=t;let s,i,a;e[0]!==n?(s=Az(n),e[0]=n,e[1]=s):s=e[1],e[2]!==n?(i=Q3(n),e[2]=n,e[3]=i):i=e[3],e[4]!==s||e[5]!==i?(a={defaultValues:s,resolver:i,reValidateMode:"onChange"},e[4]=s,e[5]=i,e[6]=a):a=e[6];const l=e4(a),c=(H=[...Ig,...Ag].find(N=>N.schema===n))==null?void 0:H.connectionLibraries,[d,u]=A.useState((c==null?void 0:c.preferred)??"sqlalchemy"),{createNewCell:f}=Ft(),m=$s();let _;e[7]!==f||e[8]!==m?(_=N=>{f({code:N,before:!1,cellId:m??"__end__",skipIfCodeExists:!0})},e[7]=f,e[8]=m,e[9]=_):_=e[9];const g=_;let p;e[10]!==g||e[11]!==o||e[12]!==d?(p=N=>{g(function($,Y){if(!(Y in Cg))throw new Error(`Unsupported library: ${Y}`);dC.parse($);const Z=new jC,q=Z.createGenerator($,Y),re=q.generateConnectionCode(),ne=Z.secrets,oe=[...new Set([...ne.imports,...q.imports])].sort();oe.push("");const G=ne.formatSecrets();return G&&oe.push(G),oe.push(re.trim()),oe.join(`
`)}(N,d)),o()},e[10]=g,e[11]=o,e[12]=d,e[13]=p):p=e[13];const b=p;let y;e[14]!==l||e[15]!==b?(y=l.handleSubmit(b),e[14]=l,e[15]=b,e[16]=y):y=e[16];let x,v;e[17]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(Tz,{}),e[17]=x):x=e[17],e[18]!==l||e[19]!==n?(v=h.jsx(IC,{children:h.jsx(Mz,{schema:n,form:l,renderers:RC,children:x})}),e[18]=l,e[19]=n,e[20]=v):v=e[20];let S;e[21]!==r?(S=h.jsx(Pe,{type:"button",variant:"outline",onClick:r,children:"Back"}),e[21]=r,e[22]=S):S=e[22];const k=!l.formState.isValid;let E,j;e[23]!==k?(E=h.jsx(Pe,{type:"submit",disabled:k,children:"Add"}),e[23]=k,e[24]=E):E=e[24],e[25]!==S||e[26]!==E?(j=h.jsxs("div",{className:"flex gap-2",children:[S,E]}),e[25]=S,e[26]=E,e[27]=j):j=e[27];const I=pm;let T,M;e[28]===Symbol.for("react.memo_cache_sentinel")?(T=N=>u(N),e[28]=T):T=e[28],e[29]===Symbol.for("react.memo_cache_sentinel")?(M=h.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[h.jsx(gm,{children:h.jsx(_m,{placeholder:"Select a library"})}),h.jsx("span",{className:"text-xs text-muted-foreground",children:"Preferred connection library"})]}),e[29]=M):M=e[29];const L=bm,B=t4,O=c==null?void 0:c.libraries.map(FC);let z,F,V,R,C;return e[30]!==B||e[31]!==O?(z=h.jsx(B,{children:O}),e[30]=B,e[31]=O,e[32]=z):z=e[32],e[33]!==L||e[34]!==z?(F=h.jsx(L,{children:z}),e[33]=L,e[34]=z,e[35]=F):F=e[35],e[36]!==I||e[37]!==d||e[38]!==T||e[39]!==M||e[40]!==F?(V=h.jsx("div",{children:h.jsxs(I,{value:d,onValueChange:T,children:[M,F]})}),e[36]=I,e[37]=d,e[38]=T,e[39]=M,e[40]=F,e[41]=V):V=e[41],e[42]!==j||e[43]!==V?(R=h.jsxs("div",{className:"flex gap-2 justify-between",children:[j,V]}),e[42]=j,e[43]=V,e[44]=R):R=e[44],e[45]!==R||e[46]!==y||e[47]!==v?(C=h.jsxs("form",{onSubmit:y,className:"space-y-4",children:[v,R]}),e[45]=R,e[46]=y,e[47]=v,e[48]=C):C=e[48],C},LC=t=>{const e=X.c(5),{onSubmit:n}=t,[o,r]=A.useState(null);if(!o){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(DC,{onSelect:r}),e[0]=a):a=e[0],a}let s,i;return e[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>r(null),e[1]=s):s=e[1],e[2]!==n||e[3]!==o?(i=h.jsx(PC,{schema:o,onSubmit:n,onBack:s}),e[2]=n,e[3]=o,e[4]=i):i=e[4],i},Tg=t=>{const e=X.c(6),{children:n}=t,[o,r]=A.useState(!1);let s,i,a;return e[0]!==n?(s=h.jsx(Oz,{asChild:!0,children:n}),e[0]=n,e[1]=s):s=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(Mg,{onClose:()=>r(!1)}),e[2]=i):i=e[2],e[3]!==o||e[4]!==s?(a=h.jsxs(Dz,{open:o,onOpenChange:r,children:[s,i]}),e[3]=o,e[4]=s,e[5]=a):a=e[5],a},Mg=t=>{const e=X.c(4),{onClose:n}=t;let o,r,s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(lr,{children:"Add Connection"}),e[0]=o):o=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsxs(Os,{className:"mb-4",children:[o,h.jsxs(Ds,{children:["Connect to your database or data catalog to query data directly from your notebook. Learn more about how to connect to your database in our"," ",h.jsx(xm,{href:"https://docs.marimo.io/guides/working_with_data/sql/#connecting-to-a-custom-database",children:"docs."})]})]}),e[1]=r):r=e[1],e[2]!==n?(s=h.jsxs(dr,{className:"max-h-[75vh] overflow-y-auto",children:[r,h.jsx(LC,{onSubmit:()=>n()})]}),e[2]=n,e[3]=s):s=e[3],s};function FC(t){return h.jsx(ym,{value:t,children:Cg[t]},t)}const zC=()=>{const t=X.c(7),{selectedLayout:e}=DS(),{setLayoutView:n}=RS();if(En()&&!wm("wasm_layouts"))return null;let o,r,s,i;return t[0]!==n?(o=a=>n(a),t[0]=n,t[1]=o):o=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(gm,{className:"min-w-[110px] border-border bg-background","data-testid":"layout-select",children:h.jsx(_m,{placeholder:"Select a view"})}),t[2]=r):r=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsx(bm,{children:h.jsxs(t4,{children:[h.jsx(Rz,{children:"View as"}),PS.map(UC)]})}),t[3]=s):s=t[3],t[4]!==e||t[5]!==o?(i=h.jsxs(pm,{"data-testid":"layout-select",value:e,onValueChange:o,children:[r,s]}),t[4]=e,t[5]=o,t[6]=i):i=t[6],i};function BC(t){const e=Og(t);return h.jsx(e,{className:"h-4 w-4"})}function Og(t){switch(t){case"vertical":return Tp;case"grid":return UH;case"slides":return od;default:return wc(t),km}}function Dg(t){return vm(t)}function UC(t){return h.jsx(ym,{value:t,children:h.jsxs("div",{className:"flex items-center gap-1.5 leading-5",children:[BC(t),h.jsx("span",{children:Dg(t)})]})},t)}const VC=()=>{const t=X.c(2),{updateCellConfig:e}=Ft();let n;return t[0]!==e?(n=async()=>{const o=new ia,r=po(),s=r.cellIds.inOrderIds,i={};for(const l of s){if(r.cellData[l]===void 0)continue;const{code:c,config:d}=r.cellData[l];d.hide_code||o.isSupported(c)&&(i[l]={hide_code:!0})}const a=yc.entries(i);if(a.length!==0){await Lr({configs:i});for(const[l,c]of a)e({cellId:l,config:c})}},t[0]=e,t[1]=n):n=t[1],n};function Rg(){const t=X.c(3),{openConfirm:e}=Wn(),n=Zt(mn);let o;return t[0]!==e||t[1]!==n?(o=()=>{e({title:"Restart Kernel",description:"This will restart the Python kernel. You'll lose all data that's in memory. You will also lose any unsaved changes, so make sure to save your work before restarting.",variant:"destructive",confirmAction:h.jsx(o4,{onClick:async()=>{n({state:mt.CLOSING}),await Lz(),Fz()},"aria-label":"Confirm Restart",children:"Restart"})})},t[0]=e,t[1]=n,t[2]=o):o=t[2],o}const li=t=>{t==null||t.preventDefault(),t==null||t.stopPropagation()};function Pg(){const t=X.c(150),e=Cm(),{openModal:n,closeModal:o}=Wn(),{toggleApplication:r}=aa(),{selectedPanel:s}=vc(),[i]=fn(rm),a=$e(Fs),l=VC(),{updateCellConfig:c,undoDeleteCell:d,clearAllCellOutputs:u,upsertSetupCell:f,collapseAllCells:m,expandAllCells:_}=Ft(),g=Rg(),p=og(),b=function(Lt){const vt=X.c(4),{openPrompt:Nn,closeModal:jn}=Wn();let Ms;return vt[0]!==jn||vt[1]!==Nn||vt[2]!==Lt?(Ms=()=>{if(!Lt)return null;const lc=Sm.guessDeliminator(Lt),em=An.basename(Lt);Nn({title:"Copy notebook",description:"Enter a new filename for the notebook copy.",defaultValue:`_${em}`,confirmText:"Copy notebook",spellCheck:!1,onConfirm:tm=>{const cc=lc.join(An.dirname(Lt),tm);Pz({source:Lt,destination:cc}).then(()=>{jn(),lt({title:"Notebook copied",description:"A copy of the notebook has been created."}),window.open(`/?file=${cc}`,"_blank")})}})},vt[0]=jn,vt[1]=Nn,vt[2]=Lt,vt[3]=Ms):Ms=vt[3],Ms}(e),y=Zt(pd),x=Zt(VH),v=Zt(HH),S=$e(zz),k=$e(Bz),E=$e(r4),{selectedLayout:j}=DS(),{setLayoutView:I}=RS(),T=ng(),M=dN;let L,B,O,z,F,V,R,C,H,N,$,Y,Z;t[0]===Symbol.for("react.memo_cache_sentinel")?(L=h.jsx($p,{size:14,strokeWidth:1.5}),t[0]=L):L=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(B=h.jsx(Vz,{size:14,strokeWidth:1.5}),t[1]=B):B=t[1],t[2]!==o||t[3]!==n?(O={icon:B,label:"Publish HTML to web",handle:async()=>{n(h.jsx(KS,{onClose:o}))}},t[2]=o,t[3]=n,t[4]=O):O=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(z={icon:h.jsx(NS,{size:14,strokeWidth:1.5}),label:"Create WebAssembly link",handle:cN},t[5]=z):z=t[5],t[6]!==O?(F={icon:L,label:"Share",handle:li,dropdown:[O,z]},t[6]=O,t[7]=F):F=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(V=h.jsx(Nm,{size:14,strokeWidth:1.5}),t[8]=V):V=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(R=h.jsx(LS,{size:14,strokeWidth:1.5}),t[9]=R):R=t[9],t[10]!==e?(C={icon:R,label:"Download as HTML",handle:async()=>{e?await FS({filename:e,includeCode:!0}):lt({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."})}},t[10]=e,t[11]=C):C=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(H=h.jsx(LS,{size:14,strokeWidth:1.5}),t[12]=H):H=t[12],t[13]!==e?(N={icon:H,label:"Download as HTML (exclude code)",handle:async()=>{e?await FS({filename:e,includeCode:!1}):lt({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."})}},t[13]=e,t[14]=N):N=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?($={icon:h.jsx(gc,{strokeWidth:1.5,style:{width:14,height:14}}),label:"Download as Markdown",handle:lN},Y={icon:h.jsx(_p,{size:14,strokeWidth:1.5}),label:"Download Python code",handle:aN},t[15]=$,t[16]=Y):($=t[15],Y=t[16]),t[17]===Symbol.for("react.memo_cache_sentinel")?(Z=h.jsx(sp,{size:14,strokeWidth:1.5}),t[17]=Z):Z=t[17];const q=i.mode!=="present";let re,ne,oe;t[18]!==i.mode?(re=i.mode==="present"?void 0:h.jsxs("span",{children:["Only available in app view. ",h.jsx("br",{}),"Toggle with: ",pn("global.hideCode",!1)]}),t[18]=i.mode,t[19]=re):re=t[19],t[20]!==q||t[21]!==re?(ne={divider:!0,icon:Z,label:"Download as PNG",disabled:q,tooltip:re,handle:iN},t[20]=q,t[21]=re,t[22]=ne):ne=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(oe=h.jsx(Hz,{size:14,strokeWidth:1.5}),t[23]=oe):oe=t[23];const G=i.mode!=="present";let Q,ce,me,de,ge,ie,we,ve,ae,Se,pe,Te,Re,We,ze;if(t[24]!==i.mode?(Q=i.mode==="present"?void 0:h.jsxs("span",{children:["Only available in app view. ",h.jsx("br",{}),"Toggle with: ",pn("global.hideCode",!1)]}),t[24]=i.mode,t[25]=Q):Q=t[25],t[26]!==G||t[27]!==Q?(ce={icon:oe,label:"Download as PDF",disabled:G,tooltip:Q,handle:rN},t[26]=G,t[27]=Q,t[28]=ce):ce=t[28],t[29]!==ne||t[30]!==ce||t[31]!==C||t[32]!==N?(me={icon:V,label:"Download",handle:li,dropdown:[C,N,$,Y,ne,ce]},t[29]=ne,t[30]=ce,t[31]=C,t[32]=N,t[33]=me):me=t[33],t[34]===Symbol.for("react.memo_cache_sentinel")?(de=h.jsx(Fp,{size:14,strokeWidth:1.5}),t[34]=de):de=t[34],t[35]!==s||t[36]!==r?(ge=dd.flatMap(Lt=>{const{type:vt,Icon:Nn,hidden:jn}=Lt;return jn?[]:{label:vm(vt),rightElement:M(s===vt),icon:h.jsx(Nn,{size:14,strokeWidth:1.5}),handle:()=>r(vt)}}),t[35]=s,t[36]=r,t[37]=ge):ge=t[37],t[38]!==ge?(ie={divider:!0,icon:de,label:"Helper panel",handle:li,dropdown:ge},t[38]=ge,t[39]=ie):ie=t[39],t[40]===Symbol.for("react.memo_cache_sentinel")?(we=h.jsx(od,{size:14,strokeWidth:1.5}),t[40]=we):we=t[40],t[41]!==i.mode?(ve=i.mode==="present"?h.jsx(s4,{size:14,strokeWidth:1.5}):h.jsx(td,{size:14,strokeWidth:1.5}),t[41]=i.mode,t[42]=ve):ve=t[42],t[43]!==T?(ae=()=>{T()},t[43]=T,t[44]=ae):ae=t[44],t[45]!==ve||t[46]!==ae?(Se={icon:ve,label:"Toggle app view",hotkey:"global.hideCode",handle:ae},t[45]=ve,t[46]=ae,t[47]=Se):Se=t[47],t[48]!==j||t[49]!==I||t[50]!==Se||t[51]!==T||t[52]!==i.mode){let Lt;t[54]!==j||t[55]!==I||t[56]!==T||t[57]!==i.mode?(Lt=(vt,Nn)=>{const jn=Og(vt);return{divider:Nn===0,label:Dg(vt),icon:h.jsx(jn,{size:14,strokeWidth:1.5}),rightElement:h.jsx("div",{className:"w-8 flex justify-end",children:j===vt&&h.jsx(kc,{size:14})}),handle:()=>{I(vt),i.mode==="edit"&&T()}}},t[54]=j,t[55]=I,t[56]=T,t[57]=i.mode,t[58]=Lt):Lt=t[58],pe={icon:we,label:"Present as",handle:li,dropdown:[Se,...PS.map(Lt)]},t[48]=j,t[49]=I,t[50]=Se,t[51]=T,t[52]=i.mode,t[53]=pe}else pe=t[53];t[59]===Symbol.for("react.memo_cache_sentinel")?(Te=h.jsx(kp,{size:14,strokeWidth:1.5}),t[59]=Te):Te=t[59],t[60]!==e?(Re=!e||En(),t[60]=e,t[61]=Re):Re=t[61],t[62]!==b||t[63]!==Re?(We={icon:Te,label:"Create notebook copy",hidden:Re,handle:b},t[62]=b,t[63]=Re,t[64]=We):We=t[64],t[65]===Symbol.for("react.memo_cache_sentinel")?(ze=h.jsx(Kc,{size:14,strokeWidth:1.5}),t[65]=ze):ze=t[65];const Ce=!e;let qe,Ze;t[66]!==Ce?(qe={icon:ze,label:"Copy code to clipboard",hidden:Ce,handle:oN},t[66]=Ce,t[67]=qe):qe=t[67],t[68]===Symbol.for("react.memo_cache_sentinel")?(Ze=h.jsx(wr,{size:14,strokeWidth:1.5}),t[68]=Ze):Ze=t[68];const at=!S||a;let te,je,Me;t[69]!==c?(te=async()=>{const Lt=po(),vt=$z(Lt),Nn=yc.fromEntries(vt.map(nN));await Lr({configs:Nn});for(const jn of vt)c({cellId:jn,config:{disabled:!1}})},t[69]=c,t[70]=te):te=t[70],t[71]!==at||t[72]!==te?(je={icon:Ze,label:"Enable all cells",hidden:at,handle:te},t[71]=at,t[72]=te,t[73]=je):je=t[73],t[74]===Symbol.for("react.memo_cache_sentinel")?(Me=h.jsx(xr,{size:14,strokeWidth:1.5}),t[74]=Me):Me=t[74];const Ue=!k||a;let J,he,_e,ue,ye,Ne,Be,et,le,Ee,Ie,Ve,Ge,De,Je;t[75]!==c?(J=async()=>{const Lt=po(),vt=D3(Lt),Nn=yc.fromEntries(vt.map(tN));await Lr({configs:Nn});for(const jn of vt)c({cellId:jn,config:{disabled:!0}})},t[75]=c,t[76]=J):J=t[76],t[77]!==Ue||t[78]!==J?(he={icon:Me,label:"Disable all cells",hidden:Ue,handle:J},t[77]=Ue,t[78]=J,t[79]=he):he=t[79],t[80]===Symbol.for("react.memo_cache_sentinel")?(_e=h.jsx(V3,{size:14,strokeWidth:1.5}),t[80]=_e):_e=t[80],t[81]!==l?(ue={icon:_e,label:"Hide all markdown code",handle:l},t[81]=l,t[82]=ue):ue=t[82],t[83]===Symbol.for("react.memo_cache_sentinel")?(ye=h.jsx(pp,{size:14,strokeWidth:1.5}),t[83]=ye):ye=t[83],t[84]!==m?(Ne={icon:ye,label:"Collapse all sections",hotkey:"global.collapseAllSections",handle:m},t[84]=m,t[85]=Ne):Ne=t[85],t[86]===Symbol.for("react.memo_cache_sentinel")?(Be=h.jsx(mp,{size:14,strokeWidth:1.5}),t[86]=Be):Be=t[86],t[87]!==_?(et={icon:Be,label:"Expand all sections",hotkey:"global.expandAllSections",handle:_},t[87]=_,t[88]=et):et=t[88],t[89]===Symbol.for("react.memo_cache_sentinel")?(le=h.jsx(yp,{size:14,strokeWidth:1.5}),t[89]=le):le=t[89],t[90]!==f?(Ee={icon:le,label:"Add setup cell",handle:()=>{f({code:"# Initialization code that runs before all other cells"})}},t[90]=f,t[91]=Ee):Ee=t[91],t[92]===Symbol.for("react.memo_cache_sentinel")?(Ie=h.jsx(am,{size:14,strokeWidth:1.5}),t[92]=Ie):Ie=t[92],t[93]!==u?(Ve={icon:Ie,label:"Clear all outputs",handle:()=>{u()}},t[93]=u,t[94]=Ve):Ve=t[94],t[95]===Symbol.for("react.memo_cache_sentinel")?(Ge=h.jsx(wp,{size:14,strokeWidth:1.5}),t[95]=Ge):Ge=t[95],t[96]!==p?(De={icon:Ge,label:"Re-run all cells",hotkey:"global.runAll",handle:async()=>{p()}},t[96]=p,t[97]=De):De=t[97],t[98]===Symbol.for("react.memo_cache_sentinel")?(Je=h.jsx(ad,{size:14,strokeWidth:1.5}),t[98]=Je):Je=t[98];const ot=!E||a;let Xe,rt,gt,xt,Ot,wt,Vt,Cn,hn,rn,Xt,eo,mo,Ss,Cs,Ns,js,Es,ar,Is;t[99]!==d?(Xe=()=>{d()},t[99]=d,t[100]=Xe):Xe=t[100],t[101]!==ot||t[102]!==Xe?(rt={icon:Je,label:"Undo cell deletion",hidden:ot,handle:Xe},t[101]=ot,t[102]=Xe,t[103]=rt):rt=t[103],t[104]===Symbol.for("react.memo_cache_sentinel")?(gt=h.jsx(ur,{size:14,strokeWidth:1.5}),t[104]=gt):gt=t[104],t[105]!==o||t[106]!==n?(xt={icon:gt,label:"Add database connection",handle:()=>{n(h.jsx(Mg,{onClose:o}))}},t[105]=o,t[106]=n,t[107]=xt):xt=t[107],t[108]===Symbol.for("react.memo_cache_sentinel")?(Ot=h.jsx(Xc,{size:14,strokeWidth:1.5}),t[108]=Ot):Ot=t[108],t[109]!==y?(wt={divider:!0,icon:Ot,label:"Command palette",hotkey:"global.commandPalette",handle:()=>y(eN)},t[109]=y,t[110]=wt):wt=t[110],t[111]===Symbol.for("react.memo_cache_sentinel")?(Vt=h.jsx(i4,{size:14,strokeWidth:1.5}),t[111]=Vt):Vt=t[111],t[112]!==x?(Cn={icon:Vt,label:"User settings",handle:()=>x(QC)},t[112]=x,t[113]=Cn):Cn=t[113],t[114]===Symbol.for("react.memo_cache_sentinel")?(hn=h.jsx(Ap,{size:14,strokeWidth:1.5}),t[114]=hn):hn=t[114],t[115]!==v?(rn={icon:hn,label:"Keyboard shortcuts",hotkey:"global.showHelp",handle:()=>v(ZC)},t[115]=v,t[116]=rn):rn=t[116],t[117]===Symbol.for("react.memo_cache_sentinel")?(Xt={icon:h.jsx(jS,{size:14,strokeWidth:1.5}),label:"Open documentation",handle:XC},eo=h.jsx(Sc,{size:14,strokeWidth:1.5}),t[117]=Xt,t[118]=eo):(Xt=t[117],eo=t[118]),t[119]===Symbol.for("react.memo_cache_sentinel")?(mo={icon:eo,label:"Resources",handle:li,dropdown:[{icon:h.jsx(jS,{size:14,strokeWidth:1.5}),label:"Documentation",handle:KC},{icon:h.jsx($H,{size:14,strokeWidth:1.5}),label:"GitHub",handle:JC},{icon:h.jsx(WH,{size:14,strokeWidth:1.5}),label:"Discord Community",handle:YC},{icon:h.jsx(qH,{size:14,strokeWidth:1.5}),label:"YouTube",handle:GC},{icon:h.jsx(im,{size:14,strokeWidth:1.5}),label:"Changelog",handle:qC}]},t[119]=mo):mo=t[119],t[120]===Symbol.for("react.memo_cache_sentinel")?(Ss=h.jsx(Ep,{size:14,strokeWidth:1.5}),t[120]=Ss):Ss=t[120],t[121]===Symbol.for("react.memo_cache_sentinel")?(Cs={divider:!0,icon:Ss,label:"Return home",hidden:!location.search.includes("file"),handle:WC},Ns=h.jsx(Aa,{size:14,strokeWidth:1.5}),t[121]=Cs,t[122]=Ns):(Cs=t[121],Ns=t[122]),t[123]===Symbol.for("react.memo_cache_sentinel")?(js={icon:Ns,label:"New notebook",hidden:!location.search.includes("file"),handle:$C},Es=h.jsx(Kp,{size:14,strokeWidth:1.5}),t[123]=js,t[124]=Es):(js=t[123],Es=t[124]),t[125]!==g?(ar={icon:Es,label:"Restart kernel",variant:"danger",handle:g},t[125]=g,t[126]=ar):ar=t[126],t[127]!==me||t[128]!==ie||t[129]!==pe||t[130]!==We||t[131]!==qe||t[132]!==je||t[133]!==F||t[134]!==he||t[135]!==ue||t[136]!==Ne||t[137]!==et||t[138]!==Ee||t[139]!==Ve||t[140]!==De||t[141]!==rt||t[142]!==xt||t[143]!==wt||t[144]!==Cn||t[145]!==rn||t[146]!==ar?(Is=[F,me,ie,pe,We,qe,je,he,ue,Ne,et,Ee,Ve,De,rt,xt,wt,Cn,rn,Xt,mo,Cs,js,ar],t[127]=me,t[128]=ie,t[129]=pe,t[130]=We,t[131]=qe,t[132]=je,t[133]=F,t[134]=he,t[135]=ue,t[136]=Ne,t[137]=et,t[138]=Ee,t[139]=Ve,t[140]=De,t[141]=rt,t[142]=xt,t[143]=wt,t[144]=Cn,t[145]=rn,t[146]=ar,t[147]=Is):Is=t[147];const As=Is;let Ts;return t[148]!==As?(Ts=As.filter(HC),t[148]=As,t[149]=Ts):Ts=t[149],Ts}function HC(t){return!t.hidden}function $C(){const t=Uz();window.open(t,"_blank")}function WC(){const t=document.baseURI.split("?")[0];window.open(t,"_self")}function qC(){window.open(to.releasesPage,"_blank")}function GC(){window.open(to.youtube,"_blank")}function YC(){window.open(to.discordLink,"_blank")}function JC(){window.open(to.githubPage,"_blank")}function KC(){window.open(to.docsPage,"_blank")}function XC(){window.open(to.docsPage,"_blank")}function ZC(t){return!t}function QC(t){return!t}function eN(t){return!t}function tN(t){return[t,{disabled:!0}]}function nN(t){return[t,{disabled:!1}]}async function oN(){const t=await jm();await xn(t.contents),lt({title:"Copied",description:"Code copied to clipboard."})}async function rN(){const t=new Event("export-beforeprint"),e=new Event("export-afterprint");window.dispatchEvent(t),setTimeout(sN,0),setTimeout(()=>window.dispatchEvent(e),0)}function sN(){return window.print()}async function iN(){const t=document.getElementById("App");t&&await F3(t,document.title)}async function aN(){const t=await jm();la(new Blob([t.contents],{type:"text/plain"}),a4.toPY(document.title))}async function lN(){const t=await Wz({download:!1});la(new Blob([t],{type:"text/plain"}),a4.toMarkdown(document.title))}async function cN(){const t=await jm(),e=qz({code:t.contents});await xn(e),lt({title:"Copied",description:"Link copied to clipboard."})}function dN(t){return h.jsx("div",{className:"w-8 flex justify-end",children:t&&h.jsx(kc,{size:14})})}const uN=()=>{const t=X.c(10),e=Pg();let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx(wn,{"aria-label":"Config",shape:"circle",size:"small",className:"h-[27px] w-[27px]","data-testid":"notebook-menu-dropdown",color:"hint-green",children:h.jsx(s$,{strokeWidth:1.8})}),t[0]=n):n=t[0];const o=n,r=hN;let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=f=>{const m=h.jsx(sn,{variant:f.variant,disabled:f.disabled,onSelect:_=>f.handle(_),"data-testid":`notebook-menu-dropdown-${f.label}`,children:r(f)},f.label);return f.tooltip?h.jsx(Le,{content:f.tooltip,side:"left",delayDuration:100,children:h.jsx("span",{children:m})},f.label):m},t[1]=s):s=t[1];const i=s;let a,l,c,d,u;if(t[2]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(Vs,{asChild:!0,children:o}),t[2]=a):a=t[2],t[3]!==e){let f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=m=>m.hidden?null:m.dropdown?h.jsxs(Gz,{children:[h.jsx(Yz,{"data-testid":`notebook-menu-dropdown-${m.label}`,children:r(m)}),h.jsx(Jz,{children:h.jsx(Kz,{children:m.dropdown.map(_=>h.jsxs(K.Fragment,{children:[_.divider&&h.jsx(zo,{}),i(_)]},_.label))})})]},m.label):h.jsxs(K.Fragment,{children:[m.divider&&h.jsx(zo,{}),i(m)]},m.label),t[5]=f):f=t[5],l=e.map(f),t[3]=e,t[4]=l}else l=t[4];return t[6]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(zo,{}),t[6]=c):c=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("div",{className:"flex-1 px-2 text-xs text-muted-foreground",children:h.jsxs("span",{children:["Version: ",l4()]})}),t[7]=d):d=t[7],t[8]!==l?(u=h.jsxs(Us,{modal:!1,children:[a,h.jsxs(Hs,{align:"end",className:"no-print w-[240px]",children:[l,c,d]})]}),t[8]=l,t[9]=u):u=t[9],u};function hN(t){return h.jsxs(h.Fragment,{children:[t.icon&&h.jsx("span",{className:"flex-0 mr-2",children:t.icon}),h.jsx("span",{className:"flex-1",children:t.labelElement||t.label}),t.hotkey&&h.jsx(Xz,{shortcut:t.hotkey,className:"ml-4"}),t.rightElement]})}function bd(t){return Bo("create"in t,'Expected query to have a "create" method'),t}const tn=Zz({findText:"",replaceText:"",caseSensitive:!1,wholeWord:!1,regexp:!1,isOpen:!1,currentView:void 0},(t,e)=>{if(e===void 0)return t;switch(e.type){case"setFind":return{...t,findText:e.find};case"setReplace":return{...t,replaceText:e.replace};case"setCaseSensitive":return{...t,caseSensitive:e.caseSensitive};case"setWholeWord":return{...t,wholeWord:e.wholeWord};case"setRegex":return{...t,regexp:e.regexp};case"setIsOpen":return{...t,isOpen:e.isOpen};case"setCurrentView":return{...t,currentView:{view:e.view,range:e.range}};case"clearCurrentView":return{...t,currentView:void 0}}});function Lg(t){if([...document.querySelectorAll('[role="dialog"][data-state="open"]')].some(e=>e instanceof HTMLElement&&e.childNodes.length>0))return!1;if(t){const e=t.state.selection.main,n=t.state.sliceDoc(e.from,e.to);n?(ct.set(tn,{type:"setFind",find:n}),ct.set(tn,{type:"setCurrentView",view:t,range:{from:e.from,to:e.to}})):ct.set(tn,{type:"setCurrentView",view:t,range:{from:0,to:0}})}return ct.get(tn).isOpen?(ct.set(tn,{type:"setIsOpen",isOpen:!1}),requestAnimationFrame(()=>{ct.set(tn,{type:"setIsOpen",isOpen:!0})}),!0):(ct.set(tn,{type:"setIsOpen",isOpen:!0}),!0)}function fN(){return!!ct.get(tn).isOpen&&(ct.set(tn,{type:"setIsOpen",isOpen:!1}),!0)}function Ua(t){return()=>{const e=ct.get(tn),n=new Cc({search:e.findText,caseSensitive:e.caseSensitive,regexp:e.regexp,replace:e.replaceText,wholeWord:e.wholeWord});return!!n.valid&&t({query:bd(n).create(),search:n})}}const Fg=t=>Ua(({query:e})=>{const n=Ws(),o=ct.get(tn).currentView||{view:n[0],range:{from:0,to:0}};let r=o.range.to;t==="prev"&&(n.reverse(),r=o.range.from);let s=n.indexOf(o.view);s<0&&(s=0);const i=[...n,...n].slice(s);for(const a of i){const l=t==="next"?e.nextMatch(a.state,0,r??0):e.prevMatch(a.state,r??a.state.doc.length,a.state.doc.length);if(!l){r=null,a.dispatch({selection:Uo.single(0)});continue}const c=Uo.single(l.from,l.to);return a.dispatch({selection:c,effects:[st.scrollIntoView(c.main,{y:"center"})],userEvent:"select.search"}),ct.set(tn,{type:"setCurrentView",view:a,range:{from:l.from,to:l.to}}),l}return!1}),yd=Fg("next"),zg=Fg("prev"),mN=Ua(({query:t})=>{var o;const e=Ws(),n=[];for(const r of e){if(r.state.readOnly)continue;const s=(o=t.matchAll(r.state,1e9))==null?void 0:o.map(a=>{const{from:l,to:c}=a;return{from:l,to:c,insert:t.getReplacement(a)}});if(!s||s.length===0)continue;const i=r.state.doc.toString();n.push(()=>{r.dispatch({changes:[{from:0,to:r.state.doc.length,insert:i}],userEvent:"input.replace.all"})}),r.dispatch({changes:s,userEvent:"input.replace.all"})}return()=>{for(const r of n)r()}}),pN=Ua(({query:t})=>{const e=Ws(),n=ct.get(tn).currentView||{view:e[0],range:{from:0}};let o=n.range.from,r=e.indexOf(n.view);r<0&&(r=0);const s=[...e,...e].slice(r);for(const i of s){const a=t.nextMatch(i.state,0,o??0);if(!a){o=null,i.dispatch({selection:Uo.single(0)});continue}const l=i.state.toText(t.getReplacement(a));return i.dispatch({changes:[{from:a.from,to:a.to,insert:l}],userEvent:"input.replace"}),yd()}return!1}),gN=Ua(({query:t})=>{const e=Ws();let n=0;const o=new Map;for(const r of e){const s=t.matchAll(r.state,1e9)||[];for(const i of s){const{from:a,to:l}=i,c=o.get(r)||new Map;c.set(`${a}:${l}`,n++),o.set(r,c)}}return{count:n,position:o}}),xd=zt.define();function Bg(){const t=Ws();for(const e of t)e.state.readOnly||e.dispatch({effects:xd.of(new Cc({search:""}))})}const Va=Mn.define({create(){const t=ct.get(tn);return bd(new Cc({search:t.findText,caseSensitive:t.caseSensitive,regexp:t.regexp,replace:t.replaceText,wholeWord:t.wholeWord})).create()},update(t,e){for(const n of e.effects)n.is(xd)&&(t=bd(n.value).create());return t}}),_N=ut.mark({class:"cm-searchMatch"}),bN=ut.mark({class:"cm-searchMatch cm-searchMatch-selected"}),yN=Tn.fromClass(class{constructor(t){this.view=t,this.decorations=void 0,this.decorations=this.highlight(t.state.field(Va))}update(t){const e=t.state.field(Va);(e!==t.startState.field(Va)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight(t){if(!t.spec.valid)return ut.none;const{view:e}=this,n=new qs,o=e.visibleRanges,r=o.length;for(let s=0;s<r;s++){let{to:i}=o[s];const{from:a}=o[s];for(;s<r-1&&i>o[s+1].from-500;)i=o[++s].to;t.highlight(e.state,a,i,(l,c)=>{const d=e.state.selection.ranges.some(u=>u.from===l&&u.to===c);n.add(l,c,d?bN:_N)})}return n.finish()}},{decorations:t=>t.decorations}),xN=st.baseTheme({"&light .cm-searchMatch":{backgroundColor:"#99ff7780"},"&dark .cm-searchMatch":{backgroundColor:"#22bb0070"},"&light .cm-searchMatch-selected":{backgroundColor:"transparent"},"&dark .cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff88 !important"}}),wN=()=>{var ze;const t=X.c(102),[e,n]=A.useState(!1),[o,r]=fn(tn),[s,i]=A.useState(),a=A.useRef(null),l=$e(dm);let c,d;t[0]!==e||t[1]!==o.isOpen?(c=()=>(!e||!o.isOpen)&&Lg(),t[0]=e,t[1]=o.isOpen,t[2]=c):c=t[2],Gt("cell.findAndReplace",c),t[3]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{const Ce=gN();i(Ce===!1?void 0:Ce)},t[3]=d):d=t[3];const u=d;let f,m,_,g;if(t[4]!==o.isOpen?(f=()=>{o.isOpen&&a.current&&(a.current.focus(),a.current.select())},m=[o.isOpen],t[4]=o.isOpen,t[5]=f,t[6]=m):(f=t[5],m=t[6]),A.useEffect(f,m),t[7]!==o.findText||t[8]!==o.isOpen?(_=()=>{if(o.isOpen){if(o.findText==="")return i(void 0),void Bg();u(),function(){const Ce=ct.get(tn),qe=Ws();for(const Ze of qe)Ze.state.readOnly||Ze.dispatch({effects:xd.of(new Cc({search:Ce.findText,caseSensitive:Ce.caseSensitive,regexp:Ce.regexp,replace:Ce.replaceText,wholeWord:Ce.wholeWord}))})}()}else Bg()},t[7]=o.findText,t[8]=o.isOpen,t[9]=_):_=t[9],t[10]!==o.caseSensitive||t[11]!==o.findText||t[12]!==o.isOpen||t[13]!==o.regexp||t[14]!==o.wholeWord?(g=[o.findText,o.isOpen,o.caseSensitive,o.regexp,o.wholeWord],t[10]=o.caseSensitive,t[11]=o.findText,t[12]=o.isOpen,t[13]=o.regexp,t[14]=o.wholeWord,t[15]=g):g=t[15],A.useEffect(_,g),!o.isOpen)return null;const p=o.currentView;let b;t[16]!==s||t[17]!==p?(b=p&&s?(ze=s.position.get(p.view))==null?void 0:ze.get(`${p.range.from}:${p.range.to}`):void 0,t[16]=s,t[17]=p,t[18]=b):b=t[18];const y=b;let x,v,S,k,E,j,I,T,M,L,B;t[19]===Symbol.for("react.memo_cache_sentinel")?(x=()=>n(!0),t[19]=x):x=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(v=()=>n(!1),t[20]=v):v=t[20],t[21]!==r?(S=Ce=>{Ce.key==="Escape"&&r({type:"setIsOpen",isOpen:!1})},t[21]=r,t[22]=S):S=t[22],t[23]!==r?(k=()=>r({type:"setIsOpen",isOpen:!1}),t[23]=r,t[24]=k):k=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(E=h.jsx(no,{className:"w-4 h-4"}),t[25]=E):E=t[25],t[26]!==k?(j=h.jsx("div",{className:"absolute top-0 right-0",children:h.jsx(Pe,{"data-testid":"close-find-replace-button",onClick:k,size:"xs",variant:"text",children:E})}),t[26]=k,t[27]=j):j=t[27],t[28]!==r?(I=Ce=>{r({type:"setFind",find:Ce.target.value})},t[28]=r,t[29]=I):I=t[29],t[30]!==o.findText||t[31]!==I?(T=h.jsx(cr,{ref:a,"data-testid":"find-input",value:o.findText,autoFocus:!0,className:"mr-2 mb-0",placeholder:"Find",onKeyDown:kN,onChange:I}),t[30]=o.findText,t[31]=I,t[32]=T):T=t[32],t[33]!==r?(M=Ce=>{r({type:"setReplace",replace:Ce.target.value})},t[33]=r,t[34]=M):M=t[34],t[35]!==o.replaceText||t[36]!==M?(L=h.jsx(cr,{"data-testid":"replace-input",value:o.replaceText,placeholder:"Replace",onChange:M}),t[35]=o.replaceText,t[36]=M,t[37]=L):L=t[37],t[38]!==T||t[39]!==L?(B=h.jsxs("div",{className:"flex flex-col flex-2 gap-2 w-[55%]",children:[T,L]}),t[38]=T,t[39]=L,t[40]=B):B=t[40];const O=o.caseSensitive?"on":"off";let z,F,V;t[41]!==r?(z=Ce=>r({type:"setCaseSensitive",caseSensitive:Ce}),t[41]=r,t[42]=z):z=t[42],t[43]===Symbol.for("react.memo_cache_sentinel")?(F=h.jsx(Qz,{className:"w-4 h-4"}),t[43]=F):F=t[43],t[44]!==o.caseSensitive||t[45]!==O||t[46]!==z?(V=h.jsx(Le,{content:"Case Sensitive",children:h.jsx(Em,{size:"sm",pressed:o.caseSensitive,"data-state":O,onPressedChange:z,children:F})}),t[44]=o.caseSensitive,t[45]=O,t[46]=z,t[47]=V):V=t[47];const R=o.wholeWord?"on":"off";let C,H,N;t[48]!==r?(C=Ce=>r({type:"setWholeWord",wholeWord:Ce}),t[48]=r,t[49]=C):C=t[49],t[50]===Symbol.for("react.memo_cache_sentinel")?(H=h.jsx(tg,{className:"w-4 h-4"}),t[50]=H):H=t[50],t[51]!==o.wholeWord||t[52]!==R||t[53]!==C?(N=h.jsx(Le,{content:"Match Whole Word",children:h.jsx(Em,{size:"sm",pressed:o.wholeWord,"data-state":R,onPressedChange:C,children:H})}),t[51]=o.wholeWord,t[52]=R,t[53]=C,t[54]=N):N=t[54];const $=o.regexp?"on":"off";let Y,Z,q,re,ne;t[55]!==r?(Y=Ce=>r({type:"setRegex",regexp:Ce}),t[55]=r,t[56]=Y):Y=t[56],t[57]===Symbol.for("react.memo_cache_sentinel")?(Z=h.jsx(Up,{className:"w-4 h-4"}),t[57]=Z):Z=t[57],t[58]!==o.regexp||t[59]!==$||t[60]!==Y?(q=h.jsx(Le,{content:"Use Regular Expression",children:h.jsx(Em,{size:"sm",pressed:o.regexp,"data-state":$,onPressedChange:Y,children:Z})}),t[58]=o.regexp,t[59]=$,t[60]=Y,t[61]=q):q=t[61],t[62]!==V||t[63]!==N||t[64]!==q?(re=h.jsxs("div",{className:"flex items-center gap-[2px]",children:[V,N,q]}),t[62]=V,t[63]=N,t[64]=q,t[65]=re):re=t[65],t[66]===Symbol.for("react.memo_cache_sentinel")?(ne=()=>{pN()&&u()},t[66]=ne):ne=t[66];const oe=o.findText==="";let G,Q;t[67]!==oe?(G=h.jsx(Pe,{"data-testid":"replace-next-button",size:"xs",variant:"outline",className:"h-6 text-xs",onClick:ne,disabled:oe,children:"Replace Next"}),t[67]=oe,t[68]=G):G=t[68],t[69]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>{const Ce=mN();if(!Ce)return;u();const{dismiss:qe}=lt({title:"Replaced all occurrences",action:h.jsx(hd,{"data-testid":"undo-replace-all-button",onClick:()=>{Ce(),Ze()}})}),Ze=qe},t[69]=Q):Q=t[69];const ce=o.findText==="";let me,de,ge,ie,we,ve,ae,Se,pe,Te,Re,We;return t[70]!==ce?(me=h.jsx(Pe,{"data-testid":"replace-all-button",size:"xs",variant:"outline",className:"h-6 text-xs",onClick:Q,disabled:ce,children:"Replace All"}),t[70]=ce,t[71]=me):me=t[71],t[72]!==G||t[73]!==me?(de=h.jsxs("div",{className:"flex items-center gap-[2px]",children:[G,me]}),t[72]=G,t[73]=me,t[74]=de):de=t[74],t[75]!==re||t[76]!==de?(ge=h.jsxs("div",{className:"flex flex-col gap-2",children:[re,de]}),t[75]=re,t[76]=de,t[77]=ge):ge=t[77],t[78]!==B||t[79]!==ge?(ie=h.jsxs("div",{className:"flex items-center gap-3",children:[B,ge]}),t[78]=B,t[79]=ge,t[80]=ie):ie=t[80],t[81]===Symbol.for("react.memo_cache_sentinel")?(we=h.jsx(Le,{content:"Find Previous",children:h.jsx(Pe,{"data-testid":"find-prev-button",size:"xs",variant:"secondary",onClick:SN,children:h.jsx(It,{className:"w-4 h-4"})})}),t[81]=we):we=t[81],t[82]===Symbol.for("react.memo_cache_sentinel")?(ve=h.jsx(Le,{content:"Find Next",children:h.jsx(Pe,{"data-testid":"find-next-button",size:"xs",variant:"secondary",onClick:CN,children:h.jsx(Jc,{className:"w-4 h-4"})})}),t[82]=ve):ve=t[82],t[83]!==y||t[84]!==s?(ae=s!=null&&y==null&&h.jsxs("span",{className:"text-sm",children:[s.count," matches"]}),t[83]=y,t[84]=s,t[85]=ae):ae=t[85],t[86]!==y||t[87]!==s?(Se=s!=null&&y!=null&&h.jsxs("span",{className:"text-sm",children:[y+1," of ",s.count]}),t[86]=y,t[87]=s,t[88]=Se):Se=t[88],t[89]!==ae||t[90]!==Se?(pe=h.jsxs("div",{className:"flex items-center gap-2",children:[we,ve,ae,Se]}),t[89]=ae,t[90]=Se,t[91]=pe):pe=t[91],t[92]!==l?(Te=l.getHotkey("cell.findAndReplace"),t[92]=l,t[93]=Te):Te=t[93],t[94]!==Te.key?(Re=h.jsxs("div",{className:"text-xs text-muted-foreground flex gap-1 mt-2",children:["Press"," ",h.jsx(fm,{shortcut:Te.key})," ","again to open the native browser search."]}),t[94]=Te.key,t[95]=Re):Re=t[95],t[96]!==j||t[97]!==ie||t[98]!==pe||t[99]!==Re||t[100]!==S?(We=h.jsx(eB,{restoreFocus:!0,autoFocus:!0,children:h.jsxs("div",{onFocus:x,onClick:vN,onBlur:v,className:"fixed top-0 right-0 w-[500px] flex flex-col bg-[var(--sage-1)] p-4 z-50 mt-2 mr-3 rounded-md shadow-lg border gap-2 print:hidden",onKeyDown:S,children:[j,ie,pe,Re]})}),t[96]=j,t[97]=ie,t[98]=pe,t[99]=Re,t[100]=S,t[101]=We):We=t[101],We};function vN(t){t.stopPropagation(),t.preventDefault()}function kN(t){t.key==="Enter"&&(t.shiftKey?zg():yd())}function SN(){return zg()}function CN(){return yd()}const Ug=t=>{const e=X.c(38),{resetOnBlur:n,placeholderText:o,initialValue:r,flexibleWidth:s,onNameChange:i,className:a}=t,l=n!==void 0&&n,c=r===void 0?null:r,d=s!==void 0&&s,[u,f]=A.useState(c);let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],e[0]=m):m=e[0];const[_,g]=A.useState(m),[p,b]=A.useState(!1),y=A.useRef(null),x=A.useRef(!1);let v,S,k;e[1]!==c?(v=()=>{f(c)},S=[c],e[1]=c,e[2]=v,e[3]=S):(v=e[2],S=e[3]),A.useEffect(v,S),e[4]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{b(!0)},e[4]=k):k=e[4];const E=k;let j;e[5]!==c||e[6]!==l?(j=Q=>{var ce;(ce=Q.relatedTarget)!=null&&ce.closest(".filename-input")||(b(!1),l&&f(c))},e[5]=c,e[6]=l,e[7]=j):j=e[7];const I=j;let T;e[8]!==u?(T=An.dirname(u||""),e[8]=u,e[9]=T):T=e[9];const M=T,L=An.basename(u||""),B=_.filter(Q=>An.basename(Q.path).startsWith(L));let O,z;e[10]!==M||e[11]!==p?(O=async()=>{if(!p)return void g([]);const Q=await u4({path:M});g(Q.files)},z=[M,p],e[10]=M,e[11]=p,e[12]=O,e[13]=z):(O=e[12],z=e[13]);const{isPending:F}=qn(O,z),V=function(Q,ce,me){if(Q&&!Q.endsWith("/")&&((wm("markdown")?new Set(["py","md","markdown","qmd"]):new Set(["py"])).has(An.extension(Q))||(Q=Q.endsWith(".")?`${Q}py`:Q.endsWith(".p")?`${Q}y`:`${Q}.py`),!ce.some(de=>de.path===Q||An.basename(de.path)===Q)&&!(me&&(me===Q||An.basename(me)===Q))))return Q}(u,_,c),R=(V||B.length>0)&&h.jsxs(hm,{className:"font-mono",children:[!F&&h.jsx(xc,{children:"No files"}),V&&h.jsxs(go,{variant:"success",className:"py-2 px-3",onSelect:()=>{var Q;V&&(x.current=!0,i(V),(Q=y.current)==null||Q.blur())},children:[h.jsx(vp,{className:"w-4 h-4 mr-2"})," ",h.jsxs("span",{className:"text-sm",children:[c?"Rename to: ":"Save as: ",h.jsx("span",{className:"font-medium text-sm",children:An.basename(V)})]})]},"_rename_"),B.map(Q=>{const ce=Q.isDirectory?"directory":c4(Q.path),me=d4[ce];return h.jsxs(go,{variant:Q.isDirectory?"default":"muted",className:"py-2 px-3",onSelect:()=>{Q.isDirectory?f(`${Q.path}/`):f(Q.path)},children:[h.jsx(me,{className:"w-4 h-4 mr-2"})," ",An.basename(Q.path)]},Q.path)})]}),C=10*Math.max(20,(u==null?void 0:u.length)||(o==null?void 0:o.length)||0),H=p?u||"":c||"";let N,$,Y;e[14]!==d||e[15]!==C?(N=d?{maxWidth:C}:void 0,e[14]=d,e[15]=C,e[16]=N):N=e[16],e[17]!==a?($=Oe(a,"w-full px-4 py-1 my-1 h-9 font-mono text-foreground/60"),e[17]=a,e[18]=$):$=e[18],e[19]!==o||e[20]!==H||e[21]!==N||e[22]!==$?(Y=h.jsx(tB,{children:h.jsx(sa,{"data-testid":"dir-completion-input",tabIndex:-1,rootClassName:"border-none justify-center px-1",spellCheck:"false",value:H,onKeyDown:NN,icon:null,ref:y,onValueChange:f,placeholder:o,autoComplete:"off",style:N,className:$})}),e[19]=o,e[20]=H,e[21]=N,e[22]=$,e[23]=Y):Y=e[23];const Z=R&&"group-focus-within:block";let q,re,ne,oe,G;return e[24]!==Z?(q=Oe("p-0 w-full min-w-80 max-w-80vw hidden",Z),e[24]=Z,e[25]=q):q=e[25],e[26]!==R||e[27]!==q?(re=h.jsx(Gs,{side:"bottom",className:q,portal:!1,children:R}),e[26]=R,e[27]=q,e[28]=re):re=e[28],e[29]!==Y||e[30]!==re?(ne=h.jsxs(hm,{children:[Y,re]}),e[29]=Y,e[30]=re,e[31]=ne):ne=e[31],e[32]!==I||e[33]!==ne?(oe=h.jsx(Nc,{onFocus:E,onBlur:I,shouldFilter:!1,id:"filename-input",className:"bg-transparent group filename-input",children:ne}),e[32]=I,e[33]=ne,e[34]=oe):oe=e[34],e[35]!==p||e[36]!==oe?(G=h.jsx(jc,{children:h.jsx(zr,{open:p,modal:!1,children:oe})}),e[35]=p,e[36]=oe,e[37]=G):G=e[37],G};function NN(t){t.key==="Escape"&&t.currentTarget.blur()}const jN=t=>{const e=X.c(33),n=()=>{la(new Blob([o()],{type:"text/plain"}),`${t.proposedName}.json`)},o=tt(AN);let r,s,i,a,l,c,d,u,f,m,_,g,p,b,y,x,v;return e[0]!==n||e[1]!==t?(r=S=>{S.preventDefault(),n(),t.closeModal()},e[0]=n,e[1]=t,e[2]=r):r=e[2],e[3]!==t?(s=S=>{S.key==="Escape"&&t.closeModal()},e[3]=t,e[4]=s):s=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(lr,{className:"text-accent-foreground mb-6",children:"Download unsaved changes?"}),e[5]=i):i=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(a={wordBreak:"break-word"},e[6]=a):a=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx("p",{children:"This app has unsaved changes. To recover:"}),c={paddingBottom:"10px"},e[7]=l,e[8]=c):(l=e[7],c=e[8]),e[9]!==t.proposedName?(d=h.jsxs("li",{style:c,children:['Click the "Download" button. This will download a file called\xA0',h.jsxs("code",{children:[t.proposedName,".json"]}),". This file contains your code."]}),e[9]=t.proposedName,e[10]=d):d=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(u={paddingBottom:"10px"},e[11]=u):u=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(f={display:"block",padding:"10px"},e[12]=f):f=e[12],e[13]!==t.proposedName?(m=h.jsxs("code",{style:f,children:["marimo recover ",t.proposedName,".json ",">"," ",t.proposedName,".py"]}),e[13]=t.proposedName,e[14]=m):m=e[14],e[15]!==t.proposedName?(_=h.jsxs("code",{children:[t.proposedName,".py"]}),e[15]=t.proposedName,e[16]=_):_=e[16],e[17]!==_||e[18]!==m?(g=h.jsxs("li",{style:u,children:["In your terminal, type",m,"to overwrite ",_," with the recovered changes."]}),e[17]=_,e[18]=m,e[19]=g):g=e[19],e[20]!==g||e[21]!==d?(p=h.jsx(Ds,{className:"markdown break-words",style:a,children:h.jsxs("div",{className:"prose dark:prose-invert",children:[l,h.jsxs("ol",{children:[d,g]})]})}),e[20]=g,e[21]=d,e[22]=p):p=e[22],e[23]!==t.closeModal?(b=h.jsx(Pe,{"aria-label":"Cancel",variant:"secondary","data-testid":"cancel-recovery-button",onClick:t.closeModal,children:"Cancel"}),e[23]=t.closeModal,e[24]=b):b=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx(Pe,{"data-testid":"download-recovery-button","aria-label":"Download",variant:"default",type:"submit",children:"Download"}),e[25]=y):y=e[25],e[26]!==b?(x=h.jsxs(na,{children:[b,y]}),e[26]=b,e[27]=x):x=e[27],e[28]!==r||e[29]!==s||e[30]!==p||e[31]!==x?(v=h.jsx(dr,{className:"w-fit",children:h.jsxs("form",{onSubmit:r,onKeyDown:s,children:[i,p,x]})}),e[28]=r,e[29]=s,e[30]=p,e[31]=x,e[32]=v):v=e[32],v},EN=t=>{const e=X.c(12),{filename:n,needsSave:o}=t,{openModal:r,closeModal:s}=Wn();let i;e[0]!==n?(i=n===null?"app":An.basename(n).split(".")[0],e[0]=n,e[1]=i):i=e[1];const a=i;let l;e[2]!==s||e[3]!==o||e[4]!==r||e[5]!==a?(l=()=>{o&&r(h.jsx(jN,{proposedName:a,closeModal:s}))},e[2]=s,e[3]=o,e[4]=r,e[5]=a,e[6]=l):l=e[6];const c=l;let d;Gt("global.save",c),e[7]===Symbol.for("react.memo_cache_sentinel")?(d=pn("global.save"),e[7]=d):d=e[7];const u=o?"yellow":"gray";let f,m;return e[8]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(Ma,{strokeWidth:1.5,size:18}),e[8]=f):f=e[8],e[9]!==c||e[10]!==u?(m=h.jsx(Le,{content:d,children:h.jsx(wn,{onClick:c,id:"save-button","aria-label":"Save",className:"rectangle",color:u,children:f})}),e[9]=c,e[10]=u,e[11]=m):m=e[11],m};function IN(t){return{id:t.id,name:t.name,code:t.code,code_hash:null,config:{column:0,...t.config}}}function AN(){const t=po(),e=Im(t),n={version:"1",metadata:{marimo_version:l4()},cells:e.map(IN)};return JSON.stringify(n,null,2)}const wd=5e3;async function TN(){await sB({download:!1})}async function MN(){await rB({download:!1,includeCode:!0,files:AS.INSTANCE.filenames()})}async function ON(){await oB({download:!1})}const vd=en(void 0),Vg=en(t=>{const e=t(vd);return function(n,o,r){if(!r)return!1;const{cellIds:s,cellData:i}=n,a=s.inOrderIds.map(u=>i[u]),l=a.map(u=>u.code),c=a.map(u=>u.config),d=a.map(u=>u.name);return!(h4(l,r.codes)&&h4(d,r.names)&&ca(c,r.configs)&&ca(o.selectedLayout,r.layout.selectedLayout)&&ca(o.layoutData,r.layout.layoutData))}(t(fc),t(zS),e)});function DN(t){return JSON.stringify(t)}const RN=t=>{const e=X.c(15),{kioskMode:n}=t,o=Cm(),r=$e(Vg),s=$e(mn).state===mt.CLOSED,{saveOrNameNotebook:i,saveIfNotebookIsPersistent:a}=Hg();let l,c,d;e[0]!==n||e[1]!==a?(l={onSave:a,kioskMode:n},e[0]=n,e[1]=a,e[2]=l):l=e[2],function(p){const b=X.c(14),y=$e(p4),x=Ec(),[v]=fn(mn),S=$e(Vg);let k,E;if(b[0]!==x){const L=Im(x);k=L.map(BN),E=L.map(zN),b[0]=x,b[1]=k,b[2]=E}else k=b[1],E=b[2];const j=E;let I;b[3]!==x?(I=m4(x),b[3]=x,b[4]=I):I=b[4];const T=I;let M;b[5]!==y||b[6]!==j||b[7]!==k||b[8]!==T||b[9]!==v||b[10]!==S||b[11]!==p.kioskMode||b[12]!==p.onSave?(M={onSave:p.onSave,needsSave:S,codes:k,cellConfigs:T,cellNames:j,connStatus:v,config:y,kioskMode:p.kioskMode},b[5]=y,b[6]=j,b[7]=k,b[8]=T,b[9]=v,b[10]=S,b[11]=p.kioskMode,b[12]=p.onSave,b[13]=M):M=b[13],function(L){const B=X.c(21),{codes:O,cellConfigs:z,config:F,connStatus:V,cellNames:R,needsSave:C,kioskMode:H,onSave:N}=L,$=A.useRef(null);let Y;B[0]!==O?(Y=O.join(":"),B[0]=O,B[1]=Y):Y=B[1];const Z=Y;let q;B[2]!==z?(q=z.map(DN).join(":"),B[2]=z,B[3]=q):q=B[3];const re=q;let ne;B[4]!==R?(ne=R.join(":"),B[4]=R,B[5]=ne):ne=B[5];const oe=ne;let G,Q;B[6]!==F||B[7]!==V.state||B[8]!==H||B[9]!==C||B[10]!==N?(G=()=>{if(!H)return F.autosave==="after_delay"&&($.current!==null&&clearTimeout($.current),C&&V.state===mt.OPEN&&($.current=setTimeout(N,F.autosave_delay))),()=>{$.current!==null&&clearTimeout($.current)}},B[6]=F,B[7]=V.state,B[8]=H,B[9]=C,B[10]=N,B[11]=G):G=B[11],B[12]!==re||B[13]!==oe||B[14]!==Z||B[15]!==F||B[16]!==V.state||B[17]!==H||B[18]!==C||B[19]!==N?(Q=[Z,re,oe,F,V.state,N,H,C],B[12]=re,B[13]=oe,B[14]=Z,B[15]=F,B[16]=V.state,B[17]=H,B[18]=C,B[19]=N,B[20]=Q):Q=B[20],A.useEffect(G,Q)}(M)}(l),function(){const p=X.c(6),b=$e(nB),{state:y}=$e(mn),x=b.auto_download.includes("markdown"),v=b.auto_download.includes("html"),S=b.auto_download.includes("ipynb"),k=!x||y!==mt.OPEN,E=!v||y!==mt.OPEN,j=!S||y!==mt.OPEN;let I,T,M;p[0]!==k?(I={delayMs:wd,whenVisible:!0,disabled:k},p[0]=k,p[1]=I):I=p[1],Sa(ON,I),p[2]!==E?(T={delayMs:wd,whenVisible:!0,disabled:E},p[2]=E,p[3]=T):T=p[3],Sa(MN,T),p[4]!==j?(M={delayMs:wd,whenVisible:!0,disabled:j},p[4]=j,p[5]=M):M=p[5],Sa(TN,M)}(),e[3]!==r?(c=p=>{if(r)return p.preventDefault(),p.returnValue="You have unsaved changes. Are you sure you want to leave?",p.returnValue},e[3]=r,e[4]=c):c=e[4],lm(window,"beforeunload",c),e[5]!==i?(d=p=>{p.preventDefault(),p.stopPropagation(),i()},e[5]=i,e[6]=d):d=e[6];const u=d;if(Gt("global.save",i),s){let p;return e[7]!==o||e[8]!==r?(p=h.jsx(EN,{filename:o,needsSave:r}),e[7]=o,e[8]=r,e[9]=p):p=e[9],p}let f;e[10]===Symbol.for("react.memo_cache_sentinel")?(f=pn("global.save"),e[10]=f):f=e[10];const m=r?"yellow":"hint-green";let _,g;return e[11]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx(Ma,{strokeWidth:1.5,size:18}),e[11]=_):_=e[11],e[12]!==u||e[13]!==m?(g=h.jsx(Le,{content:f,children:h.jsx(wn,{"data-testid":"save-button",id:"save-button",shape:"rectangle",color:m,onClick:u,children:_})}),e[12]=u,e[13]=m,e[14]=g):g=e[14],g};function Hg(){const t=X.c(19),{openModal:e,closeModal:n,openAlert:o}=Wn(),r=Zt(vd),s=f4(),i=iB();let a;t[0]!==o||t[1]!==r||t[2]!==i?(a=(p,b)=>{const y=po(),x=Im(y),v=x.map(FN),S=x.map(LN),k=x.map(PN),E=m4(y),j=i.get(mn),I=i.get(p4),T=i.get(zS);i.get(Fs)||S.length!==0&&(j.state===mt.OPEN?(Qt.log("saving to ",p),aB({cellIds:v,codes:S,names:k,filename:p,configs:E,layout:i$(),persist:!0}).then(()=>{b&&I.format_on_save&&g4(),r({names:k,codes:S,configs:E,layout:T})})):o("Failed to save notebook: not connected to a kernel."))},t[0]=o,t[1]=r,t[2]=i,t[3]=a):a=t[3];const l=tt(a);let c;t[4]!==l||t[5]!==i?(c=p=>{const b=p!==void 0&&p,y=i.get(_4),x=i.get(mn);$g(y)&&x.state===mt.OPEN&&l(y,b)},t[4]=l,t[5]=i,t[6]=c):c=t[6];const d=tt(c);let u;t[7]!==l||t[8]!==s?(u=p=>{s(p).then(b=>{b!==null&&l(b,!0)})},t[7]=l,t[8]=s,t[9]=u):u=t[9];const f=u;let m;t[10]!==n||t[11]!==f||t[12]!==e||t[13]!==d||t[14]!==i?(m=()=>{const p=i.get(_4),b=i.get(mn);d(!0),$g(p)||b.state===mt.CLOSED||e(h.jsx(UN,{onClose:n,onSave:f}))},t[10]=n,t[11]=f,t[12]=e,t[13]=d,t[14]=i,t[15]=m):m=t[15];const _=tt(m);let g;return t[16]!==d||t[17]!==_?(g={saveOrNameNotebook:_,saveIfNotebookIsPersistent:d},t[16]=d,t[17]=_,t[18]=g):g=t[18],g}function PN(t){return t.name}function LN(t){return t.code}function FN(t){return t.id}function $g(t){return t!==null&&!t.startsWith("/tmp")&&!t.startsWith("/var/folders")&&!t.includes("AppData\\Local\\Temp")}function zN(t){return t.name}function BN(t){return t.code}const UN=t=>{const e=X.c(17),{onClose:n,onSave:o}=t,[r,s]=A.useState();let i;e[0]!==n||e[1]!==o?(i=p=>{s(p),p.trim()&&(o(p),n())},e[0]=n,e[1]=o,e[2]=i):i=e[2];const a=i;let l,c,d,u;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(lr,{children:"Save notebook"}),e[3]=l):l=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Fr,{className:"text-md pt-6 px-1",children:"Save as"}),e[4]=c):c=e[4],e[5]!==a?(d=h.jsxs("div",{className:"flex flex-col",children:[c,h.jsx(Ug,{onNameChange:a,placeholderText:"filename",className:"missing-filename"})]}),e[5]=a,e[6]=d):d=e[6],e[7]!==n?(u=h.jsx(Pe,{"data-testid":"cancel-save-dialog-button","aria-label":"Cancel",variant:"secondary",onClick:n,children:"Cancel"}),e[7]=n,e[8]=u):u=e[8];const f=!r;let m,_,g;return e[9]!==f?(m=h.jsx(Pe,{"data-testid":"submit-save-dialog-button","aria-label":"Save",variant:"default",disabled:f,type:"submit",children:"Save"}),e[9]=f,e[10]=m):m=e[10],e[11]!==u||e[12]!==m?(_=h.jsxs(na,{children:[u,m]}),e[11]=u,e[12]=m,e[13]=_):_=e[13],e[14]!==d||e[15]!==_?(g=h.jsxs(dr,{children:[l,d,_]}),e[14]=d,e[15]=_,e[16]=g):g=e[16],g};function Wg(t){const e=X.c(3),[n,o]=A.useState(!1);let r,s;return e[0]!==t?(r=()=>{if(!t)return;o(!1);const i=setTimeout(()=>{o(!0)},200);return()=>clearTimeout(i)},s=[t],e[0]=t,e[1]=r,e[2]=s):(r=e[1],s=e[2]),A.useEffect(r,s),t&&n}const ci=t=>{const{children:e}=t;return $e(Fs)?null:e},VN=t=>{const{children:e}=t;return $e(Fs)?e:null},HN=()=>{const t=X.c(6),e=Zt(pd);let n;t[0]!==e?(n=()=>e($N),t[0]=e,t[1]=n):n=t[1];const o=n;let r,s,i;return t[2]===Symbol.for("react.memo_cache_sentinel")?(r=pn("global.commandPalette"),t[2]=r):r=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsx(Xc,{strokeWidth:1.5,size:18}),t[3]=s):s=t[3],t[4]!==o?(i=h.jsx(Le,{content:r,children:h.jsx(wn,{"data-testid":"command-palette-button",onClick:o,shape:"rectangle",color:"hint-green",children:s})}),t[4]=o,t[5]=i):i=t[5],i};function $N(t){return!t}const WN=t=>{const e=X.c(40),{presenting:n,onTogglePresenting:o,onInterrupt:r,onRun:s,closed:i,running:a,appConfig:l}=t,c=l.width,d=$e(r4),u=$e(lB),{undoDeleteCell:f}=Ft();let m,_,g=null;if(!i&&d){let O,z;e[0]===Symbol.for("react.memo_cache_sentinel")?(O=h.jsx(ad,{size:16,strokeWidth:1.5}),e[0]=O):O=e[0],e[1]!==f?(z=h.jsx(Le,{content:"Undo cell deletion",children:h.jsx(wn,{"data-testid":"undo-delete-cell",size:"medium",color:"hint-green",shape:"circle",onClick:f,children:O})}),e[1]=f,e[2]=z):z=e[2],g=z}e[3]!==n?(m=!n&&h.jsx(wN,{}),e[3]=n,e[4]=m):m=e[4],e[5]!==i||e[6]!==n?(_=!i&&h.jsxs("div",{className:YN,children:[n&&h.jsx(zC,{}),h.jsx(uN,{}),h.jsx(GH,{}),h.jsx(YH,{description:"This will terminate the Python kernel. You'll lose all data that's in memory."})]}),e[5]=i,e[6]=n,e[7]=_):_=e[7];const p=c==="compact"&&"xl:flex-row items-end";let b,y,x,v,S,k,E,j,I,T,M,L,B;return e[8]!==p?(b=Oe(JN,p),e[8]=p,e[9]=b):b=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx(ci,{children:h.jsx(RN,{kioskMode:!1})}),e[10]=y):y=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(x=pn("global.hideCode"),e[11]=x):x=e[11],e[12]!==n?(v=n?h.jsx(s4,{strokeWidth:1.5,size:18}):h.jsx(td,{strokeWidth:1.5,size:18}),e[12]=n,e[13]=v):v=e[13],e[14]!==o||e[15]!==v?(S=h.jsx(Le,{content:x,children:h.jsx(wn,{"data-testid":"hide-code-button",id:"preview-button",shape:"rectangle",color:"hint-green",onClick:o,children:v})}),e[14]=o,e[15]=v,e[16]=S):S=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(j=h.jsx(HN,{}),k=h.jsx(JH,{}),E=h.jsx("div",{}),e[17]=k,e[18]=E,e[19]=j):(k=e[17],E=e[18],j=e[19]),e[20]!==i||e[21]!==r||e[22]!==a?(I=!i&&h.jsx(GN,{running:a,onInterrupt:r}),e[20]=i,e[21]=r,e[22]=a,e[23]=I):I=e[23],e[24]!==i||e[25]!==u||e[26]!==s?(T=!i&&h.jsx(qN,{needsRun:u,onRun:s}),e[24]=i,e[25]=u,e[26]=s,e[27]=T):T=e[27],e[28]!==I||e[29]!==T||e[30]!==g?(M=h.jsx(ci,{children:h.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[g,I,T]})}),e[28]=I,e[29]=T,e[30]=g,e[31]=M):M=e[31],e[32]!==M||e[33]!==b||e[34]!==S?(L=h.jsxs("div",{className:b,children:[y,S,j,k,E,M]}),e[32]=M,e[33]=b,e[34]=S,e[35]=L):L=e[35],e[36]!==m||e[37]!==L||e[38]!==_?(B=h.jsxs(h.Fragment,{children:[m,_,L]}),e[36]=m,e[37]=L,e[38]=_,e[39]=B):B=e[39],B},qN=t=>{const e=X.c(8),{needsRun:n,onRun:o}=t,r=$e(b4);if(n){let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=pn("global.runStale"),e[0]=l):l=e[0];const c=r?o:void 0,d=!r;let u,f;return e[1]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx(ri,{strokeWidth:1.5,size:16}),e[1]=u):u=e[1],e[2]!==c||e[3]!==d?(f=h.jsx(Le,{content:l,children:h.jsx(wn,{"data-testid":"run-button",size:"medium",color:"yellow",shape:"circle",onClick:c,disabled:d,children:u})}),e[2]=c,e[3]=d,e[4]=f):f=e[4],f}const s=!r;let i,a;return e[5]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(ri,{strokeWidth:1.5,size:16}),e[5]=i):i=e[5],e[6]!==s?(a=h.jsx(Le,{content:"Nothing to run",children:h.jsx(wn,{"data-testid":"run-button",className:"inactive-button",color:"disabled",size:"medium",shape:"circle",disabled:s,children:i})}),e[6]=s,e[7]=a):a=e[7],a},GN=t=>{const e=X.c(8),{running:n,onInterrupt:o}=t,r=Wg(n);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=pn("global.interrupt"),e[0]=s):s=e[0];const i=!r&&"inactive-button active:shadow-xsSolid";let a;e[1]!==i?(a=Oe(i),e[1]=i,e[2]=a):a=e[2];const l=r?"yellow":"disabled",c=r?o:In.NOOP;let d,u;return e[3]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx(km,{strokeWidth:1.5,size:16}),e[3]=d):d=e[3],e[4]!==a||e[5]!==l||e[6]!==c?(u=h.jsx(Le,{content:s,children:h.jsx(wn,{className:a,"data-testid":"interrupt-button",size:"medium",color:l,shape:"circle",onClick:c,children:d})}),e[4]=a,e[5]=l,e[6]=c,e[7]=u):u=e[7],u},YN="absolute top-3 right-5 m-0 flex items-center space-x-3 min-h-[28px] no-print pointer-events-auto z-30 print:hidden",JN="absolute bottom-5 right-5 flex flex-col gap-2 items-center no-print pointer-events-auto z-30 print:hidden",KN=t=>{const e=X.c(7),{filename:n}=t,o=f4();let r;e[0]!==n?(r=n?An.basename(n):"untitled marimo app",e[0]=n,e[1]=r):r=e[1];const s=n===null?"missing-filename":"filename";let i;return e[2]!==n||e[3]!==o||e[4]!==r||e[5]!==s?(i=h.jsx(Ug,{placeholderText:r,initialValue:n,onNameChange:o,flexibleWidth:!0,resetOnBlur:!0,"data-testid":"filename-input",className:s}),e[2]=n,e[3]=o,e[4]=r,e[5]=s,e[6]=i):i=e[6],i},XN={display:"none"};function ZN(t){let{id:e,value:n}=t;return K.createElement("div",{id:e,style:XN},n)}function QN(t){let{id:e,announcement:n,ariaLiveType:o="assertive"}=t;return K.createElement("div",{id:e,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":o,"aria-atomic":!0},n)}const qg=A.createContext(null),ej={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},tj={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function nj(t){let{announcements:e=tj,container:n,hiddenTextDescribedById:o,screenReaderInstructions:r=ej}=t;const{announce:s,announcement:i}=function(){const[u,f]=A.useState("");return{announce:A.useCallback(m=>{m!=null&&f(m)},[]),announcement:u}}(),a=da("DndLiveRegion"),[l,c]=A.useState(!1);if(A.useEffect(()=>{c(!0)},[]),function(u){const f=A.useContext(qg);A.useEffect(()=>{if(!f)throw new Error("useDndMonitor must be used within a children of <DndContext>");return f(u)},[u,f])}(A.useMemo(()=>({onDragStart(u){let{active:f}=u;s(e.onDragStart({active:f}))},onDragMove(u){let{active:f,over:m}=u;e.onDragMove&&s(e.onDragMove({active:f,over:m}))},onDragOver(u){let{active:f,over:m}=u;s(e.onDragOver({active:f,over:m}))},onDragEnd(u){let{active:f,over:m}=u;s(e.onDragEnd({active:f,over:m}))},onDragCancel(u){let{active:f,over:m}=u;s(e.onDragCancel({active:f,over:m}))}}),[s,e])),!l)return null;const d=K.createElement(K.Fragment,null,K.createElement(ZN,{id:o,value:r.draggable}),K.createElement(QN,{id:a,announcement:i}));return n?fa.createPortal(d,n):d}var Ut;function Ha(){}function Gg(t,e){return A.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ut||(Ut={}));const Kn=Object.freeze({x:0,y:0});function kd(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Sd(t,e){let{data:{value:n}}=t,{data:{value:o}}=e;return n-o}function oj(t,e){let{data:{value:n}}=t,{data:{value:o}}=e;return o-n}function Cd(t){let{left:e,top:n,height:o,width:r}=t;return[{x:e,y:n},{x:e+r,y:n},{x:e,y:n+o},{x:e+r,y:n+o}]}function Nd(t,e){if(!t||t.length===0)return null;const[n]=t;return e?n[e]:n}function Yg(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+.5*t.width,y:n+.5*t.height}}const jd=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const r=Yg(e,e.left,e.top),s=[];for(const i of o){const{id:a}=i,l=n.get(a);if(l){const c=kd(Yg(l),r);s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(Sd)};function rj(t,e){const n=Math.max(e.top,t.top),o=Math.max(e.left,t.left),r=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),i=r-o,a=s-n;if(o<r&&n<s){const l=e.width*e.height,c=t.width*t.height,d=i*a;return Number((d/(l+c-d)).toFixed(4))}return 0}const Jg=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const r=[];for(const s of o){const{id:i}=s,a=n.get(i);if(a){const l=rj(a,e);l>0&&r.push({id:i,data:{droppableContainer:s,value:l}})}}return r.sort(oj)};function sj(t,e){const{top:n,left:o,bottom:r,right:s}=e;return n<=t.y&&t.y<=r&&o<=t.x&&t.x<=s}function Kg(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Kn}function ij(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.reduce((s,i)=>({...s,top:s.top+t*i.y,bottom:s.bottom+t*i.y,left:s.left+t*i.x,right:s.right+t*i.x}),{...e})}}const aj=ij(1),lj={ignoreTransform:!1};function Hr(t,e){e===void 0&&(e=lj);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=Vo(t).getComputedStyle(t);c&&(n=function(u,f,m){const _=function(E){if(E.startsWith("matrix3d(")){const j=E.slice(9,-1).split(/, /);return{x:+j[12],y:+j[13],scaleX:+j[0],scaleY:+j[5]}}if(E.startsWith("matrix(")){const j=E.slice(7,-1).split(/, /);return{x:+j[4],y:+j[5],scaleX:+j[0],scaleY:+j[3]}}return null}(f);if(!_)return u;const{scaleX:g,scaleY:p,x:b,y}=_,x=u.left-b-(1-g)*parseFloat(m),v=u.top-y-(1-p)*parseFloat(m.slice(m.indexOf(" ")+1)),S=g?u.width/g:u.width,k=p?u.height/p:u.height;return{width:S,height:k,top:v,right:x+S,bottom:v+k,left:x}}(n,c,d))}const{top:o,left:r,width:s,height:i,bottom:a,right:l}=n;return{top:o,left:r,width:s,height:i,bottom:a,right:l}}function Xg(t){return Hr(t,{ignoreTransform:!0})}function $a(t,e){const n=[];return t?function o(r){if(e!=null&&n.length>=e||!r)return n;if(x4(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Ac(r)||cB(r)||n.includes(r))return n;const s=Vo(t).getComputedStyle(r);return r!==t&&function(i,a){a===void 0&&(a=Vo(i).getComputedStyle(i));const l=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const d=a[c];return typeof d=="string"&&l.test(d)})}(r,s)&&n.push(r),function(i,a){return a===void 0&&(a=Vo(i).getComputedStyle(i)),a.position==="fixed"}(r,s)?n:o(r.parentNode)}(t):n}function Zg(t){const[e]=$a(t,1);return e??null}function Ed(t){return Mm&&t?Om(t)?t:hB(t)?x4(t)||t===Ys(t).scrollingElement?window:Ac(t)?t:null:null:null}function Qg(t){return Om(t)?t.scrollX:t.scrollLeft}function e1(t){return Om(t)?t.scrollY:t.scrollTop}function Id(t){return{x:Qg(t),y:e1(t)}}var Ht;function t1(t){return!(!Mm||!t)&&t===document.scrollingElement}function n1(t){const e={x:0,y:0},n=t1(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},o={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height};return{isTop:t.scrollTop<=e.y,isLeft:t.scrollLeft<=e.x,isBottom:t.scrollTop>=o.y,isRight:t.scrollLeft>=o.x,maxScroll:o,minScroll:e}}(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ht||(Ht={}));const cj={x:.2,y:.2};function dj(t,e,n,o,r){let{top:s,left:i,right:a,bottom:l}=n;o===void 0&&(o=10),r===void 0&&(r=cj);const{isTop:c,isBottom:d,isLeft:u,isRight:f}=n1(t),m={x:0,y:0},_={x:0,y:0},g=e.height*r.y,p=e.width*r.x;return!c&&s<=e.top+g?(m.y=Ht.Backward,_.y=o*Math.abs((e.top+g-s)/g)):!d&&l>=e.bottom-g&&(m.y=Ht.Forward,_.y=o*Math.abs((e.bottom-g-l)/g)),!f&&a>=e.right-p?(m.x=Ht.Forward,_.x=o*Math.abs((e.right-p-a)/p)):!u&&i<=e.left+p&&(m.x=Ht.Backward,_.x=o*Math.abs((e.left+p-i)/p)),{direction:m,speed:_}}function uj(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:e,left:n,right:o,bottom:r}=t.getBoundingClientRect();return{top:e,left:n,right:o,bottom:r,width:t.clientWidth,height:t.clientHeight}}function o1(t){return t.reduce((e,n)=>Js(e,Id(n)),Kn)}const hj=[["x",["left","right"],function(t){return t.reduce((e,n)=>e+Qg(n),0)}],["y",["top","bottom"],function(t){return t.reduce((e,n)=>e+e1(n),0)}]];class Ad{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=$a(n),r=o1(o);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,i,a]of hj)for(const l of i)Object.defineProperty(this,l,{get:()=>{const c=a(o),d=r[s]-c;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class di{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...n)})},this.target=e}add(e,n,o){var r;(r=this.target)==null||r.addEventListener(e,n,o),this.listeners.push([e,n,o])}}function Td(t,e){const n=Math.abs(t.x),o=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+o**2)>e:"x"in e&&"y"in e?n>e.x&&o>e.y:"x"in e?n>e.x:"y"in e&&o>e.y}var Dn,dt;function r1(t){t.preventDefault()}function fj(t){t.stopPropagation()}(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Dn||(Dn={})),function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"}(dt||(dt={}));const s1={start:[dt.Space,dt.Enter],cancel:[dt.Esc],end:[dt.Space,dt.Enter,dt.Tab]},mj=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case dt.Right:return{...n,x:n.x+25};case dt.Left:return{...n,x:n.x-25};case dt.Down:return{...n,y:n.y+25};case dt.Up:return{...n,y:n.y-25}}};class Md{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new di(Ys(n)),this.windowListeners=new di(Vo(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Dn.Resize,this.handleCancel),this.windowListeners.add(Dn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Dn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,o=e.node.current;o&&function(r,s){if(s===void 0&&(s=Hr),!r)return;const{top:i,left:a,bottom:l,right:c}=s(r);Zg(r)&&(l<=0||c<=0||i>=window.innerHeight||a>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}(o),n(Kn)}handleKeyDown(e){if(Am(e)){const{active:n,context:o,options:r}=this.props,{keyboardCodes:s=s1,coordinateGetter:i=mj,scrollBehavior:a="smooth"}=r,{code:l}=e;if(s.end.includes(l))return void this.handleEnd(e);if(s.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:c}=o.current,d=c?{x:c.left,y:c.top}:Kn;this.referenceCoordinates||(this.referenceCoordinates=d);const u=i(e,{active:n,context:o.current,currentCoordinates:d});if(u){const f=ha(u,d),m={x:0,y:0},{scrollableAncestors:_}=o.current;for(const g of _){const p=e.code,{isTop:b,isRight:y,isLeft:x,isBottom:v,maxScroll:S,minScroll:k}=n1(g),E=uj(g),j={x:Math.min(p===dt.Right?E.right-E.width/2:E.right,Math.max(p===dt.Right?E.left:E.left+E.width/2,u.x)),y:Math.min(p===dt.Down?E.bottom-E.height/2:E.bottom,Math.max(p===dt.Down?E.top:E.top+E.height/2,u.y))},I=p===dt.Right&&!y||p===dt.Left&&!x,T=p===dt.Down&&!v||p===dt.Up&&!b;if(I&&j.x!==u.x){const M=g.scrollLeft+f.x,L=p===dt.Right&&M<=S.x||p===dt.Left&&M>=k.x;if(L&&!f.y)return void g.scrollTo({left:M,behavior:a});m.x=L?g.scrollLeft-M:p===dt.Right?g.scrollLeft-S.x:g.scrollLeft-k.x,m.x&&g.scrollBy({left:-m.x,behavior:a});break}if(T&&j.y!==u.y){const M=g.scrollTop+f.y,L=p===dt.Down&&M<=S.y||p===dt.Up&&M>=k.y;if(L&&!f.x)return void g.scrollTo({top:M,behavior:a});m.y=L?g.scrollTop-M:p===dt.Down?g.scrollTop-S.y:g.scrollTop-k.y,m.y&&g.scrollBy({top:-m.y,behavior:a});break}}this.handleMove(e,Js(ha(u,this.referenceCoordinates),m))}}}handleMove(e,n){const{onMove:o}=this.props;e.preventDefault(),o(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function i1(t){return!!(t&&"distance"in t)}function a1(t){return!!(t&&"delay"in t)}Md.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:o=s1,onActivation:r}=e,{active:s}=n;const{code:i}=t.nativeEvent;if(o.start.includes(i)){const a=s.activatorNode.current;return(!a||t.target===a)&&(t.preventDefault(),r==null||r({event:t.nativeEvent}),!0)}return!1}}];class Od{constructor(e,n,o){var r;o===void 0&&(o=function(a){const{EventTarget:l}=Vo(a);return a instanceof l?a:Ys(a)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:i}=s;this.props=e,this.events=n,this.document=Ys(i),this.documentListeners=new di(this.document),this.listeners=new di(o),this.windowListeners=new di(Vo(i)),this.initialCoordinates=(r=Tm(s))!=null?r:Kn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:o}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Dn.Resize,this.handleCancel),this.windowListeners.add(Dn.DragStart,r1),this.windowListeners.add(Dn.VisibilityChange,this.handleCancel),this.windowListeners.add(Dn.ContextMenu,r1),this.documentListeners.add(Dn.Keydown,this.handleKeydown),n){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(a1(n))return this.timeoutId=setTimeout(this.handleStart,n.delay),void this.handlePending(n);if(i1(n))return void this.handlePending(n)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:o,onPending:r}=this.props;r(o,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Dn.Click,fj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Dn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:o,initialCoordinates:r,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!r)return;const l=(n=Tm(e))!=null?n:Kn,c=ha(r,l);if(!o&&a){if(i1(a)){if(a.tolerance!=null&&Td(c,a.tolerance))return this.handleCancel();if(Td(c,a.distance))return this.handleStart()}return a1(a)&&Td(c,a.tolerance)?this.handleCancel():void this.handlePending(a,c)}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===dt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const pj={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Dd extends Od{constructor(e){const{event:n}=e,o=Ys(n.target);super(e,pj,o)}}Dd.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;return!(!n.isPrimary||n.button!==0)&&(o==null||o({event:n}),!0)}}];const gj={move:{name:"mousemove"},end:{name:"mouseup"}};var Rd;(function(t){t[t.RightClick=2]="RightClick"})(Rd||(Rd={})),(class extends Od{constructor(t){super(t,gj,Ys(t.event.target))}}).activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;return n.button!==Rd.RightClick&&(o==null||o({event:n}),!0)}}];const Pd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var ui,Wa;function _j(t){let{acceleration:e,activator:n=ui.Pointer,canScroll:o,draggingRect:r,enabled:s,interval:i=5,order:a=Wa.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:d,delta:u,threshold:f}=t;const m=function(k){let{delta:E,disabled:j}=k;const I=Tc(E);return ma(T=>{if(j||!I||!T)return bj;const M={x:Math.sign(E.x-I.x),y:Math.sign(E.y-I.y)};return{x:{[Ht.Backward]:T.x[Ht.Backward]||M.x===-1,[Ht.Forward]:T.x[Ht.Forward]||M.x===1},y:{[Ht.Backward]:T.y[Ht.Backward]||M.y===-1,[Ht.Forward]:T.y[Ht.Forward]||M.y===1}}},[j,E,I])}({delta:u,disabled:!s}),[_,g]=dB(),p=A.useRef({x:0,y:0}),b=A.useRef({x:0,y:0}),y=A.useMemo(()=>{switch(n){case ui.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case ui.DraggableRect:return r}},[n,r,l]),x=A.useRef(null),v=A.useCallback(()=>{const k=x.current;if(!k)return;const E=p.current.x*b.current.x,j=p.current.y*b.current.y;k.scrollBy(E,j)},[]),S=A.useMemo(()=>a===Wa.TreeOrder?[...c].reverse():c,[a,c]);A.useEffect(()=>{if(s&&c.length&&y){for(const k of S){if((o==null?void 0:o(k))===!1)continue;const E=c.indexOf(k),j=d[E];if(!j)continue;const{direction:I,speed:T}=dj(k,j,y,e,f);for(const M of["x","y"])m[M][I[M]]||(T[M]=0,I[M]=0);if(T.x>0||T.y>0)return g(),x.current=k,_(v,i),p.current=T,void(b.current=I)}p.current={x:0,y:0},b.current={x:0,y:0},g()}else g()},[e,v,o,g,s,i,JSON.stringify(y),JSON.stringify(m),_,c,S,d,JSON.stringify(f)])}(class extends Od{constructor(t){super(t,Pd)}static setup(){return window.addEventListener(Pd.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Pd.move.name,t)};function t(){}}}).activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;const{touches:r}=n;return!(r.length>1)&&(o==null||o({event:n}),!0)}}],function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"}(ui||(ui={})),function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"}(Wa||(Wa={}));const bj={x:{[Ht.Backward]:!1,[Ht.Forward]:!1},y:{[Ht.Backward]:!1,[Ht.Forward]:!1}};var hi,Ld;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(hi||(hi={})),function(t){t.Optimized="optimized"}(Ld||(Ld={}));const l1=new Map;function c1(t,e){return ma(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function qa(t){let{callback:e,disabled:n}=t;const o=y4(e),r=A.useMemo(()=>{if(n||typeof window>"u"||window.ResizeObserver===void 0)return;const{ResizeObserver:s}=window;return new s(o)},[n]);return A.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function yj(t){return new Ad(Hr(t),t)}function d1(t,e,n){e===void 0&&(e=yj);const[o,r]=A.useState(null);function s(){r(l=>{if(!t)return null;var c;if(t.isConnected===!1)return(c=l??n)!=null?c:null;const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const i=function(l){let{callback:c,disabled:d}=l;const u=y4(c),f=A.useMemo(()=>{if(d||typeof window>"u"||window.MutationObserver===void 0)return;const{MutationObserver:m}=window;return new m(u)},[u,d]);return A.useEffect(()=>()=>f==null?void 0:f.disconnect(),[f]),f}({callback(l){if(t)for(const c of l){const{type:d,target:u}=c;if(d==="childList"&&u instanceof HTMLElement&&u.contains(t)){s();break}}}}),a=qa({callback:s});return fr(()=>{s(),t?(a==null||a.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[t]),o}const u1=[];function h1(t,e){e===void 0&&(e=[]);const n=A.useRef(null);return A.useEffect(()=>{n.current=null},e),A.useEffect(()=>{const o=t!==Kn;o&&!n.current&&(n.current=t),!o&&n.current&&(n.current=null)},[t]),n.current?ha(t,n.current):Kn}function f1(t){return A.useMemo(()=>t?function(e){const n=e.innerWidth,o=e.innerHeight;return{top:0,left:0,right:n,bottom:o,width:n,height:o}}(t):null,[t])}const m1=[];function xj(t){let{measure:e}=t;const[n,o]=A.useState(null),r=A.useCallback(c=>{for(const{target:d}of c)if(Ac(d)){o(u=>{const f=e(d);return u?{...u,width:f.width,height:f.height}:f});break}},[e]),s=qa({callback:r}),i=A.useCallback(c=>{const d=function(u){if(!u)return null;if(u.children.length>1)return u;const f=u.children[0];return Ac(f)?f:u}(c);s==null||s.disconnect(),d&&(s==null||s.observe(d)),o(d?e(d):null)},[e,s]),[a,l]=Ic(i);return A.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const wj=[{sensor:Dd,options:{}},{sensor:Md,options:{}}],vj={current:{}},Ga={draggable:{measure:Xg},droppable:{measure:Xg,strategy:hi.WhileDragging,frequency:Ld.Optimized},dragOverlay:{measure:Hr}};class fi extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,o;return(n=(o=this.get(e))==null?void 0:o.node.current)!=null?n:void 0}}const kj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new fi,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ha},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ga,measureDroppableContainers:Ha,windowRect:null,measuringScheduled:!1},Sj={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ha,draggableNodes:new Map,over:null,measureDroppableContainers:Ha},Ya=A.createContext(Sj),p1=A.createContext(kj);function Cj(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new fi}}}function Nj(t,e){switch(e.type){case Ut.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ut.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ut.DragEnd:case Ut.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ut.RegisterDroppable:{const{element:n}=e,{id:o}=n,r=new fi(t.droppable.containers);return r.set(o,n),{...t,droppable:{...t.droppable,containers:r}}}case Ut.SetDroppableDisabled:{const{id:n,key:o,disabled:r}=e,s=t.droppable.containers.get(n);if(!s||o!==s.key)return t;const i=new fi(t.droppable.containers);return i.set(n,{...s,disabled:r}),{...t,droppable:{...t.droppable,containers:i}}}case Ut.UnregisterDroppable:{const{id:n,key:o}=e,r=t.droppable.containers.get(n);if(!r||o!==r.key)return t;const s=new fi(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function jj(t){let{disabled:e}=t;const{active:n,activatorEvent:o,draggableNodes:r}=A.useContext(Ya),s=Tc(o),i=Tc(n==null?void 0:n.id);return A.useEffect(()=>{if(!e&&!o&&s&&i!=null){if(!Am(s)||document.activeElement===s.target)return;const a=r.get(i);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[l.current,c.current]){if(!d)continue;const u=uB(d);if(u){u.focus();break}}})}},[o,e,r,i,s]),null}const g1=A.createContext({...Kn,scaleX:1,scaleY:1});var Wo;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Wo||(Wo={}));const Ej=A.memo(function(t){var e,n,o,r;let{id:s,accessibility:i,autoScroll:a=!0,children:l,sensors:c=wj,collisionDetection:d=Jg,measuring:u,modifiers:f,...m}=t;const _=A.useReducer(Nj,void 0,Cj),[g,p]=_,[b,y]=function(){const[le]=A.useState(()=>new Set),Ee=A.useCallback(Ie=>(le.add(Ie),()=>le.delete(Ie)),[le]);return[A.useCallback(Ie=>{let{type:Ve,event:Ge}=Ie;le.forEach(De=>{var Je;return(Je=De[Ve])==null?void 0:Je.call(De,Ge)})},[le]),Ee]}(),[x,v]=A.useState(Wo.Uninitialized),S=x===Wo.Initialized,{draggable:{active:k,nodes:E,translate:j},droppable:{containers:I}}=g,T=k!=null?E.get(k):null,M=A.useRef({initial:null,translated:null}),L=A.useMemo(()=>{var le;return k!=null?{id:k,data:(le=T==null?void 0:T.data)!=null?le:vj,rect:M}:null},[k,T]),B=A.useRef(null),[O,z]=A.useState(null),[F,V]=A.useState(null),R=ua(m,Object.values(m)),C=da("DndDescribedBy",s),H=A.useMemo(()=>I.getEnabled(),[I]),N=($=u,A.useMemo(()=>({draggable:{...Ga.draggable,...$==null?void 0:$.draggable},droppable:{...Ga.droppable,...$==null?void 0:$.droppable},dragOverlay:{...Ga.dragOverlay,...$==null?void 0:$.dragOverlay}}),[$==null?void 0:$.draggable,$==null?void 0:$.droppable,$==null?void 0:$.dragOverlay]));var $;const{droppableRects:Y,measureDroppableContainers:Z,measuringScheduled:q}=function(le,Ee){let{dragging:Ie,dependencies:Ve,config:Ge}=Ee;const[De,Je]=A.useState(null),{frequency:ot,measure:Xe,strategy:rt}=Ge,gt=A.useRef(le),xt=function(){switch(rt){case hi.Always:return!1;case hi.BeforeDragging:return Ie;default:return!Ie}}(),Ot=ua(xt),wt=A.useCallback(function(hn){hn===void 0&&(hn=[]),Ot.current||Je(rn=>rn===null?hn:rn.concat(hn.filter(Xt=>!rn.includes(Xt))))},[Ot]),Vt=A.useRef(null),Cn=ma(hn=>{if(xt&&!Ie)return l1;if(!hn||hn===l1||gt.current!==le||De!=null){const rn=new Map;for(let Xt of le){if(!Xt)continue;if(De&&De.length>0&&!De.includes(Xt.id)&&Xt.rect.current){rn.set(Xt.id,Xt.rect.current);continue}const eo=Xt.node.current,mo=eo?new Ad(Xe(eo),eo):null;Xt.rect.current=mo,mo&&rn.set(Xt.id,mo)}return rn}return hn},[le,De,Ie,xt,Xe]);return A.useEffect(()=>{gt.current=le},[le]),A.useEffect(()=>{xt||wt()},[Ie,xt]),A.useEffect(()=>{De&&De.length>0&&Je(null)},[JSON.stringify(De)]),A.useEffect(()=>{xt||typeof ot!="number"||Vt.current!==null||(Vt.current=setTimeout(()=>{wt(),Vt.current=null},ot))},[ot,xt,wt,...Ve]),{droppableRects:Cn,measureDroppableContainers:wt,measuringScheduled:De!=null}}(H,{dragging:S,dependencies:[j.x,j.y],config:N.droppable}),re=function(le,Ee){const Ie=Ee!=null?le.get(Ee):void 0,Ve=Ie?Ie.node.current:null;return ma(Ge=>{var De;return Ee==null?null:(De=Ve??Ge)!=null?De:null},[Ve,Ee])}(E,k),ne=A.useMemo(()=>F?Tm(F):null,[F]),oe=function(){const le=(O==null?void 0:O.autoScrollEnabled)===!1,Ee=typeof a=="object"?a.enabled===!1:a===!1,Ie=S&&!le&&!Ee;return typeof a=="object"?{...a,enabled:Ie}:{enabled:Ie}}(),G=function(le,Ee){return c1(le,Ee)}(re,N.draggable.measure);(function(le){let{activeNode:Ee,measure:Ie,initialRect:Ve,config:Ge=!0}=le;const De=A.useRef(!1),{x:Je,y:ot}=typeof Ge=="boolean"?{x:Ge,y:Ge}:Ge;fr(()=>{if(!Je&&!ot||!Ee)return void(De.current=!1);if(De.current||!Ve)return;const Xe=Ee==null?void 0:Ee.node.current;if(!Xe||Xe.isConnected===!1)return;const rt=Kg(Ie(Xe),Ve);if(Je||(rt.x=0),ot||(rt.y=0),De.current=!0,Math.abs(rt.x)>0||Math.abs(rt.y)>0){const gt=Zg(Xe);gt&&gt.scrollBy({top:rt.y,left:rt.x})}},[Ee,Je,ot,Ve,Ie])})({activeNode:k!=null?E.get(k):null,config:oe.layoutShiftCompensation,initialRect:G,measure:N.draggable.measure});const Q=d1(re,N.draggable.measure,G),ce=d1(re?re.parentElement:null),me=A.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),de=I.getNodeFor((e=me.current.over)==null?void 0:e.id),ge=xj({measure:N.dragOverlay.measure}),ie=(n=ge.nodeRef.current)!=null?n:re,we=S?(o=ge.rect)!=null?o:Q:null,ve=!!(ge.nodeRef.current&&ge.rect),ae=Kg(Se=ve?null:Q,c1(Se));var Se;const pe=f1(ie?Vo(ie):null),Te=function(le){const Ee=A.useRef(le),Ie=ma(Ve=>le?Ve&&Ve!==u1&&le&&Ee.current&&le.parentNode===Ee.current.parentNode?Ve:$a(le):u1,[le]);return A.useEffect(()=>{Ee.current=le},[le]),Ie}(S?de??re:null),Re=function(le,Ee){Ee===void 0&&(Ee=Hr);const[Ie]=le,Ve=f1(Ie?Vo(Ie):null),[Ge,De]=A.useState(m1);function Je(){De(()=>le.length?le.map(Xe=>t1(Xe)?Ve:new Ad(Ee(Xe),Xe)):m1)}const ot=qa({callback:Je});return fr(()=>{ot==null||ot.disconnect(),Je(),le.forEach(Xe=>ot==null?void 0:ot.observe(Xe))},[le]),Ge}(Te),We=function(le,Ee){let{transform:Ie,...Ve}=Ee;return le!=null&&le.length?le.reduce((Ge,De)=>De({transform:Ge,...Ve}),Ie):Ie}(f,{transform:{x:j.x-ae.x,y:j.y-ae.y,scaleX:1,scaleY:1},activatorEvent:F,active:L,activeNodeRect:Q,containerNodeRect:ce,draggingNodeRect:we,over:me.current.over,overlayNodeRect:ge.rect,scrollableAncestors:Te,scrollableAncestorRects:Re,windowRect:pe}),ze=ne?Js(ne,j):null,Ce=function(le){const[Ee,Ie]=A.useState(null),Ve=A.useRef(le),Ge=A.useCallback(De=>{const Je=Ed(De.target);Je&&Ie(ot=>ot?(ot.set(Je,Id(Je)),new Map(ot)):null)},[]);return A.useEffect(()=>{const De=Ve.current;if(le!==De){Je(De);const ot=le.map(Xe=>{const rt=Ed(Xe);return rt?(rt.addEventListener("scroll",Ge,{passive:!0}),[rt,Id(rt)]):null}).filter(Xe=>Xe!=null);Ie(ot.length?new Map(ot):null),Ve.current=le}return()=>{Je(le),Je(De)};function Je(ot){ot.forEach(Xe=>{const rt=Ed(Xe);rt==null||rt.removeEventListener("scroll",Ge)})}},[Ge,le]),A.useMemo(()=>le.length?Ee?Array.from(Ee.values()).reduce((De,Je)=>Js(De,Je),Kn):o1(le):Kn,[le,Ee])}(Te),qe=h1(Ce),Ze=h1(Ce,[Q]),at=Js(We,qe),te=we?aj(we,We):null,je=L&&te?d({active:L,collisionRect:te,droppableRects:Y,droppableContainers:H,pointerCoordinates:ze}):null,Me=Nd(je,"id"),[Ue,J]=A.useState(null),he=function(le,Ee,Ie){return{...le,scaleX:Ee&&Ie?Ee.width/Ie.width:1,scaleY:Ee&&Ie?Ee.height/Ie.height:1}}(ve?We:Js(We,Ze),(r=Ue==null?void 0:Ue.rect)!=null?r:null,Q),_e=A.useRef(null),ue=A.useCallback((le,Ee)=>{let{sensor:Ie,options:Ve}=Ee;if(B.current==null)return;const Ge=E.get(B.current);if(!Ge)return;const De=le.nativeEvent,Je=new Ie({active:B.current,activeNode:Ge,event:De,options:Ve,context:me,onAbort(Xe){if(!E.get(Xe))return;const{onDragAbort:rt}=R.current,gt={id:Xe};rt==null||rt(gt),b({type:"onDragAbort",event:gt})},onPending(Xe,rt,gt,xt){if(!E.get(Xe))return;const{onDragPending:Ot}=R.current,wt={id:Xe,constraint:rt,initialCoordinates:gt,offset:xt};Ot==null||Ot(wt),b({type:"onDragPending",event:wt})},onStart(Xe){const rt=B.current;if(rt==null)return;const gt=E.get(rt);if(!gt)return;const{onDragStart:xt}=R.current,Ot={activatorEvent:De,active:{id:rt,data:gt.data,rect:M}};fa.unstable_batchedUpdates(()=>{xt==null||xt(Ot),v(Wo.Initializing),p({type:Ut.DragStart,initialCoordinates:Xe,active:rt}),b({type:"onDragStart",event:Ot}),z(_e.current),V(De)})},onMove(Xe){p({type:Ut.DragMove,coordinates:Xe})},onEnd:ot(Ut.DragEnd),onCancel:ot(Ut.DragCancel)});function ot(Xe){return async function(){const{active:rt,collisions:gt,over:xt,scrollAdjustedTranslate:Ot}=me.current;let wt=null;if(rt&&Ot){const{cancelDrop:Vt}=R.current;wt={activatorEvent:De,active:rt,collisions:gt,delta:Ot,over:xt},Xe===Ut.DragEnd&&typeof Vt=="function"&&await Promise.resolve(Vt(wt))&&(Xe=Ut.DragCancel)}B.current=null,fa.unstable_batchedUpdates(()=>{p({type:Xe}),v(Wo.Uninitialized),J(null),z(null),V(null),_e.current=null;const Vt=Xe===Ut.DragEnd?"onDragEnd":"onDragCancel";if(wt){const Cn=R.current[Vt];Cn==null||Cn(wt),b({type:Vt,event:wt})}})}}_e.current=Je},[E]),ye=A.useCallback((le,Ee)=>(Ie,Ve)=>{const Ge=Ie.nativeEvent,De=E.get(Ve);if(B.current!==null||!De||Ge.dndKit||Ge.defaultPrevented)return;const Je={active:De};le(Ie,Ee.options,Je)===!0&&(Ge.dndKit={capturedBy:Ee.sensor},B.current=Ve,ue(Ie,Ee))},[E,ue]),Ne=function(le,Ee){return A.useMemo(()=>le.reduce((Ie,Ve)=>{const{sensor:Ge}=Ve;return[...Ie,...Ge.activators.map(De=>({eventName:De.eventName,handler:Ee(De.handler,Ve)}))]},[]),[le,Ee])}(c,ye);(function(le){A.useEffect(()=>{if(!Mm)return;const Ee=le.map(Ie=>{let{sensor:Ve}=Ie;return Ve.setup==null?void 0:Ve.setup()});return()=>{for(const Ie of Ee)Ie==null||Ie()}},le.map(Ee=>{let{sensor:Ie}=Ee;return Ie}))})(c),fr(()=>{Q&&x===Wo.Initializing&&v(Wo.Initialized)},[Q,x]),A.useEffect(()=>{const{onDragMove:le}=R.current,{active:Ee,activatorEvent:Ie,collisions:Ve,over:Ge}=me.current;if(!Ee||!Ie)return;const De={active:Ee,activatorEvent:Ie,collisions:Ve,delta:{x:at.x,y:at.y},over:Ge};fa.unstable_batchedUpdates(()=>{le==null||le(De),b({type:"onDragMove",event:De})})},[at.x,at.y]),A.useEffect(()=>{const{active:le,activatorEvent:Ee,collisions:Ie,droppableContainers:Ve,scrollAdjustedTranslate:Ge}=me.current;if(!le||B.current==null||!Ee||!Ge)return;const{onDragOver:De}=R.current,Je=Ve.get(Me),ot=Je&&Je.rect.current?{id:Je.id,rect:Je.rect.current,data:Je.data,disabled:Je.disabled}:null,Xe={active:le,activatorEvent:Ee,collisions:Ie,delta:{x:Ge.x,y:Ge.y},over:ot};fa.unstable_batchedUpdates(()=>{J(ot),De==null||De(Xe),b({type:"onDragOver",event:Xe})})},[Me]),fr(()=>{me.current={activatorEvent:F,active:L,activeNode:re,collisionRect:te,collisions:je,droppableRects:Y,draggableNodes:E,draggingNode:ie,draggingNodeRect:we,droppableContainers:I,over:Ue,scrollableAncestors:Te,scrollAdjustedTranslate:at},M.current={initial:we,translated:te}},[L,re,je,te,E,ie,we,Y,I,Ue,Te,at]),_j({...oe,delta:j,draggingRect:te,pointerCoordinates:ze,scrollableAncestors:Te,scrollableAncestorRects:Re});const Be=A.useMemo(()=>({active:L,activeNode:re,activeNodeRect:Q,activatorEvent:F,collisions:je,containerNodeRect:ce,dragOverlay:ge,draggableNodes:E,droppableContainers:I,droppableRects:Y,over:Ue,measureDroppableContainers:Z,scrollableAncestors:Te,scrollableAncestorRects:Re,measuringConfiguration:N,measuringScheduled:q,windowRect:pe}),[L,re,Q,F,je,ce,ge,E,I,Y,Ue,Z,Te,Re,N,q,pe]),et=A.useMemo(()=>({activatorEvent:F,activators:Ne,active:L,activeNodeRect:Q,ariaDescribedById:{draggable:C},dispatch:p,draggableNodes:E,over:Ue,measureDroppableContainers:Z}),[F,Ne,L,Q,p,C,E,Ue,Z]);return K.createElement(qg.Provider,{value:y},K.createElement(Ya.Provider,{value:et},K.createElement(p1.Provider,{value:Be},K.createElement(g1.Provider,{value:he},l)),K.createElement(jj,{disabled:(i==null?void 0:i.restoreFocus)===!1})),K.createElement(nj,{...i,hiddenTextDescribedById:C}))}),Ij=A.createContext(null),_1="button";function Aj(t){let{id:e,data:n,disabled:o=!1,attributes:r}=t;const s=da("Draggable"),{activators:i,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:f}=A.useContext(Ya),{role:m=_1,roleDescription:_="draggable",tabIndex:g=0}=r??{},p=(l==null?void 0:l.id)===e,b=A.useContext(p?g1:Ij),[y,x]=Ic(),[v,S]=Ic(),k=function(j,I){return A.useMemo(()=>j.reduce((T,M)=>{let{eventName:L,handler:B}=M;return T[L]=O=>{B(O,I)},T},{}),[j,I])}(i,e),E=ua(n);return fr(()=>(u.set(e,{id:e,key:s,node:y,activatorNode:v,data:E}),()=>{const j=u.get(e);j&&j.key===s&&u.delete(e)}),[u,e]),{active:l,activatorEvent:a,activeNodeRect:c,attributes:A.useMemo(()=>({role:m,tabIndex:g,"aria-disabled":o,"aria-pressed":!(!p||m!==_1)||void 0,"aria-roledescription":_,"aria-describedby":d.draggable}),[o,m,g,p,_,d.draggable]),isDragging:p,listeners:o?void 0:k,node:y,over:f,setNodeRef:x,setActivatorNodeRef:S,transform:b}}const Tj={timeout:25};function b1(t,e,n){const o=t.slice();return o.splice(n<0?o.length+n:n,0,o.splice(e,1)[0]),o}function Mj(t,e){return t.reduce((n,o,r)=>{const s=e.get(o);return s&&(n[r]=s),n},Array(t.length))}function Ja(t){return t!==null&&t>=0}const Ka={scaleX:1,scaleY:1},Oj=t=>{var e;let{rects:n,activeNodeRect:o,activeIndex:r,overIndex:s,index:i}=t;const a=(e=n[r])!=null?e:o;if(!a)return null;const l=function(c,d,u){const f=c[d],m=c[d-1],_=c[d+1];return!f||!m&&!_?0:u<d?m?f.left-(m.left+m.width):_.left-(f.left+f.width):_?_.left-(f.left+f.width):f.left-(m.left+m.width)}(n,i,r);if(i===r){const c=n[s];return c?{x:r<s?c.left+c.width-(a.left+a.width):c.left-a.left,y:0,...Ka}:null}return i>r&&i<=s?{x:-a.width-l,y:0,...Ka}:i<r&&i>=s?{x:a.width+l,y:0,...Ka}:{x:0,y:0,...Ka}},y1=t=>{let{rects:e,activeIndex:n,overIndex:o,index:r}=t;const s=b1(e,o,n),i=e[r],a=s[r];return a&&i?{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}:null},Xa={scaleX:1,scaleY:1},Dj=t=>{var e;let{activeIndex:n,activeNodeRect:o,index:r,rects:s,overIndex:i}=t;const a=(e=s[n])!=null?e:o;if(!a)return null;if(r===n){const c=s[i];return c?{x:0,y:n<i?c.top+c.height-(a.top+a.height):c.top-a.top,...Xa}:null}const l=function(c,d,u){const f=c[d],m=c[d-1],_=c[d+1];return f?u<d?m?f.top-(m.top+m.height):_?_.top-(f.top+f.height):0:_?_.top-(f.top+f.height):m?f.top-(m.top+m.height):0:0}(s,r,n);return r>n&&r<=i?{x:0,y:-a.height-l,...Xa}:r<n&&r>=i?{x:0,y:a.height+l,...Xa}:{x:0,y:0,...Xa}},x1="Sortable",w1=K.createContext({activeIndex:-1,containerId:x1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:y1,disabled:{draggable:!1,droppable:!1}});function v1(t){let{children:e,id:n,items:o,strategy:r=y1,disabled:s=!1}=t;const{active:i,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:d}=A.useContext(p1),u=da(x1,n),f=a.rect!==null,m=A.useMemo(()=>o.map(k=>typeof k=="object"&&"id"in k?k.id:k),[o]),_=i!=null,g=i?m.indexOf(i.id):-1,p=c?m.indexOf(c.id):-1,b=A.useRef(m),y=!function(k,E){if(k===E)return!0;if(k.length!==E.length)return!1;for(let j=0;j<k.length;j++)if(k[j]!==E[j])return!1;return!0}(m,b.current),x=p!==-1&&g===-1||y,v=function(k){return typeof k=="boolean"?{draggable:k,droppable:k}:k}(s);fr(()=>{y&&_&&d(m)},[y,m,_,d]),A.useEffect(()=>{b.current=m},[m]);const S=A.useMemo(()=>({activeIndex:g,containerId:u,disabled:v,disableTransforms:x,items:m,overIndex:p,useDragOverlay:f,sortedRects:Mj(m,l),strategy:r}),[g,u,v.draggable,v.droppable,x,m,p,l,f,r]);return K.createElement(w1.Provider,{value:S},e)}const Rj=t=>{let{id:e,items:n,activeIndex:o,overIndex:r}=t;return b1(n,o,r).indexOf(e)},Pj=t=>{let{containerId:e,isSorting:n,wasDragging:o,index:r,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:c}=t;return!(!c||!o)&&(a===s||r!==i)&&(!!n||i!==r&&e===l)},Lj={duration:200,easing:"ease"},k1="transform",Fj=Mc.Transition.toString({property:k1,duration:0,easing:"linear"}),zj={roleDescription:"sortable"};function S1(t){let{animateLayoutChanges:e=Pj,attributes:n,disabled:o,data:r,getNewIndex:s=Rj,id:i,strategy:a,resizeObserverConfig:l,transition:c=Lj}=t;const{items:d,containerId:u,activeIndex:f,disabled:m,disableTransforms:_,sortedRects:g,overIndex:p,useDragOverlay:b,strategy:y}=A.useContext(w1),x=function(de,ge){var ie,we;return typeof de=="boolean"?{draggable:de,droppable:!1}:{draggable:(ie=de==null?void 0:de.draggable)!=null?ie:ge.draggable,droppable:(we=de==null?void 0:de.droppable)!=null?we:ge.droppable}}(o,m),v=d.indexOf(i),S=A.useMemo(()=>({sortable:{containerId:u,index:v,items:d},...r}),[u,r,v,d]),k=A.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:E,node:j,isOver:I,setNodeRef:T}=function(de){let{data:ge,disabled:ie=!1,id:we,resizeObserverConfig:ve}=de;const ae=da("Droppable"),{active:Se,dispatch:pe,over:Te,measureDroppableContainers:Re}=A.useContext(Ya),We=A.useRef({disabled:ie}),ze=A.useRef(!1),Ce=A.useRef(null),qe=A.useRef(null),{disabled:Ze,updateMeasurementsFor:at,timeout:te}={...Tj,...ve},je=ua(at??we),Me=qa({callback:A.useCallback(()=>{ze.current?(qe.current!=null&&clearTimeout(qe.current),qe.current=setTimeout(()=>{Re(Array.isArray(je.current)?je.current:[je.current]),qe.current=null},te)):ze.current=!0},[te]),disabled:Ze||!Se}),Ue=A.useCallback((ue,ye)=>{Me&&(ye&&(Me.unobserve(ye),ze.current=!1),ue&&Me.observe(ue))},[Me]),[J,he]=Ic(Ue),_e=ua(ge);return A.useEffect(()=>{Me&&J.current&&(Me.disconnect(),ze.current=!1,Me.observe(J.current))},[J,Me]),A.useEffect(()=>(pe({type:Ut.RegisterDroppable,element:{id:we,key:ae,disabled:ie,node:J,rect:Ce,data:_e}}),()=>pe({type:Ut.UnregisterDroppable,key:ae,id:we})),[we]),A.useEffect(()=>{ie!==We.current.disabled&&(pe({type:Ut.SetDroppableDisabled,id:we,key:ae,disabled:ie}),We.current.disabled=ie)},[we,ae,ie,pe]),{active:Se,rect:Ce,isOver:(Te==null?void 0:Te.id)===we,node:J,over:Te,setNodeRef:he}}({id:i,data:S,disabled:x.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...l}}),{active:M,activatorEvent:L,activeNodeRect:B,attributes:O,setNodeRef:z,listeners:F,isDragging:V,over:R,setActivatorNodeRef:C,transform:H}=Aj({id:i,data:S,attributes:{...zj,...n},disabled:x.draggable}),N=fB(T,z),$=!!M,Y=$&&!_&&Ja(f)&&Ja(p),Z=!b&&V,q=Z&&Y?H:null,re=Y?q??(a??y)({rects:g,activeNodeRect:B,activeIndex:f,overIndex:p,index:v}):null,ne=Ja(f)&&Ja(p)?s({id:i,items:d,activeIndex:f,overIndex:p}):v,oe=M==null?void 0:M.id,G=A.useRef({activeId:oe,items:d,newIndex:ne,containerId:u}),Q=d!==G.current.items,ce=e({active:M,containerId:u,isDragging:V,isSorting:$,id:i,index:v,items:d,newIndex:G.current.newIndex,previousItems:G.current.items,previousContainerId:G.current.containerId,transition:c,wasDragging:G.current.activeId!=null}),me=function(de){let{disabled:ge,index:ie,node:we,rect:ve}=de;const[ae,Se]=A.useState(null),pe=A.useRef(ie);return fr(()=>{if(!ge&&ie!==pe.current&&we.current){const Te=ve.current;if(Te){const Re=Hr(we.current,{ignoreTransform:!0}),We={x:Te.left-Re.left,y:Te.top-Re.top,scaleX:Te.width/Re.width,scaleY:Te.height/Re.height};(We.x||We.y)&&Se(We)}}ie!==pe.current&&(pe.current=ie)},[ge,ie,we,ve]),A.useEffect(()=>{ae&&Se(null)},[ae]),ae}({disabled:!ce,index:v,node:j,rect:E});return A.useEffect(()=>{$&&G.current.newIndex!==ne&&(G.current.newIndex=ne),u!==G.current.containerId&&(G.current.containerId=u),d!==G.current.items&&(G.current.items=d)},[$,ne,u,d]),A.useEffect(()=>{if(oe===G.current.activeId)return;if(oe!=null&&G.current.activeId==null)return void(G.current.activeId=oe);const de=setTimeout(()=>{G.current.activeId=oe},50);return()=>clearTimeout(de)},[oe]),{active:M,activeIndex:f,attributes:O,data:S,rect:E,index:v,newIndex:ne,items:d,isOver:I,isSorting:$,isDragging:V,listeners:F,node:j,overIndex:p,over:R,setNodeRef:N,setActivatorNodeRef:C,setDroppableNodeRef:T,setDraggableNodeRef:z,transform:me??re,transition:function(){if(me||Q&&G.current.newIndex===v)return Fj;if(!(Z&&!Am(L)||!c)&&($||ce))return Mc.Transition.toString({...c,property:k1})}()}}function Za(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Bj=[dt.Down,dt.Right,dt.Up,dt.Left],Uj=(t,e)=>{let{context:{active:n,collisionRect:o,droppableRects:r,droppableContainers:s,over:i,scrollableAncestors:a}}=e;if(Bj.includes(t.code)){if(t.preventDefault(),!n||!o)return;const l=[];s.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const f=r.get(u.id);if(f)switch(t.code){case dt.Down:o.top<f.top&&l.push(u);break;case dt.Up:o.top>f.top&&l.push(u);break;case dt.Left:o.left>f.left&&l.push(u);break;case dt.Right:o.left<f.left&&l.push(u)}});const c=(u=>{let{collisionRect:f,droppableRects:m,droppableContainers:_}=u;const g=Cd(f),p=[];for(const b of _){const{id:y}=b,x=m.get(y);if(x){const v=Cd(x),S=g.reduce((E,j,I)=>E+kd(v[I],j),0),k=Number((S/4).toFixed(4));p.push({id:y,data:{droppableContainer:b,value:k}})}}return p.sort(Sd)})({collisionRect:o,droppableRects:r,droppableContainers:l});let d=Nd(c,"id");if(d===(i==null?void 0:i.id)&&c.length>1&&(d=c[1].id),d!=null){const u=s.get(n.id),f=s.get(d),m=f?r.get(f.id):null,_=f==null?void 0:f.node.current;if(_&&m&&u&&f){const g=$a(_).some((v,S)=>a[S]!==v),p=C1(u,f),b=function(v,S){return!Za(v)||!Za(S)||!C1(v,S)?!1:v.data.current.sortable.index<S.data.current.sortable.index}(u,f),y=g||!p?{x:0,y:0}:{x:b?o.width-m.width:0,y:b?o.height-m.height:0},x={x:m.left,y:m.top};return y.x&&y.y?x:ha(x,y)}}}};function C1(t,e){return!(!Za(t)||!Za(e))&&t.data.current.sortable.containerId===e.data.current.sortable.containerId}function Qa(t){return t===mt.OPEN}function qo(t){return t===mt.CLOSED||t===mt.CLOSING||t===mt.CONNECTING}function Fd(t){switch(t){case mt.CLOSED:return"App disconnected";case mt.CONNECTING:return"Connecting to a runtime ...";case mt.CLOSING:return"App disconnecting...";case mt.OPEN:default:return""}}const Vj=mB("rounded-full shadow-xsSolid border p-[5px] transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 [&>svg]:size-3 active:shadow-none bg-background",{variants:{variant:{default:"hover:bg-accent hover:text-accent-foreground",stale:"bg-[var(--yellow-3)] hover:bg-[var(--yellow-4)] text-[var(--yellow-11)]",green:"hover:bg-[var(--grass-2)] hover:text-[var(--grass-11)] hover:border-[var(--grass-7)],",disabled:"opacity-50 cursor-not-allowed",danger:"hover:bg-[var(--red-3)] hover:text-[var(--red-11)]"}},defaultVariants:{variant:"default"}}),mi=t=>{const e=X.c(21);let n,o,r,s,i;e[0]!==t?({children:n,tooltip:s,disabled:r,variant:i,...o}=t,e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=s,e[5]=i):(n=e[1],o=e[2],r=e[3],s=e[4],i=e[5]);const a=r!==void 0&&r;let l,c,d;e[6]!==a||e[7]!==o?(l=f=>{var m;a||((m=o.onClick)==null||m.call(o,f))},e[6]=a,e[7]=o,e[8]=l):l=e[8],e[9]!==o.className||e[10]!==i?(c=Oe(Vj({variant:i}),o.className),e[9]=o.className,e[10]=i,e[11]=c):c=e[11],e[12]!==n||e[13]!==a||e[14]!==o||e[15]!==l||e[16]!==c?(d=h.jsx("button",{disabled:a,...o,onClick:l,onMouseDown:$n.preventFocus,className:c,children:n}),e[12]=n,e[13]=a,e[14]=o,e[15]=l,e[16]=c,e[17]=d):d=e[17];const u=d;if(s){let f;return e[18]!==u||e[19]!==s?(f=h.jsx(Le,{content:s,side:"top",delayDuration:200,usePortal:!1,children:u}),e[18]=u,e[19]=s,e[20]=f):f=e[20],f}return u},Hj=t=>{const e=X.c(5),{children:n,className:o}=t;let r,s;return e[0]!==o?(r=Oe("flex items-center gap-1 bg-background m-[2px] rounded-full",o),e[0]=o,e[1]=r):r=e[1],e[2]!==n||e[3]!==r?(s=h.jsx(WS,{className:r,children:n}),e[2]=n,e[3]=r,e[4]=s):s=e[4],s},$j=t=>{const e=X.c(9),{connectionState:n,status:o}=t,r=Wg(o==="running");let s,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=pn("global.interrupt"),e[0]=s):s=e[0],e[1]!==n||e[2]!==r?(i=qo(n)||!r,e[1]=n,e[2]=r,e[3]=i):i=e[3];const a=r?Dm:In.NOOP,l=r?"stale":"disabled";let c,d;return e[4]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(km,{strokeWidth:1.5}),e[4]=c):c=e[4],e[5]!==i||e[6]!==a||e[7]!==l?(d=h.jsx(mi,{tooltip:s,disabled:i,onClick:a,variant:l,"data-testid":"run-button",children:c}),e[5]=i,e[6]=a,e[7]=l,e[8]=d):d=e[8],d},$r={showInput:"Mod-l",acceptEdit:"Mod-y",rejectEdit:"Mod-u"},pi=Ks.define({combine:t=>Oc(t,{onError:console.error,inputDebounceTime:300,keymaps:$r},{onError:(e,n)=>e&&n,inputDebounceTime:(e,n)=>e&&n,keymaps:(e,n)=>e&&n})}),Nr=zt.define(),jr=Mn.define({create:()=>({show:!1,lineFrom:0,lineTo:0}),update(t,e){for(const n of e.effects)if(n.is(Nr))return n.value;return t}}),gi=zt.define(),_i=zt.define(),N1=Mn.define({create:()=>({shouldFocus:!1,inputValue:""}),update(t,e){let n=t;for(const o of e.effects)o.is(gi)&&(n={...n,inputValue:o.value}),o.is(_i)&&(n={...n,shouldFocus:o.value});return n}}),el=zt.define(),bi=Mn.define({create:()=>null,update(t,e){for(const n of e.effects)if(n.is(el))return n.value;return t}}),Wr=zt.define(),j1=Mn.define({create:()=>!1,update(t,e){for(const n of e.effects)if(n.is(Wr))return n.value;return t}}),E1=t=>{const{state:e}=t,n=e.selection.main;if(n.empty)return!1;const o=e.doc,r=o.lineAt(n.from),s=o.lineAt(n.to);if(e.sliceDoc(r.from,s.to).trim().length<1)return!1;const i=Math.max(1,Math.min(r.number,o.lines)),a=Math.max(1,Math.min(s.number,o.lines));return t.dispatch({effects:[Nr.of({show:!0,lineFrom:i,lineTo:a}),_i.of(!0),gi.of("")],selection:Uo.cursor(r.from)}),!0},I1=t=>!!t.state.field(bi)&&(t.dispatch({effects:[el.of(null),Nr.of({show:!1,lineFrom:0,lineTo:0}),_i.of(!1),gi.of(""),Wr.of(!1)]}),!0),A1=t=>{const e=t.state.field(bi);return!!e&&(t.dispatch({changes:{from:e.from,to:e.to,insert:e.oldCode},effects:[el.of(null),Nr.of({show:!1,lineFrom:0,lineTo:0}),_i.of(!1),gi.of(""),Wr.of(!1)]}),!0)},Wj=st.baseTheme({".cm-ai-input-container":{display:"flex",flexDirection:"column",gap:"4px",width:"min(calc(100% + 7px), 500px)",padding:"5px 5px",margin:"0 -6px",backgroundColor:"light-dark(rgb(241, 243, 245), rgb(40, 40, 40))"},".cm-ai-input":{display:"block",width:"100%",padding:"3px 8px",border:"2px solid rgb(51, 154, 240)",borderRadius:"5px",fontSize:"12px"},".cm-ai-help-info-button":{fontSize:"10px",paddingLeft:"10px",height:"18px",color:"light-dark(rgb(109, 117, 125), rgb(170, 170, 170))",display:"block",marginRight:"auto"},".cm-ai-help-info-button:hover":{color:"light-dark(rgb(89, 97, 105), rgb(190, 190, 190))"},".cm-ai-generate-button":{background:"#0E639C",border:"none",padding:"2px 6px",color:"#ffffff",cursor:"pointer",font:"inherit",borderRadius:"4px","&:hover":{backgroundColor:"#1177bb"}},".cm-line.cm-ai-selection, .cm-line.cm-ai-selection.cm-active-line":{backgroundColor:"light-dark(color-mix(in srgb, rgb(223, 227, 232) 50%, transparent), color-mix(in srgb, rgb(50, 50, 50) 50%, transparent)) !important"},".cm-line:has(.cm-new-code-line)":{backgroundColor:"light-dark(color-mix(in srgb, rgb(183, 235, 143) 50%, transparent), color-mix(in srgb, rgb(40, 100, 40) 50%, transparent)) !important"},".cm-old-code-container":{backgroundColor:"light-dark(rgb(255, 205, 205), rgb(100, 40, 40))",position:"relative",display:"flex",paddingTop:"0",width:"100%",alignItems:"center"},".cm-code-button":{position:"absolute",right:"5px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"16px"},".cm-floating-buttons":{fontFamily:"sans-serif",position:"absolute",top:"-20px",left:"5px",display:"flex"},".cm-floating-button":{fontFamily:"sans-serif",padding:"2px 5px",fontSize:"10px",cursor:"pointer",fontWeight:"700"},".cm-floating-accept":{backgroundColor:"light-dark(rgb(55, 125, 34), rgb(40, 80, 25))",borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px",color:"white",filter:"brightness(90%)","&:hover":{filter:"brightness(100%)"}},".cm-floating-reject":{backgroundColor:"light-dark(rgb(220, 53, 69), rgb(180, 40, 50))",color:"white",borderTopRightRadius:"5px",borderBottomRightRadius:"5px",filter:"brightness(90%)","&:hover":{filter:"brightness(100%)"}},".hotkey":{display:"inline-block",padding:"0 4px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)",fontSize:"90%"},".cm-ai-loading-indicator":{fontStyle:"italic",fontSize:"10px",paddingLeft:"12px",color:"light-dark(rgb(109, 117, 125), rgb(170, 170, 170))",opacity:"0",transition:"opacity 0.3s ease-in-out","&::after":{content:'""',display:"inline-block",animation:"ellipsis-pulse 1.5s steps(4, end) infinite"},"&:not(:empty)":{opacity:"1"}},".cm-ai-input:disabled":{opacity:"0.5"},"@keyframes ellipsis-pulse":{"0%":{content:"'.'"},"25%":{content:"'..'"},"50%":{content:"'...'"},"75%":{content:"''"}},".cm-ai-loading-container":{display:"flex",alignItems:"center",padding:"0 8px"},".cm-ai-cancel-button":{padding:"2px 8px",fontSize:"10px",borderRadius:"4px",color:"light-dark(rgb(109, 117, 125), rgb(170, 170, 170))",cursor:"pointer","&:hover":{background:"light-dark(rgb(223, 227, 232), rgb(50, 50, 50))"}},".hidden":{display:"none"}}),qj="\u2318",Gj="\u229E Win",Yj="Ctrl";function zd(t){return t.replace("Mod",navigator.platform.startsWith("Mac")?qj:navigator.platform.startsWith("Win")?Gj:Yj).replace("-"," ").toUpperCase()}function ln(t,e){const n=document.createElement(t);return n.className=e,n}function Jj(t){var r,s;const e=t.state.facet(pi),n={...$r,...e.keymaps},o=ln("div","cm-ai-tooltip").appendChild(ln("div","cm-ai-tooltip-button"));return o.innerHTML=`<span>Edit <span class="hotkey">${zd(n.showInput)}</span></span>`,(r=o.querySelector("span"))==null||r.addEventListener("mousedown",i=>{i.stopPropagation()}),(s=o.querySelector("span"))==null||s.addEventListener("click",i=>{i.preventDefault(),E1(t)}),o}const Kj=Ks.define({combine:t=>Oc(t,{render:Jj})}),Xj=Tn.fromClass((j3=class{constructor(t){ee(this,"view");ee(this,"suppress");ee(this,"dom");ee(this,"mousedown",()=>{this.suppress=!0});ee(this,"mouseup",()=>{this.suppress=!1,this.display(this.view)});A3(this,ac,t=>{var n;const e=t.state.selection.ranges.find(o=>!o.empty);if(e&&!this.suppress){const o=t.coordsAtPos(e.from);if(!o)return;this.dom.style.display="flex";const r=this.dom.getBoundingClientRect(),s=t.dom.getBoundingClientRect(),i=(n=t.dom.parentElement)==null?void 0:n.getBoundingClientRect(),a=s.width-r.width,l=Math.min(o.left,a);let c=o.top-r.height;c=i?Math.max(i.y,c):c,this.dom.style.left=`${l}px`,this.dom.style.top=`${c}px`,requestAnimationFrame(()=>{this.dom&&(this.dom.ariaHidden="false")})}else this.dom.style.display="none",this.dom.ariaHidden="true"});this.view=t;const e=t.state.facet(Kj);this.suppress=!1,document.addEventListener("mousedown",this.mousedown),document.addEventListener("mouseup",this.mouseup);const n=e.render(t);t.dom.appendChild(n),this.dom=n}update(t){this.display(t.view)}docViewUpdate(t){this.display(t)}display(t){t.state.field(jr).show?this.dom.style.display="none":t.requestMeasure({read:I3(this,ac)})}destroy(){document.removeEventListener("mousedown",this.mousedown),document.removeEventListener("mouseup",this.mouseup),this.dom.remove()}},ac=new WeakMap,j3)),Zj=st.baseTheme({".cm-ai-tooltip-button":{userSelect:"none",fontFamily:"system-ui, -apple-system, sans-serif",position:"fixed",display:"flex",boxSizing:"border-box",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",backgroundColor:"#0E639C",color:"#ffffff",border:"1px solid transparent",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:"999",transition:"opacity 0.5s","&[aria-hidden='true']":{opacity:"0"},"&[aria-hidden='false']":{opacity:"1"},"& > span":{pointerEvents:"auto",cursor:"pointer",display:"inline-block",padding:"2px"},"&:hover":{backgroundColor:"#1177bb"}}});class Qj extends Xs{constructor(n){super();ee(this,"oldCode");this.oldCode=n}toDOM(n){const o=ln("div","cm-old-code-container");o.setAttribute("role","region"),o.setAttribute("aria-label","Previous code version");const r=ln("div","cm-old-code cm-line");r.textContent=this.oldCode;const s=ln("div","cm-floating-buttons"),i=n.state.facet(pi),a={...$r,...i.keymaps},l=ln("button","cm-floating-button cm-floating-accept");l.innerHTML=`<span class="hotkey">${zd(a.acceptEdit)}</span> Accept`,l.setAttribute("aria-label","Accept changes"),l.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),n.focus(),I1(n)});const c=ln("button","cm-floating-button cm-floating-reject");return c.innerHTML=`<span class="hotkey">${zd(a.rejectEdit)}</span> Reject`,c.setAttribute("aria-label","Reject changes"),c.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),n.focus(),A1(n)}),s.append(l,c),o.append(r,s),o}updateDOM(n,o){return!0}}class eE extends Xs{constructor(n){super();ee(this,"complete");ee(this,"abortController",null);ee(this,"dom",null);ee(this,"input",null);ee(this,"loadingContainer",null);ee(this,"helpInfo",null);ee(this,"inputContainer",null);ee(this,"form",null);ee(this,"view",null);ee(this,"onKeyDown",async n=>{n.key!=="Enter"||n.shiftKey?n.key==="Escape"&&this.onCancel():(n.preventDefault(),await this.handleSubmit())});ee(this,"onCancel",()=>{this.cleanup();const n=this.view;n&&(n.dispatch({effects:[Nr.of({show:!1,lineFrom:0,lineTo:0}),Wr.of(!1)]}),n.focus())});ee(this,"handleSubmit",async n=>{var g;const o=this.view;if(!o)return;const r=o.state.facet(pi);n==null||n.stopPropagation();const s=o.state.field(jr),{input:i}=this;if(!i)return;const a=i.value.trim();if(!s.show||!a)return;const l=o.state.doc.line(s.lineFrom),c=o.state.doc.line(s.lineTo),d=l.from,u=c.to,f=o.state.sliceDoc(d,u),m=o.state.sliceDoc(0,d),_=o.state.sliceDoc(u);this.abortController=new AbortController,o.dispatch({effects:Wr.of(!0)}),this.toggleLoading(!0);try{const p=await this.complete({prompt:a,selection:f,codeBefore:m,codeAfter:_,editorView:o,signal:this.abortController.signal});if(!o.state.field(jr).show)return;if(!p||typeof p!="string")throw new Error("Invalid completion result");o.dispatch({changes:{from:d,to:u,insert:p},effects:[Nr.of({show:!1,lineFrom:0,lineTo:0}),el.of({from:d,to:d+p.length,oldCode:f,newCode:p}),Wr.of(!1)]})}catch(p){if(p instanceof DOMException&&p.name==="AbortError")return;(g=r.onError)==null||g.call(r,p)}finally{this.cleanup(),this.toggleLoading(!1),o.focus()}});this.complete=n}toDOM(n){if(this.dom)return this.dom;this.view=n;const o=n.state.field(N1),r=n.state.field(j1),s=ln("div","cm-ai-input-container");this.inputContainer=s,this.dom=s;const i=ln("form","cm-ai-input-form");this.form=i,i.setAttribute("role","search"),i.setAttribute("aria-label","AI editing instructions"),i.addEventListener("submit",p=>p.preventDefault());const a=ln("input","cm-ai-input");this.input=a,i.append(a),a.placeholder="Editing instructions...",a.setAttribute("aria-label","AI editing instructions"),a.setAttribute("autocomplete","off"),a.setAttribute("spellcheck","true"),a.value=o.inputValue;const l=ln("div","cm-ai-loading-container");this.loadingContainer=l;const c=ln("div","cm-ai-loading-indicator");c.setAttribute("role","status"),c.setAttribute("aria-live","polite"),c.textContent="Generating";const d=ln("button","cm-ai-cancel-button");d.textContent="Cancel",d.setAttribute("aria-label","Cancel code generation"),d.addEventListener("click",this.onCancel),l.append(d,c);const u=ln("div","cm-ai-help-info");this.helpInfo=u;const f=u.appendChild(document.createElement("button"));f.className="cm-ai-help-info-button",f.textContent="Esc to close",f.addEventListener("click",this.onCancel);const m=ln("button","cm-ai-generate-button");function _(p){u.replaceChildren(p?m:f)}m.textContent="\u23CE Generate",m.setAttribute("aria-label","Generate code"),m.addEventListener("click",this.handleSubmit),this.toggleLoading(r),o.shouldFocus&&requestAnimationFrame(()=>{a.value=o.inputValue,a.focus(),n.dispatch({effects:_i.of(!1)})}),_(a.value),a.addEventListener("input",function(){n.dispatch({effects:gi.of(a.value)});const p=a.value.trim();p!==g&&(g=p,_(p))}),a.addEventListener("keydown",this.onKeyDown);let g="";return s}toggleLoading(n){var o;this.inputContainer&&this.form&&this.loadingContainer&&this.helpInfo&&((o=this.inputContainer)==null||o.replaceChildren(this.form,n?this.loadingContainer:this.helpInfo))}updateDOM(n,o){return this.dom=n,this.input=n.querySelector(".cm-ai-input"),!0}cleanup(){var n,o,r;(n=this.abortController)==null||n.abort(),this.abortController=null,(o=this.dom)==null||o.remove(),(r=this.input)==null||r.remove(),this.dom=null,this.input=null}destroy(){this.cleanup()}}function tE(t){if(!t.prompt)throw new Error("prompt function is required");return[pi.of(t),jr,N1,bi,j1,[Xj,Zj],Wj,Gn.of([{key:$r.showInput,run:E1}]),Ho.highest([Gn.of([{key:$r.acceptEdit,run:I1},{key:$r.rejectEdit,run:A1}])]),nE,oE,rE,sE]}const nE=st.updateListener.of(t=>{const e=t.state.field(jr);if(!e.show||!t.docChanged)return;let{lineFrom:n,lineTo:o}=e,r=!1;t.changes.iterChanges((s,i,a,l)=>{const c=t.state.doc.lineAt(s).number;if(c<n){const d=t.state.doc.lineAt(l).number-t.state.doc.lineAt(a).number;n+=d,o+=d,r=!0}else if(c<=o){const d=t.state.doc.lineAt(l).number-t.state.doc.lineAt(a).number;o+=d,r=!0}}),r&&t.view.dispatch({effects:[Nr.of({show:!0,lineFrom:n,lineTo:o})]})}),oE=st.decorations.of(t=>{const e=t.state.field(bi);return e?ut.set([ut.mark({class:"cm-new-code-line"}).range(e.from,e.to)]):ut.none}),rE=st.decorations.compute([jr],t=>{const e=t.field(jr),n=t.facet(pi),o=[];if(e.show){const r=e.lineFrom,s=e.lineTo;for(let i=r;i<=s;i++){const a=t.doc.line(i).from;o.push(ut.line({class:"cm-ai-selection"}).range(a)),i===r&&o.push(ut.widget({widget:new eE(n.prompt),side:-1}).range(a))}}return ut.set(o)}),sE=Mn.define({create:t=>ut.none,update(t,e){const n=e.state.field(bi);return n?ut.set([ut.widget({widget:new Qj(n.oldCode),block:!0}).range(n.from)]):ut.none},provide:t=>st.decorations.from(t)}),tl=Mn.define({create:()=>({suggestion:null}),update(t,e){const n=e.effects.find(o=>o.is(nl));return e.docChanged||n||e.selection?n&&e.state.doc===n.value.doc?{suggestion:n.value.text}:{suggestion:null}:t}}),nl=zt.define();class iE extends Xs{constructor(n){super();ee(this,"suggestion");this.suggestion=n}toDOM(){const n=document.createElement("span");return n.style.opacity="0.4",n.className="cm-inline-suggestion",n.textContent=this.suggestion,n.setAttribute("role","suggestion"),n.setAttribute("aria-label",`Suggestion: ${this.suggestion}`),n}get lineBreaks(){return this.suggestion.split(`
`).length-1}}class aE{constructor(e){ee(this,"cache",new Map);ee(this,"timeout");this.timeout=e}get(e){const n=this.cache.get(e);return n?Date.now()-n.timestamp>this.timeout?(this.cache.delete(e),null):n.result:null}set(e,n){this.cache.set(e,{result:n,timestamp:Date.now()})}}const lE=(t,e)=>Tn.fromClass(class{constructor(){ee(this,"abortController",null);ee(this,"cache");this.cache=new aE(e.cacheTimeout??1e3)}async update(n){var i,a,l,c,d;if(!n.docChanged||((a=(i=e.events)==null?void 0:i.beforeSuggestionFetch)==null?void 0:a.call(i,n.view))===!1)return;(l=this.abortController)==null||l.abort(),this.abortController=new AbortController;const o=n.state.doc,r=o.toString(),s=this.cache.get(r);if(s)n.view.dispatch({effects:nl.of({text:s,doc:o})});else try{const u=await t(n.state,this.abortController.signal);if(this.abortController.signal.aborted||((d=(c=e.events)==null?void 0:c.shouldShowSuggestion)==null?void 0:d.call(c,n.view,u))===!1)return;this.cache.set(r,u),n.view.dispatch({effects:nl.of({text:u,doc:o})})}catch(u){u instanceof Error&&u.name!=="AbortError"&&console.error("Suggestion fetch error:",u)}}destroy(){var n;(n=this.abortController)==null||n.abort()}}),cE=Tn.fromClass(class{constructor(){ee(this,"decorations");this.decorations=ut.none}update(t){var n;const e=(n=t.state.field(tl))==null?void 0:n.suggestion;this.decorations=e?function(o,r){const s=o.state.selection.main.head,i=[],a=ut.widget({widget:new iE(r),side:1});return i.push(a.range(s)),ut.set(i)}(t.view,e):ut.none}},{decorations:t=>t.decorations});function dE(t,e,n,o){return{...t.changeByRange(r=>{if(r===t.selection.main)return{changes:{from:n,to:o,insert:e},range:Uo.cursor(n+e.length)};const s=o-n;return!r.empty||s&&t.sliceDoc(r.from-s,r.from)!==t.sliceDoc(n,o)?{range:r}:{changes:{from:r.from-s,to:r.from,insert:e},range:Uo.cursor(r.from-s+e.length)}}),userEvent:"input.complete"}}const T1=t=>{var o,r,s;const e=(o=t.state.field(tl))==null?void 0:o.suggestion;if(!e)return!1;const n=t.state.facet(Bd);return t.dispatch({effects:nl.of({text:null,doc:t.state.doc})}),(s=(r=n.events)==null?void 0:r.onSuggestionRejected)==null||s.call(r,t,e),!0},uE=Gn.of([{key:"Tab",run:t=>{var o,r,s;const e=(o=t.state.field(tl))==null?void 0:o.suggestion;if(!e)return!1;const n=t.state.facet(Bd);return t.dispatch({...dE(t.state,e,t.state.selection.main.head,t.state.selection.main.head)}),(s=(r=n.events)==null?void 0:r.onSuggestionAccepted)==null||s.call(r,t,e),!0}},{key:"Escape",run:T1}]),Bd=Ks.define({combine:t=>t.at(-1)});function M1(t){const{delay:e=500,includeKeymap:n=!0}=t,o=function(r,s,i){let a=()=>{};return(...l)=>(a(),new Promise((c,d)=>{const u=setTimeout(()=>c(r(...l)),s);a=()=>{clearTimeout(u),i!==void 0&&d(i)}}))}(t.fetchFn,e);return[tl,Bd.of(t),lE(o,t),cE,n?uE:[]]}const O1="packages-install-input",hE=["%alias","%cd","%clear","%debug","%env","%load","%load_ext","%lsmagic","%matplotlib","%pwd","%who_ls","%system","%%time","%%timeit","%%writefile","%%capture","%%html","%%latex"];let Ud;function fE(){const t=async r=>{const s=ct.get(k4),i={...s,runtime:{...s.runtime,auto_reload:r}};await Bs({config:i}).then(()=>ct.set(k4,i))},e=()=>{requestAnimationFrame(()=>{const r=document.getElementById(O1);r&&r.focus()})},n=[{match:"!pip install",onMatch:()=>{ct.set(Rm,r=>({...r,isSidebarOpen:!0,selectedPanel:"packages"})),e()},title:"Package Installation",description:h.jsxs(h.Fragment,{children:["The package manager sidebar has been opened.",h.jsx("br",{}),"Install packages directly from there instead."]})},{match:"!uv pip install",onMatch:()=>{ct.set(Rm,r=>({...r,isSidebarOpen:!0,selectedPanel:"packages"})),e()},title:"Package Installation",description:h.jsxs(h.Fragment,{children:["The package manager sidebar has been opened.",h.jsx("br",{}),"Install packages directly from there instead."]})},{match:"!uv add",onMatch:()=>{ct.set(Rm,r=>({...r,isSidebarOpen:!0,selectedPanel:"packages"})),e()},title:"Package Installation",description:h.jsxs(h.Fragment,{children:["The package manager sidebar has been opened.",h.jsx("br",{}),"Install packages directly from there instead."]})},{match:"%autoreload 2",onMatch:async()=>{await t("autorun")},title:"Module reload",description:h.jsxs(h.Fragment,{children:["Module reload mode set to ",h.jsx("b",{children:"autorun"})," - module changes will re-run the cells that import them."]})},{match:"%autoreload 1",onMatch:async()=>{await t("lazy")},title:"Module reload",description:h.jsxs(h.Fragment,{children:["Module reload mode set to ",h.jsx("b",{children:"lazy"})," - module changes will mark the cells that import them as stale."]})},{match:"%autoreload 0",onMatch:async()=>{await t("off")},title:"Module reload",description:h.jsx(h.Fragment,{children:"Module reload disabled - module changes will not be detected."})},{match:"!ls",onMatch:()=>{},title:"Listing files",description:h.jsxs(h.Fragment,{children:["Shell commands are not directly supported.",h.jsx("br",{}),"Use ",h.jsx("code",{children:"import subprocess; subprocess.run(['ls'])"})," instead."]})},...hE.map(r=>({match:r,onMatch:()=>{},title:h.jsx(pa,{className:"inline",children:r}),description:h.jsxs(h.Fragment,{children:["Magic commands are not supported in marimo. Read more about replacements in the"," ",h.jsx("a",{href:"https://docs.marimo.io/guides/coming_from/jupyter/#adapting-to-the-absence-of-magic-commands",target:"_blank",className:"text-link underline cursor-pointer",rel:"noopener noreferrer",children:"documentation"}),"."]})}))],o=new Map(n.map(r=>[r.match,r]));return st.updateListener.of(r=>{if(r.docChanged){const s=r.state.selection.main,i=r.state.doc,a=i.lineAt(s.head),l=i.sliceString(a.from,s.anchor).trim(),c=o.get(l);c&&(c.onMatch(),Ud?Ud.upsert({title:c.title,description:c.description}):Ud=lt({title:c.title,description:c.description}))}})}function mE(){const t=S4.filter(e=>e.key!=="Escape");return Ho.highest(Gn.of([...t,{key:"Escape",run:e=>{const n=sm(e);return!C4(e)&&n}}]))}const Vd=zt.define(),Hd=zt.define(),$d=zt.define();function Nt(t,e){if(!t)throw new Error(e)}function ol(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>2147483647||t<-2147483648)throw new Error("invalid int 32: "+t)}function Wd(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>4294967295||t<0)throw new Error("invalid uint 32: "+t)}function D1(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>3402823466385289e23||t<-3402823466385289e23))throw new Error("invalid float 32: "+t)}const R1=Symbol("@bufbuild/protobuf/enum-type");function pE(t){const e=t[R1];return Nt(e,"missing enum type on enum object"),e}function P1(t,e,n,o){t[R1]=L1(e,n.map(r=>({no:r.no,name:r.name,localName:t[r.no]})))}function L1(t,e,n){const o=Object.create(null),r=Object.create(null),s=[];for(const i of e){const a=F1(i);s.push(a),o[i.name]=a,r[i.no]=a}return{typeName:t,values:s,findName:i=>o[i],findNumber:i=>r[i]}}function gE(t,e,n){const o={};for(const r of e){const s=F1(r);o[s.localName]=s.no,o[s.no]=s.localName}return P1(o,t,e),o}function F1(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class Dt{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const o=this.getType().runtime.bin,r=o.makeReadOptions(n);return o.readMessage(this,r.readerFactory(e),e.byteLength,r),this}fromJson(e,n){const o=this.getType(),r=o.runtime.json,s=r.makeReadOptions(n);return r.readMessage(o,e,s,this),this}fromJsonString(e,n){let o;try{o=JSON.parse(e)}catch(r){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${r instanceof Error?r.message:String(r)}`)}return this.fromJson(o,n)}toBinary(e){const n=this.getType().runtime.bin,o=n.makeWriteOptions(e),r=o.writerFactory();return n.writeMessage(this,r,o),r.finish()}toJson(e){const n=this.getType().runtime.json,o=n.makeWriteOptions(e);return n.writeMessage(this,o)}toJsonString(e){var n;const o=this.toJson(e);return JSON.stringify(o,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function _E(){let t=0,e=0;for(let o=0;o<28;o+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<o,!(128&r))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(15&n)<<28,e=(112&n)>>4,!(128&n))return this.assertBounds(),[t,e];for(let o=3;o<=31;o+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<o,!(128&r))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function qd(t,e,n){for(let s=0;s<28;s+=7){const i=t>>>s,a=!(!(i>>>7)&&e==0),l=255&(a?128|i:i);if(n.push(l),!a)return}const o=t>>>28&15|(7&e)<<4,r=!!(e>>3);if(n.push(255&(r?128|o:o)),r){for(let s=3;s<31;s+=7){const i=e>>>s,a=!!(i>>>7),l=255&(a?128|i:i);if(n.push(l),!a)return}n.push(e>>>31&1)}}const rl=4294967296;function z1(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let o=0,r=0;function s(i,a){const l=Number(t.slice(i,a));r*=n,o=o*n+l,o>=rl&&(r+=o/rl|0,o%=rl)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?U1(o,r):Gd(o,r)}function B1(t,e){if({lo:t,hi:e}=function(l,c){return{lo:l>>>0,hi:c>>>0}}(t,e),e<=2097151)return String(rl*e+t);const n=16777215&(t>>>24|e<<8),o=e>>16&65535;let r=(16777215&t)+6777216*n+6710656*o,s=n+8147497*o,i=2*o;const a=1e7;return r>=a&&(s+=Math.floor(r/a),r%=a),s>=a&&(i+=Math.floor(s/a),s%=a),i.toString()+V1(s)+V1(r)}function Gd(t,e){return{lo:0|t,hi:0|e}}function U1(t,e){return e=~e,t?t=1+~t:e+=1,Gd(t,e)}const V1=t=>{const e=String(t);return"0000000".slice(e.length)+e};function H1(t,e){if(t>=0){for(;t>127;)e.push(127&t|128),t>>>=7;e.push(t)}else{for(let n=0;n<9;n++)e.push(127&t|128),t>>=7;e.push(1)}}function bE(){let t=this.buf[this.pos++],e=127&t;if(!(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<7,!(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<14,!(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<21,!(128&t))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(15&t)<<28;for(let n=5;128&t&&n<10;n++)t=this.buf[this.pos++];if(128&t)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var yE={};const kt=function(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||yE.BUF_BIGINT_DISABLE!=="1")){const o=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),s=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(a){const l=typeof a=="bigint"?a:BigInt(a);if(l>r||l<o)throw new Error(`int64 invalid: ${a}`);return l},uParse(a){const l=typeof a=="bigint"?a:BigInt(a);if(l>i||l<s)throw new Error(`uint64 invalid: ${a}`);return l},enc(a){return t.setBigInt64(0,this.parse(a),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(a){return t.setBigInt64(0,this.uParse(a),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec:(a,l)=>(t.setInt32(0,a,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)),uDec:(a,l)=>(t.setInt32(0,a,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0))}}const e=o=>Nt(/^-?[0-9]+$/.test(o),`int64 invalid: ${o}`),n=o=>Nt(/^[0-9]+$/.test(o),`uint64 invalid: ${o}`);return{zero:"0",supported:!1,parse:o=>(typeof o!="string"&&(o=o.toString()),e(o),o),uParse:o=>(typeof o!="string"&&(o=o.toString()),n(o),o),enc:o=>(typeof o!="string"&&(o=o.toString()),e(o),z1(o)),uEnc:o=>(typeof o!="string"&&(o=o.toString()),n(o),z1(o)),dec:(o,r)=>function(s,i){let a=Gd(s,i);const l=2147483648&a.hi;l&&(a=U1(a.lo,a.hi));const c=B1(a.lo,a.hi);return l?"-"+c:c}(o,r),uDec:(o,r)=>B1(o,r)}}();var fe,Go,At;function Yo(t,e,n){if(e===n)return!0;if(t==fe.BYTES){if(!(e instanceof Uint8Array&&n instanceof Uint8Array)||e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==n[o])return!1;return!0}switch(t){case fe.UINT64:case fe.FIXED64:case fe.INT64:case fe.SFIXED64:case fe.SINT64:return e==n}return!1}function qr(t,e){switch(t){case fe.BOOL:return!1;case fe.UINT64:case fe.FIXED64:case fe.INT64:case fe.SFIXED64:case fe.SINT64:return e==0?kt.zero:"0";case fe.DOUBLE:case fe.FLOAT:return 0;case fe.BYTES:return new Uint8Array(0);case fe.STRING:return"";default:return 0}}function $1(t,e){switch(t){case fe.BOOL:return e===!1;case fe.STRING:return e==="";case fe.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(fe||(fe={})),function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"}(Go||(Go={})),function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"}(At||(At={}));class xE{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),o=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],o),o+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Wd(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return ol(e),H1(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){D1(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Wd(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){ol(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return ol(e),H1(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let n=new Uint8Array(8),o=new DataView(n.buffer),r=kt.enc(e);return o.setInt32(0,r.lo,!0),o.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),o=new DataView(n.buffer),r=kt.uEnc(e);return o.setInt32(0,r.lo,!0),o.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=kt.enc(e);return qd(n.lo,n.hi,this.buf),this}sint64(e){let n=kt.enc(e),o=n.hi>>31;return qd(n.lo<<1^o,(n.hi<<1|n.lo>>>31)^o,this.buf),this}uint64(e){let n=kt.uEnc(e);return qd(n.lo,n.hi,this.buf),this}}class wE{constructor(e,n){this.varint64=_E,this.uint32=bE,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,o=7&e;if(n<=0||o<0||o>5)throw new Error("illegal tag: field no "+n+" wire type "+o);return[n,o]}skip(e,n){let o=this.pos;switch(e){case At.Varint:for(;128&this.buf[this.pos++];);break;case At.Bit64:this.pos+=4;case At.Bit32:this.pos+=4;break;case At.LengthDelimited:let r=this.uint32();this.pos+=r;break;case At.StartGroup:for(;;){const[s,i]=this.tag();if(i===At.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(i,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(o,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return kt.dec(...this.varint64())}uint64(){return kt.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),o=-(1&e);return e=(e>>>1|(1&n)<<31)^o,n=n>>>1^o,kt.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return kt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return kt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function W1(t){const e=t.field.localName,n=Object.create(null);return n[e]=function(o){const r=o.field;if(r.repeated)return[];if(r.default!==void 0)return r.default;switch(r.kind){case"enum":return r.T.values[0].no;case"scalar":return qr(r.T,r.L);case"message":const s=r.T,i=new s;return s.fieldWrapper?s.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}(t),[n,()=>n[e]]}let bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),sl=[];for(let t=0;t<bo.length;t++)sl[bo[t].charCodeAt(0)]=t;sl[45]=bo.indexOf("+"),sl[95]=bo.indexOf("/");const il={dec(t){let e=3*t.length/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n,o=new Uint8Array(e),r=0,s=0,i=0;for(let a=0;a<t.length;a++){if(n=sl[t.charCodeAt(a)],n===void 0)switch(t[a]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:i=n,s=1;break;case 1:o[r++]=i<<2|(48&n)>>4,i=n,s=2;break;case 2:o[r++]=(15&i)<<4|(60&n)>>2,i=n,s=3;break;case 3:o[r++]=(3&i)<<6|n,s=0}}if(s==1)throw Error("invalid base64 string.");return o.subarray(0,r)},enc(t){let e,n="",o=0,r=0;for(let s=0;s<t.length;s++)switch(e=t[s],o){case 0:n+=bo[e>>2],r=(3&e)<<4,o=1;break;case 1:n+=bo[r|e>>4],r=(15&e)<<2,o=2;break;case 2:n+=bo[r|e>>6],n+=bo[63&e],o=0}return o&&(n+=bo[r],n+="=",o==1&&(n+="=")),n}};function vE(t,e,n){G1(e,t);const o=e.runtime.bin.makeReadOptions(n),r=function(a,l){if(!l.repeated&&(l.kind=="enum"||l.kind=="scalar")){for(let c=a.length-1;c>=0;--c)if(a[c].no==l.no)return[a[c]];return[]}return a.filter(c=>c.no===l.no)}(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,i]=W1(e);for(const a of r)e.runtime.bin.readField(s,o.readerFactory(a.data),e.field,a.wireType,o);return i()}function kE(t,e,n,o){G1(e,t);const r=e.runtime.bin.makeReadOptions(o),s=e.runtime.bin.makeWriteOptions(o);if(q1(t,e)){const c=t.getType().runtime.bin.listUnknownFields(t).filter(d=>d.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const d of c)t.getType().runtime.bin.onUnknownField(t,d.no,d.wireType,d.data)}const i=s.writerFactory();let a=e.field;a.opt||a.repeated||a.kind!="enum"&&a.kind!="scalar"||(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,n,i,s);const l=r.readerFactory(i.finish());for(;l.pos<l.len;){const[c,d]=l.tag(),u=l.skip(d,c);t.getType().runtime.bin.onUnknownField(t,c,d,u)}}function q1(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(o=>o.no==e.field.no)}function G1(t,e){Nt(t.extendee.typeName==e.getType().typeName,`extension ${t.typeName} can only be applied to message ${t.extendee.typeName}`)}function Y1(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!$1(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function J1(t,e){const n=t.localName,o=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=o?t.T.values[0].no:void 0;break;case"scalar":e[n]=o?qr(t.T,t.L):void 0;break;case"message":e[n]=void 0}}function Er(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(Dt.prototype).every(o=>o in t&&typeof t[o]=="function"))return!1;const n=t.getType();return n!==null&&typeof n=="function"&&"typeName"in n&&typeof n.typeName=="string"&&(e===void 0||n.typeName==e.typeName)}function K1(t,e){return Er(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}fe.DOUBLE,fe.FLOAT,fe.INT64,fe.UINT64,fe.INT32,fe.UINT32,fe.BOOL,fe.STRING,fe.BYTES;const X1={ignoreUnknownFields:!1},Z1={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function SE(t){return t?Object.assign(Object.assign({},X1),t):X1}function CE(t){return t?Object.assign(Object.assign({},Z1),t):Z1}const al=Symbol(),ll=Symbol();function ro(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":`"${t.split('"').join('\\"')}"`;default:return String(t)}}function Q1(t,e,n,o,r){let s=n.localName;if(n.repeated){if(Nt(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${ro(e)}`);const i=t[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${ro(a)}`);switch(n.kind){case"message":i.push(n.T.fromJson(a,o));break;case"enum":const l=Yd(n.T,a,o.ignoreUnknownFields,!0);l!==ll&&i.push(l);break;case"scalar":try{i.push(yi(n.T,a,n.L,!0))}catch(c){let d=`cannot decode field ${r.typeName}.${n.name} from JSON: ${ro(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${ro(e)}`);const i=t[s];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: map value null`);let c;try{c=NE(n.K,a)}catch(d){let u=`cannot decode map key for field ${r.typeName}.${n.name} from JSON: ${ro(e)}`;throw d instanceof Error&&d.message.length>0&&(u+=`: ${d.message}`),new Error(u)}switch(n.V.kind){case"message":i[c]=n.V.T.fromJson(l,o);break;case"enum":const d=Yd(n.V.T,l,o.ignoreUnknownFields,!0);d!==ll&&(i[c]=d);break;case"scalar":try{i[c]=yi(n.V.T,l,Go.BIGINT,!0)}catch(u){let f=`cannot decode map value for field ${r.typeName}.${n.name} from JSON: ${ro(e)}`;throw u instanceof Error&&u.message.length>0&&(f+=`: ${u.message}`),new Error(f)}}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const i=n.T;if(e===null&&i.typeName!="google.protobuf.Value")return;let a=t[s];Er(a)?a.fromJson(e,o):(t[s]=a=i.fromJson(e,o),i.fieldWrapper&&!n.oneof&&(t[s]=i.fieldWrapper.unwrapField(a)));break;case"enum":const l=Yd(n.T,e,o.ignoreUnknownFields,!1);switch(l){case al:J1(n,t);break;case ll:break;default:t[s]=l}break;case"scalar":try{const c=yi(n.T,e,n.L,!1);c===al?J1(n,t):t[s]=c}catch(c){let d=`cannot decode field ${r.typeName}.${n.name} from JSON: ${ro(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}}}function NE(t,e){if(t===fe.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1}return yi(t,e,Go.BIGINT,!0).toString()}function yi(t,e,n,o){if(e===null)return o?qr(t,n):al;switch(t){case fe.DOUBLE:case fe.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==fe.FLOAT&&D1(r),r;case fe.INT32:case fe.FIXED32:case fe.SFIXED32:case fe.SINT32:case fe.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==fe.UINT32||t==fe.FIXED32?Wd(s):ol(s),s;case fe.INT64:case fe.SFIXED64:case fe.SINT64:if(typeof e!="number"&&typeof e!="string")break;const i=kt.parse(e);return n?i.toString():i;case fe.FIXED64:case fe.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=kt.uParse(e);return n?a.toString():a;case fe.BOOL:if(typeof e!="boolean")break;return e;case fe.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case fe.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return il.dec(e)}throw new Error}function Yd(t,e,n,o){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:o?t.values[0].no:al;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r!==void 0)return r.no;if(n)return ll}throw new Error(`cannot decode enum ${t.typeName} from JSON: ${ro(e)}`)}function jE(t){return!(!t.repeated&&t.kind!="map")||!t.oneof&&t.kind!="message"&&!t.opt&&!t.req}function e_(t,e,n){if(t.kind=="map"){Nt(typeof e=="object"&&e!=null);const o={},r=Object.entries(e);switch(t.V.kind){case"scalar":for(const[i,a]of r)o[i.toString()]=cl(t.V.T,a);break;case"message":for(const[i,a]of r)o[i.toString()]=a.toJson(n);break;case"enum":const s=t.V.T;for(const[i,a]of r)o[i.toString()]=Jd(s,a,n.enumAsInteger)}return n.emitDefaultValues||r.length>0?o:void 0}if(t.repeated){Nt(Array.isArray(e));const o=[];switch(t.kind){case"scalar":for(let r=0;r<e.length;r++)o.push(cl(t.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)o.push(Jd(t.T,e[r],n.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)o.push(e[r].toJson(n))}return n.emitDefaultValues||o.length>0?o:void 0}switch(t.kind){case"scalar":return cl(t.T,e);case"enum":return Jd(t.T,e,n.enumAsInteger);case"message":return K1(t.T,e).toJson(n)}}function Jd(t,e,n){var o;if(Nt(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const r=t.findNumber(e);return(o=r==null?void 0:r.name)!==null&&o!==void 0?o:e}function cl(t,e){switch(t){case fe.INT32:case fe.SFIXED32:case fe.SINT32:case fe.FIXED32:case fe.UINT32:return Nt(typeof e=="number"),e;case fe.FLOAT:case fe.DOUBLE:return Nt(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case fe.STRING:return Nt(typeof e=="string"),e;case fe.BOOL:return Nt(typeof e=="boolean"),e;case fe.UINT64:case fe.FIXED64:case fe.INT64:case fe.SFIXED64:case fe.SINT64:return Nt(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case fe.BYTES:return Nt(e instanceof Uint8Array),il.enc(e)}}const Gr=Symbol("@bufbuild/protobuf/unknown-fields"),t_={readUnknownFields:!0,readerFactory:t=>new wE(t)},n_={writeUnknownFields:!0,writerFactory:()=>new xE};function EE(t){return t?Object.assign(Object.assign({},t_),t):t_}function IE(t){return t?Object.assign(Object.assign({},n_),t):n_}function o_(t,e,n,o,r){let{repeated:s,localName:i}=n;switch(n.oneof&&((t=t[n.oneof.localName]).case!=i&&delete t.value,t.case=i,i="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?fe.INT32:n.T;let l=ul;if(n.kind=="scalar"&&n.L>0&&(l=AE),s){let f=t[i];if(o==At.LengthDelimited&&a!=fe.STRING&&a!=fe.BYTES){let m=e.uint32()+e.pos;for(;e.pos<m;)f.push(l(e,a))}else f.push(l(e,a))}else t[i]=l(e,a);break;case"message":const c=n.T;s?t[i].push(dl(e,new c,r,n)):Er(t[i])?dl(e,t[i],r,n):(t[i]=dl(e,new c,r,n),!c.fieldWrapper||n.oneof||n.repeated||(t[i]=c.fieldWrapper.unwrapField(t[i])));break;case"map":let[d,u]=function(f,m,_){const g=m.uint32(),p=m.pos+g;let b,y;for(;m.pos<p;){const[x]=m.tag();switch(x){case 1:b=ul(m,f.K);break;case 2:switch(f.V.kind){case"scalar":y=ul(m,f.V.T);break;case"enum":y=m.int32();break;case"message":y=dl(m,new f.V.T,_,void 0)}}}if(b===void 0&&(b=qr(f.K,Go.BIGINT)),typeof b!="string"&&typeof b!="number"&&(b=b.toString()),y===void 0)switch(f.V.kind){case"scalar":y=qr(f.V.T,Go.BIGINT);break;case"enum":y=f.V.T.values[0].no;break;case"message":y=new f.V.T}return[b,y]}(n,e,r);t[i][d]=u}}function dl(t,e,n,o){const r=e.getType().runtime.bin,s=o==null?void 0:o.delimited;return r.readMessage(e,t,s?o.no:t.uint32(),n,s),e}function AE(t,e){const n=ul(t,e);return typeof n=="bigint"?n.toString():n}function ul(t,e){switch(e){case fe.STRING:return t.string();case fe.BOOL:return t.bool();case fe.DOUBLE:return t.double();case fe.FLOAT:return t.float();case fe.INT32:return t.int32();case fe.INT64:return t.int64();case fe.UINT64:return t.uint64();case fe.FIXED64:return t.fixed64();case fe.BYTES:return t.bytes();case fe.FIXED32:return t.fixed32();case fe.SFIXED32:return t.sfixed32();case fe.SFIXED64:return t.sfixed64();case fe.SINT64:return t.sint64();case fe.UINT32:return t.uint32();case fe.SINT32:return t.sint32()}}function r_(t,e,n,o){Nt(e!==void 0);const r=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?fe.INT32:t.T;if(r)if(Nt(Array.isArray(e)),t.packed)(function(i,a,l,c){if(!c.length)return;i.tag(l,At.LengthDelimited).fork();let[,d]=i_(a);for(let u=0;u<c.length;u++)i[d](c[u]);i.join()})(n,s,t.no,e);else for(const i of e)xi(n,s,t.no,i);else xi(n,s,t.no,e);break;case"message":if(r){Nt(Array.isArray(e));for(const i of e)s_(n,o,t,i)}else s_(n,o,t,e);break;case"map":Nt(typeof e=="object"&&e!=null);for(const[i,a]of Object.entries(e))TE(n,o,t,i,a)}}function TE(t,e,n,o,r){t.tag(n.no,At.LengthDelimited),t.fork();let s=o;switch(n.K){case fe.INT32:case fe.FIXED32:case fe.UINT32:case fe.SFIXED32:case fe.SINT32:s=Number.parseInt(o);break;case fe.BOOL:Nt(o=="true"||o=="false"),s=o=="true"}switch(xi(t,n.K,1,s),n.V.kind){case"scalar":xi(t,n.V.T,2,r);break;case"enum":xi(t,fe.INT32,2,r);break;case"message":Nt(r!==void 0),t.tag(2,At.LengthDelimited).bytes(r.toBinary(e))}t.join()}function s_(t,e,n,o){const r=K1(n.T,o);n.delimited?t.tag(n.no,At.StartGroup).raw(r.toBinary(e)).tag(n.no,At.EndGroup):t.tag(n.no,At.LengthDelimited).bytes(r.toBinary(e))}function xi(t,e,n,o){Nt(o!==void 0);let[r,s]=i_(e);t.tag(n,r)[s](o)}function i_(t){let e=At.Varint;switch(t){case fe.BYTES:case fe.STRING:e=At.LengthDelimited;break;case fe.DOUBLE:case fe.FIXED64:case fe.SFIXED64:e=At.Bit64;break;case fe.FIXED32:case fe.SFIXED32:case fe.FLOAT:e=At.Bit32}return[e,fe[t].toLowerCase()]}function hl(t){if(t===void 0)return t;if(Er(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function wi(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class ME{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const o of this.list())n[o.jsonName]=n[o.name]=o;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const o of this.list())n[o.no]=o;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const o of this.list())o.oneof?o.oneof!==n&&(n=o.oneof,e.push(n)):e.push(o)}return this.members}}function a_(t,e){const n=l_(t);return e?n:LE(PE(n))}const OE=l_;function l_(t){let e=!1;const n=[];for(let o=0;o<t.length;o++){let r=t.charAt(o);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r)}}return n.join("")}const DE=new Set(["constructor","toString","toJSON","valueOf"]),RE=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),c_=t=>`${t}$`,PE=t=>RE.has(t)?c_(t):t,LE=t=>DE.has(t)?c_(t):t;class FE{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=a_(e,!1)}addField(e){Nt(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}const ke=(d_=t=>new ME(t,e=>function(n){var o,r,s,i,a,l;const c=[];let d;for(const u of typeof n=="function"?n():n){const f=u;if(f.localName=a_(u.name,u.oneof!==void 0),f.jsonName=(o=u.jsonName)!==null&&o!==void 0?o:OE(u.name),f.repeated=(r=u.repeated)!==null&&r!==void 0&&r,u.kind=="scalar"&&(f.L=(s=u.L)!==null&&s!==void 0?s:Go.BIGINT),f.delimited=(i=u.delimited)!==null&&i!==void 0&&i,f.req=(a=u.req)!==null&&a!==void 0&&a,f.opt=(l=u.opt)!==null&&l!==void 0&&l,u.packed===void 0&&(f.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=fe.BYTES&&u.T!=fe.STRING),u.oneof!==void 0){const m=typeof u.oneof=="string"?u.oneof:u.oneof.name;d&&d.name==m||(d=new FE(m)),f.oneof=d,d.addField(f)}c.push(f)}return c}(e)),u_=t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,o=t;if(e.repeated)o[n]=[];else switch(e.kind){case"oneof":o[n]={case:void 0};break;case"enum":o[n]=0;break;case"map":o[n]={};break;case"scalar":o[n]=qr(e.T,e.L)}}},{syntax:"proto3",json:{makeReadOptions:SE,makeWriteOptions:CE,readMessage(t,e,n,o){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${t.typeName} from JSON: ${ro(e)}`);o=o??new t;const r=new Map,s=n.typeRegistry;for(const[i,a]of Object.entries(e)){const l=t.fields.findJsonName(i);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const c=r.get(l.oneof);if(c!==void 0)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${l.oneof.name}" present: "${c}", "${i}"`);r.set(l.oneof,i)}Q1(o,a,l,n,t)}else{let c=!1;if(s!=null&&s.findExtension&&i.startsWith("[")&&i.endsWith("]")){const d=s.findExtension(i.substring(1,i.length-1));if(d&&d.extendee.typeName==t.typeName){c=!0;const[u,f]=W1(d);Q1(u,a,d.field,n,d),kE(o,d,f(),n)}}if(!c&&!n.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${i}" is unknown`)}}return o},writeMessage(t,e){const n=t.getType(),o={};let r;try{for(r of n.fields.byNumber()){if(!Y1(r,t)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!jE(r))continue}const i=e_(r,r.oneof?t[r.oneof.localName].value:t[r.localName],e);i!==void 0&&(o[e.useProtoFieldName?r.name:r.jsonName]=i)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const i of n.runtime.bin.listUnknownFields(t)){const a=s.findExtensionFor(n.typeName,i.no);if(a&&q1(t,a)){const l=vE(t,a,e),c=e_(a.field,l,e);c!==void 0&&(o[a.field.jsonName]=c)}}}catch(s){const i=r?`cannot encode field ${n.typeName}.${r.name} to JSON`:`cannot encode message ${n.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(i+(a.length>0?`: ${a}`:""))}return o},readScalar:(t,e,n)=>yi(t,e,n??Go.BIGINT,!0),writeScalar(t,e,n){if(e!==void 0)return n||$1(t,e)?cl(t,e):void 0},debug:ro},bin:{makeReadOptions:EE,makeWriteOptions:IE,listUnknownFields(t){var e;return(e=t[Gr])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Gr]},writeUnknownFields(t,e){const n=t[Gr];if(n)for(const o of n)e.tag(o.no,o.wireType).raw(o.data)},onUnknownField(t,e,n,o){const r=t;Array.isArray(r[Gr])||(r[Gr]=[]),r[Gr].push({no:e,wireType:n,data:o})},readMessage(t,e,n,o,r){const s=t.getType(),i=r?e.len:e.pos+n;let a,l;for(;e.pos<i&&([a,l]=e.tag(),r!==!0||l!=At.EndGroup);){const c=s.fields.find(a);if(c)o_(t,e,c,l,o);else{const d=e.skip(l,a);o.readUnknownFields&&this.onUnknownField(t,a,l,d)}}if(r&&(l!=At.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:o_,writeMessage(t,e,n){const o=t.getType();for(const r of o.fields.byNumber())if(Y1(r,t))r_(r,r.oneof?t[r.oneof.localName].value:t[r.localName],e,n);else if(r.req)throw new Error(`cannot encode field ${o.typeName}.${r.name} to binary: required field not set`);return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,o){e!==void 0&&r_(t,e,n,o)}},util:Object.assign(Object.assign({},{setEnumType:P1,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const o of n.fields.byMember()){const r=o.localName,s=e,i=t;if(i[r]!=null)switch(o.kind){case"oneof":const a=i[r].case;if(a===void 0)continue;const l=o.findField(a);let c=i[r].value;l&&l.kind=="message"&&!Er(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===fe.BYTES&&(c=wi(c)),s[r]={case:a,value:c};break;case"scalar":case"enum":let d=i[r];o.T===fe.BYTES&&(d=o.repeated?d.map(wi):wi(d)),s[r]=d;break;case"map":switch(o.V.kind){case"scalar":case"enum":if(o.V.T===fe.BYTES)for(const[m,_]of Object.entries(i[r]))s[r][m]=wi(_);else Object.assign(s[r],i[r]);break;case"message":const f=o.V.T;for(const m of Object.keys(i[r])){let _=i[r][m];f.fieldWrapper||(_=new f(_)),s[r][m]=_}}break;case"message":const u=o.T;if(o.repeated)s[r]=i[r].map(f=>Er(f,u)?f:new u(f));else{const f=i[r];u.fieldWrapper?u.typeName==="google.protobuf.BytesValue"?s[r]=wi(f):s[r]=f:s[r]=Er(f,u)?f:new u(f)}}}},equals:(t,e,n)=>e===n||!(!e||!n)&&t.fields.byMember().every(o=>{const r=e[o.localName],s=n[o.localName];if(o.repeated){if(r.length!==s.length)return!1;switch(o.kind){case"message":return r.every((i,a)=>o.T.equals(i,s[a]));case"scalar":return r.every((i,a)=>Yo(o.T,i,s[a]));case"enum":return r.every((i,a)=>Yo(fe.INT32,i,s[a]))}throw new Error(`repeated cannot contain ${o.kind}`)}switch(o.kind){case"message":return o.T.equals(r,s);case"enum":return Yo(fe.INT32,r,s);case"scalar":return Yo(o.T,r,s);case"oneof":if(r.case!==s.case)return!1;const i=o.findField(r.case);if(i===void 0)return!0;switch(i.kind){case"message":return i.T.equals(r.value,s.value);case"enum":return Yo(fe.INT32,r.value,s.value);case"scalar":return Yo(i.T,r.value,s.value)}throw new Error(`oneof cannot contain ${i.kind}`);case"map":const a=Object.keys(r).concat(Object.keys(s));switch(o.V.kind){case"message":const l=o.V.T;return a.every(d=>l.equals(r[d],s[d]));case"enum":return a.every(d=>Yo(fe.INT32,r[d],s[d]));case"scalar":const c=o.V.T;return a.every(d=>Yo(c,r[d],s[d]))}}}),clone(t){const e=t.getType(),n=new e,o=n;for(const r of e.fields.byMember()){const s=t[r.localName];let i;if(r.repeated)i=s.map(hl);else if(r.kind=="map"){i=o[r.localName];for(const[a,l]of Object.entries(s))i[a]=hl(l)}else i=r.kind=="oneof"?r.findField(s.case)?{case:s.case,value:hl(s.value)}:{case:void 0}:hl(s);o[r.localName]=i}for(const r of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(o,r.no,r.wireType,r.data);return n}}),{newFieldList:d_,initFields:u_}),makeMessageType(t,e,n){return function(o,r,s,i){var a;const l=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:r.substring(r.lastIndexOf(".")+1),c={[l]:function(d){o.util.initFields(this),o.util.initPartial(d,this)}}[l];return Object.setPrototypeOf(c.prototype,new Dt),Object.assign(c,{runtime:o,typeName:r,fields:o.util.newFieldList(s),fromBinary:(d,u)=>new c().fromBinary(d,u),fromJson:(d,u)=>new c().fromJson(d,u),fromJsonString:(d,u)=>new c().fromJsonString(d,u),equals:(d,u)=>o.util.equals(c,d,u)}),c}(this,t,e,n)},makeEnum:gE,makeEnumType:L1,getEnumType:pE,makeExtension(t,e,n){return function(o,r,s,i){let a;return{typeName:r,extendee:s,get field(){if(!a){const l=typeof i=="function"?i():i;l.name=r.split(".").pop(),l.jsonName=`[${r}]`,a=o.util.newFieldList([l]).list()[0]}return a},runtime:o}}(this,t,e,n)}});var d_,u_,Rn,Kd,fl,vi,ml,ki,Jo;(function(t){t[t.Unary=0]="Unary",t[t.ServerStreaming=1]="ServerStreaming",t[t.ClientStreaming=2]="ClientStreaming",t[t.BiDiStreaming=3]="BiDiStreaming"})(Rn||(Rn={})),function(t){t[t.NoSideEffects=1]="NoSideEffects",t[t.Idempotent=2]="Idempotent"}(Kd||(Kd={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.JUPYTER_FORMAT=77]="JUPYTER_FORMAT"}(fl||(fl={})),ke.util.setEnumType(fl,"exa.codeium_common_pb.ExperimentKey",[{no:0,name:"UNSPECIFIED"},{no:77,name:"JUPYTER_FORMAT"}]),function(t){t[t.CODEIUM=0]="CODEIUM"}(vi||(vi={})),ke.util.setEnumType(vi,"exa.codeium_common_pb.AuthSource",[{no:0,name:"AUTH_SOURCE_CODEIUM"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ENABLE_CODEIUM=1]="ENABLE_CODEIUM",t[t.DISABLE_CODEIUM=2]="DISABLE_CODEIUM",t[t.SHOW_PREVIOUS_COMPLETION=3]="SHOW_PREVIOUS_COMPLETION",t[t.SHOW_NEXT_COMPLETION=4]="SHOW_NEXT_COMPLETION"}(ml||(ml={})),ke.util.setEnumType(ml,"exa.codeium_common_pb.EventType",[{no:0,name:"EVENT_TYPE_UNSPECIFIED"},{no:1,name:"EVENT_TYPE_ENABLE_CODEIUM"},{no:2,name:"EVENT_TYPE_DISABLE_CODEIUM"},{no:3,name:"EVENT_TYPE_SHOW_PREVIOUS_COMPLETION"},{no:4,name:"EVENT_TYPE_SHOW_NEXT_COMPLETION"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.TYPING_AS_SUGGESTED=1]="TYPING_AS_SUGGESTED",t[t.CACHE=2]="CACHE",t[t.NETWORK=3]="NETWORK"}(ki||(ki={})),ke.util.setEnumType(ki,"exa.codeium_common_pb.CompletionSource",[{no:0,name:"COMPLETION_SOURCE_UNSPECIFIED"},{no:1,name:"COMPLETION_SOURCE_TYPING_AS_SUGGESTED"},{no:2,name:"COMPLETION_SOURCE_CACHE"},{no:3,name:"COMPLETION_SOURCE_NETWORK"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.C=1]="C",t[t.CLOJURE=2]="CLOJURE",t[t.COFFEESCRIPT=3]="COFFEESCRIPT",t[t.CPP=4]="CPP",t[t.CSHARP=5]="CSHARP",t[t.CSS=6]="CSS",t[t.CUDACPP=7]="CUDACPP",t[t.DOCKERFILE=8]="DOCKERFILE",t[t.GO=9]="GO",t[t.GROOVY=10]="GROOVY",t[t.HANDLEBARS=11]="HANDLEBARS",t[t.HASKELL=12]="HASKELL",t[t.HCL=13]="HCL",t[t.HTML=14]="HTML",t[t.INI=15]="INI",t[t.JAVA=16]="JAVA",t[t.JAVASCRIPT=17]="JAVASCRIPT",t[t.JSON=18]="JSON",t[t.JULIA=19]="JULIA",t[t.KOTLIN=20]="KOTLIN",t[t.LATEX=21]="LATEX",t[t.LESS=22]="LESS",t[t.LUA=23]="LUA",t[t.MAKEFILE=24]="MAKEFILE",t[t.MARKDOWN=25]="MARKDOWN",t[t.OBJECTIVEC=26]="OBJECTIVEC",t[t.OBJECTIVECPP=27]="OBJECTIVECPP",t[t.PERL=28]="PERL",t[t.PHP=29]="PHP",t[t.PLAINTEXT=30]="PLAINTEXT",t[t.PROTOBUF=31]="PROTOBUF",t[t.PBTXT=32]="PBTXT",t[t.PYTHON=33]="PYTHON",t[t.R=34]="R",t[t.RUBY=35]="RUBY",t[t.RUST=36]="RUST",t[t.SASS=37]="SASS",t[t.SCALA=38]="SCALA",t[t.SCSS=39]="SCSS",t[t.SHELL=40]="SHELL",t[t.SQL=41]="SQL",t[t.STARLARK=42]="STARLARK",t[t.SWIFT=43]="SWIFT",t[t.TSX=44]="TSX",t[t.TYPESCRIPT=45]="TYPESCRIPT",t[t.VISUALBASIC=46]="VISUALBASIC",t[t.VUE=47]="VUE",t[t.XML=48]="XML",t[t.XSL=49]="XSL",t[t.YAML=50]="YAML",t[t.SVELTE=51]="SVELTE",t[t.TOML=52]="TOML",t[t.DART=53]="DART",t[t.RST=54]="RST",t[t.OCAML=55]="OCAML",t[t.CMAKE=56]="CMAKE",t[t.PASCAL=57]="PASCAL",t[t.ELIXIR=58]="ELIXIR",t[t.FSHARP=59]="FSHARP",t[t.LISP=60]="LISP",t[t.MATLAB=61]="MATLAB",t[t.POWERSHELL=62]="POWERSHELL",t[t.SOLIDITY=63]="SOLIDITY",t[t.ADA=64]="ADA",t[t.OCAML_INTERFACE=65]="OCAML_INTERFACE"}(Jo||(Jo={})),ke.util.setEnumType(Jo,"exa.codeium_common_pb.Language",[{no:0,name:"LANGUAGE_UNSPECIFIED"},{no:1,name:"LANGUAGE_C"},{no:2,name:"LANGUAGE_CLOJURE"},{no:3,name:"LANGUAGE_COFFEESCRIPT"},{no:4,name:"LANGUAGE_CPP"},{no:5,name:"LANGUAGE_CSHARP"},{no:6,name:"LANGUAGE_CSS"},{no:7,name:"LANGUAGE_CUDACPP"},{no:8,name:"LANGUAGE_DOCKERFILE"},{no:9,name:"LANGUAGE_GO"},{no:10,name:"LANGUAGE_GROOVY"},{no:11,name:"LANGUAGE_HANDLEBARS"},{no:12,name:"LANGUAGE_HASKELL"},{no:13,name:"LANGUAGE_HCL"},{no:14,name:"LANGUAGE_HTML"},{no:15,name:"LANGUAGE_INI"},{no:16,name:"LANGUAGE_JAVA"},{no:17,name:"LANGUAGE_JAVASCRIPT"},{no:18,name:"LANGUAGE_JSON"},{no:19,name:"LANGUAGE_JULIA"},{no:20,name:"LANGUAGE_KOTLIN"},{no:21,name:"LANGUAGE_LATEX"},{no:22,name:"LANGUAGE_LESS"},{no:23,name:"LANGUAGE_LUA"},{no:24,name:"LANGUAGE_MAKEFILE"},{no:25,name:"LANGUAGE_MARKDOWN"},{no:26,name:"LANGUAGE_OBJECTIVEC"},{no:27,name:"LANGUAGE_OBJECTIVECPP"},{no:28,name:"LANGUAGE_PERL"},{no:29,name:"LANGUAGE_PHP"},{no:30,name:"LANGUAGE_PLAINTEXT"},{no:31,name:"LANGUAGE_PROTOBUF"},{no:32,name:"LANGUAGE_PBTXT"},{no:33,name:"LANGUAGE_PYTHON"},{no:34,name:"LANGUAGE_R"},{no:35,name:"LANGUAGE_RUBY"},{no:36,name:"LANGUAGE_RUST"},{no:37,name:"LANGUAGE_SASS"},{no:38,name:"LANGUAGE_SCALA"},{no:39,name:"LANGUAGE_SCSS"},{no:40,name:"LANGUAGE_SHELL"},{no:41,name:"LANGUAGE_SQL"},{no:42,name:"LANGUAGE_STARLARK"},{no:43,name:"LANGUAGE_SWIFT"},{no:44,name:"LANGUAGE_TSX"},{no:45,name:"LANGUAGE_TYPESCRIPT"},{no:46,name:"LANGUAGE_VISUALBASIC"},{no:47,name:"LANGUAGE_VUE"},{no:48,name:"LANGUAGE_XML"},{no:49,name:"LANGUAGE_XSL"},{no:50,name:"LANGUAGE_YAML"},{no:51,name:"LANGUAGE_SVELTE"},{no:52,name:"LANGUAGE_TOML"},{no:53,name:"LANGUAGE_DART"},{no:54,name:"LANGUAGE_RST"},{no:55,name:"LANGUAGE_OCAML"},{no:56,name:"LANGUAGE_CMAKE"},{no:57,name:"LANGUAGE_PASCAL"},{no:58,name:"LANGUAGE_ELIXIR"},{no:59,name:"LANGUAGE_FSHARP"},{no:60,name:"LANGUAGE_LISP"},{no:61,name:"LANGUAGE_MATLAB"},{no:62,name:"LANGUAGE_POWERSHELL"},{no:63,name:"LANGUAGE_SOLIDITY"},{no:64,name:"LANGUAGE_ADA"},{no:65,name:"LANGUAGE_OCAML_INTERFACE"}]);const xo=class xo extends Dt{constructor(n){super();ee(this,"completionId","");ee(this,"text","");ee(this,"prefix","");ee(this,"stop","");ee(this,"score",0);ee(this,"tokens",[]);ee(this,"decodedTokens",[]);ee(this,"probabilities",[]);ee(this,"adjustedProbabilities",[]);ee(this,"generatedLength",kt.zero);ke.util.initPartial(n,this)}static fromBinary(n,o){return new xo().fromBinary(n,o)}static fromJson(n,o){return new xo().fromJson(n,o)}static fromJsonString(n,o){return new xo().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(xo,n,o)}};ee(xo,"runtime",ke),ee(xo,"typeName","exa.codeium_common_pb.Completion"),ee(xo,"fields",ke.util.newFieldList(()=>[{no:1,name:"completion_id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"prefix",kind:"scalar",T:9},{no:4,name:"stop",kind:"scalar",T:9},{no:5,name:"score",kind:"scalar",T:1},{no:6,name:"tokens",kind:"scalar",T:4,repeated:!0},{no:7,name:"decoded_tokens",kind:"scalar",T:9,repeated:!0},{no:8,name:"probabilities",kind:"scalar",T:1,repeated:!0},{no:9,name:"adjusted_probabilities",kind:"scalar",T:1,repeated:!0},{no:10,name:"generated_length",kind:"scalar",T:4}]));let Xd=xo;const wo=class wo extends Dt{constructor(n){super();ee(this,"ideName","");ee(this,"ideVersion","");ee(this,"extensionName","");ee(this,"extensionVersion","");ee(this,"apiKey","");ee(this,"locale","");ee(this,"sessionId","");ee(this,"requestId",kt.zero);ee(this,"userAgent","");ee(this,"url","");ee(this,"authSource",vi.CODEIUM);ke.util.initPartial(n,this)}static fromBinary(n,o){return new wo().fromBinary(n,o)}static fromJson(n,o){return new wo().fromJson(n,o)}static fromJsonString(n,o){return new wo().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(wo,n,o)}};ee(wo,"runtime",ke),ee(wo,"typeName","exa.codeium_common_pb.Metadata"),ee(wo,"fields",ke.util.newFieldList(()=>[{no:1,name:"ide_name",kind:"scalar",T:9},{no:7,name:"ide_version",kind:"scalar",T:9},{no:12,name:"extension_name",kind:"scalar",T:9},{no:2,name:"extension_version",kind:"scalar",T:9},{no:3,name:"api_key",kind:"scalar",T:9},{no:4,name:"locale",kind:"scalar",T:9},{no:10,name:"session_id",kind:"scalar",T:9},{no:9,name:"request_id",kind:"scalar",T:4},{no:13,name:"user_agent",kind:"scalar",T:9},{no:14,name:"url",kind:"scalar",T:9},{no:15,name:"auth_source",kind:"enum",T:ke.getEnumType(vi)}]));let pl=wo;const vo=class vo extends Dt{constructor(n){super();ee(this,"tabSize",kt.zero);ee(this,"insertSpaces",!1);ke.util.initPartial(n,this)}static fromBinary(n,o){return new vo().fromBinary(n,o)}static fromJson(n,o){return new vo().fromJson(n,o)}static fromJsonString(n,o){return new vo().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(vo,n,o)}};ee(vo,"runtime",ke),ee(vo,"typeName","exa.codeium_common_pb.EditorOptions"),ee(vo,"fields",ke.util.newFieldList(()=>[{no:1,name:"tab_size",kind:"scalar",T:4},{no:2,name:"insert_spaces",kind:"scalar",T:8}]));let Zd=vo;ke.util.newFieldList(()=>[{no:1,name:"event_type",kind:"enum",T:ke.getEnumType(ml)},{no:2,name:"event_json",kind:"scalar",T:9},{no:3,name:"timestamp_unix_ms",kind:"scalar",T:3}]);class zE extends Xs{constructor(n,o){super();ee(this,"index");ee(this,"total");this.index=n,this.total=o}toDOM(){const n=document.createElement("span");n.setAttribute("aria-hidden","true"),n.className="cm-codeium-cycle";const o=n.appendChild(document.createElement("span"));o.className="cm-codeium-cycle-explanation",o.innerText=`${this.index+1}/${this.total}`;const r=n.appendChild(document.createElement("button"));return r.className="cm-codeium-cycle-key",r.innerText="\u2192 (Ctrl ])",r.dataset.action="codeium-cycle",n}ignoreEvent(){return!1}}const gl=Ks.define({combine:t=>Oc(t,{language:Jo.TYPESCRIPT,timeout:150,widgetClass:zE,alwaysOn:!0},{})}),h_=Ks.define({combine:t=>Oc(t,{override:()=>[]},{})}),BE=ut.mark({class:"cm-ghostText"}),Ir=Mn.define({create:t=>null,update(t,e){var o;const n=e.state.facet(gl);for(const r of e.effects){if(r.is(Vd)){const{changeSpecs:s,index:i}=r.value,a=s[i].map(c=>BE.range(c.absoluteStartPos,c.absoluteEndPos)),l=(o=a.at(-1))==null?void 0:o.to;return{index:i,decorations:ut.set([...a,...l!==void 0&&s.length>1&&n.widgetClass?[ut.widget({widget:new n.widgetClass(i,s.length),side:1}).range(l)]:[]]),changeSpecs:s,reverseChangeSet:r.value.reverseChangeSet}}if(r.is(Hd)||r.is($d))return null}return t&&{...t,decorations:t.decorations.map(e.changes),reverseChangeSet:t.reverseChangeSet.map(e.changes)}},provide:t=>st.decorations.from(t,e=>(e==null?void 0:e.decorations)||ut.none)}),Yr=Pm.define(),_l=Pm.define();var _t;function Qd(t){const e=_t[t];return typeof e!="string"?t.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,n=>"_"+n.toLowerCase())}let bl;(function(t){t[t.Canceled=1]="Canceled",t[t.Unknown=2]="Unknown",t[t.InvalidArgument=3]="InvalidArgument",t[t.DeadlineExceeded=4]="DeadlineExceeded",t[t.NotFound=5]="NotFound",t[t.AlreadyExists=6]="AlreadyExists",t[t.PermissionDenied=7]="PermissionDenied",t[t.ResourceExhausted=8]="ResourceExhausted",t[t.FailedPrecondition=9]="FailedPrecondition",t[t.Aborted=10]="Aborted",t[t.OutOfRange=11]="OutOfRange",t[t.Unimplemented=12]="Unimplemented",t[t.Internal=13]="Internal",t[t.Unavailable=14]="Unavailable",t[t.DataLoss=15]="DataLoss",t[t.Unauthenticated=16]="Unauthenticated"})(_t||(_t={}));class Yt extends Error{constructor(e,n=_t.Unknown,o,r,s){super(function(i,a){return i.length?`[${Qd(a)}] ${i}`:`[${Qd(a)}]`}(e,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=n,this.metadata=new Headers(o??{}),this.details=r??[],this.cause=s}static from(e,n=_t.Unknown){return e instanceof Yt?e:e instanceof Error?e.name=="AbortError"?new Yt(e.message,_t.Canceled):new Yt(e.message,n,void 0,void 0,e):new Yt(String(e),n,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error&&(Object.getPrototypeOf(e)===Yt.prototype||e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e)}findDetails(e){const n="typeName"in e?{findMessage:r=>r===e.typeName?e:void 0}:e,o=[];for(const r of this.details){if("getType"in r){n.findMessage(r.getType().typeName)&&o.push(r);continue}const s=n.findMessage(r.type);if(s)try{o.push(s.fromBinary(r.value))}catch{}}return o}}var UE=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(r){e[r]=t[r]&&function(s){return new Promise(function(i,a){(function(l,c,d,u){Promise.resolve(u).then(function(f){l({value:f,done:d})},c)})(i,a,(s=t[r](s)).done,s.value)})}}},Si=function(t){return this instanceof Si?(this.v=t,this):new Si(t)},VE=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),s=[];return o={},i("next"),i("throw"),i("return",function(u){return function(f){return Promise.resolve(f).then(u,c)}}),o[Symbol.asyncIterator]=function(){return this},o;function i(u,f){r[u]&&(o[u]=function(m){return new Promise(function(_,g){s.push([u,m,_,g])>1||a(u,m)})},f&&(o[u]=f(o[u])))}function a(u,f){try{(m=r[u](f)).value instanceof Si?Promise.resolve(m.value.v).then(l,c):d(s[0][2],m)}catch(_){d(s[0][3],_)}var m}function l(u){a("next",u)}function c(u){a("throw",u)}function d(u,f){u(f),s.shift(),s.length&&a(s[0][0],s[0][1])}},HE=function(t){var e,n;return e={},o("next"),o("throw",function(r){throw r}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(r,s){e[r]=t[r]?function(i){return(n=!n)?{value:Si(t[r](i)),done:!1}:s?s(i):i}:s}},f_=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(r){e[r]=t[r]&&function(s){return new Promise(function(i,a){(function(l,c,d,u){Promise.resolve(u).then(function(f){l({value:f,done:d})},c)})(i,a,(s=t[r](s)).done,s.value)})}}},Jr=function(t){return this instanceof Jr?(this.v=t,this):new Jr(t)},$E=function(t){var e,n;return e={},o("next"),o("throw",function(r){throw r}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(r,s){e[r]=t[r]?function(i){return(n=!n)?{value:Jr(t[r](i)),done:!1}:s?s(i):i}:s}},WE=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),s=[];return o={},i("next"),i("throw"),i("return",function(u){return function(f){return Promise.resolve(f).then(u,c)}}),o[Symbol.asyncIterator]=function(){return this},o;function i(u,f){r[u]&&(o[u]=function(m){return new Promise(function(_,g){s.push([u,m,_,g])>1||a(u,m)})},f&&(o[u]=f(o[u])))}function a(u,f){try{(m=r[u](f)).value instanceof Jr?Promise.resolve(m.value.v).then(l,c):d(s[0][2],m)}catch(_){d(s[0][3],_)}var m}function l(u){a("next",u)}function c(u){a("throw",u)}function d(u,f){u(f),s.shift(),s.length&&a(s[0][0],s[0][1])}};function m_(t,e){const n=function(){var o,r;return WE(this,arguments,function*(){const s=yield Jr(t);(o=e==null?void 0:e.onHeader)===null||o===void 0||o.call(e,s.header),yield Jr(yield*$E(f_(s.message))),(r=e==null?void 0:e.onTrailer)===null||r===void 0||r.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function p_(t){if(!t.aborted)return;if(t.reason!==void 0)return t.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function g_(){return{get(t){return t.id in this?this[t.id]:t.defaultValue},set(t,e){return this[t.id]=e,this},delete(t){return delete this[t.id],this}}}function __(t,e,n){const o=typeof e=="string"?e:e.typeName,r=typeof n=="string"?n:n.name;return t.toString().replace(/\/?$/,`/${o}/${r}`)}function b_(t,e){return e instanceof t?e:new t(e)}function qE(t,e){function n(o){return o.done===!0?o:{done:o.done,value:b_(t,o.value)}}return{[Symbol.asyncIterator](){const o=e[Symbol.asyncIterator](),r={next:()=>o.next().then(n)};return o.throw!==void 0&&(r.throw=s=>o.throw(s).then(n)),o.return!==void 0&&(r.return=s=>o.return(s).then(n)),r}}}function y_(t,e){var n;return(n=e==null?void 0:e.concat().reverse().reduce((o,r)=>r(o),t))!==null&&n!==void 0?n:t}function x_(t){var e;const n=Object.assign({},t);return(e=n.ignoreUnknownFields)!==null&&e!==void 0||(n.ignoreUnknownFields=!0),n}function w_(t,e,n,o){const r=e?v_(t.I,o):k_(t.I,n);return{parse:(e?v_(t.O,o):k_(t.O,n)).parse,serialize:r.serialize}}function v_(t,e){return{parse(n){try{return t.fromBinary(n,e)}catch(o){const r=o instanceof Error?o.message:String(o);throw new Yt(`parse binary: ${r}`,_t.InvalidArgument)}},serialize(n){try{return n.toBinary(e)}catch(o){const r=o instanceof Error?o.message:String(o);throw new Yt(`serialize binary: ${r}`,_t.Internal)}}}}function k_(t,e){var n,o;const r=(n=e==null?void 0:e.textEncoder)!==null&&n!==void 0?n:new TextEncoder,s=(o=e==null?void 0:e.textDecoder)!==null&&o!==void 0?o:new TextDecoder,i=x_(e);return{parse(a){try{const l=s.decode(a);return t.fromJsonString(l,i)}catch(l){throw Yt.from(l,_t.InvalidArgument)}},serialize(a){try{const l=a.toJsonString(i);return r.encode(l)}catch(l){throw Yt.from(l,_t.Internal)}}}}const GE=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i;function S_(t,e,n){if(e&&new Headers(e).forEach((i,a)=>n.metadata.append(a,i)),typeof t!="object"||t==null||Array.isArray(t)||!("code"in t)||typeof t.code!="string")throw n;const o=function(i){if(!bl){bl={};for(const a of Object.values(_t))typeof a!="string"&&(bl[Qd(a)]=a)}return bl[i]}(t.code);if(o===void 0)throw n;const r=t.message;if(r!=null&&typeof r!="string")throw n;const s=new Yt(r??"",o,e);if("details"in t&&Array.isArray(t.details))for(const i of t.details){if(i===null||typeof i!="object"||Array.isArray(i)||typeof i.type!="string"||typeof i.value!="string"||"debug"in i&&typeof i.debug!="object")throw n;try{s.details.push({type:i.type,value:il.dec(i.value),debug:i.debug})}catch{throw n}}return s}function YE(t){const e=new Yt("invalid end stream",_t.InvalidArgument);let n;try{n=JSON.parse(typeof t=="string"?t:new TextDecoder().decode(t))}catch{throw e}if(typeof n!="object"||n==null||Array.isArray(n))throw e;const o=new Headers;if("metadata"in n){if(typeof n.metadata!="object"||n.metadata==null||Array.isArray(n.metadata))throw e;for(const[r,s]of Object.entries(n.metadata)){if(!Array.isArray(s)||s.some(i=>typeof i!="string"))throw e;for(const i of s)o.append(r,i)}}return{metadata:o,error:"error"in n?S_(n.error,o,e):void 0}}const eu="Content-Type",JE="Content-Length",C_="Content-Encoding",KE="Accept-Encoding",N_="Connect-Protocol-Version";function j_(t){const e=new Headers,n=new Headers;return t.forEach((o,r)=>{r.toLowerCase().startsWith("trailer-")?n.set(r.substring(8),o):e.set(r,o)}),[e,n]}function E_(t,e,n,o,r){const s=new Headers(o??{});return n!==void 0&&s.set("Connect-Timeout-Ms",`${n}`),s.set(eu,t==Rn.Unary?e?"application/proto":"application/json":e?"application/connect+proto":"application/connect+json"),s.set(N_,"1"),s}function I_(t,e,n){const o=function(r){const s=r==null?void 0:r.match(GE);if(s)return{stream:!!s[1],binary:!!s[3]}}(n.get("Content-Type"));if(e!==200){const r=new Yt(`HTTP ${e}`,function(s){switch(s){case 400:return _t.InvalidArgument;case 401:return _t.Unauthenticated;case 403:return _t.PermissionDenied;case 404:return _t.Unimplemented;case 408:return _t.DeadlineExceeded;case 409:return _t.Aborted;case 412:return _t.FailedPrecondition;case 413:case 431:return _t.ResourceExhausted;case 415:return _t.Internal;case 429:case 502:case 503:case 504:return _t.Unavailable;default:return _t.Unknown}}(e),n);if(t==Rn.Unary&&o&&!o.binary)return{isUnaryError:!0,unaryError:r};throw r}return{isUnaryError:!1}}const XE="application/";function ZE(t,e,n){let o="?connect=v1";const r=t.header.get(eu);(r==null?void 0:r.indexOf(XE))===0&&(o+="&encoding="+encodeURIComponent(r.slice(12)));const s=t.header.get(C_);s!==null&&s!=="identity"&&(o+="&compression="+encodeURIComponent(s),n=!0),n&&(o+="&base64=1"),o+="&message="+function(l,c){return c?il.enc(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):encodeURIComponent(new TextDecoder().decode(l))}(e,n);const i=t.url+o,a=new Headers(t.header);return[N_,eu,JE,C_,KE].forEach(l=>a.delete(l)),Object.assign(Object.assign({},t),{init:Object.assign(Object.assign({},t.init),{method:"GET"}),url:i,header:a})}function A_(t){const{signal:e,cleanup:n}=function(r){const s=new AbortController,i=()=>{s.abort(new Yt("the operation timed out",_t.DeadlineExceeded))};let a;return r!==void 0&&(r<=0?i():a=setTimeout(i,r)),{signal:s.signal,cleanup:()=>clearTimeout(a)}}(t.timeoutMs),o=function(...r){const s=new AbortController,i=r.filter(l=>l!==void 0).concat(s.signal);for(const l of i){if(l.aborted){a.apply(l);break}l.addEventListener("abort",a)}function a(){s.signal.aborted||s.abort(p_(this));for(const l of i)l.removeEventListener("abort",a)}return s}(t.signal,e);return[o.signal,function(r){const s=Yt.from(e.aborted?p_(e):r);return o.abort(s),n(),Promise.reject(s)},function(){n(),o.abort()}]}var Ci,tu,Ni;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.INACTIVE=1]="INACTIVE",t[t.PROCESSING=2]="PROCESSING",t[t.SUCCESS=3]="SUCCESS",t[t.WARNING=4]="WARNING",t[t.ERROR=5]="ERROR"})(Ci||(Ci={})),ke.util.setEnumType(Ci,"exa.language_server_pb.CodeiumState",[{no:0,name:"CODEIUM_STATE_UNSPECIFIED"},{no:1,name:"CODEIUM_STATE_INACTIVE"},{no:2,name:"CODEIUM_STATE_PROCESSING"},{no:3,name:"CODEIUM_STATE_SUCCESS"},{no:4,name:"CODEIUM_STATE_WARNING"},{no:5,name:"CODEIUM_STATE_ERROR"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SINGLE=1]="SINGLE",t[t.MULTI=2]="MULTI"}(tu||(tu={})),ke.util.setEnumType(tu,"exa.language_server_pb.LineType",[{no:0,name:"LINE_TYPE_UNSPECIFIED"},{no:1,name:"LINE_TYPE_SINGLE"},{no:2,name:"LINE_TYPE_MULTI"}]),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.INLINE=1]="INLINE",t[t.BLOCK=2]="BLOCK",t[t.INLINE_MASK=3]="INLINE_MASK"}(Ni||(Ni={})),ke.util.setEnumType(Ni,"exa.language_server_pb.CompletionPartType",[{no:0,name:"COMPLETION_PART_TYPE_UNSPECIFIED"},{no:1,name:"COMPLETION_PART_TYPE_INLINE"},{no:2,name:"COMPLETION_PART_TYPE_BLOCK"},{no:3,name:"COMPLETION_PART_TYPE_INLINE_MASK"}]);const ko=class ko extends Dt{constructor(n){super();ee(this,"threshold",0);ke.util.initPartial(n,this)}static fromBinary(n,o){return new ko().fromBinary(n,o)}static fromJson(n,o){return new ko().fromJson(n,o)}static fromJsonString(n,o){return new ko().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(ko,n,o)}};ee(ko,"runtime",ke),ee(ko,"typeName","exa.language_server_pb.MultilineConfig"),ee(ko,"fields",ke.util.newFieldList(()=>[{no:1,name:"threshold",kind:"scalar",T:2}]));let nu=ko;const So=class So extends Dt{constructor(n){super();ee(this,"metadata");ee(this,"document");ee(this,"editorOptions");ee(this,"otherDocuments",[]);ee(this,"experimentConfig");ee(this,"modelName","");ee(this,"multilineConfig");ke.util.initPartial(n,this)}static fromBinary(n,o){return new So().fromBinary(n,o)}static fromJson(n,o){return new So().fromJson(n,o)}static fromJsonString(n,o){return new So().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(So,n,o)}};ee(So,"runtime",ke),ee(So,"typeName","exa.language_server_pb.GetCompletionsRequest"),ee(So,"fields",ke.util.newFieldList(()=>[{no:1,name:"metadata",kind:"message",T:pl},{no:2,name:"document",kind:"message",T:yl},{no:3,name:"editor_options",kind:"message",T:Zd},{no:5,name:"other_documents",kind:"message",T:yl,repeated:!0},{no:7,name:"experiment_config",kind:"message",T:cu},{no:10,name:"model_name",kind:"scalar",T:9},{no:13,name:"multiline_config",kind:"message",T:nu}]));let ou=So;const Co=class Co extends Dt{constructor(n){super();ee(this,"state");ee(this,"completionItems",[]);ke.util.initPartial(n,this)}static fromBinary(n,o){return new Co().fromBinary(n,o)}static fromJson(n,o){return new Co().fromJson(n,o)}static fromJsonString(n,o){return new Co().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(Co,n,o)}};ee(Co,"runtime",ke),ee(Co,"typeName","exa.language_server_pb.GetCompletionsResponse"),ee(Co,"fields",ke.util.newFieldList(()=>[{no:1,name:"state",kind:"message",T:du},{no:2,name:"completion_items",kind:"message",T:mu,repeated:!0}]));let ru=Co;const No=class No extends Dt{constructor(n){super();ee(this,"metadata");ee(this,"completionId","");ke.util.initPartial(n,this)}static fromBinary(n,o){return new No().fromBinary(n,o)}static fromJson(n,o){return new No().fromJson(n,o)}static fromJsonString(n,o){return new No().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(No,n,o)}};ee(No,"runtime",ke),ee(No,"typeName","exa.language_server_pb.AcceptCompletionRequest"),ee(No,"fields",ke.util.newFieldList(()=>[{no:1,name:"metadata",kind:"message",T:pl},{no:2,name:"completion_id",kind:"scalar",T:9}]));let su=No;const jo=class jo extends Dt{constructor(e){super(),ke.util.initPartial(e,this)}static fromBinary(e,n){return new jo().fromBinary(e,n)}static fromJson(e,n){return new jo().fromJson(e,n)}static fromJsonString(e,n){return new jo().fromJsonString(e,n)}static equals(e,n){return ke.util.equals(jo,e,n)}};ee(jo,"runtime",ke),ee(jo,"typeName","exa.language_server_pb.AcceptCompletionResponse"),ee(jo,"fields",ke.util.newFieldList(()=>[]));let iu=jo;const Eo=class Eo extends Dt{constructor(e){super(),ke.util.initPartial(e,this)}static fromBinary(e,n){return new Eo().fromBinary(e,n)}static fromJson(e,n){return new Eo().fromJson(e,n)}static fromJsonString(e,n){return new Eo().fromJsonString(e,n)}static equals(e,n){return ke.util.equals(Eo,e,n)}};ee(Eo,"runtime",ke),ee(Eo,"typeName","exa.language_server_pb.GetAuthTokenRequest"),ee(Eo,"fields",ke.util.newFieldList(()=>[]));let au=Eo;const Io=class Io extends Dt{constructor(n){super();ee(this,"authToken","");ee(this,"uuid","");ke.util.initPartial(n,this)}static fromBinary(n,o){return new Io().fromBinary(n,o)}static fromJson(n,o){return new Io().fromJson(n,o)}static fromJsonString(n,o){return new Io().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(Io,n,o)}};ee(Io,"runtime",ke),ee(Io,"typeName","exa.language_server_pb.GetAuthTokenResponse"),ee(Io,"fields",ke.util.newFieldList(()=>[{no:1,name:"auth_token",kind:"scalar",T:9},{no:2,name:"uuid",kind:"scalar",T:9}]));let lu=Io;const Ao=class Ao extends Dt{constructor(n){super();ee(this,"row",kt.zero);ee(this,"col",kt.zero);ke.util.initPartial(n,this)}static fromBinary(n,o){return new Ao().fromBinary(n,o)}static fromJson(n,o){return new Ao().fromJson(n,o)}static fromJsonString(n,o){return new Ao().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(Ao,n,o)}};ee(Ao,"runtime",ke),ee(Ao,"typeName","exa.language_server_pb.DocumentPosition"),ee(Ao,"fields",ke.util.newFieldList(()=>[{no:1,name:"row",kind:"scalar",T:4},{no:2,name:"col",kind:"scalar",T:4}]));let ji=Ao;const To=class To extends Dt{constructor(n){super();ee(this,"absolutePath","");ee(this,"relativePath","");ee(this,"text","");ee(this,"editorLanguage","");ee(this,"language",Jo.UNSPECIFIED);ee(this,"cursorOffset",kt.zero);ee(this,"cursorPosition");ee(this,"lineEnding","");ke.util.initPartial(n,this)}static fromBinary(n,o){return new To().fromBinary(n,o)}static fromJson(n,o){return new To().fromJson(n,o)}static fromJsonString(n,o){return new To().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(To,n,o)}};ee(To,"runtime",ke),ee(To,"typeName","exa.language_server_pb.Document"),ee(To,"fields",ke.util.newFieldList(()=>[{no:1,name:"absolute_path",kind:"scalar",T:9},{no:2,name:"relative_path",kind:"scalar",T:9},{no:3,name:"text",kind:"scalar",T:9},{no:4,name:"editor_language",kind:"scalar",T:9},{no:5,name:"language",kind:"enum",T:ke.getEnumType(Jo)},{no:6,name:"cursor_offset",kind:"scalar",T:4},{no:8,name:"cursor_position",kind:"message",T:ji},{no:7,name:"line_ending",kind:"scalar",T:9}]));let yl=To;const Mo=class Mo extends Dt{constructor(n){super();ee(this,"forceEnableExperiments",[]);ke.util.initPartial(n,this)}static fromBinary(n,o){return new Mo().fromBinary(n,o)}static fromJson(n,o){return new Mo().fromJson(n,o)}static fromJsonString(n,o){return new Mo().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(Mo,n,o)}};ee(Mo,"runtime",ke),ee(Mo,"typeName","exa.language_server_pb.ExperimentConfig"),ee(Mo,"fields",ke.util.newFieldList(()=>[{no:1,name:"force_enable_experiments",kind:"enum",T:ke.getEnumType(fl),repeated:!0}]));let cu=Mo;const Oo=class Oo extends Dt{constructor(n){super();ee(this,"state",Ci.UNSPECIFIED);ee(this,"message","");ke.util.initPartial(n,this)}static fromBinary(n,o){return new Oo().fromBinary(n,o)}static fromJson(n,o){return new Oo().fromJson(n,o)}static fromJsonString(n,o){return new Oo().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(Oo,n,o)}};ee(Oo,"runtime",ke),ee(Oo,"typeName","exa.language_server_pb.State"),ee(Oo,"fields",ke.util.newFieldList(()=>[{no:1,name:"state",kind:"enum",T:ke.getEnumType(Ci)},{no:2,name:"message",kind:"scalar",T:9}]));let du=Oo;const Do=class Do extends Dt{constructor(n){super();ee(this,"startOffset",kt.zero);ee(this,"endOffset",kt.zero);ee(this,"startPosition");ee(this,"endPosition");ke.util.initPartial(n,this)}static fromBinary(n,o){return new Do().fromBinary(n,o)}static fromJson(n,o){return new Do().fromJson(n,o)}static fromJsonString(n,o){return new Do().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(Do,n,o)}};ee(Do,"runtime",ke),ee(Do,"typeName","exa.language_server_pb.Range"),ee(Do,"fields",ke.util.newFieldList(()=>[{no:1,name:"start_offset",kind:"scalar",T:4},{no:2,name:"end_offset",kind:"scalar",T:4},{no:3,name:"start_position",kind:"message",T:ji},{no:4,name:"end_position",kind:"message",T:ji}]));let uu=Do;const Ro=class Ro extends Dt{constructor(n){super();ee(this,"text","");ee(this,"deltaCursorOffset",kt.zero);ke.util.initPartial(n,this)}static fromBinary(n,o){return new Ro().fromBinary(n,o)}static fromJson(n,o){return new Ro().fromJson(n,o)}static fromJsonString(n,o){return new Ro().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(Ro,n,o)}};ee(Ro,"runtime",ke),ee(Ro,"typeName","exa.language_server_pb.Suffix"),ee(Ro,"fields",ke.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"delta_cursor_offset",kind:"scalar",T:3}]));let hu=Ro;const Po=class Po extends Dt{constructor(n){super();ee(this,"text","");ee(this,"offset",kt.zero);ee(this,"type",Ni.UNSPECIFIED);ee(this,"prefix","");ee(this,"line",kt.zero);ke.util.initPartial(n,this)}static fromBinary(n,o){return new Po().fromBinary(n,o)}static fromJson(n,o){return new Po().fromJson(n,o)}static fromJsonString(n,o){return new Po().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(Po,n,o)}};ee(Po,"runtime",ke),ee(Po,"typeName","exa.language_server_pb.CompletionPart"),ee(Po,"fields",ke.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"offset",kind:"scalar",T:4},{no:3,name:"type",kind:"enum",T:ke.getEnumType(Ni)},{no:4,name:"prefix",kind:"scalar",T:9},{no:5,name:"line",kind:"scalar",T:4}]));let fu=Po;const Lo=class Lo extends Dt{constructor(n){super();ee(this,"completion");ee(this,"suffix");ee(this,"range");ee(this,"source",ki.UNSPECIFIED);ee(this,"completionParts",[]);ke.util.initPartial(n,this)}static fromBinary(n,o){return new Lo().fromBinary(n,o)}static fromJson(n,o){return new Lo().fromJson(n,o)}static fromJsonString(n,o){return new Lo().fromJsonString(n,o)}static equals(n,o){return ke.util.equals(Lo,n,o)}};ee(Lo,"runtime",ke),ee(Lo,"typeName","exa.language_server_pb.CompletionItem"),ee(Lo,"fields",ke.util.newFieldList(()=>[{no:1,name:"completion",kind:"message",T:Xd},{no:5,name:"suffix",kind:"message",T:hu},{no:2,name:"range",kind:"message",T:uu},{no:3,name:"source",kind:"enum",T:ke.getEnumType(ki)},{no:8,name:"completion_parts",kind:"message",T:fu,repeated:!0}]));let mu=Lo;const QE={typeName:"exa.language_server_pb.LanguageServerService",methods:{getCompletions:{name:"GetCompletions",I:ou,O:ru,kind:Rn.Unary},acceptCompletion:{name:"AcceptCompletion",I:su,O:iu,kind:Rn.Unary},getAuthToken:{name:"GetAuthToken",I:au,O:lu,kind:Rn.Unary}}};var Ei=function(t){return this instanceof Ei?(this.v=t,this):new Ei(t)},e5=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),s=[];return o={},i("next"),i("throw"),i("return",function(u){return function(f){return Promise.resolve(f).then(u,c)}}),o[Symbol.asyncIterator]=function(){return this},o;function i(u,f){r[u]&&(o[u]=function(m){return new Promise(function(_,g){s.push([u,m,_,g])>1||a(u,m)})},f&&(o[u]=f(o[u])))}function a(u,f){try{(m=r[u](f)).value instanceof Ei?Promise.resolve(m.value.v).then(l,c):d(s[0][2],m)}catch(_){d(s[0][3],_)}var m}function l(u){a("next",u)}function c(u){a("throw",u)}function d(u,f){u(f),s.shift(),s.length&&a(s[0][0],s[0][1])}};const t5=function(t){var e;(function(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}})();const n=(e=t.useBinaryFormat)!==null&&e!==void 0&&e;return{async unary(o,r,s,i,a,l,c){var d;const{serialize:u,parse:f}=w_(r,n,t.jsonOptions,t.binaryOptions);return i=i===void 0?t.defaultTimeoutMs:i<=0?void 0:i,await function(m){const _=y_(m.next,m.interceptors),[g,p,b]=A_(m);return _(Object.assign(Object.assign({},m.req),{message:b_(m.req.method.I,m.req.message),signal:g})).then(y=>(b(),y),p)}({interceptors:t.interceptors,signal:s,timeoutMs:i,req:{stream:!1,service:o,method:r,url:__(t.baseUrl,o,r),init:{method:"POST",credentials:(d=t.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:E_(r.kind,n,i,a),contextValues:c??g_(),message:l},next:async m=>{var _;let g=null;t.useHttpGet===!0&&r.idempotency===Kd.NoSideEffects?m=ZE(m,u(m.message),n):g=u(m.message);const p=(_=t.fetch)!==null&&_!==void 0?_:globalThis.fetch,b=await p(m.url,Object.assign(Object.assign({},m.init),{headers:m.header,signal:m.signal,body:g})),{isUnaryError:y,unaryError:x}=I_(r.kind,b.status,b.headers);if(y)throw S_(await b.json(),function(...k){const E=new Headers;for(const j of k)j.forEach((I,T)=>{E.append(T,I)});return E}(...j_(b.headers)),x);const[v,S]=j_(b.headers);return{stream:!1,service:o,method:r,header:v,message:n?f(new Uint8Array(await b.arrayBuffer())):r.O.fromJson(await b.json(),x_(t.jsonOptions)),trailer:S}}})},async stream(o,r,s,i,a,l,c){var d;const{serialize:u,parse:f}=w_(r,n,t.jsonOptions,t.binaryOptions);function m(g,p,b){return e5(this,arguments,function*(){const y=function(v){let S,k=new Uint8Array(0);function E(j){const I=new Uint8Array(k.length+j.length);I.set(k),I.set(j,k.length),k=I}return new ReadableStream({start(){S=v.getReader()},async pull(j){let I;for(;;){if(I===void 0&&k.byteLength>=5){let L=0;for(let B=1;B<5;B++)L=(L<<8)+k[B];I={flags:k[0],length:L}}if(I!==void 0&&k.byteLength>=I.length+5)break;const M=await S.read();if(M.done)break;E(M.value)}if(I===void 0)return k.byteLength==0?void j.close():void j.error(new Yt("premature end of stream",_t.DataLoss));const T=k.subarray(5,5+I.length);k=k.subarray(5+I.length),j.enqueue({flags:I.flags,data:T})}})}(g).getReader();let x=!1;for(;;){const v=yield Ei(y.read());if(v.done)break;const{flags:S,data:k}=v.value;if(2&~S)yield yield Ei(f(k));else{x=!0;const E=YE(k);if(E.error){const j=E.error;throw b.forEach((I,T)=>{j.metadata.append(T,I)}),j}E.metadata.forEach((j,I)=>p.set(I,j))}}if(!x)throw"missing EndStreamResponse"})}async function _(g){if(r.kind!=Rn.ServerStreaming)throw"The fetch API does not support streaming request bodies";const p=await g[Symbol.asyncIterator]().next();if(p.done==1)throw"missing request message";return function(b,y){const x=new Uint8Array(y.length+5);x.set(y,5);const v=new DataView(x.buffer,x.byteOffset,x.byteLength);return v.setUint8(0,b),v.setUint32(1,y.length),x}(0,u(p.value))}return i=i===void 0?t.defaultTimeoutMs:i<=0?void 0:i,await function(g){const p=y_(g.next,g.interceptors),[b,y,x]=A_(g),v=Object.assign(Object.assign({},g.req),{message:qE(g.req.method.I,g.req.message),signal:b});let S=!1;return b.addEventListener("abort",function(){var k,E;const j=g.req.message[Symbol.asyncIterator]();S||(k=j.throw)===null||k===void 0||k.call(j,this.reason).catch(()=>{}),(E=j.return)===null||E===void 0||E.call(j).catch(()=>{})}),p(v).then(k=>Object.assign(Object.assign({},k),{message:{[Symbol.asyncIterator](){const E=k.message[Symbol.asyncIterator]();return{next:()=>E.next().then(j=>(j.done==1&&(S=!0,x()),j),y)}}}}),y)}({interceptors:t.interceptors,timeoutMs:i,signal:s,req:{stream:!0,service:o,method:r,url:__(t.baseUrl,o,r),init:{method:"POST",credentials:(d=t.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:E_(r.kind,n,i,a),contextValues:c??g_(),message:l},next:async g=>{var p;const b=(p=t.fetch)!==null&&p!==void 0?p:globalThis.fetch,y=await b(g.url,Object.assign(Object.assign({},g.init),{headers:g.header,signal:g.signal,body:await _(g.message)}));if(I_(r.kind,y.status,y.headers),y.body===null)throw"missing response body";const x=new Headers;return Object.assign(Object.assign({},g),{header:y.headers,trailer:x,message:m(y.body,x,y.headers)})}})}}}({baseUrl:"https://web-backend.codeium.com",useBinaryFormat:!0}),n5=function(t,e){return function(n,o){const r={};for(const[s,i]of Object.entries(n.methods)){const a=o(Object.assign(Object.assign({},i),{localName:s,service:n}));a!=null&&(r[s]=a)}return r}(t,n=>{switch(n.kind){case Rn.Unary:return function(o,r,s){return async function(i,a){var l,c;const d=await o.unary(r,s,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);return(l=a==null?void 0:a.onHeader)===null||l===void 0||l.call(a,d.header),(c=a==null?void 0:a.onTrailer)===null||c===void 0||c.call(a,d.trailer),d.message}}(e,t,n);case Rn.ServerStreaming:return function(o,r,s){return function(i,a){return m_(o.stream(r,s,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,function(l){return VE(this,arguments,function*(){yield Si(yield*HE(UE(l)))})}([i]),a==null?void 0:a.contextValues),a)}}(e,t,n);case Rn.ClientStreaming:return function(o,r,s){return async function(i,a){var l,c,d,u,f,m;const _=await o.stream(r,s,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);let g;(f=a==null?void 0:a.onHeader)===null||f===void 0||f.call(a,_.header);try{for(var p,b=!0,y=f_(_.message);!(l=(p=await y.next()).done);b=!0)u=p.value,b=!1,g=u}catch(x){c={error:x}}finally{try{b||l||!(d=y.return)||await d.call(y)}finally{if(c)throw c.error}}if(!g)throw new Yt("protocol error: missing response message",_t.Internal);return(m=a==null?void 0:a.onTrailer)===null||m===void 0||m.call(a,_.trailer),g}}(e,t,n);case Rn.BiDiStreaming:return function(o,r,s){return function(i,a){return m_(o.stream(r,s,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues),a)}}(e,t,n);default:return null}})}(QE,t5);let xl;try{xl=crypto.randomUUID()}catch{xl="10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(+t^(crypto.getRandomValues(new Uint8Array(1))[0]??0)&15>>+t/4).toString(16))}async function o5(t,e){const n=t.state.facet(gl),{override:o}=t.state.facet(h_),r=await o(),s=t.state,i=s.selection.main.head,a=s.doc.toString();try{const l=await async function({text:_,cursorOffset:g,config:p,otherDocuments:b}){return await n5.getCompletions({metadata:{ideName:"web",ideVersion:"0.0.5",extensionName:"@valtown/codemirror-codeium",extensionVersion:"1.0.0",apiKey:p.apiKey,sessionId:xl,authSource:p.authSource},document:{text:_,cursorOffset:BigInt(g),language:p.language,editorLanguage:"typescript",lineEnding:`
`},editorOptions:{tabSize:2n,insertSpaces:!0},otherDocuments:b,multilineConfig:void 0},{headers:{Authorization:`Basic ${p.apiKey}-${xl}`}})}({text:a,cursorOffset:i,config:n,otherDocuments:r});if(!l||l.completionItems.length===0||e!==void 0&&i!==e||ga(t.state)==="active"||!t.hasFocus)return;const c=l.completionItems.map(_=>{let g=0;return _.completionParts.filter(p=>p.type!==3).map(p=>{const b=Number(p.offset),y=p.type===2?`
${p.text}`:p.text,x={absoluteStartPos:g+b,absoluteEndPos:g+b+y.length,from:b,to:b,insert:y};return g+=y.length,x})}),d=0,u=c.at(d);if(!u)return;const f=_a.of(u,s.doc.length),m=f.invert(s.doc);t.dispatch({changes:f,effects:Vd.of({index:d,reverseChangeSet:m,changeSpecs:c}),annotations:[_l.of(null),Yr.of(null),ba.addToHistory.of(!1)]})}catch(l){console.warn("copilot completion failed",l),await new Promise(c=>setTimeout(c,300))}}function r5(){let t=null,e=0;return st.updateListener.of(n=>{const o=n.view.state.facet(gl);if(!o.alwaysOn||!function(s){return s.docChanged&&!s.transactions.some(i=>i.effects.some(a=>a.is(Hd)||a.is($d)))}(n)||(t&&clearTimeout(t),function(s){if(!s.view.hasFocus||s.state.field(Ir)||ga(s.state)==="active")return!0;for(const i of s.transactions)if(i.annotation(Yr)!==void 0)return!0}(n)))return;const r=n.state.selection.main.head;o.shouldComplete&&!o.shouldComplete(new pB(n.view.state,r,!1))||(t=setTimeout(async()=>{r===e&&await o5(n.view,e)},o.timeout),e=r)})}function T_(t){var r;const e=t.state.field(Ir);if(!e)return!1;const n=(r=e.reverseChangeSet)==null?void 0:r.invert(t.state.doc);t.dispatch({changes:e.reverseChangeSet,effects:Hd.of(null),annotations:[_l.of(null),Yr.of(null),ba.addToHistory.of(!1)]});let o=0;return n==null||n.iterChangedRanges((s,i,a,l)=>{o=l}),t.dispatch({changes:n,selection:Uo.cursor(o),annotations:[Yr.of(null),ba.addToHistory.of(!0)]}),!0}const M_=t=>{const{state:e}=t,n=e.field(Ir);if(!n)return!1;const{changeSpecs:o}=n;if(o.length<2)return!1;const r=(n.index+1)%o.length,s=o.at(r);if(!s)return!1;const i=n.reverseChangeSet.apply(e.doc),a=_a.of(n.reverseChangeSet,e.doc.length).compose(_a.of(s,i.length)),l=_a.of(s,i.length).invert(i);return t.dispatch({changes:a,effects:Vd.of({index:r,reverseChangeSet:l,changeSpecs:o}),annotations:[_l.of(null),Yr.of(null),ba.addToHistory.of(!1)]}),!0};function pu(t){const e=t.state.field(Ir);return!!e&&(t.dispatch({changes:e.reverseChangeSet,effects:$d.of(null),annotations:[_l.of(null),Yr.of(null),ba.addToHistory.of(!1)]}),!1)}function s5(){return st.domEventHandlers({keydown:(t,e)=>(t.key!=="]"||!t.ctrlKey)&&t.key!=="Shift"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Meta"&&function(n,o){return!!n.state.field(Ir)&&(o==="Tab"?T_(n):pu(n))}(e,t.key),mouseup(t,e){const n=t.target;return n.nodeName==="BUTTON"&&n.dataset.action==="codeium-cycle"?(M_(e),t.stopPropagation(),t.preventDefault(),!0):function(o){var a,l;let r=!1;const s=(a=o.state.selection.asSingle().ranges.at(0))==null?void 0:a.head,i=o.state.field(Ir);return!(s===void 0||!i)&&((l=i.decorations)==null||l.between(s,s,()=>{r=!0}),r)}(e)?T_(e):pu(e)}})}const i5=new Rc,gu=Qt.get("@github/copilot-language-server"),O_={delay:500,includeKeymap:!0,events:{shouldShowSuggestion:t=>t.hasFocus,beforeSuggestionFetch:t=>t.hasFocus}},a5=t=>{const e=[];return t.copilot==="codeium"&&t.codeium_api_key&&e.push(function(n){return[gl.of(n),Ir,Ho.highest(Gn.of([{key:"Ctrl-]",run:M_}])),Ho.highest(st.updateListener.of(o=>{o.focusChanged&&pu(o.view)})),Ho.high(s5()),r5()]}({apiKey:t.codeium_api_key,language:Jo.PYTHON}),h_.of({override:async()=>[{text:Dc(""),language:Jo.PYTHON,editorLanguage:"python"}]})),t.copilot==="github"&&e.push(M1({...O_,fetchFn:async n=>{if(!XH()||n.doc.length===0)return"";await new Promise(i=>setTimeout(i,20));const o=n.doc.toString(),r=function(i,a){const l=i.doc.toString(),c=a.split(`
`).length-l.split(`
`).length,d=function(u,f){const m=u.lineAt(f);return{line:m.number-1,character:f-m.from}}(i.doc,i.selection.main.head);return d.line+=c,{textDocument:{uri:`file://${ZH}`,version:"replace_me"},position:d,context:{triggerKind:_B.InlineCompletionTriggerKind.Automatic},formattingOptions:{tabSize:i.tabSize,insertSpaces:!0}}}(n,Dc(o));return function(i,a,l){if(!i)return gu.debug("No response from copilot"),"";const c=Array.isArray(i)?i[0]:i.items[0];if(!c)return gu.debug("No response from copilot"),"";const{insertText:d,range:u}=c,f=String(d);if(!u)return gu.error("No range from copilot"),f;const m=u.start.character-a.character,_=m<0?f.slice(-m):f,g=l.doc.sliceString(l.selection.main.head,l.doc.length);for(let p=0;p<_.length;p++){const b=_.slice(p);if(g.startsWith(b))return _.slice(0,p)}return _}(await ES().getCompletion(r),r.position,n)}})),t.copilot==="custom"&&e.push(M1({...O_,fetchFn:async n=>{if(n.doc.length===0)return"";const o=n.doc.sliceString(0,n.selection.main.head),r=n.doc.sliceString(n.selection.main.head,n.doc.length);if(o.length===0)return"";const s=n.field(Pc).type;let i=await gB.post("/ai/inline_completion",{prefix:o,suffix:r,language:s});return o&&i.startsWith(o)&&(i=i.slice(o.length)),r&&i.endsWith(r)&&(i=i.slice(0,-r.length)),i}})),[...e,Ho.highest(Gn.of([{key:"Escape",run:n=>{const o=T1(n);return!C4(n)&&o}}])),i5.of(KH())]};function l5(t){return[Gn.of([{key:"Escape",preventDefault:!1,run:fN},{key:t.getHotkey("cell.selectNextOccurrence").key,preventDefault:!0,run:yB},{key:t.getHotkey("cell.findAndReplace").key,preventDefault:!0,run:Lg}]),bB(),yN,Va,xN]}const c5=ut.mark({class:"underline"}),D_=zt.define(),R_=zt.define(),d5=Mn.define({create:()=>ut.none,update(t,e){let n=t.map(e.changes);for(const o of e.effects)o.is(D_)?n=t.update({add:[c5.range(o.value.from,o.value.to)]}):o.is(R_)&&(n=ut.none);return n},provide:t=>st.decorations.from(t)});class u5{constructor(e,n){this.view=void 0,this.commandClickMode=void 0,this.hoveredRange=void 0,this.onClick=void 0,this.keydown=o=>{o.key!=="Meta"&&o.key!=="Control"||(this.commandClickMode=!0,this.view.dom.addEventListener("mousemove",this.mousemove),this.view.dom.addEventListener("click",this.click))},this.keyup=o=>{o.key!=="Meta"&&o.key!=="Control"||this.exitCommandClickMode()},this.windowBlur=()=>{this.commandClickMode&&this.exitCommandClickMode()},this.mousemove=o=>{if(!o.metaKey&&!o.ctrlKey)return void this.exitCommandClickMode();if(!this.commandClickMode)return void this.clearUnderline();const r=this.view.posAtCoords({x:o.clientX,y:o.clientY});if(r==null)return void this.clearUnderline();const s=xB(this.view.state).cursorAt(r);if(s.name==="VariableName"){const{from:i,to:a}=s;if(this.hoveredRange&&this.hoveredRange.from===i&&this.hoveredRange.to===a)return;this.clearUnderline(),this.hoveredRange={from:i,to:a,position:r},this.view.dispatch({effects:D_.of(this.hoveredRange)})}else this.clearUnderline()},this.click=o=>{if(this.hoveredRange){const r=this.view.state.doc.sliceString(this.hoveredRange.from,this.hoveredRange.to);o.preventDefault(),o.stopPropagation(),this.onClick(this.view,r),this.view.dispatch({selection:{head:this.hoveredRange.position,anchor:this.hoveredRange.position}})}},this.view=e,this.commandClickMode=!1,this.hoveredRange=null,this.onClick=n,window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.addEventListener("blur",this.windowBlur),window.addEventListener("mouseleave",this.windowBlur)}update(e){}destroy(){window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.removeEventListener("blur",this.windowBlur),window.removeEventListener("mouseleave",this.windowBlur),this.view.dom.removeEventListener("mousemove",this.mousemove),this.view.dom.removeEventListener("click",this.click)}exitCommandClickMode(){this.commandClickMode=!1,this.view.dom.removeEventListener("mousemove",this.mousemove),this.view.dom.removeEventListener("click",this.click),this.clearUnderline()}clearUnderline(){this.hoveredRange&&(this.view.dispatch({effects:R_.of(null)}),this.hoveredRange=null)}}function h5(){return[st.domEventHandlers({paste:(t,e)=>{var r;const n=(r=t.clipboardData)==null?void 0:r.getData("text/plain");if(!(n!=null&&n.includes("@app.cell")))return!1;const o=function(s){if(!s.includes("@app.cell"))return[];const i=[],a=s.split(`
`);let l=[],c=!1,d=0,u=!1,f=!1,m=0;const _=/\(/g,g=/\)/g,p=new Set(["@"]);function b(x){return(x.match(_)||[]).length-(x.match(g)||[]).length}function y(){if(l.length!==0){for(;l.length>0&&l[l.length-1].trim().startsWith("return");)l.pop();l.some(x=>x.trim()!=="")&&i.push(function(x){const v=x.split(`
`);if(v.length===0)return"";const S=v.filter(j=>j.trim().length>0);if(S.length===0)return"";const k=/^\s*/,E=Math.min(...S.map(j=>{var I;return((I=j.match(k))==null?void 0:I[0].length)??Number.POSITIVE_INFINITY}));return E===0?x.trim():v.map(j=>j.slice(E)).join(`
`).trim()}(l.join(`
`))),l=[]}}for(const x of a){const v=x.trim();(v||c)&&(v.startsWith("@app.cell")?(y(),c=!0,d=1):d>0?(v.startsWith("def")&&v.includes("(")&&!v.includes("):")&&(u=!0,m=b(v)),d--):u?(m+=b(v),m===0&&(u=!1)):c&&(p.has(v[0])||v.startsWith("if __name__")?(y(),c=v.startsWith("@")):v.startsWith("return")?v.includes("(")&&!v.endsWith(")")&&(f=!0,m=b(v)):f?(m+=b(v),m===0&&(f=!1)):l.push(x)))}return y(),i}(n);return o.length===0?!1:(e.state.facet(SB).createManyBelow(o),!0)}})]}const P_=zt.define(),L_=new Rc,_u="marimo-connecting-indicator";function F_(t,e){const n=function(){let o=document.getElementById(_u);return o||(o=document.createElement("div"),o.id=_u,o.textContent="Connecting\u2026",o.style.position="fixed",o.style.zIndex="9999",o.style.background="#222",o.style.color="#fff",o.style.padding="2px 8px",o.style.borderRadius="6px",o.style.fontSize="0.9em",o.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",o.style.pointerEvents="none",o.style.display="none",document.body.append(o)),o}();n.style.left=`${t}px`,n.style.top=`${e}px`,n.style.display="block",n.textContent="Connecting\u2026"}function bu(){const t=document.getElementById(_u);t&&(t.style.display="none")}let yu=null;function f5(t){const e=()=>t.get(mn).state;let n=!Qa(e());const o=Tn.define(r=>{let s=!1;const i=r.dom;function a(){(function(){const u=r.state.selection.main,f=r.coordsAtPos(u.head);f?F_(f.left+2,f.bottom+2):F_(window.innerWidth/2,.1*window.innerHeight),yu&&window.clearTimeout(yu),yu=window.setTimeout(bu,1500)})()}function l(){s||(i.addEventListener("keydown",a,!0),i.addEventListener("paste",a,!0),s=!0)}function c(){s&&(i.removeEventListener("keydown",a,!0),i.removeEventListener("paste",a,!0),s=!1)}const d=t.sub(mn,()=>{t.get(mn).state===mt.CONNECTING?l():(c(),bu())});return e()===mt.CONNECTING&&l(),{destroy(){c(),d(),bu()}}});return[L_.of(mr.readOnly.of(n)),mr.transactionExtender.of(r=>{for(const s of r.effects)if(s.is(P_)){const i=s.value;if(i!==n)return n=i,{effects:L_.reconfigure(mr.readOnly.of(i))}}return null}),Tn.define(r=>{const s=t.sub(mn,()=>{const i=!Qa(t.get(mn).state);r.dispatch({effects:P_.of(i)})});return{destroy(){s()}}}),o]}const $t=({variant:t,settings:e,styles:n})=>{const o=st.theme({"&":{backgroundColor:e.background,color:e.foreground},".cm-content":{caretColor:e.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:e.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e.selection},".cm-activeLine":{backgroundColor:e.lineHighlight},".cm-gutters":{backgroundColor:e.gutterBackground,color:e.gutterForeground},".cm-activeLineGutter":{backgroundColor:e.lineHighlight}},{dark:t==="dark"}),r=CB.define(n);return[o,N4(r)]};$t({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:D.comment,color:"#404080"},{tag:[D.string,D.regexp],color:"#999999"},{tag:D.number,color:"#7090B0"},{tag:[D.bool,D.null],color:"#8080A0"},{tag:[D.punctuation,D.derefOperator],color:"#805080"},{tag:D.keyword,color:"#60B0FF"},{tag:D.definitionKeyword,color:"#B0FFF0"},{tag:D.moduleKeyword,color:"#60B0FF"},{tag:D.operator,color:"#A0A0FF"},{tag:[D.variableName,D.self],color:"#008080"},{tag:D.operatorKeyword,color:"#A0A0FF"},{tag:D.controlKeyword,color:"#80A0FF"},{tag:D.className,color:"#70E080"},{tag:[D.function(D.propertyName),D.propertyName],color:"#50A0A0"},{tag:D.tagName,color:"#009090"},{tag:D.modifier,color:"#B0FFF0"},{tag:[D.squareBracket,D.attributeName],color:"#D0D0FF"}]}),$t({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:D.comment,color:"#787b8099"},{tag:D.string,color:"#86b300"},{tag:D.regexp,color:"#4cbf99"},{tag:[D.number,D.bool,D.null],color:"#ffaa33"},{tag:D.variableName,color:"#5c6166"},{tag:[D.definitionKeyword,D.modifier],color:"#fa8d3e"},{tag:[D.keyword,D.special(D.brace)],color:"#fa8d3e"},{tag:D.operator,color:"#ed9366"},{tag:D.separator,color:"#5c6166b3"},{tag:D.punctuation,color:"#5c6166"},{tag:[D.definition(D.propertyName),D.function(D.variableName)],color:"#f2ae49"},{tag:[D.className,D.definition(D.typeName)],color:"#22a4e6"},{tag:[D.tagName,D.typeName,D.self,D.labelName],color:"#55b4d4"},{tag:D.angleBracket,color:"#55b4d480"},{tag:D.attributeName,color:"#f2ae49"}]}),$t({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:D.comment,color:"#6E6E6E"},{tag:[D.string,D.regexp,D.special(D.brace)],color:"#5C81B3"},{tag:D.number,color:"#C1E1B8"},{tag:D.bool,color:"#53667D"},{tag:[D.definitionKeyword,D.modifier,D.function(D.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[D.keyword,D.moduleKeyword,D.operatorKeyword,D.operator],color:"#697A8E",fontWeight:"bold"},{tag:[D.variableName,D.attributeName],color:"#708E67"},{tag:[D.function(D.variableName),D.definition(D.propertyName),D.derefOperator],color:"#fff"},{tag:D.tagName,color:"#A3D295"}]}),$t({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:D.comment,color:"#666666"},{tag:[D.string,D.special(D.brace)],color:"#54BE0D"},{tag:D.regexp,color:"#E9C062"},{tag:D.number,color:"#CF6A4C"},{tag:[D.keyword,D.operator],color:"#5EA6EA"},{tag:D.variableName,color:"#7587A6"},{tag:[D.definitionKeyword,D.modifier],color:"#F9EE98"},{tag:[D.propertyName,D.function(D.variableName)],color:"#937121"},{tag:[D.typeName,D.angleBracket,D.tagName],color:"#9B859D"}]}),$t({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:D.comment,color:"#6B4E32"},{tag:[D.keyword,D.operator,D.derefOperator],color:"#EF5D32"},{tag:D.className,color:"#EFAC32",fontWeight:"bold"},{tag:[D.typeName,D.propertyName,D.function(D.variableName),D.definition(D.variableName)],color:"#EFAC32"},{tag:D.definition(D.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:D.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[D.number,D.bool],color:"#6C99BB"},{tag:[D.variableName,D.self],color:"#7DAF9C"},{tag:[D.string,D.special(D.brace),D.regexp],color:"#D9D762"},{tag:[D.angleBracket,D.tagName,D.attributeName],color:"#EFCB43"}]}),$t({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:D.comment,color:"#404040"},{tag:[D.string,D.special(D.brace),D.regexp],color:"#00D8FF"},{tag:D.number,color:"#E62286"},{tag:[D.variableName,D.attributeName,D.self],color:"#E62286",fontWeight:"bold"},{tag:D.function(D.variableName),color:"#fff",fontWeight:"bold"}]}),$t({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:D.comment,color:"#BCC8BA"},{tag:[D.string,D.special(D.brace),D.regexp],color:"#5D90CD"},{tag:[D.number,D.bool,D.null],color:"#46A609"},{tag:D.keyword,color:"#AF956F"},{tag:[D.definitionKeyword,D.modifier],color:"#C52727"},{tag:[D.angleBracket,D.tagName,D.attributeName],color:"#606060"},{tag:D.self,color:"#000"}]}),$t({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:D.comment,color:"#0088FF"},{tag:D.string,color:"#3AD900"},{tag:D.regexp,color:"#80FFC2"},{tag:[D.number,D.bool,D.null],color:"#FF628C"},{tag:[D.definitionKeyword,D.modifier],color:"#FFEE80"},{tag:D.variableName,color:"#CCCCCC"},{tag:D.self,color:"#FF80E1"},{tag:[D.className,D.definition(D.propertyName),D.function(D.variableName),D.definition(D.typeName),D.labelName],color:"#FFDD00"},{tag:[D.keyword,D.operator],color:"#FF9D00"},{tag:[D.propertyName,D.typeName],color:"#80FFBB"},{tag:D.special(D.brace),color:"#EDEF7D"},{tag:D.attributeName,color:"#9EFFFF"},{tag:D.derefOperator,color:"#fff"}]}),$t({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:D.comment,color:"#AEAEAE"},{tag:[D.string,D.special(D.brace),D.regexp],color:"#8DFF8E"},{tag:[D.className,D.definition(D.propertyName),D.function(D.variableName),D.function(D.definition(D.variableName)),D.definition(D.typeName)],color:"#A3EBFF"},{tag:[D.number,D.bool,D.null],color:"#62E9BD"},{tag:[D.keyword,D.operator],color:"#2BF1DC"},{tag:[D.definitionKeyword,D.modifier],color:"#F8FBB1"},{tag:[D.variableName,D.self],color:"#B683CA"},{tag:[D.angleBracket,D.tagName,D.typeName,D.propertyName],color:"#60A4F1"},{tag:D.derefOperator,color:"#E0E0E0"},{tag:D.attributeName,color:"#7BACCA"}]}),$t({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:D.comment,color:"#6272a4"},{tag:[D.string,D.special(D.brace)],color:"#f1fa8c"},{tag:[D.number,D.self,D.bool,D.null],color:"#bd93f9"},{tag:[D.keyword,D.operator],color:"#ff79c6"},{tag:[D.definitionKeyword,D.typeName],color:"#8be9fd"},{tag:D.definition(D.typeName),color:"#f8f8f2"},{tag:[D.className,D.definition(D.propertyName),D.function(D.variableName),D.attributeName],color:"#50fa7b"}]}),$t({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:D.comment,color:"#AAAAAA"},{tag:[D.keyword,D.operator,D.typeName,D.tagName,D.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[D.attributeName,D.definition(D.propertyName)],color:"#4F9FD0"},{tag:[D.className,D.string,D.special(D.brace)],color:"#CF4F5F"},{tag:D.number,color:"#CF4F5F",fontWeight:"bold"},{tag:D.variableName,fontWeight:"bold"}]}),$t({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:D.comment,color:"#9995b7"},{tag:D.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[D.definitionKeyword,D.modifier],color:"#ff5792"},{tag:[D.className,D.tagName,D.definition(D.typeName)],color:"#0094f0"},{tag:[D.number,D.bool,D.null,D.special(D.brace)],color:"#5842ff"},{tag:[D.definition(D.propertyName),D.function(D.variableName)],color:"#0095a8"},{tag:D.typeName,color:"#b3694d"},{tag:[D.propertyName,D.variableName],color:"#fa8900"},{tag:D.operator,color:"#ff5792"},{tag:D.self,color:"#e64100"},{tag:[D.string,D.regexp],color:"#00b368"},{tag:[D.paren,D.bracket],color:"#0431fa"},{tag:D.labelName,color:"#00bdd6"},{tag:D.attributeName,color:"#e64100"},{tag:D.angleBracket,color:"#9995b7"}]}),$t({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:D.comment,color:"#9893a5"},{tag:[D.bool,D.null],color:"#286983"},{tag:D.number,color:"#d7827e"},{tag:D.className,color:"#d7827e"},{tag:[D.angleBracket,D.tagName,D.typeName],color:"#56949f"},{tag:D.attributeName,color:"#907aa9"},{tag:D.punctuation,color:"#797593"},{tag:[D.keyword,D.modifier],color:"#286983"},{tag:[D.string,D.regexp],color:"#ea9d34"},{tag:D.variableName,color:"#d7827e"}]}),$t({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:D.comment,color:"#CFCFCF"},{tag:[D.number,D.bool,D.null],color:"#E66C29"},{tag:[D.className,D.definition(D.propertyName),D.function(D.variableName),D.labelName,D.definition(D.typeName)],color:"#2EB43B"},{tag:D.keyword,color:"#D8B229"},{tag:D.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[D.definitionKeyword,D.modifier],color:"#925A47"},{tag:D.string,color:"#704D3D"},{tag:D.typeName,color:"#2F8996"},{tag:[D.variableName,D.propertyName],color:"#77ACB0"},{tag:D.self,color:"#77ACB0",fontWeight:"bold"},{tag:D.regexp,color:"#E3965E"},{tag:[D.tagName,D.angleBracket],color:"#BAA827"},{tag:D.attributeName,color:"#B06520"},{tag:D.derefOperator,color:"#000"}]}),$t({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:D.comment,color:"#93A1A1"},{tag:D.string,color:"#2AA198"},{tag:D.regexp,color:"#D30102"},{tag:D.number,color:"#D33682"},{tag:D.variableName,color:"#268BD2"},{tag:[D.keyword,D.operator,D.punctuation],color:"#859900"},{tag:[D.definitionKeyword,D.modifier],color:"#073642",fontWeight:"bold"},{tag:[D.className,D.self,D.definition(D.propertyName)],color:"#268BD2"},{tag:D.function(D.variableName),color:"#268BD2"},{tag:[D.bool,D.null],color:"#B58900"},{tag:D.tagName,color:"#268BD2",fontWeight:"bold"},{tag:D.angleBracket,color:"#93A1A1"},{tag:D.attributeName,color:"#93A1A1"},{tag:D.typeName,color:"#859900"}]}),$t({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:D.comment,color:"#8E908C"},{tag:[D.variableName,D.self,D.propertyName,D.attributeName,D.regexp],color:"#C82829"},{tag:[D.number,D.bool,D.null],color:"#F5871F"},{tag:[D.className,D.typeName,D.definition(D.typeName)],color:"#C99E00"},{tag:[D.string,D.special(D.brace)],color:"#718C00"},{tag:D.operator,color:"#3E999F"},{tag:[D.definition(D.propertyName),D.function(D.variableName)],color:"#4271AE"},{tag:D.keyword,color:"#8959A8"},{tag:D.derefOperator,color:"#4D4D4C"}]});const m5=$t({variant:"dark",settings:{background:"#282c34",foreground:"#abb2bf",caret:"#528bff",selection:"#3E4451",lineHighlight:"#2c313c",gutterBackground:"var(--color-background)",gutterForeground:"var(--gray-10)"},styles:[{tag:D.comment,color:"#5c6370"},{tag:D.variableName,color:"#abb2bf"},{tag:[D.string,D.special(D.brace)],color:"#98c379"},{tag:D.number,color:"#d19a66"},{tag:D.bool,color:"#d19a66"},{tag:D.null,color:"#d19a66"},{tag:D.keyword,color:"#c678dd",fontWeight:500},{tag:D.className,color:"#61afef"},{tag:D.definition(D.typeName),color:"#61afef"},{tag:D.typeName,color:"#56b6c2"},{tag:D.angleBracket,color:"#abb2bf"},{tag:D.tagName,color:"#e06c75"},{tag:D.attributeName,color:"#d19a66"},{tag:D.operator,color:"#56b6c2",fontWeight:500},{tag:[D.function(D.variableName)],color:"#61afef"},{tag:[D.propertyName],color:"#e5c07b"}]}),p5=$t({variant:"light",settings:{background:"#ffffff",foreground:"#000000",caret:"#000000",selection:"#d7d4f0",lineHighlight:"#cceeff44",gutterBackground:"var(--color-background)",gutterForeground:"var(--gray-10)"},styles:[{tag:D.comment,color:"#708090"},{tag:D.variableName,color:"#000000"},{tag:[D.string,D.special(D.brace)],color:"#a11"},{tag:D.number,color:"#164"},{tag:D.bool,color:"#219"},{tag:D.null,color:"#219"},{tag:D.keyword,color:"#708",fontWeight:500},{tag:D.className,color:"#00f"},{tag:D.definition(D.typeName),color:"#00f"},{tag:D.typeName,color:"#085"},{tag:D.angleBracket,color:"#000000"},{tag:D.tagName,color:"#170"},{tag:D.attributeName,color:"#00c"},{tag:D.operator,color:"#a2f",fontWeight:500},{tag:[D.function(D.variableName)],color:"#00c"},{tag:[D.propertyName],color:"#05a"}]});function z_(t){const{showPlaceholder:e,enableAI:n}=t;return e?"marimo-import":n?"ai":"none"}const g5=t=>{const{cellId:e,keymapConfig:n,hotkeys:o,enableAI:r,cellActions:s,completionConfig:i,lspConfig:a,diagnosticsConfig:l}=t,c=z_(t);return[QH(n,o),[st.domEventHandlers({drop:(u,f)=>{var g,p;const m=(g=u.dataTransfer)==null?void 0:g.files[0];if(m!=null&&m.type.startsWith("text/"))return u.preventDefault(),vB(f,m),!0;if(m!=null&&m.type.startsWith("image/"))return u.preventDefault(),kB(f,m),!0;const _=(p=u.dataTransfer)==null?void 0:p.getData("text/plain");if(_){u.preventDefault();const b=f.posAtCoords({x:u.clientX,y:u.clientY});return b!==null&&f.dispatch({changes:{from:b,to:b,insert:_},scrollIntoView:!0}),!0}return!1},dragover:u=>{u.preventDefault()}})],h5(),fE(),NB(i,o,c,a,l),jB(e,o,s),_5(t),[d5,(d=(u,f)=>{wB(u,f)},Tn.define(u=>new u5(u,d))),st.baseTheme({".underline":{textDecoration:"underline",cursor:"pointer",color:"var(--link)"}})],l!=null&&l.enabled?EB():[],r&&wm("inline_ai_tooltip")?tE({prompt:u=>async function(f){var x,v;const m=`
${f.codeBefore}
<rewrite_this>
${f.selection}
</rewrite_this>
${f.codeAfter}
`.trim(),_=w4();await v4();const g=await fetch(_.getAiURL("completion").toString(),{method:"POST",headers:_.headers(),body:JSON.stringify({prompt:f.prompt,code:m,selectedText:f.selection,includeOtherCode:"",language:f.language})}),p=((x=f.selection.match(/^\s*/))==null?void 0:x[0])||"",b=(v=g.body)==null?void 0:v.getReader();if(!b)throw new Error("Failed to get response reader");let y="";for(;;){const{done:S,value:k}=await b.read();if(S)break;y+=new TextDecoder().decode(k)}return y.startsWith(p)||(y=p+y),y}({prompt:u.prompt,selection:u.selection,codeBefore:u.codeBefore,codeAfter:u.codeAfter,language:R3(u.editorView)})}):[],f5(ct)];var d},_5=t=>{const{theme:e,hotkeys:n,completionConfig:o,cellId:r,lspConfig:s,diagnosticsConfig:i}=t,a=z_(t);return[st.lineWrapping,IB(),AB(),TB(),MB(),OB(),DB(),RB(),PB({position:"fixed",parent:document.querySelector("#App")??void 0}),LB(),e==="dark"?m5:p5,FB(s),a5(o),zB(),BB(),mE(),Ho.high(Gn.of(qB)),UB(),VB(),HB.of("    "),N4(GB,{fallback:!0}),Gn.of(YB),$B({placeholderType:a,completionConfig:o,hotkeys:n,cellId:r,lspConfig:{...s,diagnostics:i}}),WB.of(JB()),mr.allowMultipleSelections.of(!0),l5(n),Gn.of([{key:"Tab",run:l=>KB(l)||(c=>{const{from:d,to:u}=c.state.selection.main;if(d!==u)return!1;const f=c.state.doc.lineAt(u);return f.text.slice(0,u-f.from).trim()!==""&&eU(c)})(l)||XB(l),preventDefault:!0},{key:n.getHotkey("completion.moveDown").key,run:l=>ga(l.state)!==null&&(j4(!0)(l),!0),preventDefault:!0},{key:n.getHotkey("completion.moveUp").key,run:l=>ga(l.state)!==null&&(j4(!1)(l),!0),preventDefault:!0}]),Gn.of([...ZB,QB])]},b5={width:void 0,height:void 0};function B_(t,e,n){return t[e]?Array.isArray(t[e])?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}function U_(t){const e=t.current;if(e===null)throw new ReferenceError("Attempting to dereference null object.");return e}let V_,H_,$_,W_;V_=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,hour12:!0}),H_=new Intl.DateTimeFormat("en-US",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,hour12:!0}),$_=t=>{const e=X.c(79),{editing:n,status:o,disabled:r,staleInputs:s,edited:i,interrupted:a,elapsedTime:l,runStartTimestamp:c,lastRunStartTimestamp:d,uninstantiated:u}=t;if(!n)return null;const f=c??d;let m;e[0]!==f?(m=f?h.jsx(W_,{lastRanTime:f}):null,e[0]=f,e[1]=m):m=e[1];const _=m;if(r&&o==="running")return Qt.error("CellStatusComponent: disabled and running"),null;if(r&&s){let g,p,b,y;return e[2]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx("span",{children:"This cell is stale, but it's disabled and can't be run"}),e[2]=g):g=e[2],e[3]!==_?(p=h.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[3]=_,e[4]=p):p=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"stale",children:h.jsxs(ai,{children:[h.jsx(si,{className:"h-5 w-5",strokeWidth:1.5}),h.jsx(Lc,{className:"h-3 w-3",strokeWidth:2.5})]})}),e[5]=b):b=e[5],e[6]!==p?(y=h.jsx(Le,{content:p,usePortal:!0,children:b}),e[6]=p,e[7]=y):y=e[7],y}if(r){let g,p,b,y;return e[8]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx("span",{children:"This cell is disabled"}),e[8]=g):g=e[8],e[9]!==_?(p=h.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[9]=_,e[10]=p):p=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx("div",{className:"cell-status-icon cell-status-disabled","data-testid":"cell-status","data-status":"disabled",children:h.jsx(si,{className:"h-5 w-5",strokeWidth:1.5})}),e[11]=b):b=e[11],e[12]!==p?(y=h.jsx(Le,{content:p,usePortal:!0,children:b}),e[12]=p,e[13]=y):y=e[13],y}if(!s&&o==="disabled-transitively"){let g,p,b,y;return e[14]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx("span",{children:"An ancestor of this cell is disabled, so it can't be run"}),e[14]=g):g=e[14],e[15]!==_?(p=h.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[15]=_,e[16]=p):p=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"disabled-transitively",children:h.jsxs(ai,{layerTop:!0,children:[h.jsx(Oa,{className:"h-5 w-5",strokeWidth:1.5}),h.jsx(si,{className:"h-3 w-3",strokeWidth:2.5})]})}),e[17]=b):b=e[17],e[18]!==p?(y=h.jsx(Le,{content:p,usePortal:!0,children:b}),e[18]=p,e[19]=y):y=e[19],y}if(s&&o==="disabled-transitively"){let g,p,b,y;return e[20]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx("span",{children:"This cell is stale, but an ancestor is disabled so it can't be run"}),e[20]=g):g=e[20],e[21]!==_?(p=h.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[21]=_,e[22]=p):p=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"stale",children:h.jsxs(ai,{children:[h.jsx(Lc,{className:"h-5 w-5",strokeWidth:1}),h.jsx(si,{className:"h-3 w-3",strokeWidth:2.5})]})}),e[23]=b):b=e[23],e[24]!==p?(y=h.jsx(Le,{content:p,usePortal:!0,children:b}),e[24]=p,e[25]=y):y=e[25],y}if(o==="running"){let g,p,b,y,x;return e[26]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx("span",{children:"This cell is running"}),e[26]=g):g=e[26],e[27]!==_?(p=h.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[27]=_,e[28]=p):p=e[28],e[29]!==c?(b=Lm.fromSeconds(c)||Lm.now(),e[29]=c,e[30]=b):b=e[30],e[31]!==b?(y=h.jsx("div",{className:"cell-status-icon elapsed-time running","data-testid":"cell-status","data-status":"running",children:h.jsx(y5,{startTime:b})}),e[31]=b,e[32]=y):y=e[32],e[33]!==p||e[34]!==y?(x=h.jsx(Le,{content:p,usePortal:!0,children:y}),e[33]=p,e[34]=y,e[35]=x):x=e[35],x}if(o==="queued"){let g,p,b,y;return e[36]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx("span",{children:"This cell is queued to run"}),e[36]=g):g=e[36],e[37]!==_?(p=h.jsxs("div",{className:"flex flex-col gap-1",children:[g,_]}),e[37]=_,e[38]=p):p=e[38],e[39]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx("div",{className:"cell-status-icon cell-status-queued","data-testid":"cell-status","data-status":"queued",children:h.jsx(BS,{className:"h-5 w-5",strokeWidth:1.5})}),e[39]=b):b=e[39],e[40]!==p?(y=h.jsx(Le,{content:p,usePortal:!0,children:b}),e[40]=p,e[41]=y):y=e[41],y}if(i||a||s||u){let g;e[42]!==l?(g=ja(l),e[42]=l,e[43]=g):g=e[43];const p=g;let b;e[44]!==l||e[45]!==p?(b=l?h.jsx(Gc,{elapsedTime:p}):null,e[44]=l,e[45]=p,e[46]=b):b=e[46];const y=b;let x,v,S,k,E,j="";if(u)x="This cell has not yet been run";else if(a){let I;x="This cell was interrupted when it was last run",e[47]!==y?(I=h.jsxs("span",{children:["This cell ran for ",y," before being interrupted"]}),e[47]=y,e[48]=I):I=e[48],j=I}else if(i){let I;x="This cell has been modified since it was last run",e[49]!==y?(I=h.jsxs("span",{children:["This cell took ",y," to run"]}),e[49]=y,e[50]=I):I=e[50],j=I}else{let I;x="This cell has not been run with the latest inputs",e[51]!==y?(I=h.jsxs("span",{children:["This cell took ",y," to run"]}),e[51]=y,e[52]=I):I=e[52],j=I}return e[53]===Symbol.for("react.memo_cache_sentinel")?(v=h.jsx("div",{className:"cell-status-stale","data-testid":"cell-status","data-status":"outdated",children:h.jsx(Lc,{className:"h-5 w-5",strokeWidth:1.5})}),e[53]=v):v=e[53],e[54]!==x?(S=h.jsx(Le,{content:x,usePortal:!0,children:v}),e[54]=x,e[55]=S):S=e[55],e[56]!==l||e[57]!==p||e[58]!==_||e[59]!==j?(k=l&&h.jsx(Le,{content:h.jsxs("div",{className:"flex flex-col gap-1",children:[j,_]}),usePortal:!0,children:h.jsx("div",{className:"elapsed-time hover-action","data-testid":"cell-status","data-status":"outdated",children:h.jsx("span",{children:p})})}),e[56]=l,e[57]=p,e[58]=_,e[59]=j,e[60]=k):k=e[60],e[61]!==S||e[62]!==k?(E=h.jsxs("div",{className:"cell-status-icon flex items-center gap-2",children:[S,k]}),e[61]=S,e[62]=k,e[63]=E):E=e[63],E}if(l!==null){let g;e[64]!==l?(g=ja(l),e[64]=l,e[65]=g):g=e[65];const p=g;let b;e[66]!==l||e[67]!==p?(b=l?h.jsx(Gc,{elapsedTime:p}):null,e[66]=l,e[67]=p,e[68]=b):b=e[68];const y=b;let x,v,S,k;return e[69]!==y?(x=h.jsxs("span",{children:["This cell took ",y," to run"]}),e[69]=y,e[70]=x):x=e[70],e[71]!==_||e[72]!==x?(v=h.jsxs("div",{className:"flex flex-col gap-1",children:[x,_]}),e[71]=_,e[72]=x,e[73]=v):v=e[73],e[74]!==p?(S=h.jsx("div",{className:"cell-status-icon elapsed-time hover-action","data-testid":"cell-status","data-status":"idle",children:h.jsx("span",{children:p})}),e[74]=p,e[75]=S):S=e[75],e[76]!==v||e[77]!==S?(k=h.jsx(Le,{content:v,usePortal:!0,children:S}),e[76]=v,e[77]=S,e[78]=k):k=e[78],k}return null},Gc=t=>{const e=X.c(2);let n;return e[0]!==t.elapsedTime?(n=h.jsx("span",{className:"tracking-wide font-semibold",children:t.elapsedTime}),e[0]=t.elapsedTime,e[1]=n):n=e[1],n},W_=t=>{const e=X.c(18),n=1e3*t.lastRanTime;let o,r,s,i,a,l,c,d,u;if(e[0]!==n){const f=new Date(n),m=new Date,_=f.toDateString()===m.toDateString()?V_:H_;i="Ran at",a=" ",l=h.jsx("strong",{className:"tracking-wide font-semibold",children:_.format(f)}),c=" ",o="text-muted-foreground",r="(",s=JS(f),e[0]=n,e[1]=o,e[2]=r,e[3]=s,e[4]=i,e[5]=a,e[6]=l,e[7]=c}else o=e[1],r=e[2],s=e[3],i=e[4],a=e[5],l=e[6],c=e[7];return e[8]!==o||e[9]!==r||e[10]!==s?(d=h.jsxs("span",{className:o,children:[r,s," ago)"]}),e[8]=o,e[9]=r,e[10]=s,e[11]=d):d=e[11],e[12]!==i||e[13]!==a||e[14]!==l||e[15]!==c||e[16]!==d?(u=h.jsxs("span",{children:[i,a,l,c,d]}),e[12]=i,e[13]=a,e[14]=l,e[15]=c,e[16]=d,e[17]=u):u=e[17],u},ja=function(t){if(t===null)return"";const e=t,n=e/1e3;return n>=60?`${Math.floor(n/60)}m${Math.floor(n%60)}s`:n>=1?`${n.toFixed(2).toString()}s`:`${e.toFixed(0).toString()}ms`};const y5=t=>{const e=X.c(6);let n;e[0]!==t.startTime?(n=t.startTime.toMilliseconds(),e[0]=t.startTime,e[1]=n):n=e[1];const o=function(i){const a=A.useRef(i),[l,c]=A.useState(i);return A.useEffect(()=>{const d=setInterval(()=>{c(Lm.now().toMilliseconds())},17);return()=>clearInterval(d)},[]),l-a.current}(n);let r,s;return e[2]!==o?(r=ja(o),e[2]=o,e[3]=r):r=e[3],e[4]!==r?(s=h.jsx("span",{children:r}),e[4]=r,e[5]=s):s=e[5],s};var xu="ContextMenu",[x5,O$]=I4(xu,[E4]),cn=E4(),[w5,q_]=x5(xu),G_=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:o,dir:r,modal:s=!0}=t,[i,a]=A.useState(!1),l=cn(e),c=pr(o),d=A.useCallback(u=>{a(u),c(u)},[c]);return h.jsx(w5,{scope:e,open:i,onOpenChange:d,modal:s,children:h.jsx(mU,{...l,dir:r,open:i,onOpenChange:d,modal:s,children:n})})};G_.displayName=xu;var Y_="ContextMenuTrigger",J_=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:o=!1,...r}=t,s=q_(Y_,n),i=cn(n),a=A.useRef({x:0,y:0}),l=A.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=A.useRef(0),d=A.useCallback(()=>window.clearTimeout(c.current),[]),u=f=>{a.current={x:f.clientX,y:f.clientY},s.onOpenChange(!0)};return A.useEffect(()=>d,[d]),A.useEffect(()=>{o&&d()},[o,d]),h.jsxs(h.Fragment,{children:[h.jsx(oU,{...i,virtualRef:l}),h.jsx(Zs.span,{"data-state":s.open?"open":"closed","data-disabled":o?"":void 0,...r,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:o?t.onContextMenu:Yn(t.onContextMenu,f=>{d(),u(f),f.preventDefault()}),onPointerDown:o?t.onPointerDown:Yn(t.onPointerDown,wl(f=>{d(),c.current=window.setTimeout(()=>u(f),700)})),onPointerMove:o?t.onPointerMove:Yn(t.onPointerMove,wl(d)),onPointerCancel:o?t.onPointerCancel:Yn(t.onPointerCancel,wl(d)),onPointerUp:o?t.onPointerUp:Yn(t.onPointerUp,wl(d))})]})});J_.displayName=Y_;var K_=t=>{const{__scopeContextMenu:e,...n}=t,o=cn(e);return h.jsx(pU,{...o,...n})};K_.displayName="ContextMenuPortal";var X_="ContextMenuContent",Z_=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=q_(X_,n),s=cn(n),i=A.useRef(!1);return h.jsx(rU,{...s,...o,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var l;(l=t.onCloseAutoFocus)==null||l.call(t,a),!a.defaultPrevented&&i.current&&a.preventDefault(),i.current=!1},onInteractOutside:a=>{var l;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||r.modal||(i.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Z_.displayName=X_,A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(sU,{...r,...o,ref:e})}).displayName="ContextMenuGroup";var Q_=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(iU,{...r,...o,ref:e})});Q_.displayName="ContextMenuLabel";var e0=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(nU,{...r,...o,ref:e})});e0.displayName="ContextMenuItem";var t0=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(aU,{...r,...o,ref:e})});t0.displayName="ContextMenuCheckboxItem",A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(lU,{...r,...o,ref:e})}).displayName="ContextMenuRadioGroup";var n0=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(cU,{...r,...o,ref:e})});n0.displayName="ContextMenuRadioItem";var o0=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(dU,{...r,...o,ref:e})});o0.displayName="ContextMenuItemIndicator";var r0=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(tU,{...r,...o,ref:e})});r0.displayName="ContextMenuSeparator",A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(uU,{...r,...o,ref:e})}).displayName="ContextMenuArrow";var s0=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(hU,{...r,...o,ref:e})});s0.displayName="ContextMenuSubTrigger";var i0=A.forwardRef((t,e)=>{const{__scopeContextMenu:n,...o}=t,r=cn(n);return h.jsx(fU,{...r,...o,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});function wl(t){return e=>e.pointerType!=="mouse"?t(e):void 0}i0.displayName="ContextMenuSubContent";var a0=Z_,l0=Q_,c0=e0,d0=t0,u0=n0,h0=o0,f0=r0,m0=s0,p0=i0;const g0=G_,_0=J_,v5=bU(K_);A.forwardRef((t,e)=>{const n=X.c(14);let o,r,s,i,a,l,c;return n[0]!==t?({className:r,inset:s,children:o,...i}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i):(o=n[1],r=n[2],s=n[3],i=n[4]),n[5]!==r||n[6]!==s?(a=yU({className:r,inset:s}),n[5]=r,n[6]=s,n[7]=a):a=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(vU,{className:"ml-auto h-4 w-4"}),n[8]=l):l=n[8],n[9]!==o||n[10]!==i||n[11]!==e||n[12]!==a?(c=h.jsxs(m0,{ref:e,className:a,...i,children:[o,l]}),n[9]=o,n[10]=i,n[11]=e,n[12]=a,n[13]=c):c=n[13],c}).displayName=m0.displayName;const b0="data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2";A.forwardRef((t,e)=>{const n=X.c(9);let o,r,s,i;return n[0]!==t?({className:o,...r}=t,n[0]=t,n[1]=o,n[2]=r):(o=n[1],r=n[2]),n[3]!==o?(s=Oe(A4({subcontent:!0}),b0,o),n[3]=o,n[4]=s):s=n[4],n[5]!==r||n[6]!==e||n[7]!==s?(i=h.jsx(p0,{ref:e,className:s,...r}),n[5]=r,n[6]=e,n[7]=s,n[8]=i):i=n[8],i}).displayName=p0.displayName;const wu=A.forwardRef((t,e)=>{const n=X.c(15);let o,r,s;n[0]!==t?({className:o,scrollable:s,...r}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]);const i=s===void 0||s;let a;n[4]!==o||n[5]!==i?(a=Oe(A4(),b0,i&&"overflow-auto",o),n[4]=o,n[5]=i,n[6]=a):a=n[6];const l=i?"calc(var(--radix-context-menu-content-available-height) - 30px)":void 0;let c,d;return n[7]!==r.style||n[8]!==l?(c={...r.style,maxHeight:l},n[7]=r.style,n[8]=l,n[9]=c):c=n[9],n[10]!==r||n[11]!==e||n[12]!==a||n[13]!==c?(d=h.jsx(v5,{children:h.jsx(xU,{children:h.jsx(a0,{ref:e,className:a,style:c,...r})})}),n[10]=r,n[11]=e,n[12]=a,n[13]=c,n[14]=d):d=n[14],d});wu.displayName=a0.displayName;const Ii=A.forwardRef((t,e)=>{const n=X.c(13);let o,r,s,i,a,l;return n[0]!==t?({className:o,inset:r,variant:i,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i):(o=n[1],r=n[2],s=n[3],i=n[4]),n[5]!==o||n[6]!==r||n[7]!==i?(a=_U({className:o,inset:r,variant:i}),n[5]=o,n[6]=r,n[7]=i,n[8]=a):a=n[8],n[9]!==s||n[10]!==e||n[11]!==a?(l=h.jsx(c0,{ref:e,className:a,...s}),n[9]=s,n[10]=e,n[11]=a,n[12]=l):l=n[12],l});Ii.displayName=c0.displayName,A.forwardRef((t,e)=>{const n=X.c(15);let o,r,s,i,a,l,c,d;return n[0]!==t?({className:s,children:r,checked:o,...i}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i):(o=n[1],r=n[2],s=n[3],i=n[4]),n[5]!==s?(a=Fc({className:s}),n[5]=s,n[6]=a):a=n[6],n[7]===Symbol.for("react.memo_cache_sentinel")?(l=Fc(),n[7]=l):l=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx("span",{className:l,children:h.jsx(h0,{children:h.jsx(kU,{className:"h-4 w-4"})})}),n[8]=c):c=n[8],n[9]!==o||n[10]!==r||n[11]!==i||n[12]!==e||n[13]!==a?(d=h.jsxs(d0,{ref:e,className:a,checked:o,...i,children:[c,r]}),n[9]=o,n[10]=r,n[11]=i,n[12]=e,n[13]=a,n[14]=d):d=n[14],d}).displayName=d0.displayName,A.forwardRef((t,e)=>{const n=X.c(13);let o,r,s,i,a,l,c;return n[0]!==t?({className:r,children:o,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]),n[4]!==r?(i=Fc({className:r}),n[4]=r,n[5]=i):i=n[5],n[6]===Symbol.for("react.memo_cache_sentinel")?(a=Fc(),n[6]=a):a=n[6],n[7]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx("span",{className:a,children:h.jsx(h0,{children:h.jsx(SU,{className:"h-4 w-4 fill-current"})})}),n[7]=l):l=n[7],n[8]!==o||n[9]!==s||n[10]!==e||n[11]!==i?(c=h.jsxs(u0,{ref:e,className:i,...s,children:[l,o]}),n[8]=o,n[9]=s,n[10]=e,n[11]=i,n[12]=c):c=n[12],c}).displayName=u0.displayName,A.forwardRef((t,e)=>{const n=X.c(11);let o,r,s,i,a;return n[0]!==t?({className:o,inset:r,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]),n[4]!==o||n[5]!==r?(i=wU({className:o,inset:r}),n[4]=o,n[5]=r,n[6]=i):i=n[6],n[7]!==s||n[8]!==e||n[9]!==i?(a=h.jsx(l0,{ref:e,className:i,...s}),n[7]=s,n[8]=e,n[9]=i,n[10]=a):a=n[10],a}).displayName=l0.displayName;const y0=A.forwardRef((t,e)=>{const n=X.c(9);let o,r,s,i;return n[0]!==t?({className:o,...r}=t,n[0]=t,n[1]=o,n[2]=r):(o=n[1],r=n[2]),n[3]!==o?(s=Oe(gU({className:o})),n[3]=o,n[4]=s):s=n[4],n[5]!==r||n[6]!==e||n[7]!==s?(i=h.jsx(f0,{ref:e,className:s,...r}),n[5]=r,n[6]=e,n[7]=s,n[8]=i):i=n[8],i});y0.displayName=f0.displayName;const x0=t=>{const e=X.c(17),{connectionState:n,onClick:o,tooltipContent:r}=t;let s;e[0]!==n||e[1]!==r?(s=Fd(n)||r,e[0]=n,e[1]=r,e[2]=s):s=e[2];const i=s;let a,l,c,d,u,f;return e[3]!==o?(a=()=>o==null?void 0:o({code:""}),e[3]=o,e[4]=a):a=e[4],e[5]!==n?(l=Oe("shoulder-button hover-action",qo(n)&&" inactive-button"),e[5]=n,e[6]=l):l=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(gr,{strokeWidth:1.8}),e[7]=c):c=e[7],e[8]!==a||e[9]!==l?(d=h.jsx(wn,{onClick:a,className:l,onMouseDown:$n.preventFocus,shape:"circle",size:"small",color:"hint-green","data-testid":"create-cell-button",children:c}),e[8]=a,e[9]=l,e[10]=d):d=e[10],e[11]!==i||e[12]!==d?(u=h.jsx(Le,{content:i,usePortal:!1,children:d}),e[11]=i,e[12]=d,e[13]=u):u=e[13],e[14]!==o||e[15]!==u?(f=h.jsx(k5,{onClick:o,children:u}),e[14]=o,e[15]=u,e[16]=f):f=e[16],f},k5=t=>{const e=X.c(24),{children:n,onClick:o}=t;if(!o)return n;let r,s,i,a,l,c,d,u,f,m,_,g;return e[0]!==n?(r=h.jsx(_0,{children:n}),e[0]=n,e[1]=r):r=e[1],e[2]!==o?(s=p=>{p.stopPropagation(),o({code:""})},e[2]=o,e[3]=s):s=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx("div",{className:"mr-3 text-muted-foreground",children:h.jsx(_c,{})}),e[4]=i):i=e[4],e[5]!==s?(a=h.jsxs(Ii,{onSelect:s,children:[i,"Python cell"]},"python"),e[5]=s,e[6]=a):a=e[6],e[7]!==o?(l=p=>{p.stopPropagation(),o({code:new ia().defaultCode})},e[7]=o,e[8]=l):l=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx("div",{className:"mr-3 text-muted-foreground",children:h.jsx(gc,{})}),e[9]=c):c=e[9],e[10]!==l?(d=h.jsxs(Ii,{onSelect:l,children:[c,"Markdown cell"]},"markdown"),e[10]=l,e[11]=d):d=e[11],e[12]!==o?(u=p=>{p.stopPropagation(),o({code:new zc().defaultCode})},e[12]=o,e[13]=u):u=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx("div",{className:"mr-3 text-muted-foreground",children:h.jsx(ur,{size:13,strokeWidth:1.5})}),e[14]=f):f=e[14],e[15]!==u?(m=h.jsxs(Ii,{onSelect:u,children:[f,"SQL cell"]},"sql"),e[15]=u,e[16]=m):m=e[16],e[17]!==a||e[18]!==d||e[19]!==m?(_=h.jsxs(wu,{children:[a,d,m]}),e[17]=a,e[18]=d,e[19]=m,e[20]=_):_=e[20],e[21]!==r||e[22]!==_?(g=h.jsxs(g0,{children:[r,_]}),e[21]=r,e[22]=_,e[23]=g):g=e[23],g},w0=K.memo(K.forwardRef((t,e)=>{const n=X.c(34);let o,r,s;n[0]!==t?({children:o,showTooltip:s,...r}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]);const i=s===void 0||s,[a,l]=A.useState(!1);let c;n[4]!==r?(c={cell:r},n[4]=r,n[5]=c):c=n[5];const d=md(c),u=NU();let f,m,_,g,p,b;if(n[6]===Symbol.for("react.memo_cache_sentinel")?(f=()=>({toggle:()=>l(S5)}),n[6]=f):f=n[6],A.useImperativeHandle(e,f),n[7]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsx(sa,{placeholder:"Search actions...",className:"h-6 m-1"}),n[7]=m):m=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx(xc,{children:"No results"}),n[8]=_):_=n[8],n[9]!==d){let j;n[11]!==d.length?(j=(I,T)=>h.jsxs(A.Fragment,{children:[h.jsx(um,{children:I.map(M=>{let L=h.jsxs("div",{className:"flex items-center flex-1",children:[M.icon&&h.jsx("div",{className:"mr-2 w-5 text-muted-foreground",children:M.icon}),h.jsx("div",{className:"flex-1",children:M.label}),h.jsxs("div",{className:"flex-shrink-0 text-sm",children:[M.hotkey&&T4(M.hotkey),M.rightElement]})]});return M.tooltip&&(L=h.jsx(Le,{content:M.tooltip,delayDuration:100,children:L})),h.jsx(go,{className:Oe(M.disabled&&"!opacity-50"),onSelect:()=>{M.disableClick||M.disabled||(M.handle(),l(!1))},variant:M.variant,children:L},M.label)})},T),T<d.length-1&&h.jsx(q3,{})]},T),n[11]=d.length,n[12]=j):j=n[12],g=d.map(j),n[9]=d,n[10]=g}else g=n[10];n[13]!==g?(p=h.jsxs(Nc,{children:[m,h.jsxs(Fm,{children:[_,g]})]}),n[13]=g,n[14]=p):p=n[14],n[15]!==u||n[16]!==p?(b=h.jsx(Gs,{className:"w-[300px] p-0 pt-1 overflow-auto",scrollable:!0,...u,children:p}),n[15]=u,n[16]=p,n[17]=b):b=n[17];const y=b;if(!i){let j,I;return n[18]!==o?(j=h.jsx(Qs,{asChild:!0,children:o}),n[18]=o,n[19]=j):j=n[19],n[20]!==y||n[21]!==a||n[22]!==j?(I=h.jsxs(zr,{open:a,onOpenChange:l,children:[j,y]}),n[20]=y,n[21]=a,n[22]=j,n[23]=I):I=n[23],I}let x;n[24]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(jU,{tabIndex:-1,children:pn("cell.cellActions")}),n[24]=x):x=n[24];const v=!a&&x;let S,k,E;return n[25]!==o?(S=h.jsx(EU,{children:h.jsx(Qs,{className:"flex",children:o})}),n[25]=o,n[26]=S):S=n[26],n[27]!==v||n[28]!==S?(k=h.jsxs(IU,{delayDuration:200,disableHoverableContent:!0,children:[v,S]}),n[27]=v,n[28]=S,n[29]=k):k=n[29],n[30]!==y||n[31]!==a||n[32]!==k?(E=h.jsxs(zr,{open:a,onOpenChange:l,children:[k,y]}),n[30]=y,n[31]=a,n[32]=k,n[33]=E):E=n[33],E})),v0=K.memo(t=>{const e=X.c(5),{children:n,cellId:o}=t;let r,s;e[0]!==o?(s=CU(o),e[0]=o,e[1]=s):s=e[1],r=s;const i=$e(r);if(!i)return null;let a;return e[2]!==n||e[3]!==i?(a=h.jsx(w0,{showTooltip:!1,...i,children:n}),e[2]=n,e[3]=i,e[4]=a):a=e[4],a});function S5(t){return!t}v0.displayName="ConnectionCellActionsDropdown";const k0=t=>{const e=X.c(32);let n,o,r;e[0]!==t?({children:n,...o}=t,e[0]=t,e[1]=n,e[2]=o):(n=e[1],o=e[2]),e[3]!==o?(r={cell:o},e[3]=o,e[4]=r):r=e[4];const s=md(r),[i,a]=K.useState(),l=!!i;let c,d,u,f,m,_,g,p,b,y;if(e[5]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Rs,{size:13,strokeWidth:1.5}),e[5]=c):c=e[5],e[6]!==o?(d=async()=>{var S;if((S=window.getSelection())==null?void 0:S.toString())return void document.execCommand("copy");const v=document.getElementById(L3.create(o.cellId));v?await xn(v.textContent??""):Qt.warn("cell-context-menu: output not found")},e[6]=o,e[7]=d):d=e[7],e[8]!==s||e[9]!==n||e[10]!==i||e[11]!==o||e[12]!==l||e[13]!==d){const x=[{label:"Copy",hidden:l,icon:c,handle:d},{label:"Cut",hidden:!!i,icon:h.jsx(rd,{size:13,strokeWidth:1.5}),handle:C5},{label:"Paste",hidden:!!i,icon:h.jsx(gp,{size:13,strokeWidth:1.5}),handle:async()=>{const{getEditorView:k}=o,E=k();if(E)try{const j=await navigator.clipboard.readText();if(j){const{from:I,to:T}=E.state.selection.main,M=E.state.update({changes:{from:I,to:T,insert:j}});E.dispatch(M)}}catch(j){const I=j;Qt.error("Failed to paste from clipboard",I),AU({command:"paste"})}}},{label:"Copy image",hidden:!i,icon:h.jsx(Kc,{size:13,strokeWidth:1.5}),handle:async()=>{if(i){const k=await fetch(i.src),E=await k.blob(),j=new ClipboardItem({[E.type]:E});await navigator.clipboard.write([j]).then(N5).catch(j5)}}},{icon:h.jsx(sp,{size:13,strokeWidth:1.5}),label:"Download image",hidden:!i,handle:()=>{if(i){const k=document.createElement("a");k.download="image.png",k.href=i.src,k.click()}}},{label:"Go to Definition",icon:h.jsx(MU,{size:13,strokeWidth:1.5}),handle:()=>{const{getEditorView:k}=o,E=k();E&&TU(E)}}],v=[x,...s];let S;f=g0,e[20]===Symbol.for("react.memo_cache_sentinel")?(S=k=>{k.target instanceof HTMLImageElement?a(k.target):a(void 0)},e[20]=S):S=e[20],e[21]!==n?(p=h.jsx(_0,{onContextMenu:S,asChild:!0,children:n}),e[21]=n,e[22]=p):p=e[22],u=wu,m="w-[300px]",_=!0,g=v.map((k,E)=>h.jsxs(A.Fragment,{children:[k.map(E5),E<v.length-1&&h.jsx(y0,{})]},E)),e[8]=s,e[9]=n,e[10]=i,e[11]=o,e[12]=l,e[13]=d,e[14]=u,e[15]=f,e[16]=m,e[17]=_,e[18]=g,e[19]=p}else u=e[14],f=e[15],m=e[16],_=e[17],g=e[18],p=e[19];return e[23]!==u||e[24]!==m||e[25]!==_||e[26]!==g?(b=h.jsx(u,{className:m,scrollable:_,children:g}),e[23]=u,e[24]=m,e[25]=_,e[26]=g,e[27]=b):b=e[27],e[28]!==f||e[29]!==p||e[30]!==b?(y=h.jsxs(f,{children:[p,b]}),e[28]=f,e[29]=p,e[30]=b,e[31]=y):y=e[31],y};function C5(){document.execCommand("cut")}function N5(){lt({title:"Copied image to clipboard"})}function j5(t){lt({title:"Failed to copy image to clipboard. Try downloading instead.",description:t.message}),Qt.error("Failed to copy image to clipboard",t)}function E5(t){if(t.hidden)return null;let e=h.jsxs("div",{className:"flex items-center flex-1",children:[t.icon&&h.jsx("div",{className:"mr-2 w-5 text-muted-foreground",children:t.icon}),h.jsx("div",{className:"flex-1",children:t.label}),h.jsxs("div",{className:"flex-shrink-0 text-sm",children:[t.hotkey&&T4(t.hotkey),t.rightElement]})]});return t.tooltip&&(e=h.jsx(Le,{delayDuration:100,content:t.tooltip,children:e})),h.jsx(Ii,{className:t.disabled?"!opacity-50":"",onSelect:n=>{t.disableClick||t.disabled||t.handle(n)},variant:t.variant,children:e},t.label)}const I5=""+new URL("loro_wasm_bg-DHBNbovs.wasm",import.meta.url).href;let w;function vu(t){w=t}const St=new Array(128).fill(void 0);function be(t){return St[t]}St.push(void 0,null,!0,!1);let Ye=0,vl=null;function Kr(){return vl!==null&&vl.byteLength!==0||(vl=new Uint8Array(w.memory.buffer)),vl}let kl=new(typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const A5=typeof kl.encodeInto=="function"?function(t,e){return kl.encodeInto(t,e)}:function(t,e){const n=kl.encode(t);return e.set(n),{read:t.length,written:n.length}};function ft(t,e,n){if(n===void 0){const a=kl.encode(t),l=e(a.length,1)>>>0;return Kr().subarray(l,l+a.length).set(a),Ye=a.length,l}let o=t.length,r=e(o,1)>>>0;const s=Kr();let i=0;for(;i<o;i++){const a=t.charCodeAt(i);if(a>127)break;s[r+i]=a}if(i!==o){i!==0&&(t=t.slice(i)),r=n(r,o,o=i+3*t.length,1)>>>0;const a=Kr().subarray(r+i,r+o);i+=A5(t,a).written,r=n(r,o,i,1)>>>0}return Ye=i,r}let Xr=null;function P(){return(Xr===null||Xr.buffer.detached===!0||Xr.buffer.detached===void 0&&Xr.buffer!==w.memory.buffer)&&(Xr=new DataView(w.memory.buffer)),Xr}let Ai=St.length;function se(t){Ai===St.length&&St.push(St.length+1);const e=Ai;return Ai=St[e],St[e]=t,e}function Jt(t,e){try{return t.apply(this,e)}catch(n){w.__wbindgen_export_2(se(n))}}let S0=new(typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function Tt(t,e){return t>>>=0,S0.decode(Kr().subarray(t,t+e))}function W(t){const e=be(t);return function(n){n<132||(St[n]=Ai,Ai=n)}(t),e}function Pn(t){return t==null}S0.decode();const C0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>{w.__wbindgen_export_4.get(t.dtor)(t.a,t.b)});function N0(t,e,n,o){const r={a:t,b:e,cnt:1,dtor:n},s=(...i)=>{r.cnt++;const a=r.a;r.a=0;try{return o(a,r.b,...i)}finally{--r.cnt===0?(w.__wbindgen_export_4.get(r.dtor)(a,r.b),C0.unregister(r)):r.a=a}};return s.original=r,C0.register(s,r,r),s}function ku(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const r=t.description;return r==null?"Symbol":`Symbol(${r})`}if(e=="function"){const r=t.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(t)){const r=t.length;let s="[";r>0&&(s+=ku(t[0]));for(let i=1;i<r;i++)s+=", "+ku(t[i]);return s+="]",s}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let o;if(!(n&&n.length>1))return toString.call(t);if(o=n[1],o=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:o}function so(t,e){return t>>>=0,Kr().subarray(t/1,t/1+e)}function Ko(t,e){const n=e(1*t.length,1)>>>0;return Kr().set(t,n/1),Ye=t.length,n}function Ln(t,e){t>>>=0;const n=P(),o=[];for(let r=t;r<t+4*e;r+=4)o.push(W(n.getUint32(r,!0)));return o}function vn(t,e){const n=e(4*t.length,4)>>>0,o=P();for(let r=0;r<t.length;r++)o.setUint32(n+4*r,se(t[r]),!0);return Ye=t.length,n}let Kt=128;function _n(t){if(Kt==1)throw new Error("out of js stack");return St[--Kt]=t,Kt}function Zr(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`)}function T5(t,e,n){w.__wbindgen_export_5(t,e,se(n))}function M5(t,e){w.__wbindgen_export_6(t,e)}const j0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_awarenesswasm_free(t>>>0,1));class E0{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,j0.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_awarenesswasm_free(e,0)}constructor(e,n){const o=w.awarenesswasm_new(se(e),n);return this.__wbg_ptr=o>>>0,j0.register(this,this.__wbg_ptr,this),this}encode(e){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_encode(s,this.__wbg_ptr,se(e));var n=P().getInt32(s+0,!0),o=P().getInt32(s+4,!0),r=so(n,o).slice();return w.__wbindgen_export_3(n,1*o,1),r}finally{w.__wbindgen_add_to_stack_pointer(16)}}encodeAll(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_encodeAll(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=so(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}apply(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Ko(e,w.__wbindgen_export_0),i=Ye;w.awarenesswasm_apply(r,this.__wbg_ptr,s,i);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setLocalState(e){w.awarenesswasm_setLocalState(this.__wbg_ptr,se(e))}peer(){return W(w.awarenesswasm_peer(this.__wbg_ptr))}getAllStates(){return W(w.awarenesswasm_getAllStates(this.__wbg_ptr))}getState(e){return W(w.awarenesswasm_getState(this.__wbg_ptr,se(e)))}getTimestamp(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_getTimestamp(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getFloat64(r+8,!0);return n===0?void 0:o}finally{w.__wbindgen_add_to_stack_pointer(16)}}removeOutdated(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_removeOutdated(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=Ln(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}length(){return w.awarenesswasm_length(this.__wbg_ptr)}isEmpty(){return w.awarenesswasm_isEmpty(this.__wbg_ptr)!==0}peers(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.awarenesswasm_peers(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=Ln(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}}const I0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_changemodifier_free(t>>>0,1));class Qr{static __wrap(e){e>>>=0;const n=Object.create(Qr.prototype);return n.__wbg_ptr=e,I0.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,I0.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_changemodifier_free(e,0)}setMessage(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye,r=w.changemodifier_setMessage(this.__wbg_ptr,n,o);return Qr.__wrap(r)}setTimestamp(e){const n=w.changemodifier_setTimestamp(this.__wbg_ptr,e);return Qr.__wrap(n)}}const A0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_cursor_free(t>>>0,1));class Xn{static __wrap(e){e>>>=0;const n=Object.create(Xn.prototype);return n.__wbg_ptr=e,A0.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,A0.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_cursor_free(e,0)}containerId(){return W(w.cursor_containerId(this.__wbg_ptr))}pos(){return W(w.cursor_pos(this.__wbg_ptr))}side(){return W(w.cursor_side(this.__wbg_ptr))}encode(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.cursor_encode(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=so(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Ko(e,w.__wbindgen_export_0),i=Ye;w.cursor_decode(r,s,i);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Xn.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}kind(){return W(w.cursor_kind(this.__wbg_ptr))}}const T0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_ephemeralstorewasm_free(t>>>0,1)),Su=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorocounter_free(t>>>0,1));class Ti{static __wrap(e){e>>>=0;const n=Object.create(Ti.prototype);return n.__wbg_ptr=e,Su.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Su.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorocounter_free(e,0)}constructor(){const e=w.lorocounter_new();return this.__wbg_ptr=e>>>0,Su.register(this,this.__wbg_ptr,this),this}kind(){return W(w.lorocounter_kind(this.__wbg_ptr))}get id(){return W(w.lorocounter_id(this.__wbg_ptr))}increment(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorocounter_increment(o,this.__wbg_ptr,e);var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}decrement(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorocounter_decrement(o,this.__wbg_ptr,e);var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get value(){return w.lorocounter_value(this.__wbg_ptr)}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorocounter_subscribe(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}parent(){return W(w.lorocounter_parent(this.__wbg_ptr))}isAttached(){return w.lorocounter_isAttached(this.__wbg_ptr)!==0}getAttached(){return W(w.lorocounter_getAttached(this.__wbg_ptr))}getShallowValue(){return w.lorocounter_getShallowValue(this.__wbg_ptr)}}const Cu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorodoc_free(t>>>0,1));class yo{static __wrap(e){e>>>=0;const n=Object.create(yo.prototype);return n.__wbg_ptr=e,Cu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Cu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorodoc_free(e,0)}constructor(){const e=w.lorodoc_new();return this.__wbg_ptr=e>>>0,Cu.register(this,this.__wbg_ptr,this),this}setDetachedEditing(e){w.lorodoc_setDetachedEditing(this.__wbg_ptr,e)}isDetachedEditingEnabled(){return w.lorodoc_isDetachedEditingEnabled(this.__wbg_ptr)!==0}setRecordTimestamp(e){w.lorodoc_setRecordTimestamp(this.__wbg_ptr,e)}setChangeMergeInterval(e){w.lorodoc_setChangeMergeInterval(this.__wbg_ptr,e)}configTextStyle(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_configTextStyle(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}configDefaultTextStyle(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_configDefaultTextStyle(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}static fromSnapshot(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Ko(e,w.__wbindgen_export_0),i=Ye;w.lorodoc_fromSnapshot(r,s,i);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return yo.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}attach(){w.lorodoc_attach(this.__wbg_ptr)}isDetached(){return w.lorodoc_isDetached(this.__wbg_ptr)!==0}detach(){w.lorodoc_detach(this.__wbg_ptr)}fork(){const e=w.lorodoc_fork(this.__wbg_ptr);return yo.__wrap(e)}forkAt(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=vn(e,w.__wbindgen_export_0),i=Ye;w.lorodoc_forkAt(r,this.__wbg_ptr,s,i);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return yo.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}checkoutToLatest(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_checkoutToLatest(n,this.__wbg_ptr);var e=P().getInt32(n+0,!0);if(P().getInt32(n+4,!0))throw W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}travelChangeAncestors(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=vn(e,w.__wbindgen_export_0),i=Ye;w.lorodoc_travelChangeAncestors(r,this.__wbg_ptr,s,i,se(n));var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}findIdSpansBetween(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=vn(e,w.__wbindgen_export_0),a=Ye,l=vn(n,w.__wbindgen_export_0),c=Ye;w.lorodoc_findIdSpansBetween(s,this.__wbg_ptr,i,a,l,c);var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);if(P().getInt32(s+8,!0))throw W(r);return W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}checkout(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=vn(e,w.__wbindgen_export_0),s=Ye;w.lorodoc_checkout(o,this.__wbg_ptr,r,s);var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get peerId(){const e=w.lorodoc_peerId(this.__wbg_ptr);return BigInt.asUintN(64,e)}get peerIdStr(){return W(w.lorodoc_peerIdStr(this.__wbg_ptr))}setPeerId(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_setPeerId(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}commit(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_commit(o,this.__wbg_ptr,Pn(e)?0:se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getPendingTxnLength(){return w.lorodoc_getPendingTxnLength(this.__wbg_ptr)>>>0}getText(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getText(r,this.__wbg_ptr,_n(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Zo.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}getMap(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getMap(r,this.__wbg_ptr,_n(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Xo.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}getList(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getList(r,this.__wbg_ptr,_n(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Mi.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}getMovableList(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getMovableList(r,this.__wbg_ptr,_n(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Oi.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}getCounter(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getCounter(r,this.__wbg_ptr,_n(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Ti.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}getTree(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getTree(r,this.__wbg_ptr,_n(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Di.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}hasContainer(e){return w.lorodoc_hasContainer(this.__wbg_ptr,se(e))!==0}getContainerById(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getContainerById(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setNextCommitMessage(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye;w.lorodoc_setNextCommitMessage(this.__wbg_ptr,n,o)}setNextCommitOrigin(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye;w.lorodoc_setNextCommitOrigin(this.__wbg_ptr,n,o)}setNextCommitTimestamp(e){w.lorodoc_setNextCommitTimestamp(this.__wbg_ptr,e)}setNextCommitOptions(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_setNextCommitOptions(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}clearNextCommitOptions(){w.lorodoc_clearNextCommitOptions(this.__wbg_ptr)}getDeepValueWithID(){return W(w.lorodoc_getDeepValueWithID(this.__wbg_ptr))}getPathToContainer(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getPathToContainer(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}JSONPath(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),i=Ye;w.lorodoc_JSONPath(r,this.__wbg_ptr,s,i);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}version(){const e=w.lorodoc_version(this.__wbg_ptr);return Fn.__wrap(e)}shallowSinceVV(){const e=w.lorodoc_shallowSinceVV(this.__wbg_ptr);return Fn.__wrap(e)}isShallow(){return w.lorodoc_isShallow(this.__wbg_ptr)!==0}shallowSinceFrontiers(){return W(w.lorodoc_shallowSinceFrontiers(this.__wbg_ptr))}oplogVersion(){const e=w.lorodoc_oplogVersion(this.__wbg_ptr);return Fn.__wrap(e)}frontiers(){return W(w.lorodoc_frontiers(this.__wbg_ptr))}oplogFrontiers(){return W(w.lorodoc_oplogFrontiers(this.__wbg_ptr))}cmpWithFrontiers(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=vn(e,w.__wbindgen_export_0),i=Ye;w.lorodoc_cmpWithFrontiers(r,this.__wbg_ptr,s,i);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return n}finally{w.__wbindgen_add_to_stack_pointer(16)}}cmpFrontiers(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=vn(e,w.__wbindgen_export_0),a=Ye,l=vn(n,w.__wbindgen_export_0),c=Ye;w.lorodoc_cmpFrontiers(s,this.__wbg_ptr,i,a,l,c);var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);if(P().getInt32(s+8,!0))throw W(r);return W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}exportSnapshot(){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_exportSnapshot(s,this.__wbg_ptr);var e=P().getInt32(s+0,!0),n=P().getInt32(s+4,!0),o=P().getInt32(s+8,!0);if(P().getInt32(s+12,!0))throw W(o);var r=so(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),r}finally{w.__wbindgen_add_to_stack_pointer(16)}}exportFrom(e){try{const i=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_exportFrom(i,this.__wbg_ptr,se(e));var n=P().getInt32(i+0,!0),o=P().getInt32(i+4,!0),r=P().getInt32(i+8,!0);if(P().getInt32(i+12,!0))throw W(r);var s=so(n,o).slice();return w.__wbindgen_export_3(n,1*o,1),s}finally{w.__wbindgen_add_to_stack_pointer(16)}}export(e){try{const i=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_export(i,this.__wbg_ptr,se(e));var n=P().getInt32(i+0,!0),o=P().getInt32(i+4,!0),r=P().getInt32(i+8,!0);if(P().getInt32(i+12,!0))throw W(r);var s=so(n,o).slice();return w.__wbindgen_export_3(n,1*o,1),s}finally{w.__wbindgen_add_to_stack_pointer(16)}}exportJsonUpdates(e,n,o){try{const i=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_exportJsonUpdates(i,this.__wbg_ptr,se(e),se(n),Pn(o)?16777215:o?1:0);var r=P().getInt32(i+0,!0),s=P().getInt32(i+4,!0);if(P().getInt32(i+8,!0))throw W(s);return W(r)}finally{w.__wbindgen_add_to_stack_pointer(16)}}exportJsonInIdSpan(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_exportJsonInIdSpan(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}importJsonUpdates(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_importJsonUpdates(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}import(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Ko(e,w.__wbindgen_export_0),i=Ye;w.lorodoc_import(r,this.__wbg_ptr,s,i);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}importUpdateBatch(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_importBatch(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}importBatch(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_importBatch(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getShallowValue(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getShallowValue(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_toJSON(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){return W(w.lorodoc_subscribe(this.__wbg_ptr,se(e)))}subscribeLocalUpdates(e){return W(w.lorodoc_subscribeLocalUpdates(this.__wbg_ptr,se(e)))}debugHistory(){w.lorodoc_debugHistory(this.__wbg_ptr)}changeCount(){return w.lorodoc_changeCount(this.__wbg_ptr)>>>0}opCount(){return w.lorodoc_opCount(this.__wbg_ptr)>>>0}getAllChanges(){return W(w.lorodoc_getAllChanges(this.__wbg_ptr))}getChangeAt(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getChangeAt(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getChangeAtLamport(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),a=Ye;w.lorodoc_getChangeAtLamport(s,this.__wbg_ptr,i,a,n);var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);if(P().getInt32(s+8,!0))throw W(r);return W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getOpsInChange(e){try{const i=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getOpsInChange(i,this.__wbg_ptr,se(e));var n=P().getInt32(i+0,!0),o=P().getInt32(i+4,!0),r=P().getInt32(i+8,!0);if(P().getInt32(i+12,!0))throw W(r);var s=Ln(n,o).slice();return w.__wbindgen_export_3(n,4*o,4),s}finally{w.__wbindgen_add_to_stack_pointer(16)}}frontiersToVV(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=vn(e,w.__wbindgen_export_0),i=Ye;w.lorodoc_frontiersToVV(r,this.__wbg_ptr,s,i);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Fn.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}vvToFrontiers(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);Zr(e,Fn),w.lorodoc_vvToFrontiers(r,this.__wbg_ptr,e.__wbg_ptr);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getByPath(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye;return W(w.lorodoc_getByPath(this.__wbg_ptr,n,o))}getCursorPos(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);Zr(e,Xn),w.lorodoc_getCursorPos(r,this.__wbg_ptr,e.__wbg_ptr);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getChangedContainersIn(e,n){try{const a=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getChangedContainersIn(a,this.__wbg_ptr,se(e),n);var o=P().getInt32(a+0,!0),r=P().getInt32(a+4,!0),s=P().getInt32(a+8,!0);if(P().getInt32(a+12,!0))throw W(s);var i=Ln(o,r).slice();return w.__wbindgen_export_3(o,4*r,4),i}finally{w.__wbindgen_add_to_stack_pointer(16)}}revertTo(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=vn(e,w.__wbindgen_export_0),s=Ye;w.lorodoc_revertTo(o,this.__wbg_ptr,r,s);var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}applyDiff(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_applyDiff(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}diff(e,n,o){try{const i=w.__wbindgen_add_to_stack_pointer(-16),a=vn(e,w.__wbindgen_export_0),l=Ye,c=vn(n,w.__wbindgen_export_0),d=Ye;w.lorodoc_diff(i,this.__wbg_ptr,a,l,c,d,Pn(o)?16777215:o?1:0);var r=P().getInt32(i+0,!0),s=P().getInt32(i+4,!0);if(P().getInt32(i+8,!0))throw W(s);return W(r)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getUncommittedOpsAsJson(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_getUncommittedOpsAsJson(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribeFirstCommitFromPeer(e){return W(w.lorodoc_subscribeFirstCommitFromPeer(this.__wbg_ptr,se(e)))}subscribePreCommit(e){return W(w.lorodoc_subscribePreCommit(this.__wbg_ptr,se(e)))}deleteRootContainer(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_deleteRootContainer(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setHideEmptyRootContainers(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorodoc_setHideEmptyRootContainers(o,this.__wbg_ptr,e);var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}}const Nu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorolist_free(t>>>0,1));class Mi{static __wrap(e){e>>>=0;const n=Object.create(Mi.prototype);return n.__wbg_ptr=e,Nu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Nu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorolist_free(e,0)}constructor(){const e=w.lorolist_new();return this.__wbg_ptr=e>>>0,Nu.register(this,this.__wbg_ptr,this),this}kind(){return W(w.lorolist_kind(this.__wbg_ptr))}insert(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_insert(r,this.__wbg_ptr,e,se(n));var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_delete(r,this.__wbg_ptr,e,n);var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get(e){return W(w.lorolist_get(this.__wbg_ptr,e))}get id(){return W(w.lorolist_id(this.__wbg_ptr))}toArray(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_toArray(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=Ln(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){return W(w.lorolist_toJSON(this.__wbg_ptr))}insertContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_insertContainer(s,this.__wbg_ptr,e,se(n));var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);if(P().getInt32(s+8,!0))throw W(r);return W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_pushContainer(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_subscribe(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get length(){return w.lorolist_length(this.__wbg_ptr)>>>0}parent(){return W(w.lorolist_parent(this.__wbg_ptr))}isAttached(){return w.lorolist_isAttached(this.__wbg_ptr)!==0}getAttached(){return W(w.lorolist_getAttached(this.__wbg_ptr))}getCursor(e,n){const o=w.lorolist_getCursor(this.__wbg_ptr,e,se(n));return o===0?void 0:Xn.__wrap(o)}push(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_push(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_pop(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.lorolist_clear(n,this.__wbg_ptr);var e=P().getInt32(n+0,!0);if(P().getInt32(n+4,!0))throw W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getIdAt(e){return W(w.lorolist_getIdAt(this.__wbg_ptr,e))}isDeleted(){return w.lorolist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){return W(w.lorolist_getShallowValue(this.__wbg_ptr))}}const ju=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_loromap_free(t>>>0,1));class Xo{static __wrap(e){e>>>=0;const n=Object.create(Xo.prototype);return n.__wbg_ptr=e,ju.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ju.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_loromap_free(e,0)}constructor(){const e=w.loromap_new();return this.__wbg_ptr=e>>>0,ju.register(this,this.__wbg_ptr,this),this}kind(){return W(w.loromap_kind(this.__wbg_ptr))}set(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),i=Ye;w.loromap_set(r,this.__wbg_ptr,s,i,se(n));var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}delete(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),s=Ye;w.loromap_delete(o,this.__wbg_ptr,r,s);var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye;return W(w.loromap_get(this.__wbg_ptr,n,o))}getOrCreateContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),a=Ye;w.loromap_getOrCreateContainer(s,this.__wbg_ptr,i,a,se(n));var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);if(P().getInt32(s+8,!0))throw W(r);return W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}keys(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_keys(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=Ln(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}values(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_values(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=Ln(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}entries(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_entries(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=Ln(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}get id(){return W(w.loromap_id(this.__wbg_ptr))}toJSON(){return W(w.loromap_toJSON(this.__wbg_ptr))}setContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),a=Ye;w.loromap_setContainer(s,this.__wbg_ptr,i,a,se(n));var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);if(P().getInt32(s+8,!0))throw W(r);return W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_subscribe(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get size(){return w.loromap_size(this.__wbg_ptr)>>>0}parent(){return W(w.loromap_parent(this.__wbg_ptr))}isAttached(){return w.loromap_isAttached(this.__wbg_ptr)!==0}getAttached(){return W(w.loromap_getAttached(this.__wbg_ptr))}clear(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.loromap_clear(n,this.__wbg_ptr);var e=P().getInt32(n+0,!0);if(P().getInt32(n+4,!0))throw W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getLastEditor(e){const n=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye;return W(w.loromap_getLastEditor(this.__wbg_ptr,n,o))}isDeleted(){return w.loromap_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){return W(w.loromap_getShallowValue(this.__wbg_ptr))}}const Eu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_loromovablelist_free(t>>>0,1));class Oi{static __wrap(e){e>>>=0;const n=Object.create(Oi.prototype);return n.__wbg_ptr=e,Eu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Eu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_loromovablelist_free(e,0)}constructor(){const e=w.loromovablelist_new();return this.__wbg_ptr=e>>>0,Eu.register(this,this.__wbg_ptr,this),this}kind(){return W(w.loromovablelist_kind(this.__wbg_ptr))}insert(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_insert(r,this.__wbg_ptr,e,se(n));var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_delete(r,this.__wbg_ptr,e,n);var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get(e){return W(w.loromovablelist_get(this.__wbg_ptr,e))}get id(){return W(w.loromovablelist_id(this.__wbg_ptr))}toArray(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_toArray(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=Ln(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){return W(w.loromovablelist_toJSON(this.__wbg_ptr))}insertContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_insertContainer(s,this.__wbg_ptr,e,se(n));var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);if(P().getInt32(s+8,!0))throw W(r);return W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}pushContainer(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_pushContainer(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_subscribe(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get length(){return w.loromovablelist_length(this.__wbg_ptr)>>>0}parent(){return W(w.loromovablelist_parent(this.__wbg_ptr))}isAttached(){return w.loromovablelist_isAttached(this.__wbg_ptr)!==0}getAttached(){return W(w.loromovablelist_getAttached(this.__wbg_ptr))}getCursor(e,n){const o=w.loromovablelist_getCursor(this.__wbg_ptr,e,se(n));return o===0?void 0:Xn.__wrap(o)}move(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_move(r,this.__wbg_ptr,e,n);var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}set(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_set(r,this.__wbg_ptr,e,se(n));var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setContainer(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_setContainer(s,this.__wbg_ptr,e,se(n));var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);if(P().getInt32(s+8,!0))throw W(r);return W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}push(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_push(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}pop(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_pop(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}clear(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.loromovablelist_clear(n,this.__wbg_ptr);var e=P().getInt32(n+0,!0);if(P().getInt32(n+4,!0))throw W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getCreatorAt(e){return W(w.loromovablelist_getCreatorAt(this.__wbg_ptr,e))}getLastMoverAt(e){return W(w.loromovablelist_getLastMoverAt(this.__wbg_ptr,e))}getLastEditorAt(e){return W(w.loromovablelist_getLastEditorAt(this.__wbg_ptr,e))}isDeleted(){return w.loromovablelist_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){return W(w.loromovablelist_getShallowValue(this.__wbg_ptr))}}const Iu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorotext_free(t>>>0,1));class Zo{static __wrap(e){e>>>=0;const n=Object.create(Zo.prototype);return n.__wbg_ptr=e,Iu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Iu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorotext_free(e,0)}constructor(){const e=w.lorotext_new();return this.__wbg_ptr=e>>>0,Iu.register(this,this.__wbg_ptr,this),this}kind(){return W(w.lorotext_kind(this.__wbg_ptr))}iter(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_iter(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}update(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),i=Ye;w.lorotext_update(r,this.__wbg_ptr,s,i,se(n));var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}updateByLine(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),i=Ye;w.lorotext_updateByLine(r,this.__wbg_ptr,s,i,se(n));var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}insert(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(n,w.__wbindgen_export_0,w.__wbindgen_export_1),i=Ye;w.lorotext_insert(r,this.__wbg_ptr,e,s,i);var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}slice(e,n){let o,r;try{const u=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_slice(u,this.__wbg_ptr,e,n);var s=P().getInt32(u+0,!0),i=P().getInt32(u+4,!0),a=P().getInt32(u+8,!0),l=P().getInt32(u+12,!0),c=s,d=i;if(l)throw c=0,d=0,W(a);return o=c,r=d,Tt(c,d)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(o,r,1)}}charAt(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_charAt(r,this.__wbg_ptr,e);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return String.fromCodePoint(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}splice(e,n,o){let r,s;try{const f=w.__wbindgen_add_to_stack_pointer(-16),m=ft(o,w.__wbindgen_export_0,w.__wbindgen_export_1),_=Ye;w.lorotext_splice(f,this.__wbg_ptr,e,n,m,_);var i=P().getInt32(f+0,!0),a=P().getInt32(f+4,!0),l=P().getInt32(f+8,!0),c=P().getInt32(f+12,!0),d=i,u=a;if(c)throw d=0,u=0,W(l);return r=d,s=u,Tt(d,u)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(r,s,1)}}insertUtf8(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(n,w.__wbindgen_export_0,w.__wbindgen_export_1),i=Ye;w.lorotext_insertUtf8(r,this.__wbg_ptr,e,s,i);var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_delete(r,this.__wbg_ptr,e,n);var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}deleteUtf8(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_deleteUtf8(r,this.__wbg_ptr,e,n);var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}mark(e,n,o){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=ft(n,w.__wbindgen_export_0,w.__wbindgen_export_1),a=Ye;w.lorotext_mark(s,this.__wbg_ptr,se(e),i,a,se(o));var r=P().getInt32(s+0,!0);if(P().getInt32(s+4,!0))throw W(r)}finally{w.__wbindgen_add_to_stack_pointer(16)}}unmark(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(n,w.__wbindgen_export_0,w.__wbindgen_export_1),i=Ye;w.lorotext_unmark(r,this.__wbg_ptr,se(e),s,i);var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toString(){let e,n;try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_toString(s,this.__wbg_ptr);var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);return e=o,n=r,Tt(o,r)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(e,n,1)}}toDelta(){return W(w.lorotext_toDelta(this.__wbg_ptr))}get id(){return W(w.lorotext_id(this.__wbg_ptr))}get length(){return w.lorotext_length(this.__wbg_ptr)>>>0}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_subscribe(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}applyDelta(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_applyDelta(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}parent(){return W(w.lorotext_parent(this.__wbg_ptr))}isAttached(){return w.lorotext_isAttached(this.__wbg_ptr)!==0}getAttached(){return W(w.lorotext_getAttached(this.__wbg_ptr))}getCursor(e,n){const o=w.lorotext_getCursor(this.__wbg_ptr,e,se(n));return o===0?void 0:Xn.__wrap(o)}push(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=ft(e,w.__wbindgen_export_0,w.__wbindgen_export_1),s=Ye;w.lorotext_push(o,this.__wbg_ptr,r,s);var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getEditorOf(e){return W(w.lorotext_getEditorOf(this.__wbg_ptr,e))}isDeleted(){return w.lorotext_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){let e,n;try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotext_getShallowValue(s,this.__wbg_ptr);var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);return e=o,n=r,Tt(o,r)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(e,n,1)}}toJSON(){return W(w.lorotext_toJSON(this.__wbg_ptr))}}const Au=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorotree_free(t>>>0,1));class Di{static __wrap(e){e>>>=0;const n=Object.create(Di.prototype);return n.__wbg_ptr=e,Au.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Au.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorotree_free(e,0)}constructor(){const e=w.lorotree_new();return this.__wbg_ptr=e>>>0,Au.register(this,this.__wbg_ptr,this),this}kind(){return W(w.lorotree_kind(this.__wbg_ptr))}createNode(e,n){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_createNode(s,this.__wbg_ptr,_n(e),Pn(n)?4294967297:n>>>0);var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);if(P().getInt32(s+8,!0))throw W(r);return io.__wrap(o)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}move(e,n,o){try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_move(s,this.__wbg_ptr,_n(e),_n(n),Pn(o)?4294967297:o>>>0);var r=P().getInt32(s+0,!0);if(P().getInt32(s+4,!0))throw W(r)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0,St[Kt++]=void 0}}delete(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_delete(o,this.__wbg_ptr,_n(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}getNodeByID(e){try{const n=w.lorotree_getNodeByID(this.__wbg_ptr,_n(e));return n===0?void 0:io.__wrap(n)}finally{St[Kt++]=void 0}}get id(){return W(w.lorotree_id(this.__wbg_ptr))}has(e){try{return w.lorotree_has(this.__wbg_ptr,_n(e))!==0}finally{St[Kt++]=void 0}}isNodeDeleted(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_isNodeDeleted(r,this.__wbg_ptr,_n(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return n!==0}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}toArray(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_toArray(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}getNodes(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_getNodes(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){return W(w.lorotree_toJSON(this.__wbg_ptr))}nodes(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_nodes(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=Ln(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}roots(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_roots(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=Ln(e,n).slice();return w.__wbindgen_export_3(e,4*n,4),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}subscribe(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotree_subscribe(r,this.__wbg_ptr,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}parent(){return W(w.lorotree_parent(this.__wbg_ptr))}isAttached(){return w.lorotree_isAttached(this.__wbg_ptr)!==0}getAttached(){return W(w.lorotree_getAttached(this.__wbg_ptr))}enableFractionalIndex(e){w.lorotree_enableFractionalIndex(this.__wbg_ptr,e)}disableFractionalIndex(){w.lorotree_disableFractionalIndex(this.__wbg_ptr)}isFractionalIndexEnabled(){return w.lorotree_isFractionalIndexEnabled(this.__wbg_ptr)!==0}isDeleted(){return w.lorotree_isDeleted(this.__wbg_ptr)!==0}getShallowValue(){return W(w.lorotree_getShallowValue(this.__wbg_ptr))}}const M0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_lorotreenode_free(t>>>0,1));class io{static __wrap(e){e>>>=0;const n=Object.create(io.prototype);return n.__wbg_ptr=e,M0.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,M0.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_lorotreenode_free(e,0)}__getClassname(){let e,n;try{const s=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode___getClassname(s,this.__wbg_ptr);var o=P().getInt32(s+0,!0),r=P().getInt32(s+4,!0);return e=o,n=r,Tt(o,r)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(e,n,1)}}get id(){return W(w.lorotreenode_id(this.__wbg_ptr))}createNode(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_createNode(r,this.__wbg_ptr,Pn(e)?4294967297:e>>>0);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return io.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}move(e,n){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_move(r,this.__wbg_ptr,_n(e),Pn(n)?4294967297:n>>>0);var o=P().getInt32(r+0,!0);if(P().getInt32(r+4,!0))throw W(o)}finally{w.__wbindgen_add_to_stack_pointer(16),St[Kt++]=void 0}}moveAfter(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);Zr(e,io),w.lorotreenode_moveAfter(o,this.__wbg_ptr,e.__wbg_ptr);var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}moveBefore(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);Zr(e,io),w.lorotreenode_moveBefore(o,this.__wbg_ptr,e.__wbg_ptr);var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}index(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_index(o,this.__wbg_ptr);var e=P().getFloat64(o+0,!0),n=P().getInt32(o+8,!0);if(P().getInt32(o+12,!0))throw W(n);return e===4294967297?void 0:e}finally{w.__wbindgen_add_to_stack_pointer(16)}}fractionalIndex(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_fractionalIndex(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get data(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_data(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return Xo.__wrap(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_toJSON(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}parent(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_parent(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return e===0?void 0:io.__wrap(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}}children(){return W(w.lorotreenode_children(this.__wbg_ptr))}isDeleted(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.lorotreenode_isDeleted(o,this.__wbg_ptr);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return e!==0}finally{w.__wbindgen_add_to_stack_pointer(16)}}getLastMoveId(){return W(w.lorotreenode_getLastMoveId(this.__wbg_ptr))}creationId(){return W(w.lorotreenode_creationId(this.__wbg_ptr))}creator(){return W(w.lorotreenode_creator(this.__wbg_ptr))}}const O0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_undomanager_free(t>>>0,1)),Tu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>w.__wbg_versionvector_free(t>>>0,1));class Fn{static __wrap(e){e>>>=0;const n=Object.create(Fn.prototype);return n.__wbg_ptr=e,Tu.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Tu.unregister(this),e}free(){const e=this.__destroy_into_raw();w.__wbg_versionvector_free(e,0)}constructor(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_new(r,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return this.__wbg_ptr=n>>>0,Tu.register(this,this.__wbg_ptr,this),this}finally{w.__wbindgen_add_to_stack_pointer(16)}}static parseJSON(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_parseJSON(r,se(e));var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Fn.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}toJSON(){return W(w.versionvector_toJSON(this.__wbg_ptr))}encode(){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_encode(r,this.__wbg_ptr);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=so(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}static decode(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Ko(e,w.__wbindgen_export_0),i=Ye;w.versionvector_decode(r,s,i);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return Fn.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}get(e){try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_get(r,this.__wbg_ptr,se(e));var n=P().getFloat64(r+0,!0),o=P().getInt32(r+8,!0);if(P().getInt32(r+12,!0))throw W(o);return n===4294967297?void 0:n}finally{w.__wbindgen_add_to_stack_pointer(16)}}compare(e){Zr(e,Fn);const n=w.versionvector_compare(this.__wbg_ptr,e.__wbg_ptr);return n===4294967297?void 0:n}setEnd(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_setEnd(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}setLast(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_setLast(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}remove(e){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.versionvector_remove(o,this.__wbg_ptr,se(e));var n=P().getInt32(o+0,!0);if(P().getInt32(o+4,!0))throw W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}length(){return w.versionvector_length(this.__wbg_ptr)>>>0}}function D0(t,e){const n=ft(String(be(e)),w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye;P().setInt32(t+4,o,!0),P().setInt32(t+0,n,!0)}function R0(){return Jt(function(t,e,n){return se(Reflect.apply(be(t),be(e),be(n)))},arguments)}function P0(t){return se(be(t).buffer)}function L0(){return Jt(function(t,e){return se(be(t).call(be(e)))},arguments)}function F0(){return Jt(function(t,e,n){return se(be(t).call(be(e),be(n)))},arguments)}function z0(){return Jt(function(t,e,n,o,r){return se(be(t).call(be(e),be(n),be(o),be(r)))},arguments)}function B0(){return Jt(function(t,e,n,o){return se(be(t).call(be(e),be(n),be(o)))},arguments)}function U0(t){return se(Qr.__wrap(t))}function V0(t){return se(be(t).crypto)}function H0(t){return se(Xn.__wrap(t))}function $0(t){return be(t).done}function W0(t){return se(be(t).entries())}function q0(t){return se(Object.entries(be(t)))}function G0(t,e){let n,o;try{n=t,o=e,console.error(Tt(t,e))}finally{w.__wbindgen_export_3(n,o,1)}}function Y0(t,e){console.error(Tt(t,e))}function J0(t){return se(Array.from(be(t)))}function K0(){return Jt(function(t,e){be(t).getRandomValues(be(e))},arguments)}function X0(t,e){return se(be(t)[e>>>0])}function Z0(){return Jt(function(t,e){return se(Reflect.get(be(t),be(e)))},arguments)}function Q0(t,e){return be(t)[e>>>0]}function eb(t,e){return se(be(t)[be(e)])}function tb(){return Jt(function(){return se(globalThis.globalThis)},arguments)}function nb(){return Jt(function(){return se(global.global)},arguments)}function ob(t){let e;try{e=be(t)instanceof ArrayBuffer}catch{e=!1}return e}function rb(t){let e;try{e=be(t)instanceof Map}catch{e=!1}return e}function sb(t){let e;try{e=be(t)instanceof Object}catch{e=!1}return e}function ib(t){let e;try{e=be(t)instanceof Uint8Array}catch{e=!1}return e}function ab(t){return Array.isArray(be(t))}function lb(t){return Number.isSafeInteger(be(t))}function cb(){return se(Symbol.iterator)}function db(t){return be(t).length}function ub(t){return be(t).length}function hb(t,e,n,o,r,s,i,a){let l,c;try{l=t,c=e,console.log(Tt(t,e),Tt(n,o),Tt(r,s),Tt(i,a))}finally{w.__wbindgen_export_3(l,c,1)}}function fb(t,e){console.log(Tt(t,e))}function mb(t,e){let n,o;try{n=t,o=e,console.log(Tt(t,e))}finally{w.__wbindgen_export_3(n,o,1)}}function pb(t){return se(Ti.__wrap(t))}function gb(t){return se(Mi.__wrap(t))}function _b(t){return se(Xo.__wrap(t))}function bb(t){return se(Oi.__wrap(t))}function yb(t){return se(Zo.__wrap(t))}function xb(t){return se(Di.__wrap(t))}function wb(t){return se(io.__wrap(t))}function vb(t,e){performance.mark(Tt(t,e))}function kb(){return Jt(function(t,e,n,o){let r,s,i,a;try{r=t,s=e,i=n,a=o,performance.measure(Tt(t,e),Tt(n,o))}finally{w.__wbindgen_export_3(r,s,1),w.__wbindgen_export_3(i,a,1)}},arguments)}function Sb(t){return se(be(t).msCrypto)}function Cb(){return se(new Map)}function Nb(t){return se(new Uint8Array(be(t)))}function jb(){return se(new Object)}function Eb(){return se(new Error)}function Ib(){return se(new Array)}function Ab(t,e){return se(new Function(Tt(t,e)))}function Tb(t,e,n){return se(new Uint8Array(be(t),e>>>0,n>>>0))}function Mb(t){return se(new Uint8Array(t>>>0))}function Ob(t){return se(new Array(t>>>0))}function Db(t){return se(be(t).next)}function Rb(){return Jt(function(t){return se(be(t).next())},arguments)}function Pb(t){return se(be(t).node)}function Lb(){return Date.now()}function Fb(){return Jt(function(t){return se(Reflect.ownKeys(be(t)))},arguments)}function zb(t){return se(be(t).process)}function Bb(t,e){return be(t).push(be(e))}function Ub(){return Jt(function(t,e){be(t).randomFillSync(W(e))},arguments)}function Vb(){return Jt(function(){return se(module.require)},arguments)}function Hb(t){return se(Promise.resolve(be(t)))}function $b(){return Jt(function(){return se(self.self)},arguments)}function Wb(){return Jt(function(t,e,n){return Reflect.set(be(t),be(e),be(n))},arguments)}function qb(t,e,n){return se(be(t).set(be(e),be(n)))}function Gb(t,e,n){be(t)[W(e)]=W(n)}function Yb(t,e,n){be(t).set(be(e),n>>>0)}function Jb(t,e,n){be(t)[e>>>0]=W(n)}function Kb(t,e,n){be(t)[e>>>0]=n}function Xb(t,e){const n=ft(be(e).stack,w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye;P().setInt32(t+4,o,!0),P().setInt32(t+0,n,!0)}function Zb(t,e,n){return se(be(t).subarray(e>>>0,n>>>0))}function Qb(t,e){return se(be(t).then(be(e)))}function ey(t){return se(be(t).value)}function ty(t){return se(be(t).versions)}function ny(t){return se(Fn.__wrap(t))}function oy(){return Jt(function(){return se(window.window)},arguments)}function ry(t){return+be(t)}function sy(t){return se(t)}function iy(t){return se(BigInt.asUintN(64,t))}function ay(t,e){const n=be(e),o=typeof n=="bigint"?n:void 0;P().setBigInt64(t+8,Pn(o)?BigInt(0):o,!0),P().setInt32(t+0,!Pn(o),!0)}function ly(t){const e=be(t);return typeof e=="boolean"?e?1:0:2}function cy(t){const e=W(t).original;return e.cnt--==1?(e.a=0,!0):!1}function dy(t,e,n){return se(N0(t,e,10,T5))}function uy(t,e,n){return se(N0(t,e,8,M5))}function hy(t,e){const n=ft(ku(be(e)),w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye;P().setInt32(t+4,o,!0),P().setInt32(t+0,n,!0)}function fy(t,e){return se(new Error(Tt(t,e)))}function my(t,e){return be(t)in be(e)}function py(t){return Array.isArray(be(t))}function gy(t){return typeof be(t)=="bigint"}function _y(t){return!be(t)}function by(t){return typeof be(t)=="function"}function yy(t){return be(t)===null}function xy(t){const e=be(t);return typeof e=="object"&&e!==null}function wy(t){return typeof be(t)=="string"}function vy(t){return be(t)===void 0}function ky(t,e){return be(t)===be(e)}function Sy(t,e){return be(t)==be(e)}function Cy(){return se(w.memory)}function Ny(t,e){const n=be(e),o=typeof n=="number"?n:void 0;P().setFloat64(t+8,Pn(o)?0:o,!0),P().setInt32(t+0,!Pn(o),!0)}function jy(t){return se(t)}function Ey(t){return se(be(t))}function Iy(t){W(t)}function Ay(t){throw W(t)}function Ty(t,e){const n=be(e),o=typeof n=="string"?n:void 0;var r=Pn(o)?0:ft(o,w.__wbindgen_export_0,w.__wbindgen_export_1),s=Ye;P().setInt32(t+4,s,!0),P().setInt32(t+0,r,!0)}function My(t,e){return se(Tt(t,e))}function Oy(t,e){throw new Error(Tt(t,e))}function Dy(t){return se(typeof be(t))}const O5=Object.freeze(Object.defineProperty({__proto__:null,AwarenessWasm:E0,ChangeModifier:Qr,Cursor:Xn,EphemeralStoreWasm:class{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,T0.unregister(this),t}free(){const t=this.__destroy_into_raw();w.__wbg_ephemeralstorewasm_free(t,0)}constructor(t){const e=w.ephemeralstorewasm_new(t);return this.__wbg_ptr=e>>>0,T0.register(this,this.__wbg_ptr,this),this}set(t,e){const n=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),o=Ye;w.ephemeralstorewasm_set(this.__wbg_ptr,n,o,se(e))}delete(t){const e=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),n=Ye;w.ephemeralstorewasm_delete(this.__wbg_ptr,e,n)}get(t){const e=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),n=Ye;return W(w.ephemeralstorewasm_get(this.__wbg_ptr,e,n))}getAllStates(){return W(w.ephemeralstorewasm_getAllStates(this.__wbg_ptr))}subscribeLocalUpdates(t){return W(w.ephemeralstorewasm_subscribeLocalUpdates(this.__wbg_ptr,se(t)))}subscribe(t){return W(w.ephemeralstorewasm_subscribe(this.__wbg_ptr,se(t)))}encode(t){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),i=Ye;w.ephemeralstorewasm_encode(r,this.__wbg_ptr,s,i);var e=P().getInt32(r+0,!0),n=P().getInt32(r+4,!0),o=so(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),o}finally{w.__wbindgen_add_to_stack_pointer(16)}}encodeAll(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.ephemeralstorewasm_encodeAll(o,this.__wbg_ptr);var t=P().getInt32(o+0,!0),e=P().getInt32(o+4,!0),n=so(t,e).slice();return w.__wbindgen_export_3(t,1*e,1),n}finally{w.__wbindgen_add_to_stack_pointer(16)}}apply(t){const e=Ko(t,w.__wbindgen_export_0),n=Ye;w.ephemeralstorewasm_apply(this.__wbg_ptr,e,n)}removeOutdated(){w.ephemeralstorewasm_removeOutdated(this.__wbg_ptr)}isEmpty(){return w.ephemeralstorewasm_isEmpty(this.__wbg_ptr)!==0}keys(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.ephemeralstorewasm_keys(o,this.__wbg_ptr);var t=P().getInt32(o+0,!0),e=P().getInt32(o+4,!0),n=Ln(t,e).slice();return w.__wbindgen_export_3(t,4*e,4),n}finally{w.__wbindgen_add_to_stack_pointer(16)}}},LORO_VERSION:function(){let t,e;try{const r=w.__wbindgen_add_to_stack_pointer(-16);w.LORO_VERSION(r);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);return t=n,e=o,Tt(n,o)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_export_3(t,e,1)}},LoroCounter:Ti,LoroDoc:yo,LoroList:Mi,LoroMap:Xo,LoroMovableList:Oi,LoroText:Zo,LoroTree:Di,LoroTreeNode:io,UndoManager:class{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,O0.unregister(this),t}free(){const t=this.__destroy_into_raw();w.__wbg_undomanager_free(t,0)}constructor(t,e){Zr(t,yo);const n=w.undomanager_new(t.__wbg_ptr,se(e));return this.__wbg_ptr=n>>>0,O0.register(this,this.__wbg_ptr,this),this}undo(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.undomanager_undo(n,this.__wbg_ptr);var t=P().getInt32(n+0,!0),e=P().getInt32(n+4,!0);if(P().getInt32(n+8,!0))throw W(e);return t!==0}finally{w.__wbindgen_add_to_stack_pointer(16)}}redo(){try{const n=w.__wbindgen_add_to_stack_pointer(-16);w.undomanager_redo(n,this.__wbg_ptr);var t=P().getInt32(n+0,!0),e=P().getInt32(n+4,!0);if(P().getInt32(n+8,!0))throw W(e);return t!==0}finally{w.__wbindgen_add_to_stack_pointer(16)}}canUndo(){return w.undomanager_canUndo(this.__wbg_ptr)!==0}canRedo(){return w.undomanager_canRedo(this.__wbg_ptr)!==0}setMaxUndoSteps(t){w.undomanager_setMaxUndoSteps(this.__wbg_ptr,t)}setMergeInterval(t){w.undomanager_setMergeInterval(this.__wbg_ptr,t)}addExcludeOriginPrefix(t){const e=ft(t,w.__wbindgen_export_0,w.__wbindgen_export_1),n=Ye;w.undomanager_addExcludeOriginPrefix(this.__wbg_ptr,e,n)}setOnPush(t){w.undomanager_setOnPush(this.__wbg_ptr,se(t))}setOnPop(t){w.undomanager_setOnPop(this.__wbg_ptr,se(t))}clear(){w.undomanager_clear(this.__wbg_ptr)}},VersionVector:Fn,__wbg_String_8f0eb39a4a4c2f66:D0,__wbg_apply_9bb7fe8fff013a3f:R0,__wbg_buffer_ef9774282e5dab94:P0,__wbg_call_0ad083564791763a:L0,__wbg_call_a34b6b4765f27be0:F0,__wbg_call_d00953b926be4879:z0,__wbg_call_efe5a4db7065d1a2:B0,__wbg_changemodifier_new:U0,__wbg_crypto_ed58b8e10a292839:V0,__wbg_cursor_new:H0,__wbg_done_f4c254830a095eaf:$0,__wbg_entries_4dce6361e3ba6fbc:W0,__wbg_entries_83beb641792ccb9c:q0,__wbg_error_7534b8e9a36f1ab4:G0,__wbg_error_9912f7d6d7835a4b:Y0,__wbg_from_3aa0fcaa8eef0104:J0,__wbg_getRandomValues_bcb4912f16000dc4:K0,__wbg_get_0c3cc364764a0b98:X0,__wbg_get_b996a12be035ef4f:Z0,__wbg_getindex_a471648b3037c750:Q0,__wbg_getwithrefkey_1dc361bd10053bfe:eb,__wbg_globalThis_6b4d52a0b6aaeaea:tb,__wbg_global_49324ce12193de77:nb,__wbg_instanceof_ArrayBuffer_ff40e55b5978e215:ob,__wbg_instanceof_Map_0f3f3653f757ced1:rb,__wbg_instanceof_Object_9108547bac1f91b1:sb,__wbg_instanceof_Uint8Array_db97368f94b1373f:ib,__wbg_isArray_8738f1062fa88586:ab,__wbg_isSafeInteger_a1b3e0811faecf2f:lb,__wbg_iterator_c0c688f37fa815e6:cb,__wbg_length_12246a78d2f65d3a:db,__wbg_length_c24da17096edfe57:ub,__wbg_log_0cc1b7768397bcfe:hb,__wbg_log_0fd6c49475c7bece:fb,__wbg_log_cb9e190acc5753fb:mb,__wbg_lorocounter_new:pb,__wbg_lorolist_new:gb,__wbg_loromap_new:_b,__wbg_loromovablelist_new:bb,__wbg_lorotext_new:yb,__wbg_lorotree_new:xb,__wbg_lorotreenode_new:wb,__wbg_mark_7438147ce31e9d4b:vb,__wbg_measure_fb7825c11612c823:kb,__wbg_msCrypto_0a36e2ec3a343d26:Sb,__wbg_new_518e2184725aa711:Cb,__wbg_new_59845962d1127937:Nb,__wbg_new_67abf4a77618ee3e:jb,__wbg_new_8a6f238a6ece86ea:Eb,__wbg_new_e2d07398d7689006:Ib,__wbg_newnoargs_a136448eeb7d48ac:Ab,__wbg_newwithbyteoffsetandlength_84908302a4c137cf:Tb,__wbg_newwithlength_4c216eaaf23f2f9a:Mb,__wbg_newwithlength_88b49de1eb24d63e:Ob,__wbg_next_928df8c15fc0c9b0:Db,__wbg_next_9dc0926f351c7090:Rb,__wbg_node_02999533c4ea02e3:Pb,__wbg_now_3e8577e703add0ba:Lb,__wbg_ownKeys_b16312a839a4152c:Fb,__wbg_process_5c1d670bc53614b8:zb,__wbg_push_e7d7247e69dad3ee:Bb,__wbg_randomFillSync_ab2cfe79ebbf2740:Ub,__wbg_require_79b1e9274cde3c87:Vb,__wbg_resolve_267ff08e7e1d2ce4:Hb,__wbg_self_cca3ca60d61220f4:$b,__wbg_set_1b50d2de855a9d50:Wb,__wbg_set_393f510a6b7e9da5:qb,__wbg_set_3f1d0b984ed272ed:Gb,__wbg_set_5deee49b10b2b780:Yb,__wbg_set_93ba9407b5476ec6:Jb,__wbg_set_wasm:vu,__wbg_setindex_e0b7b31bfc87ba3f:Kb,__wbg_stack_0ed75d68575b0f3c:Xb,__wbg_subarray_2dc34705c0dc7cdb:Zb,__wbg_then_84907e7a6730461e:Qb,__wbg_value_51f8a88d4a1805fb:ey,__wbg_versions_c71aa1626a93e0a1:ty,__wbg_versionvector_new:ny,__wbg_window_2aba046d3fc4ad7c:oy,__wbindgen_as_number:ry,__wbindgen_bigint_from_i64:sy,__wbindgen_bigint_from_u64:iy,__wbindgen_bigint_get_as_i64:ay,__wbindgen_boolean_get:ly,__wbindgen_cb_drop:cy,__wbindgen_closure_wrapper483:dy,__wbindgen_closure_wrapper486:uy,__wbindgen_debug_string:hy,__wbindgen_error_new:fy,__wbindgen_in:my,__wbindgen_is_array:py,__wbindgen_is_bigint:gy,__wbindgen_is_falsy:_y,__wbindgen_is_function:by,__wbindgen_is_null:yy,__wbindgen_is_object:xy,__wbindgen_is_string:wy,__wbindgen_is_undefined:vy,__wbindgen_jsval_eq:ky,__wbindgen_jsval_loose_eq:Sy,__wbindgen_memory:Cy,__wbindgen_number_get:Ny,__wbindgen_number_new:jy,__wbindgen_object_clone_ref:Ey,__wbindgen_object_drop_ref:Iy,__wbindgen_rethrow:Ay,__wbindgen_string_get:Ty,__wbindgen_string_new:My,__wbindgen_throw:Oy,__wbindgen_typeof:Dy,decodeFrontiers:function(t){try{const o=w.__wbindgen_add_to_stack_pointer(-16),r=Ko(t,w.__wbindgen_export_0),s=Ye;w.decodeFrontiers(o,r,s);var e=P().getInt32(o+0,!0),n=P().getInt32(o+4,!0);if(P().getInt32(o+8,!0))throw W(n);return W(e)}finally{w.__wbindgen_add_to_stack_pointer(16)}},decodeImportBlobMeta:function(t,e){try{const r=w.__wbindgen_add_to_stack_pointer(-16),s=Ko(t,w.__wbindgen_export_0),i=Ye;w.decodeImportBlobMeta(r,s,i,e);var n=P().getInt32(r+0,!0),o=P().getInt32(r+4,!0);if(P().getInt32(r+8,!0))throw W(o);return W(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}},encodeFrontiers:function(t){try{const s=w.__wbindgen_add_to_stack_pointer(-16),i=vn(t,w.__wbindgen_export_0),a=Ye;w.encodeFrontiers(s,i,a);var e=P().getInt32(s+0,!0),n=P().getInt32(s+4,!0),o=P().getInt32(s+8,!0);if(P().getInt32(s+12,!0))throw W(o);var r=so(e,n).slice();return w.__wbindgen_export_3(e,1*n,1),r}finally{w.__wbindgen_add_to_stack_pointer(16)}},run:function(){w.run()},setDebug:function(){w.setDebug()}},Symbol.toStringTag,{value:"Module"}));URL=globalThis.URL;const U=await(async(t={},e)=>{let n;if(e.startsWith("data:")){const o=e.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(o,"base64");else{if(typeof atob!="function")throw new Error("Cannot decode base64-encoded data URL");{const s=atob(o);r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i)}}n=await WebAssembly.instantiate(r,t)}else{const o=await fetch(e),r=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(o,t);else{const s=await o.arrayBuffer();n=await WebAssembly.instantiate(s,t)}}return n.instance.exports})({"./loro_wasm_bg.js":{__wbindgen_object_drop_ref:Iy,__wbg_lorotree_new:xb,__wbg_lorocounter_new:pb,__wbg_loromovablelist_new:bb,__wbg_lorotreenode_new:wb,__wbg_cursor_new:H0,__wbg_lorolist_new:gb,__wbg_lorotext_new:yb,__wbg_loromap_new:_b,__wbg_versionvector_new:ny,__wbg_changemodifier_new:U0,__wbindgen_is_function:by,__wbindgen_string_new:My,__wbindgen_boolean_get:ly,__wbindgen_error_new:fy,__wbindgen_object_clone_ref:Ey,__wbindgen_string_get:Ty,__wbindgen_is_undefined:vy,__wbindgen_in:my,__wbindgen_is_bigint:gy,__wbindgen_number_get:Ny,__wbindgen_bigint_from_i64:sy,__wbindgen_jsval_eq:ky,__wbindgen_is_object:xy,__wbindgen_bigint_from_u64:iy,__wbindgen_cb_drop:cy,__wbindgen_as_number:ry,__wbindgen_is_string:wy,__wbindgen_is_null:yy,__wbindgen_number_new:jy,__wbindgen_is_array:py,__wbindgen_typeof:Dy,__wbg_error_9912f7d6d7835a4b:Y0,__wbg_log_0fd6c49475c7bece:fb,__wbindgen_is_falsy:_y,__wbindgen_jsval_loose_eq:Sy,__wbg_String_8f0eb39a4a4c2f66:D0,__wbg_getwithrefkey_1dc361bd10053bfe:eb,__wbg_set_3f1d0b984ed272ed:Gb,__wbg_log_cb9e190acc5753fb:mb,__wbg_log_0cc1b7768397bcfe:hb,__wbg_mark_7438147ce31e9d4b:vb,__wbg_measure_fb7825c11612c823:kb,__wbg_new_8a6f238a6ece86ea:Eb,__wbg_stack_0ed75d68575b0f3c:Xb,__wbg_error_7534b8e9a36f1ab4:G0,__wbg_now_3e8577e703add0ba:Lb,__wbg_crypto_ed58b8e10a292839:V0,__wbg_process_5c1d670bc53614b8:zb,__wbg_versions_c71aa1626a93e0a1:ty,__wbg_node_02999533c4ea02e3:Pb,__wbg_require_79b1e9274cde3c87:Vb,__wbg_msCrypto_0a36e2ec3a343d26:Sb,__wbg_randomFillSync_ab2cfe79ebbf2740:Ub,__wbg_getRandomValues_bcb4912f16000dc4:K0,__wbg_self_cca3ca60d61220f4:$b,__wbg_window_2aba046d3fc4ad7c:oy,__wbg_globalThis_6b4d52a0b6aaeaea:tb,__wbg_global_49324ce12193de77:nb,__wbg_newnoargs_a136448eeb7d48ac:Ab,__wbg_call_0ad083564791763a:L0,__wbg_get_0c3cc364764a0b98:X0,__wbg_length_12246a78d2f65d3a:db,__wbg_new_e2d07398d7689006:Ib,__wbg_new_518e2184725aa711:Cb,__wbg_next_928df8c15fc0c9b0:Db,__wbg_next_9dc0926f351c7090:Rb,__wbg_done_f4c254830a095eaf:$0,__wbg_value_51f8a88d4a1805fb:ey,__wbg_iterator_c0c688f37fa815e6:cb,__wbg_get_b996a12be035ef4f:Z0,__wbg_new_67abf4a77618ee3e:jb,__wbg_newwithlength_88b49de1eb24d63e:Ob,__wbg_set_93ba9407b5476ec6:Jb,__wbg_from_3aa0fcaa8eef0104:J0,__wbg_isArray_8738f1062fa88586:ab,__wbg_push_e7d7247e69dad3ee:Bb,__wbg_instanceof_ArrayBuffer_ff40e55b5978e215:ob,__wbg_call_a34b6b4765f27be0:F0,__wbg_call_efe5a4db7065d1a2:B0,__wbg_call_d00953b926be4879:z0,__wbg_instanceof_Map_0f3f3653f757ced1:rb,__wbg_set_393f510a6b7e9da5:qb,__wbg_entries_4dce6361e3ba6fbc:W0,__wbg_isSafeInteger_a1b3e0811faecf2f:lb,__wbg_instanceof_Object_9108547bac1f91b1:sb,__wbg_entries_83beb641792ccb9c:q0,__wbg_apply_9bb7fe8fff013a3f:R0,__wbg_ownKeys_b16312a839a4152c:Fb,__wbg_set_1b50d2de855a9d50:Wb,__wbg_buffer_ef9774282e5dab94:P0,__wbg_resolve_267ff08e7e1d2ce4:Hb,__wbg_then_84907e7a6730461e:Qb,__wbg_newwithbyteoffsetandlength_84908302a4c137cf:Tb,__wbg_new_59845962d1127937:Nb,__wbg_set_5deee49b10b2b780:Yb,__wbg_length_c24da17096edfe57:ub,__wbg_instanceof_Uint8Array_db97368f94b1373f:ib,__wbg_newwithlength_4c216eaaf23f2f9a:Mb,__wbg_subarray_2dc34705c0dc7cdb:Zb,__wbg_getindex_a471648b3037c750:Q0,__wbg_setindex_e0b7b31bfc87ba3f:Kb,__wbindgen_bigint_get_as_i64:ay,__wbindgen_debug_string:hy,__wbindgen_throw:Oy,__wbindgen_rethrow:Ay,__wbindgen_memory:Cy,__wbindgen_closure_wrapper483:dy,__wbindgen_closure_wrapper486:uy}},I5),D5=U.memory,R5=U.__wbg_lorocounter_free,P5=U.lorocounter_new,L5=U.lorocounter_kind,F5=U.lorocounter_id,z5=U.lorocounter_increment,B5=U.lorocounter_decrement,U5=U.lorocounter_value,V5=U.lorocounter_subscribe,H5=U.lorocounter_parent,$5=U.lorocounter_isAttached,W5=U.lorocounter_getAttached,q5=U.lorocounter_getShallowValue,G5=U.__wbg_awarenesswasm_free,Y5=U.awarenesswasm_new,J5=U.awarenesswasm_encode,K5=U.awarenesswasm_encodeAll,X5=U.awarenesswasm_apply,Z5=U.awarenesswasm_setLocalState,Q5=U.awarenesswasm_peer,e6=U.awarenesswasm_getAllStates,t6=U.awarenesswasm_getState,n6=U.awarenesswasm_getTimestamp,o6=U.awarenesswasm_removeOutdated,r6=U.awarenesswasm_length,s6=U.awarenesswasm_isEmpty,i6=U.awarenesswasm_peers,a6=U.__wbg_ephemeralstorewasm_free,l6=U.ephemeralstorewasm_new,c6=U.ephemeralstorewasm_set,d6=U.ephemeralstorewasm_delete,u6=U.ephemeralstorewasm_get,h6=U.ephemeralstorewasm_getAllStates,f6=U.ephemeralstorewasm_subscribeLocalUpdates,m6=U.ephemeralstorewasm_subscribe,p6=U.ephemeralstorewasm_encode,g6=U.ephemeralstorewasm_encodeAll,_6=U.ephemeralstorewasm_apply,b6=U.ephemeralstorewasm_removeOutdated,y6=U.ephemeralstorewasm_isEmpty,x6=U.ephemeralstorewasm_keys,w6=U.LORO_VERSION,v6=U.run,k6=U.encodeFrontiers,S6=U.decodeFrontiers,C6=U.setDebug,N6=U.__wbg_lorodoc_free,j6=U.lorodoc_new,E6=U.lorodoc_setDetachedEditing,I6=U.lorodoc_isDetachedEditingEnabled,A6=U.lorodoc_setRecordTimestamp,T6=U.lorodoc_setChangeMergeInterval,M6=U.lorodoc_configTextStyle,O6=U.lorodoc_configDefaultTextStyle,D6=U.lorodoc_fromSnapshot,R6=U.lorodoc_attach,P6=U.lorodoc_isDetached,L6=U.lorodoc_detach,F6=U.lorodoc_fork,z6=U.lorodoc_forkAt,B6=U.lorodoc_checkoutToLatest,U6=U.lorodoc_travelChangeAncestors,V6=U.lorodoc_findIdSpansBetween,H6=U.lorodoc_checkout,$6=U.lorodoc_peerId,W6=U.lorodoc_peerIdStr,q6=U.lorodoc_setPeerId,G6=U.lorodoc_commit,Y6=U.lorodoc_getPendingTxnLength,J6=U.lorodoc_getText,K6=U.lorodoc_getMap,X6=U.lorodoc_getList,Z6=U.lorodoc_getMovableList,Q6=U.lorodoc_getCounter,eI=U.lorodoc_getTree,tI=U.lorodoc_hasContainer,nI=U.lorodoc_getContainerById,oI=U.lorodoc_setNextCommitMessage,rI=U.lorodoc_setNextCommitOrigin,sI=U.lorodoc_setNextCommitTimestamp,iI=U.lorodoc_setNextCommitOptions,aI=U.lorodoc_clearNextCommitOptions,lI=U.lorodoc_getDeepValueWithID,cI=U.lorodoc_getPathToContainer,dI=U.lorodoc_JSONPath,uI=U.lorodoc_version,hI=U.lorodoc_shallowSinceVV,fI=U.lorodoc_isShallow,mI=U.lorodoc_shallowSinceFrontiers,pI=U.lorodoc_oplogVersion,gI=U.lorodoc_frontiers,_I=U.lorodoc_oplogFrontiers,bI=U.lorodoc_cmpWithFrontiers,yI=U.lorodoc_cmpFrontiers,xI=U.lorodoc_exportSnapshot,wI=U.lorodoc_exportFrom,vI=U.lorodoc_export,kI=U.lorodoc_exportJsonUpdates,SI=U.lorodoc_exportJsonInIdSpan,CI=U.lorodoc_importJsonUpdates,NI=U.lorodoc_import,jI=U.lorodoc_importBatch,EI=U.lorodoc_getShallowValue,II=U.lorodoc_toJSON,AI=U.lorodoc_subscribe,TI=U.lorodoc_subscribeLocalUpdates,MI=U.lorodoc_debugHistory,OI=U.lorodoc_changeCount,DI=U.lorodoc_opCount,RI=U.lorodoc_getAllChanges,PI=U.lorodoc_getChangeAt,LI=U.lorodoc_getChangeAtLamport,FI=U.lorodoc_getOpsInChange,zI=U.lorodoc_frontiersToVV,BI=U.lorodoc_vvToFrontiers,UI=U.lorodoc_getByPath,VI=U.lorodoc_getCursorPos,HI=U.lorodoc_getChangedContainersIn,$I=U.lorodoc_revertTo,WI=U.lorodoc_applyDiff,qI=U.lorodoc_diff,GI=U.lorodoc_getUncommittedOpsAsJson,YI=U.lorodoc_subscribeFirstCommitFromPeer,JI=U.lorodoc_subscribePreCommit,KI=U.lorodoc_deleteRootContainer,XI=U.lorodoc_setHideEmptyRootContainers,ZI=U.__wbg_lorotext_free,QI=U.lorotext_new,e8=U.lorotext_kind,t8=U.lorotext_iter,n8=U.lorotext_update,o8=U.lorotext_updateByLine,r8=U.lorotext_insert,s8=U.lorotext_slice,i8=U.lorotext_charAt,a8=U.lorotext_splice,l8=U.lorotext_insertUtf8,c8=U.lorotext_delete,d8=U.lorotext_deleteUtf8,u8=U.lorotext_mark,h8=U.lorotext_unmark,f8=U.lorotext_toString,m8=U.lorotext_toDelta,p8=U.lorotext_id,g8=U.lorotext_length,_8=U.lorotext_subscribe,b8=U.lorotext_applyDelta,y8=U.lorotext_parent,x8=U.lorotext_isAttached,w8=U.lorotext_getAttached,v8=U.lorotext_getCursor,k8=U.lorotext_push,S8=U.lorotext_getEditorOf,C8=U.lorotext_isDeleted,N8=U.lorotext_getShallowValue,j8=U.lorotext_toJSON,E8=U.__wbg_loromap_free,I8=U.loromap_new,A8=U.loromap_kind,T8=U.loromap_set,M8=U.loromap_delete,O8=U.loromap_get,D8=U.loromap_getOrCreateContainer,R8=U.loromap_keys,P8=U.loromap_values,L8=U.loromap_entries,F8=U.loromap_id,z8=U.loromap_toJSON,B8=U.loromap_setContainer,U8=U.loromap_subscribe,V8=U.loromap_size,H8=U.loromap_parent,$8=U.loromap_isAttached,W8=U.loromap_getAttached,q8=U.loromap_clear,G8=U.loromap_getLastEditor,Y8=U.loromap_isDeleted,J8=U.loromap_getShallowValue,K8=U.__wbg_lorolist_free,X8=U.lorolist_new,Z8=U.lorolist_kind,Q8=U.lorolist_insert,eA=U.lorolist_delete,tA=U.lorolist_get,nA=U.lorolist_id,oA=U.lorolist_toArray,rA=U.lorolist_toJSON,sA=U.lorolist_insertContainer,iA=U.lorolist_pushContainer,aA=U.lorolist_subscribe,lA=U.lorolist_length,cA=U.lorolist_parent,dA=U.lorolist_isAttached,uA=U.lorolist_getAttached,hA=U.lorolist_getCursor,fA=U.lorolist_push,mA=U.lorolist_pop,pA=U.lorolist_clear,gA=U.lorolist_getIdAt,_A=U.lorolist_isDeleted,bA=U.lorolist_getShallowValue,yA=U.loromovablelist_new,xA=U.loromovablelist_kind,wA=U.loromovablelist_insert,vA=U.loromovablelist_delete,kA=U.loromovablelist_get,SA=U.loromovablelist_id,CA=U.loromovablelist_toArray,NA=U.loromovablelist_toJSON,jA=U.loromovablelist_insertContainer,EA=U.loromovablelist_pushContainer,IA=U.loromovablelist_subscribe,AA=U.loromovablelist_length,TA=U.loromovablelist_parent,MA=U.loromovablelist_isAttached,OA=U.loromovablelist_getAttached,DA=U.loromovablelist_getCursor,RA=U.loromovablelist_move,PA=U.loromovablelist_set,LA=U.loromovablelist_setContainer,FA=U.loromovablelist_push,zA=U.loromovablelist_pop,BA=U.loromovablelist_clear,UA=U.loromovablelist_getCreatorAt,VA=U.loromovablelist_getLastMoverAt,HA=U.loromovablelist_getLastEditorAt,$A=U.loromovablelist_isDeleted,WA=U.loromovablelist_getShallowValue,qA=U.__wbg_lorotree_free,GA=U.lorotreenode___getClassname,YA=U.__wbg_lorotreenode_free,JA=U.lorotreenode_id,KA=U.lorotreenode_createNode,XA=U.lorotreenode_move,ZA=U.lorotreenode_moveAfter,QA=U.lorotreenode_moveBefore,eT=U.lorotreenode_index,tT=U.lorotreenode_fractionalIndex,nT=U.lorotreenode_data,oT=U.lorotreenode_toJSON,rT=U.lorotreenode_parent,sT=U.lorotreenode_children,iT=U.lorotreenode_isDeleted,aT=U.lorotreenode_getLastMoveId,lT=U.lorotreenode_creationId,cT=U.lorotreenode_creator,dT=U.lorotree_new,uT=U.lorotree_kind,hT=U.lorotree_createNode,fT=U.lorotree_move,mT=U.lorotree_delete,pT=U.lorotree_getNodeByID,gT=U.lorotree_id,_T=U.lorotree_has,bT=U.lorotree_isNodeDeleted,yT=U.lorotree_toArray,xT=U.lorotree_getNodes,wT=U.lorotree_toJSON,vT=U.lorotree_nodes,kT=U.lorotree_roots,ST=U.lorotree_subscribe,CT=U.lorotree_parent,NT=U.lorotree_isAttached,jT=U.lorotree_getAttached,ET=U.lorotree_enableFractionalIndex,IT=U.lorotree_disableFractionalIndex,AT=U.lorotree_isFractionalIndexEnabled,TT=U.lorotree_isDeleted,MT=U.lorotree_getShallowValue,OT=U.__wbg_cursor_free,DT=U.cursor_containerId,RT=U.cursor_pos,PT=U.cursor_side,LT=U.cursor_encode,FT=U.cursor_decode,zT=U.cursor_kind,BT=U.__wbg_undomanager_free,UT=U.undomanager_new,VT=U.undomanager_undo,HT=U.undomanager_redo,$T=U.undomanager_canUndo,WT=U.undomanager_canRedo,qT=U.undomanager_setMaxUndoSteps,GT=U.undomanager_setMergeInterval,YT=U.undomanager_addExcludeOriginPrefix,JT=U.undomanager_setOnPush,KT=U.undomanager_setOnPop,XT=U.undomanager_clear,ZT=U.__wbg_versionvector_free,QT=U.versionvector_new,e7=U.versionvector_parseJSON,t7=U.versionvector_toJSON,n7=U.versionvector_encode,o7=U.versionvector_decode,r7=U.versionvector_get,s7=U.versionvector_compare,i7=U.versionvector_setEnd,a7=U.versionvector_setLast,l7=U.versionvector_remove,c7=U.versionvector_length,d7=U.decodeImportBlobMeta,u7=U.__wbg_changemodifier_free,h7=U.changemodifier_setMessage,f7=U.changemodifier_setTimestamp,m7=U.lorodoc_importUpdateBatch,p7=U.__wbg_loromovablelist_free,g7=U.__wbindgen_export_0,_7=U.__wbindgen_export_1,b7=U.__wbindgen_export_2,y7=U.__wbindgen_export_3,x7=U.__wbindgen_export_4,w7=U.__wbindgen_add_to_stack_pointer,v7=U.__wbindgen_export_5,k7=U.__wbindgen_export_6,Mu=U.__wbindgen_start,Ry=Object.freeze(Object.defineProperty({__proto__:null,LORO_VERSION:w6,__wbg_awarenesswasm_free:G5,__wbg_changemodifier_free:u7,__wbg_cursor_free:OT,__wbg_ephemeralstorewasm_free:a6,__wbg_lorocounter_free:R5,__wbg_lorodoc_free:N6,__wbg_lorolist_free:K8,__wbg_loromap_free:E8,__wbg_loromovablelist_free:p7,__wbg_lorotext_free:ZI,__wbg_lorotree_free:qA,__wbg_lorotreenode_free:YA,__wbg_undomanager_free:BT,__wbg_versionvector_free:ZT,__wbindgen_add_to_stack_pointer:w7,__wbindgen_export_0:g7,__wbindgen_export_1:_7,__wbindgen_export_2:b7,__wbindgen_export_3:y7,__wbindgen_export_4:x7,__wbindgen_export_5:v7,__wbindgen_export_6:k7,__wbindgen_start:Mu,awarenesswasm_apply:X5,awarenesswasm_encode:J5,awarenesswasm_encodeAll:K5,awarenesswasm_getAllStates:e6,awarenesswasm_getState:t6,awarenesswasm_getTimestamp:n6,awarenesswasm_isEmpty:s6,awarenesswasm_length:r6,awarenesswasm_new:Y5,awarenesswasm_peer:Q5,awarenesswasm_peers:i6,awarenesswasm_removeOutdated:o6,awarenesswasm_setLocalState:Z5,changemodifier_setMessage:h7,changemodifier_setTimestamp:f7,cursor_containerId:DT,cursor_decode:FT,cursor_encode:LT,cursor_kind:zT,cursor_pos:RT,cursor_side:PT,decodeFrontiers:S6,decodeImportBlobMeta:d7,encodeFrontiers:k6,ephemeralstorewasm_apply:_6,ephemeralstorewasm_delete:d6,ephemeralstorewasm_encode:p6,ephemeralstorewasm_encodeAll:g6,ephemeralstorewasm_get:u6,ephemeralstorewasm_getAllStates:h6,ephemeralstorewasm_isEmpty:y6,ephemeralstorewasm_keys:x6,ephemeralstorewasm_new:l6,ephemeralstorewasm_removeOutdated:b6,ephemeralstorewasm_set:c6,ephemeralstorewasm_subscribe:m6,ephemeralstorewasm_subscribeLocalUpdates:f6,lorocounter_decrement:B5,lorocounter_getAttached:W5,lorocounter_getShallowValue:q5,lorocounter_id:F5,lorocounter_increment:z5,lorocounter_isAttached:$5,lorocounter_kind:L5,lorocounter_new:P5,lorocounter_parent:H5,lorocounter_subscribe:V5,lorocounter_value:U5,lorodoc_JSONPath:dI,lorodoc_applyDiff:WI,lorodoc_attach:R6,lorodoc_changeCount:OI,lorodoc_checkout:H6,lorodoc_checkoutToLatest:B6,lorodoc_clearNextCommitOptions:aI,lorodoc_cmpFrontiers:yI,lorodoc_cmpWithFrontiers:bI,lorodoc_commit:G6,lorodoc_configDefaultTextStyle:O6,lorodoc_configTextStyle:M6,lorodoc_debugHistory:MI,lorodoc_deleteRootContainer:KI,lorodoc_detach:L6,lorodoc_diff:qI,lorodoc_export:vI,lorodoc_exportFrom:wI,lorodoc_exportJsonInIdSpan:SI,lorodoc_exportJsonUpdates:kI,lorodoc_exportSnapshot:xI,lorodoc_findIdSpansBetween:V6,lorodoc_fork:F6,lorodoc_forkAt:z6,lorodoc_fromSnapshot:D6,lorodoc_frontiers:gI,lorodoc_frontiersToVV:zI,lorodoc_getAllChanges:RI,lorodoc_getByPath:UI,lorodoc_getChangeAt:PI,lorodoc_getChangeAtLamport:LI,lorodoc_getChangedContainersIn:HI,lorodoc_getContainerById:nI,lorodoc_getCounter:Q6,lorodoc_getCursorPos:VI,lorodoc_getDeepValueWithID:lI,lorodoc_getList:X6,lorodoc_getMap:K6,lorodoc_getMovableList:Z6,lorodoc_getOpsInChange:FI,lorodoc_getPathToContainer:cI,lorodoc_getPendingTxnLength:Y6,lorodoc_getShallowValue:EI,lorodoc_getText:J6,lorodoc_getTree:eI,lorodoc_getUncommittedOpsAsJson:GI,lorodoc_hasContainer:tI,lorodoc_import:NI,lorodoc_importBatch:jI,lorodoc_importJsonUpdates:CI,lorodoc_importUpdateBatch:m7,lorodoc_isDetached:P6,lorodoc_isDetachedEditingEnabled:I6,lorodoc_isShallow:fI,lorodoc_new:j6,lorodoc_opCount:DI,lorodoc_oplogFrontiers:_I,lorodoc_oplogVersion:pI,lorodoc_peerId:$6,lorodoc_peerIdStr:W6,lorodoc_revertTo:$I,lorodoc_setChangeMergeInterval:T6,lorodoc_setDetachedEditing:E6,lorodoc_setHideEmptyRootContainers:XI,lorodoc_setNextCommitMessage:oI,lorodoc_setNextCommitOptions:iI,lorodoc_setNextCommitOrigin:rI,lorodoc_setNextCommitTimestamp:sI,lorodoc_setPeerId:q6,lorodoc_setRecordTimestamp:A6,lorodoc_shallowSinceFrontiers:mI,lorodoc_shallowSinceVV:hI,lorodoc_subscribe:AI,lorodoc_subscribeFirstCommitFromPeer:YI,lorodoc_subscribeLocalUpdates:TI,lorodoc_subscribePreCommit:JI,lorodoc_toJSON:II,lorodoc_travelChangeAncestors:U6,lorodoc_version:uI,lorodoc_vvToFrontiers:BI,lorolist_clear:pA,lorolist_delete:eA,lorolist_get:tA,lorolist_getAttached:uA,lorolist_getCursor:hA,lorolist_getIdAt:gA,lorolist_getShallowValue:bA,lorolist_id:nA,lorolist_insert:Q8,lorolist_insertContainer:sA,lorolist_isAttached:dA,lorolist_isDeleted:_A,lorolist_kind:Z8,lorolist_length:lA,lorolist_new:X8,lorolist_parent:cA,lorolist_pop:mA,lorolist_push:fA,lorolist_pushContainer:iA,lorolist_subscribe:aA,lorolist_toArray:oA,lorolist_toJSON:rA,loromap_clear:q8,loromap_delete:M8,loromap_entries:L8,loromap_get:O8,loromap_getAttached:W8,loromap_getLastEditor:G8,loromap_getOrCreateContainer:D8,loromap_getShallowValue:J8,loromap_id:F8,loromap_isAttached:$8,loromap_isDeleted:Y8,loromap_keys:R8,loromap_kind:A8,loromap_new:I8,loromap_parent:H8,loromap_set:T8,loromap_setContainer:B8,loromap_size:V8,loromap_subscribe:U8,loromap_toJSON:z8,loromap_values:P8,loromovablelist_clear:BA,loromovablelist_delete:vA,loromovablelist_get:kA,loromovablelist_getAttached:OA,loromovablelist_getCreatorAt:UA,loromovablelist_getCursor:DA,loromovablelist_getLastEditorAt:HA,loromovablelist_getLastMoverAt:VA,loromovablelist_getShallowValue:WA,loromovablelist_id:SA,loromovablelist_insert:wA,loromovablelist_insertContainer:jA,loromovablelist_isAttached:MA,loromovablelist_isDeleted:$A,loromovablelist_kind:xA,loromovablelist_length:AA,loromovablelist_move:RA,loromovablelist_new:yA,loromovablelist_parent:TA,loromovablelist_pop:zA,loromovablelist_push:FA,loromovablelist_pushContainer:EA,loromovablelist_set:PA,loromovablelist_setContainer:LA,loromovablelist_subscribe:IA,loromovablelist_toArray:CA,loromovablelist_toJSON:NA,lorotext_applyDelta:b8,lorotext_charAt:i8,lorotext_delete:c8,lorotext_deleteUtf8:d8,lorotext_getAttached:w8,lorotext_getCursor:v8,lorotext_getEditorOf:S8,lorotext_getShallowValue:N8,lorotext_id:p8,lorotext_insert:r8,lorotext_insertUtf8:l8,lorotext_isAttached:x8,lorotext_isDeleted:C8,lorotext_iter:t8,lorotext_kind:e8,lorotext_length:g8,lorotext_mark:u8,lorotext_new:QI,lorotext_parent:y8,lorotext_push:k8,lorotext_slice:s8,lorotext_splice:a8,lorotext_subscribe:_8,lorotext_toDelta:m8,lorotext_toJSON:j8,lorotext_toString:f8,lorotext_unmark:h8,lorotext_update:n8,lorotext_updateByLine:o8,lorotree_createNode:hT,lorotree_delete:mT,lorotree_disableFractionalIndex:IT,lorotree_enableFractionalIndex:ET,lorotree_getAttached:jT,lorotree_getNodeByID:pT,lorotree_getNodes:xT,lorotree_getShallowValue:MT,lorotree_has:_T,lorotree_id:gT,lorotree_isAttached:NT,lorotree_isDeleted:TT,lorotree_isFractionalIndexEnabled:AT,lorotree_isNodeDeleted:bT,lorotree_kind:uT,lorotree_move:fT,lorotree_new:dT,lorotree_nodes:vT,lorotree_parent:CT,lorotree_roots:kT,lorotree_subscribe:ST,lorotree_toArray:yT,lorotree_toJSON:wT,lorotreenode___getClassname:GA,lorotreenode_children:sT,lorotreenode_createNode:KA,lorotreenode_creationId:lT,lorotreenode_creator:cT,lorotreenode_data:nT,lorotreenode_fractionalIndex:tT,lorotreenode_getLastMoveId:aT,lorotreenode_id:JA,lorotreenode_index:eT,lorotreenode_isDeleted:iT,lorotreenode_move:XA,lorotreenode_moveAfter:ZA,lorotreenode_moveBefore:QA,lorotreenode_parent:rT,lorotreenode_toJSON:oT,memory:D5,run:v6,setDebug:C6,undomanager_addExcludeOriginPrefix:YT,undomanager_canRedo:WT,undomanager_canUndo:$T,undomanager_clear:XT,undomanager_new:UT,undomanager_redo:HT,undomanager_setMaxUndoSteps:qT,undomanager_setMergeInterval:GT,undomanager_setOnPop:KT,undomanager_setOnPush:JT,undomanager_undo:VT,versionvector_compare:s7,versionvector_decode:o7,versionvector_encode:n7,versionvector_get:r7,versionvector_length:c7,versionvector_new:QT,versionvector_parseJSON:e7,versionvector_remove:l7,versionvector_setEnd:i7,versionvector_setLast:a7,versionvector_toJSON:t7},Symbol.toStringTag,{value:"Module"}));if(Mu)vu(Ry),Mu();else{const t=await zm(()=>Promise.resolve().then(()=>Ry),void 0,import.meta.url);vu(new WebAssembly.Instance(t.default,{"./loro_wasm_bg.js":O5}).exports)}const S7=["Map","Text","List","Tree","MovableList","Counter"];function Py(t){if(typeof t!="object"||t==null)return!1;const e=Object.getPrototypeOf(t);return e!=null&&typeof e=="object"&&typeof e.kind=="function"&&S7.includes(t.kind())}yo.prototype.toJsonWithReplacer=function(t){const e=new Set,n=this,o=(i,a)=>{if(typeof a=="string"&&a.startsWith("cid:")&&!e.has(a)){e.add(a);const c=n.getContainerById(a);if(c==null)throw new Error(`ContainerID not found: ${a}`);const d=t(i,c);if(d===c){const u=c.getShallowValue();return typeof u=="object"?r(u):u}if(Py(d))throw new Error("Using new container is not allowed in toJsonWithReplacer");return typeof d=="object"&&d!=null?r(d):d}if(typeof a=="object"&&a!=null)return r(a);const l=t(i,a);if(Py(l))throw new Error("Using new container is not allowed in toJsonWithReplacer");return l},r=i=>{if(Array.isArray(i))return i.map((l,c)=>o(c,l)).filter(l=>l!==void 0);const a={};for(const[l,c]of Object.entries(i)){const d=o(l,c);d!==void 0&&(a[l]=d)}return a},s=n.getShallowValue();return r(s)};const C7=st.baseTheme({".loro-cursor":{position:"absolute",width:"2px",display:"inline-block",height:"1.2em"},".loro-cursor::before":{position:"absolute",top:"1.3em",left:"0",content:"var(--rtc-name)",padding:"2px 6px",fontSize:"12px",borderRadius:"3px",whiteSpace:"nowrap",userSelect:"none",backgroundColor:"inherit",opacity:"0.7"},".loro-selection":{opacity:"0.5"}}),Ri=zt.define(),Ou=Mn.define({create:()=>({remoteCursors:new Map,isCheckout:!1}),update(t,e){for(const n of e.effects)if(n.is(Ri))switch(n.value.type){case"update":{const{peer:o,user:r,cursor:s}=n.value;t.remoteCursors.set(o,{uid:o,cursor:s,user:r});break}case"delete":t.remoteCursors.delete(n.value.peer);break;case"checkout":t.isCheckout=n.value.checkout}return t}}),Ly=t=>{const e=t.transactions.flatMap(n=>n.effects).filter(n=>n.is(Ri));return t.docChanged||t.viewportChanged||e.length>0};class Sl{constructor(e,n,o,r,s){this.left=e,this.top=n,this.height=o,this.name=r,this.colorClassName=s}draw(){const e=document.createElement("div");return this.adjust(e),e}update(e){return this.adjust(e),!0}adjust(e){e.style.left=`${this.left}px`,e.style.top=`${this.top}px`,e.style.height=`${this.height}px`,e.className=`loro-cursor ${this.colorClassName}`,e.style.setProperty("--rtc-name",`"${this.name}"`)}eq(e){return this.left===e.left&&this.top===e.top&&this.height===e.height&&this.name===e.name}static createCursor(e,n,o,r){const s=Sl.calculateAbsoluteCursorPosition(n,e);if(!s)return[];const i=e.scrollDOM.getBoundingClientRect(),a=(e.textDirection===DU.LTR?i.left:i.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,l=i.top-e.scrollDOM.scrollTop;return[new Sl(s.left-a,s.top-l,s.bottom-s.top,o,r)]}static calculateAbsoluteCursorPosition(e,n){const o=Math.max(0,Math.min(n.state.doc.length,e.anchor));return n.coordsAtPos(o,e.assoc||1)}}const N7=(t,e,n,o)=>{const r=[],{updated:s,added:i}=n;for(const a of[...s,...i]){const l=Fy(t,e,a,o);l&&r.push(l)}return r},Fy=(t,e,n,o)=>{const r=e.getAllStates()[n];if(!r||n===t.peerIdStr||r.scopeId!==o)return;if(r.type==="delete")return Ri.of({type:"delete",peer:r.uid,scopeId:r.scopeId});const s=Xn.decode(r.cursor.anchor),i=t.getCursorPos(s).offset;let a=i;if(r.cursor.head){const l=Xn.decode(r.cursor.head);a=t.getCursorPos(l).offset}return Ri.of({type:"update",peer:r.uid,scopeId:r.scopeId,cursor:{anchor:i,head:a},user:r.user})};class j7{constructor(e,n,o,r,s,i,a){this.view=e,this.doc=n,this.user=o,this.awareness=r,this.getTextFromDoc=s,this.scopeId=i,this.getUserId=a,this.sub=void 0,this.sub=this.doc.subscribe(l=>{if(l.by==="local"){const c=[];for(const d of this.awareness.peers()){const u=Fy(this.doc,this.awareness,d,this.scopeId);u&&c.push(u)}this.view.dispatch({effects:c})}else l.by==="checkout"&&this.view.dispatch({effects:[Ri.of({type:"checkout",checkout:this.doc.isDetached()})]})})}update(e){if(!e.selectionSet&&!e.focusChanged&&!e.docChanged)return;const n=e.state.selection.main;if(this.view.hasFocus&&!this.doc.isDetached()){const o=I7(this.doc,this.getTextFromDoc,n.anchor,n.head);this.awareness.setLocalState({type:"update",uid:this.getUserId?this.getUserId():this.doc.peerIdStr,scopeId:this.scopeId,cursor:o,user:this.user})}else this.awareness.setLocalState({type:"delete",uid:this.getUserId?this.getUserId():this.doc.peerIdStr,scopeId:this.scopeId})}destroy(){var e;(e=this.sub)==null||e.call(this),this.awareness.setLocalState({type:"delete",uid:this.getUserId?this.getUserId():this.doc.peerIdStr,scopeId:this.scopeId})}}class E7{constructor(e,n,o,r){this.view=e,this.doc=n,this.awareness=o,this.scopeId=r,this._awarenessListener=void 0;const s=async(i,a)=>{a!=="local"&&this.view.dispatch({effects:N7(this.doc,this.awareness,i,this.scopeId)})};this._awarenessListener=s,this.awareness.addListener(s)}destroy(){this._awarenessListener&&this.awareness.removeListener(this._awarenessListener)}}const I7=(t,e,n,o)=>{var i,a;n===o&&(o=void 0);const r=(i=e(t).getCursor(n))==null?void 0:i.encode();if(!r)throw new Error("cursor head not found");let s;return o!==void 0&&(s=(a=e(t).getCursor(o))==null?void 0:a.encode()),{anchor:r,head:s}},Cl=["bg-[var(--amber-6)]","bg-[var(--blue-6)]","bg-[var(--crimson-6)]","bg-[var(--cyan-6)]","bg-[var(--grass-6)]","bg-[var(--gray-6)]","bg-[var(--green-6)]","bg-[var(--lime-6)]","bg-[var(--orange-6)]","bg-[var(--purple-6)]","bg-[var(--red-6)]","bg-[var(--sage-6)]","bg-[var(--sky-6)]","bg-[var(--slate-6)]"],A7=(t,e,n)=>Tn.define(o=>new T7(o,t,e,n)),es=Pm.define();class T7{constructor(e,n,o,r){this.view=e,this.doc=n,this.docPath=o,this.getTextFromDoc=r,this.sub=void 0,this.isInitDispatch=!1,this.onRemoteUpdate=s=>{if(s.by!=="local")if(s.by!=="checkout"){if(s.by==="import"){const i=[];let a=0;for(const{diff:l,path:c}of s.events){if(c.join("/")!==this.docPath.join("/")||l.type!=="text")continue;const d=l.diff;for(const u of d)u.insert?i.push({from:a,to:a,insert:u.insert}):u.delete?(i.push({from:a,to:a+u.delete}),a+=u.delete):u.retain!=null&&(a+=u.retain);i.length>0&&this.view.dispatch({changes:i,annotations:[es.of(this)]})}}}else this.view.dispatch({changes:[{from:0,to:this.view.state.doc.length,insert:this.getTextFromDoc(this.doc).toString()}],annotations:[es.of(this)]})},this.sub=n.subscribe(this.onRemoteUpdate),Promise.resolve().then(()=>{this.isInitDispatch=!0;const s=this.view.state.doc.toString(),i=this.getTextFromDoc(this.doc);s!==i.toString()&&e.dispatch({changes:[{from:0,to:this.view.state.doc.length,insert:i.toString()}]})})}update(e){if(this.isInitDispatch)return void(this.isInitDispatch=!1);if(!e.docChanged||e.transactions.length>0&&(e.transactions[0].annotation(es)===this||e.transactions[0].annotation(es)==="undo"))return;let n=0;e.changes.iterChanges((o,r,s,i,a)=>{const l=a.sliceString(0,a.length,`
`);o!==r&&this.getTextFromDoc(this.doc).delete(o+n,r-o),l.length>0&&this.getTextFromDoc(this.doc).insert(o+n,l),n+=l.length-(r-o)}),this.doc.commit()}destroy(){var e;(e=this.sub)==null||e.call(this),this.sub=void 0}}const dn=Qt.get("rtc"),zy=dn.get("awareness").disabled(),Du="awareness:",ts=en(void 0),Wt=new yo,Nl=new class{constructor(t,e=3e4){this.listeners=new Set,this.inner=new E0(t,e),this.peer=t,this.timeout=e}apply(t,e="remote"){const{updated:n,added:o}=this.inner.apply(t);this.listeners.forEach(r=>{r({updated:n,added:o,removed:[]},e)}),this.startTimerIfNotEmpty()}setLocalState(t){const e=this.inner.getState(this.peer)==null;this.inner.setLocalState(t),e?this.listeners.forEach(n=>{n({updated:[],added:[this.inner.peer()],removed:[]},"local")}):this.listeners.forEach(n=>{n({updated:[this.inner.peer()],added:[],removed:[]},"local")}),this.startTimerIfNotEmpty()}getLocalState(){return this.inner.getState(this.peer)}getAllStates(){return this.inner.getAllStates()}encode(t){return this.inner.encode(t)}encodeAll(){return this.inner.encodeAll()}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}peers(){return this.inner.peers()}destroy(){clearInterval(this.timer),this.listeners.clear()}startTimerIfNotEmpty(){this.inner.isEmpty()||this.timer!=null||(this.timer=setInterval(()=>{const t=this.inner.removeOutdated();t.length>0&&this.listeners.forEach(e=>{e({updated:[],added:[],removed:t},"timeout")}),this.inner.isEmpty()&&(clearInterval(this.timer),this.timer=void 0)},this.timeout/2))}}(Wt.peerIdStr),Ru=PU(()=>{dn.debug("creating websocket");const t=w4().getWsSyncURL(R4()).toString(),e=new a$(t,void 0,{maxRetries:10,debug:!1,startClosed:!0,connectionTimeout:1e4});return Promise.resolve().then(async()=>{await v4(),LU()==="edit"&&e.reconnect()}),e.addEventListener("message",async n=>{const o=n.data,r=await o.arrayBuffer(),s=new Uint8Array(r);if(function(i,a){return new TextDecoder().decode(i.slice(0,a.length))===a}(s,Du)){const i=function(a,l){return a.slice(l.length)}(s,Du);return Nl.apply(i),void zy.debug("applied awareness update")}Wt.import(s),dn.debug("imported doc change. new doc:",Wt.toJSON()),ct.get(ts)!==Wt&&ct.set(ts,Wt)}),e.addEventListener("open",()=>{dn.debug("websocket open")}),e.addEventListener("close",n=>{dn.warn("websocket close",n),ct.get(ts)===Wt&&ct.set(ts,void 0)}),e});function Pu(t,e,n=""){if(En())return{extension:[],code:n};const o=Wt.getByPath(`codes/${t}`)!==void 0,r=Wt.getMap("codes").getOrCreateContainer(t,new Zo);o||(dn.log("initializing code for new cell",n),r.insert(0,n));const s={get name(){return ct.get(P4)||"Anonymous"},get colorClassName(){return(i=>{if(typeof i=="string"){let a=0;for(let l=0;l<i.length;l++)a=(a<<5)-a+i.charCodeAt(l),a=Math.trunc(a);return Cl[Math.abs(a)%Cl.length]}return Cl[i%Cl.length]})(this.name)}};return{code:n.toString(),extension:[M7(t),O7(t),D7(Wt,Nl,s,()=>r,t),A7(Wt,["codes",t],()=>r)]}}function M7(t){const e=(o,r)=>{const s=o.state.field(Pc).type,i=r.toString();i&&i!==s&&(dn.debug(`[incoming] setting language type: ${s} -> ${i}`),Pr(o,i,{keepCodeAsIs:!0}))},n=(o,r)=>{const s=o.state.field(Um),i=r.toJSON();ca(s,i)||o.dispatch({effects:[O4.of(i)],annotations:[es.of(!0)]})};return Tn.define(o=>{let r;return Promise.resolve().then(()=>{const s=Wt.getByPath(`languages/${t}`);if(!s)return void dn.error("no language container found for cell",t);Bo(s instanceof Zo,"language type is not a LoroText");const i=Wt.getByPath(`language_metadata/${t}`);i?(Bo(i instanceof Xo,"language metadata is not a LoroMap"),e(o,s),n(o,i),r=Wt.subscribe(a=>{if(a.origin==="local")return;const l=a.events.some(d=>d.target===s.id),c=a.events.some(d=>d.target===i.id);l&&e(o,s),c&&n(o,i)})):dn.error("no language metadata container found for cell",t)}),{destroy(){r()}}})}function O7(t){const e=Wt.getMap("languages").getOrCreateContainer(t,new Zo),n=Wt.getMap("language_metadata").getOrCreateContainer(t,new Xo);return st.updateListener.of(o=>{const r=e.toString()!=="";if(!o.docChanged&&r)return;if(!r){const i=Bm(o.state).type;Pr(o.view,i),dn.debug("no initial language, setting default to",i),e.delete(0,e.length),e.insert(0,i),dn.debug("no initial language metadata, setting default to",o.state.field(Um));const a=o.state.field(Um);for(const l of Object.keys(a))n.set(l,a[l]);return void Wt.commit()}let s=!1;for(const i of o.transactions)if(!i.annotation(es)){for(const a of i.effects)if(a.is(RU)&&e.toString()!==a.value.type&&(dn.debug(`[outgoing] language change: ${e} -> ${a.value.type}`),e.delete(0,e.length),e.insert(0,a.value.type),s=!0),a.is(O4)||a.is(D4)){const l=a.value;a.is(D4)?(dn.debug("[outgoing] setting language metadata: ",l),n.clear()):dn.debug("[outgoing] updating language metadata: ",l);for(const c of Object.keys(l))n.set(c,l[c]);s=!0}}s&&Wt.commit()})}function D7(t,e,n,o,r,s){const i=`loro:cell:${r}`;return[Ou,M4({above:!0,class:"loro-cursor-layer",update:Ly,markers:a=>{const{remoteCursors:l,isCheckout:c}=a.state.field(Ou);return c?[]:[...l.values()].flatMap(d=>{var f,m;const u=Uo.cursor(d.cursor.anchor);return Sl.createCursor(a,u,((f=d.user)==null?void 0:f.name)||"unknown",((m=d.user)==null?void 0:m.colorClassName)||"")})}}),M4({above:!1,class:"loro-selection-layer",update:Ly,markers:a=>{const{remoteCursors:l,isCheckout:c}=a.state.field(Ou);return c?[]:[...l.entries()].filter(([,d])=>d.cursor.head!==void 0&&d.cursor.anchor!==d.cursor.head).flatMap(([,d])=>{var f;const u=Uo.range(d.cursor.anchor,d.cursor.head);return OU.forRange(a,`loro-selection ${((f=d.user)==null?void 0:f.colorClassName)||""}`,u)})}}),Tn.define(a=>new j7(a,t,n,e,o,i,s)),Tn.define(a=>new E7(a,t,e,i)),C7]}function jl(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}ya()&&Ru(),Wt.subscribeLocalUpdates(t=>{dn.debug("local update, sending to server"),Ru().send(t)}),Nl.addListener((t,e)=>{const n=[...t.added,...t.removed,...t.updated];e==="local"&&(zy.debug("awareness changes",n),Ru().send(function(o,r){const s=new TextEncoder().encode(o);return new Uint8Array([...s,...r])}(Du,Nl.encode(n))))});var By={modified:{doc:""},original:{doc:""}},Uy=A.createContext(By);function R7(t,e){return Et({},t,e,{modified:Et({},t.modified,e.modified),original:Et({},t.original,e.original)})}var Lu=()=>A.useContext(Uy),P7=t=>{var{children:e,theme:n}=t,[o,r]=A.useReducer(R7,Et({},By,{theme:n}));return A.useEffect(()=>r({theme:n}),[n]),h.jsx(Uy.Provider,{value:Et({},o,{dispatch:r}),children:e})},L7=["extensions","value","selection","onChange"],Vy=t=>{var{extensions:e=[],value:n,selection:o,onChange:r}=t,s=xa(t,L7),{theme:i,dispatch:a}=Lu(),l=ei(Et({},s,{theme:i}));return A.useEffect(()=>a({original:{doc:n,selection:o,extensions:[...l,...e]},originalExtension:{onChange:r,option:s,extension:[e]}}),[t]),null};Vy.displayName="CodeMirrorMerge.Original";var F7=["extensions","value","selection","onChange"],Hy=t=>{var{extensions:e=[],value:n,selection:o,onChange:r}=t,s=xa(t,F7),{theme:i,dispatch:a}=Lu(),l=ei(Et({},s,{theme:i}));return A.useEffect(()=>{a({modified:{doc:n,selection:o,extensions:[...l,...e]},modifiedExtension:{onChange:r,option:s,extension:[e]}})},[t]),null};Hy.displayName="CodeMirrorMerge.Modified";class Mt{constructor(e,n,o,r){this.fromA=e,this.toA=n,this.fromB=o,this.toB=r}offset(e,n){return new Mt(this.fromA+e,this.toA+e,this.fromB+n,this.toB+n)}}function Ar(t,e,n,o,r,s){if(t==o)return[];let i=Bu(t,e,n,o,r,s),a=Uu(t,e+i,n,o,r+i,s),l=(n-=a)-(e+=i),c=(s-=a)-(r+=i);if(!l||!c)return[new Mt(e,n,r,s)];if(l>c){let u=t.slice(e,n).indexOf(o.slice(r,s));if(u>-1)return[new Mt(e,e+u,r,r),new Mt(e+u+c,n,s,s)]}else if(c>l){let u=o.slice(r,s).indexOf(t.slice(e,n));if(u>-1)return[new Mt(e,e,r,r+u),new Mt(n,n,r+u+l,s)]}if(l==1||c==1)return[new Mt(e,n,r,s)];let d=qy(t,e,n,o,r,s);if(d){let[u,f,m]=d;return Ar(t,e,u,o,r,f).concat(Ar(t,u+m,n,o,f+m,s))}return function(u,f,m,_,g,p){let b=m-f,y=p-g;if(Pi<1e9&&Math.min(b,y)>16*Pi)return Math.min(b,y)>64*Pi?[new Mt(f,m,g,p)]:Gy(u,f,m,_,g,p);let x=Math.ceil((b+y)/2);Fu.reset(x),zu.reset(x);let v=(j,I)=>u.charCodeAt(f+j)==_.charCodeAt(g+I),S=(j,I)=>u.charCodeAt(m-j-1)==_.charCodeAt(p-I-1),k=(b-y)%2!=0?zu:null,E=k?null:Fu;for(let j=0;j<x;j++){if(j>Pi)return Gy(u,f,m,_,g,p);let I=Fu.advance(j,b,y,x,k,!1,v)||zu.advance(j,b,y,x,E,!0,S);if(I)return z7(u,f,m,f+I[0],_,g,p,g+I[1])}return[new Mt(f,m,g,p)]}(t,e,n,o,r,s)}let Pi=1e9;class $y{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let n=0;n<this.len;n++)this.vec[n]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,n,o,r,s,i,a){for(let l=-e+this.start;l<=e-this.end;l+=2){let c=r+l,d=l==-e||l!=e&&this.vec[c-1]<this.vec[c+1]?this.vec[c+1]:this.vec[c-1]+1,u=d-l;for(;d<n&&u<o&&a(d,u);)d++,u++;if(this.vec[c]=d,d>n)this.end+=2;else if(u>o)this.start+=2;else if(s){let f=r+(n-o)-l;if(f>=0&&f<this.len&&s.vec[f]!=-1){if(i){let m=s.vec[f];if(m>=n-d)return[m,r+m-f]}else if(d>=n-s.vec[f])return[d,u]}}}return null}}const Fu=new $y,zu=new $y;function z7(t,e,n,o,r,s,i,a){let l=!1;return ns(t,o)||++o!=n||(l=!0),ns(r,a)||++a!=i||(l=!0),l?[new Mt(e,n,s,i)]:Ar(t,e,o,r,s,a).concat(Ar(t,o,n,r,a,i))}function Wy(t,e){let n=1,o=Math.min(t,e);for(;n<o;)n<<=1;return n}function Bu(t,e,n,o,r,s){if(e==n||e==s||t.charCodeAt(e)!=o.charCodeAt(r))return 0;let i=Wy(n-e,s-r);for(let a=e,l=r;;){let c=a+i,d=l+i;if(c>n||d>s||t.slice(a,c)!=o.slice(l,d)){if(i==1)return a-e-(ns(t,a)?0:1);i>>=1}else{if(c==n||d==s)return c-e;a=c,l=d}}}function Uu(t,e,n,o,r,s){if(e==n||r==s||t.charCodeAt(n-1)!=o.charCodeAt(s-1))return 0;let i=Wy(n-e,s-r);for(let a=n,l=s;;){let c=a-i,d=l-i;if(c<e||d<r||t.slice(c,a)!=o.slice(d,l)){if(i==1)return n-a-(ns(t,a)?0:1);i>>=1}else{if(c==e||d==r)return n-c;a=c,l=d}}}function Vu(t,e,n,o,r,s,i,a){let l=o.slice(r,s),c=null;for(;;){if(c||i<a)return c;for(let d=e+i;;){ns(t,d)||d++;let u=d+i;if(ns(t,u)||(u+=u==d+1?1:-1),u>=n)break;let f=t.slice(d,u),m=-1;for(;(m=l.indexOf(f,m+1))!=-1;){let _=Bu(t,u,n,o,r+m+f.length,s),g=Uu(t,e,d,o,r,r+m),p=f.length+_+g;(!c||c[2]<p)&&(c=[d-g,r+m-g,p])}d=u}if(a<0)return c;i>>=1}}function qy(t,e,n,o,r,s){let i=n-e,a=s-r;if(i<a){let l=qy(o,r,s,t,e,n);return l&&[l[1],l[0],l[2]]}return i<4||2*a<i?null:Vu(t,e,n,o,r,s,Math.floor(i/4),-1)}function Gy(t,e,n,o,r,s){let i,a=n-e,l=s-r;if(a<l){let f=Vu(o,r,s,t,e,n,Math.floor(a/6),50);i=f&&[f[1],f[0],f[2]]}else i=Vu(t,e,n,o,r,s,Math.floor(l/6),50);if(!i)return[new Mt(e,n,r,s)];let[c,d,u]=i;return Ar(t,e,c,o,r,d).concat(Ar(t,c+u,n,o,d+u,s))}function Yy(t,e){for(let n=1;n<t.length;n++){let o=t[n-1],r=t[n];o.toA>r.fromA-e&&o.toB>r.fromB-e&&(t[n-1]=new Mt(o.fromA,r.toA,o.fromB,r.toB),t.splice(n--,1))}}let Tr;try{Tr=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch{}function Jy(t){return t>48&&t<58||t>64&&t<91||t>96&&t<123}function Ky(t,e){if(e==t.length)return 0;let n=t.charCodeAt(e);return n<192?Jy(n)?1:0:Tr?ex(n)&&e!=t.length-1?Tr.test(t.slice(e,e+2))?2:0:Tr.test(String.fromCharCode(n))?1:0:0}function Xy(t,e){if(!e)return 0;let n=t.charCodeAt(e-1);return n<192?Jy(n)?1:0:Tr?tx(n)&&e!=1?Tr.test(t.slice(e-2,e))?2:0:Tr.test(String.fromCharCode(n))?1:0:0}function Zy(t,e,n){if(e==t.length||!Xy(t,e))return e;for(let o=e,r=e+n;;){let s=Ky(t,o);if(!s)return o;if(o+=s,o>r)return e}}function Qy(t,e,n){if(!e||!Ky(t,e))return e;for(let o=e,r=e-n;;){let s=Xy(t,o);if(!s)return o;if(o-=s,o<r)return e}}function B7(t,e,n){for(let o=e,r=e-n;;){let s=o?t.charCodeAt(o-1):10;if(s==10)return o;if(o--,o<r||s!=32&&s!=9)return e}}const ex=t=>t>=55296&&t<=56319,tx=t=>t>=56320&&t<=57343;function ns(t,e){return!e||e==t.length||!ex(t.charCodeAt(e-1))||!tx(t.charCodeAt(e))}function U7(t,e,n){var o;return Pi=((o=n==null?void 0:n.scanLimit)!==null&&o!==void 0?o:1e9)>>1,function(r,s,i){for(;;){Yy(i,1);let a=!1;for(let l=0;l<i.length;l++){let c,d,u=i[l];(c=Bu(r,u.fromA,u.toA,s,u.fromB,u.toB))&&(u=i[l]=new Mt(u.fromA+c,u.toA,u.fromB+c,u.toB)),(d=Uu(r,u.fromA,u.toA,s,u.fromB,u.toB))&&(u=i[l]=new Mt(u.fromA,u.toA-d,u.fromB,u.toB-d));let f=u.toA-u.fromA,m=u.toB-u.fromB;if(f&&m)continue;let _=u.fromA-(l?i[l-1].toA:0),g=(l<i.length-1?i[l+1].fromA:r.length)-u.toA;if(!_||!g)continue;let p=f?r.slice(u.fromA,u.toA):s.slice(u.fromB,u.toB);_<=p.length&&r.slice(u.fromA-_,u.fromA)==p.slice(p.length-_)?(i[l]=new Mt(u.fromA-_,u.toA-_,u.fromB-_,u.toB-_),a=!0):g<=p.length&&r.slice(u.toA,u.toA+g)==p.slice(0,g)&&(i[l]=new Mt(u.fromA+g,u.toA+g,u.fromB+g,u.toB+g),a=!0)}if(!a)break}return i}(t,e,Ar(t,0,t.length,e,0,e.length))}function nx(t,e,n){return function(o,r,s){for(let i=0,a=0;a<o.length;a++){let l=o[a],c=l.toA-l.fromA,d=l.toB-l.fromB;if(c&&d||c>3||d>3){let u=a==o.length-1?r.length:o[a+1].fromA,f=l.fromA-i,m=u-l.toA,_=Qy(r,l.fromA,Math.min(f,5)),g=Zy(r,l.toA,Math.min(m,5)),p=l.fromA-_,b=g-l.toA;if(!c||!d){let y,x,v=Math.max(c,d),[S,k,E]=c?[r,l.fromA,l.toA]:[s,l.fromB,l.toB];p&&b?(v>p&&r.slice(_,l.fromA)==S.slice(E-p,E)?(l=o[a]=new Mt(_,_+c,l.fromB-p,l.toB-p),_=l.fromA,g=Zy(r,l.toA,Math.min(u-l.toA,5))):v>b&&r.slice(l.toA,g)==S.slice(k,k+b)&&(l=o[a]=new Mt(g-c,g,l.fromB+b,l.toB+b),g=l.toA,_=Qy(r,l.fromA,Math.min(l.fromA-i,5))),p=l.fromA-_,b=g-l.toA):p||b||!(x=l.fromA-(y=B7(r,l.fromA,f)))||r.slice(y,l.fromA)!=S.slice(E-x,E)||(l=o[a]=new Mt(y,y+c,l.fromB-x,l.toB-x))}(p||b)&&(l=o[a]=new Mt(l.fromA-p,l.toA+b,l.fromB-p,l.toB+b)),i=l.toA}}return Yy(o,3),o}(U7(t,e,n),t,e)}const ao=Ks.define({combine:t=>t[0]}),Hu=zt.define(),os=Mn.define({create:t=>null,update(t,e){for(let n of e.effects)n.is(Hu)&&(t=n.value);return t}});class rs{constructor(e,n,o,r,s){this.changes=e,this.fromA=n,this.toA=o,this.fromB=r,this.toB=s}offset(e,n){return e||n?new rs(this.changes,this.fromA+e,this.toA+e,this.fromB+n,this.toB+n):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,n,o){return sx(nx(e.toString(),n.toString(),o),e,n,0,0)}static updateA(e,n,o,r,s){return lx(ax(e,r,!0,o.length),e,n,o,s)}static updateB(e,n,o,r,s){return lx(ax(e,r,!1,n.length),e,n,o,s)}}function ox(t,e,n,o){let r=n.lineAt(t),s=o.lineAt(e);return r.to==t&&s.to==e&&t<n.length&&e<o.length?[t+1,e+1]:[r.from,s.from]}function rx(t,e,n,o){let r=n.lineAt(t),s=o.lineAt(e);return r.from==t&&s.from==e?[t,e]:[r.to+1,s.to+1]}function sx(t,e,n,o,r){let s=[];for(let i=0;i<t.length;i++){let a=t[i],[l,c]=ox(a.fromA+o,a.fromB+r,e,n),[d,u]=rx(a.toA+o,a.toB+r,e,n),f=[a.offset(-l+o,-c+r)];for(;i<t.length-1;){let m=t[i+1],[_,g]=ox(m.fromA+o,m.fromB+r,e,n);if(_>d+1&&g>u+1)break;f.push(m.offset(-l+o,-c+r)),[d,u]=rx(m.toA+o,m.toB+r,e,n),i++}s.push(new rs(f,l,Math.max(l,d),c,Math.max(c,u)))}return s}const El=1e3;function ix(t,e,n,o){let r=0,s=t.length;for(;;){if(r==s){let d=0,u=0;r&&({toA:d,toB:u}=t[r-1]);let f=e-(n?d:u);return[d+f,u+f]}let i=r+s>>1,a=t[i],[l,c]=n?[a.fromA,a.toA]:[a.fromB,a.toB];if(l>e)s=i;else{if(!(c<=e))return o?[a.fromA,a.fromB]:[a.toA,a.toB];r=i+1}}}function ax(t,e,n,o){let r=[];return e.iterChangedRanges((s,i,a,l)=>{let c=0,d=n?e.length:o,u=0,f=n?o:e.length;s>El&&([c,u]=ix(t,s-El,n,!0)),i<e.length-El&&([d,f]=ix(t,i+El,n,!1));let m,_=l-a-(i-s),[g,p]=n?[_,0]:[0,_];r.length&&(m=r[r.length-1]).toA>=c?r[r.length-1]={fromA:m.fromA,fromB:m.fromB,toA:d,toB:f,diffA:m.diffA+g,diffB:m.diffB+p}:r.push({fromA:c,toA:d,fromB:u,toB:f,diffA:g,diffB:p})}),r}function lx(t,e,n,o,r){if(!t.length)return e;let s=0,i=0,a=0,l=[];for(let c of t){let d=c.fromA+i,u=c.toA+i+c.diffA,f=c.fromB+a,m=c.toB+a+c.diffB;for(;s<e.length;){let _=e[s];if(_.toA+i<=d&&_.toB+a<=f)l.push(_.offset(i,a));else if(_.fromA+i>u)break;s++}for(let _ of sx(nx(n.sliceString(d,u),o.sliceString(f,m),r),n,o,d,f))l.push(_);for(i+=c.diffA,a+=c.diffB;s<e.length;){let _=e[s];if(_.fromA>u+i&&_.fromB>m+a)break;s++}}for(;s<e.length;)l.push(e[s++].offset(i,a));return l}const cx=Tn.fromClass(class{constructor(t){({deco:this.deco,gutter:this.gutter}=hx(t))}update(t){var e,n;(t.docChanged||t.viewportChanged||(e=t.startState,n=t.state,e.field(os,!1)!=n.field(os,!1))||function(o,r){return o.facet(ao)!=r.facet(ao)}(t.startState,t.state))&&({deco:this.deco,gutter:this.gutter}=hx(t.view))}},{decorations:t=>t.deco}),Il=Ho.low(zU({class:"cm-changeGutter",markers:t=>{var e;return((e=t.plugin(cx))===null||e===void 0?void 0:e.gutter)||Vm.empty}})),dx=ut.line({class:"cm-changedLine"}),V7=ut.mark({class:"cm-changedText"}),H7=ut.mark({tagName:"ins",class:"cm-insertedLine"}),$7=ut.mark({tagName:"del",class:"cm-deletedLine"}),ux=new class extends BU{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function W7(t,e,n,o,r,s){let i=n?t.fromA:t.fromB,a=n?t.toA:t.toB,l=0;if(i!=a){r.add(i,i,dx),r.add(i,a,n?$7:H7),s&&s.add(i,i,ux);for(let c=e.iterRange(i,a-1),d=i;!c.next().done;){if(c.lineBreak){d++,r.add(d,d,dx),s&&s.add(d,d,ux);continue}let u=d+c.value.length;if(o)for(;l<t.changes.length;){let f=t.changes[l],m=i+(n?f.fromA:f.fromB),_=i+(n?f.toA:f.toB),g=Math.max(d,m),p=Math.min(u,_);if(g<p&&r.add(g,p,V7),!(_<u))break;l++}d=u}}}function hx(t){let e=t.state.field(os),{side:n,highlightChanges:o,markGutter:r}=t.state.facet(ao),s=n=="a",i=new qs,a=r?new qs:null,{from:l,to:c}=t.viewport;for(let d of e){if((s?d.fromA:d.fromB)>=c)break;(s?d.toA:d.toB)>l&&W7(d,t.state.doc,s,o,i,a)}return{deco:i.finish(),gutter:a&&a.finish()}}class Al extends Xs{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}const Tl=zt.define({map:(t,e)=>t.map(e)}),Li=Mn.define({create:()=>ut.none,update:(t,e)=>{for(let n of e.effects)if(n.is(Tl))return n.value;return t.map(e.changes)},provide:t=>st.decorations.from(t)}),$u=.01,Wu=zt.define({map:(t,e)=>e.mapPos(t)});class q7 extends Xs{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let n=document.createElement("div");return n.className="cm-collapsedLines",n.textContent="\u299A "+e.state.phrase("$ unchanged lines",this.lines)+" \u299A",n.addEventListener("click",o=>{let r=e.posAtDOM(o.target);e.dispatch({effects:Wu.of(r)});let{side:s,sibling:i}=e.state.facet(ao);i&&i().dispatch({effects:Wu.of(G7(r,e.state.field(os),s=="a"))})}),n}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}}function G7(t,e,n){let o=0,r=0;for(let s=0;;s++){let i=s<e.length?e[s]:null;if(!i||(n?i.fromA:i.fromB)>=t)return r+(t-o);[o,r]=n?[i.toA,i.toB]:[i.toB,i.toA]}}const Y7=Mn.define({create:t=>ut.none,update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(Wu)&&(t=t.update({filter:o=>o!=n.value}));return t},provide:t=>st.decorations.from(t)});function fx({margin:t=3,minSize:e=4}){return Y7.init(n=>function(o,r,s){let i=new qs,a=o.facet(ao).side=="a",l=o.field(os),c=1;for(let d=0;;d++){let u=d<l.length?l[d]:null,f=d?c+r:1,m=u?o.doc.lineAt(a?u.fromA:u.fromB).number-1-r:o.doc.lines,_=m-f+1;if(_>=s&&i.add(o.doc.line(f).from,o.doc.line(m).to,ut.replace({widget:new q7(_),block:!0})),!u)break;c=o.doc.lineAt(Math.min(o.doc.length,a?u.toA:u.toB)).number}return i.finish()}(n,t,e))}const J7=st.styleModule.of(new FU({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),K7=st.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb2266, #22bb2266) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff8866, #88ff8866) bottom/100% 2px no-repeat"},".cm-insertedLine, .cm-deletedLine":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer"},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"}}),mx=new Rc,Ml=new Rc;class px{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig;let n=[Ho.low(cx),K7,J7,Li,st.updateListener.of(u=>{this.measuring<0&&(u.heightChanged||u.viewportChanged)&&!u.transactions.some(f=>f.effects.some(m=>m.is(Tl)))&&this.measure()})],o=[ao.of({side:"a",sibling:()=>this.b,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&o.push(Il);let r=mr.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],st.editorAttributes.of({class:"cm-merge-a"}),Ml.of(o),n]}),s=[ao.of({side:"b",sibling:()=>this.a,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&s.push(Il);let i=mr.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],st.editorAttributes.of({class:"cm-merge-b"}),Ml.of(s),n]});this.chunks=rs.build(r.doc,i.doc,this.diffConf);let a=[os.init(()=>this.chunks),mx.of(e.collapseUnchanged?fx(e.collapseUnchanged):[])];r=r.update({effects:zt.appendConfig.of(a)}).state,i=i.update({effects:zt.appendConfig.of(a)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let l=e.orientation||"a-b",c=document.createElement("div");c.className="cm-mergeViewEditor";let d=document.createElement("div");d.className="cm-mergeViewEditor",this.editorDOM.appendChild(l=="a-b"?c:d),this.editorDOM.appendChild(l=="a-b"?d:c),this.a=new st({state:r,parent:c,root:e.root,dispatchTransactions:u=>this.dispatch(u,this.a)}),this.b=new st({state:i,parent:d,root:e.root,dispatchTransactions:u=>this.dispatch(u,this.b)}),this.setupRevertControls(!!e.revertControls,e.revertControls=="b-to-a",e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,n){if(e.some(o=>o.docChanged)){let o=e[e.length-1],r=e.reduce((i,a)=>i.compose(a.changes),_a.empty(e[0].startState.doc.length));this.chunks=n==this.a?rs.updateA(this.chunks,o.newDoc,this.b.state.doc,r,this.diffConf):rs.updateB(this.chunks,this.a.state.doc,o.newDoc,r,this.diffConf),n.update([...e,o.state.update({effects:Hu.of(this.chunks)})]);let s=n==this.a?this.b:this.a;s.update([s.state.update({effects:Hu.of(this.chunks)})]),this.scheduleMeasure()}else n.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let s=e.orientation!="b-a";if(s!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let i=this.a.dom.parentNode,a=this.b.dom.parentNode;i.remove(),a.remove(),this.editorDOM.insertBefore(s?i:a,this.editorDOM.firstChild),this.editorDOM.appendChild(s?a:i),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let s=!!this.revertDOM,i=this.revertToA,a=this.renderRevert;"revertControls"in e&&(s=!!e.revertControls,i=e.revertControls=="b-to-a"),"renderRevertControl"in e&&(a=e.renderRevertControl),this.setupRevertControls(s,i,a)}let n="highlightChanges"in e,o="gutter"in e,r="collapseUnchanged"in e;if(n||o||r){let s=[],i=[];if(n||o){let a=this.a.state.facet(ao),l=o?e.gutter!==!1:a.markGutter,c=n?e.highlightChanges!==!1:a.highlightChanges;s.push(Ml.reconfigure([ao.of({side:"a",sibling:()=>this.b,highlightChanges:c,markGutter:l}),l?Il:[]])),i.push(Ml.reconfigure([ao.of({side:"b",sibling:()=>this.a,highlightChanges:c,markGutter:l}),l?Il:[]]))}if(r){let a=mx.reconfigure(e.collapseUnchanged?fx(e.collapseUnchanged):[]);s.push(a),i.push(a)}this.a.dispatch({effects:s}),this.b.dispatch({effects:i})}this.scheduleMeasure()}setupRevertControls(e,n,o){this.revertToA=n,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=o,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",r=>this.revertClicked(r)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){(function(e,n,o){let r=new qs,s=new qs,i=e.state.field(Li).iter(),a=n.state.field(Li).iter(),l=0,c=0,d=0,u=0;for(let g=0;;g++){let p=g<o.length?o[g]:null;if(l<(p?p.fromA:e.state.doc.length)){let b=e.lineBlockAt(l).top+d-(n.lineBlockAt(c).top+u);b<-.01?(d-=b,r.add(l,l,ut.widget({widget:new Al(-b),block:!0,side:-1}))):b>$u&&(u+=b,s.add(c,c,ut.widget({widget:new Al(b),block:!0,side:-1})))}if(!p)break;for(l=p.toA,c=p.toB;i.value&&i.from<l;)d-=i.value.spec.widget.height,i.next();for(;a.value&&a.from<c;)u-=a.value.spec.widget.height,a.next()}for(;i.value;)d-=i.value.spec.widget.height,i.next();for(;a.value;)u-=a.value.spec.widget.height,a.next();let f=e.contentHeight+d-(n.contentHeight+u);f<$u?r.add(e.state.doc.length,e.state.doc.length,ut.widget({widget:new Al(-f),block:!0,side:1})):f>$u&&s.add(n.state.doc.length,n.state.doc.length,ut.widget({widget:new Al(f),block:!0,side:1}));let m=r.finish(),_=s.finish();Vm.eq([m],[e.state.field(Li)])||e.dispatch({effects:Tl.of(m)}),Vm.eq([_],[n.state.field(Li)])||n.dispatch({effects:Tl.of(_)})})(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,n=e.firstChild,o=this.a.viewport,r=this.b.viewport;for(let s=0;s<this.chunks.length;s++){let i=this.chunks[s];if(i.fromA>o.to||i.fromB>r.to)break;if(i.fromA<o.from||i.fromB<r.from)continue;let a=this.a.lineBlockAt(i.fromA).top+"px";for(;n&&+n.dataset.chunk<s;)n=gx(n);n&&n.dataset.chunk==String(s)?(n.style.top!=a&&(n.style.top=a),n=n.nextSibling):e.insertBefore(this.renderRevertButton(a,s),n)}for(;n;)n=gx(n)}renderRevertButton(e,n){let o;if(this.renderRevert)o=this.renderRevert();else{o=document.createElement("button");let r=this.a.state.phrase("Revert this chunk");o.setAttribute("aria-label",r),o.setAttribute("title",r),o.textContent=this.revertToLeft?"\u21DC":"\u21DD"}return o.style.top=e,o.setAttribute("data-chunk",String(n)),o}revertClicked(e){let n,o=e.target;for(;o&&o.parentNode!=this.revertDOM;)o=o.parentNode;if(o&&(n=this.chunks[o.dataset.chunk])){let[r,s,i,a,l,c]=this.revertToA?[this.b,this.a,n.fromB,n.toB,n.fromA,n.toA]:[this.a,this.b,n.fromA,n.toA,n.fromB,n.toB],d=r.state.sliceDoc(i,Math.max(i,a-1));i!=a&&c<=s.state.doc.length&&(d+=r.state.lineBreak),s.dispatch({changes:{from:l,to:Math.min(s.state.doc.length,c),insert:d},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}function gx(t){let e=t.nextSibling;return t.remove(),e}var X7=["className","children","orientation","revertControls","highlightChanges","gutter","collapseUnchanged","destroyRerender","renderRevertControl","diffConfig"],Z7=["modified","modifiedExtension","original","originalExtension","theme","dispatch"],_x=K.forwardRef((t,e)=>{var{className:n,children:o,orientation:r,revertControls:s,highlightChanges:i,gutter:a,collapseUnchanged:l,destroyRerender:c=!0,renderRevertControl:d,diffConfig:u}=t,f=xa(t,X7),m=Lu(),{modified:_,modifiedExtension:g,original:p,originalExtension:b,theme:y,dispatch:x}=m,v=xa(m,Z7),S=A.useRef(null),k=A.useRef(),E={orientation:r,revertControls:s,highlightChanges:i,gutter:a,collapseUnchanged:l,renderRevertControl:d,diffConfig:u};A.useImperativeHandle(e,()=>({container:S.current,view:k.current,modified:_,original:p,config:Et({a:p,b:_,parent:S.current},E)}),[S,k,_,p,E]);var j=st.updateListener.of(T=>{if(T.docChanged&&typeof(b==null?void 0:b.onChange)=="function"){var M=T.state.doc.toString();b==null||b.onChange(M,T)}}),I=st.updateListener.of(T=>{if(T.docChanged&&typeof(g==null?void 0:g.onChange)=="function"){var M=T.state.doc.toString();g==null||g.onChange(M,T)}});return A.useEffect(()=>{!k.current&&S.current&&b&&g&&(k.current=new px(Et({a:Et({},p,{extensions:[...(b==null?void 0:b.extension)||[],...ei(Et({},b==null?void 0:b.option,{theme:y})),j]}),b:Et({},_,{extensions:[...(g==null?void 0:g.extension)||[],...ei(Et({},g==null?void 0:g.option,{theme:y})),I]}),parent:S.current},E)),x({view:k.current}))},[k,S,b,g]),A.useEffect(()=>{if(p&&p.doc&&k.current){var T,M,L=(T=k.current)==null?void 0:T.a.state.doc.toString();L!==p.doc&&((M=k.current)==null||M.a.dispatch({changes:{from:0,to:L.length,insert:p.doc||""}}))}if(_&&_.doc&&k.current){var B,O,z=(B=k.current)==null?void 0:B.b.state.doc.toString();z!==_.doc&&((O=k.current)==null||O.b.dispatch({changes:{from:0,to:z.length,insert:_.doc||""}}))}if(c&&k.current){var F=k.current.a.state.selection.ranges[0].from,V=k.current.b.state.selection.ranges[0].from;k.current.destroy(),k.current=new px(Et({a:Et({},p,{extensions:[...(b==null?void 0:b.extension)||[],...ei(Et({},b==null?void 0:b.option,{theme:y}))]}),b:Et({},_,{extensions:[...(g==null?void 0:g.extension)||[],...ei(Et({},g==null?void 0:g.option,{theme:y}))]}),parent:S.current},E)),F&&(k.current.a.focus(),k.current.a.dispatch({selection:{anchor:F,head:F}})),V&&(k.current.b.focus(),k.current.b.dispatch({selection:{anchor:V,head:V}}))}},[k,y,S.current,p,_,b,g,c]),A.useEffect(()=>()=>k.current&&k.current.destroy(),[]),A.useEffect(()=>{if(k.current){var T={};v.orientation!==r&&(T.orientation=r),v.revertControls!==s&&(T.revertControls=s),v.highlightChanges!==i&&(T.highlightChanges=i),v.gutter!==a&&(T.gutter=a),v.collapseUnchanged!==l&&(T.collapseUnchanged=l),v.renderRevertControl!==d&&(T.collapseUnchanged=l),Object.keys(T).length&&x&&k.current&&(k.current.reconfigure(Et({},T)),x(Et({},T)))}},[x,k,r,s,i,a,l,d]),h.jsx("div",Et({ref:S,className:"cm-merge-theme"+(n?" "+n:"")},f,{children:o}))});_x.displayName="CodeMirrorMerge.Internal";var Q7=["theme"],ss=K.forwardRef((t,e)=>{var{theme:n}=t,o=xa(t,Q7);return h.jsx(P7,{theme:n,children:h.jsx(_x,Et({},o,{ref:e}))})});ss.Original=Vy,ss.Modified=Hy,ss.displayName="CodeMirrorMerge";const eM=ss.Original,tM=ss.Modified,bx=[VU(),st.lineWrapping],nM=t=>{const e=X.c(42),{className:n,onChange:o,initialPrompt:r,currentLanguageAdapter:s,currentCode:i,declineChange:a,acceptChange:l,enabled:c,children:d}=t;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={},e[0]=u):u=e[0];const[f,m]=A.useState(u),[_,g]=fn(eC),p=Hm(),{completion:b,input:y,stop:x,isLoading:v,setCompletion:S,setInput:k,handleSubmit:E}=UU({api:p.getAiURL("completion").toString(),headers:p.headers(),initialInput:r,streamProtocol:"text",experimental_throttle:100,body:{...f,includeOtherCode:_?Dc(i):"",code:i,language:s},onError:oM,onFinish:(Z,q)=>{j(q.trimEnd())}}),j=S,I=K.useRef(null);let T,M,L,B;e[1]!==c?(T=()=>{var q;const Z=I.current;c&&Z&&(requestAnimationFrame(()=>{var re;(re=Z.view)==null||re.focus()}),HU((q=I.current)==null?void 0:q.view))},M=[c],e[1]=c,e[2]=T,e[3]=M):(T=e[2],M=e[3]),A.useEffect(T,M),e[4]!==c||e[5]!==r||e[6]!==k?(L=()=>{c&&k(r||"")},B=[c,r,k],e[4]=c,e[5]=r,e[6]=k,e[7]=L,e[8]=B):(L=e[7],B=e[8]),A.useEffect(L,B);const{theme:O}=Fo();let z;e[9]!==n?(z=Oe("flex flex-col w-full rounded-[inherit]",n),e[9]=n,e[10]=z):z=e[10];const F=c&&"max-h-[400px] min-h-11 visible",V=!c&&"max-h-0 min-h-0 invisible";let R,C,H,N;e[11]!==F||e[12]!==V?(R=Oe("flex items-center gap-2 border-b px-3 transition-all rounded-[inherit] rounded-b-none duration-300",F,V),e[11]=F,e[12]=V,e[13]=R):R=e[13],e[14]!==l||e[15]!==b||e[16]!==a||e[17]!==c||e[18]!==E||e[19]!==_||e[20]!==y||e[21]!==v||e[22]!==j||e[23]!==g||e[24]!==k||e[25]!==x||e[26]!==O?(C=c&&h.jsxs(h.Fragment,{children:[h.jsx(oa,{className:"text-[var(--blue-10)] flex-shrink-0",size:16}),h.jsx(Bc,{inputRef:I,theme:O,onClose:()=>{a(),j("")},value:y,onChange:Z=>{k(Z),m(F4({input:Z}))},onSubmit:()=>{v||E()}}),v&&h.jsxs(Pe,{"data-testid":"stop-completion-button",variant:"text",size:"xs",className:"mb-0",onClick:x,children:[h.jsx($m,{className:"animate-spin mr-1",size:14}),"Stop"]}),!v&&b&&h.jsx(Pe,{"data-testid":"accept-completion-button",variant:"text",size:"xs",className:"mb-0",disabled:v,onClick:()=>{l(b),j("")},children:h.jsx("span",{className:"text-[var(--grass-11)] opacity-100",children:"Accept"})}),h.jsx("div",{className:"h-full w-px bg-border mx-2"}),h.jsx(Le,{content:"Include code from other cells",children:h.jsxs("div",{className:"flex flex-row items-start gap-1 overflow-hidden",children:[h.jsx(z4,{"data-testid":"include-other-cells-checkbox",id:"include-other-cells",checked:_,onCheckedChange:Z=>g(!!Z)}),h.jsx(Fr,{htmlFor:"include-other-cells",className:"text-muted-foreground text-xs whitespace-nowrap ellipsis",children:"Include all code"})]})}),h.jsx(Pe,{"data-testid":"decline-completion-button",variant:"text",size:"icon",disabled:v,onClick:()=>{x(),a(),j("")},children:h.jsx(no,{className:"text-[var(--red-10)]",size:16})})]}),e[14]=l,e[15]=b,e[16]=a,e[17]=c,e[18]=E,e[19]=_,e[20]=y,e[21]=v,e[22]=j,e[23]=g,e[24]=k,e[25]=x,e[26]=O,e[27]=C):C=e[27],e[28]!==R||e[29]!==C?(H=h.jsx("div",{className:R,children:C}),e[28]=R,e[29]=C,e[30]=H):H=e[30],e[31]!==b||e[32]!==i||e[33]!==c||e[34]!==o||e[35]!==O?(N=b&&c&&h.jsxs(ss,{className:"cm",theme:O,children:[h.jsx(eM,{onChange:o,value:i,extensions:bx}),h.jsx(tM,{value:b,editable:!1,readOnly:!0,extensions:bx})]}),e[31]=b,e[32]=i,e[33]=c,e[34]=o,e[35]=O,e[36]=N):N=e[36];const $=(!b||!c)&&d;let Y;return e[37]!==H||e[38]!==N||e[39]!==$||e[40]!==z?(Y=h.jsxs("div",{className:z,children:[H,N,$]}),e[37]=H,e[38]=N,e[39]=$,e[40]=z,e[41]=Y):Y=e[41],Y};function oM(t){lt({title:"Completion failed",description:L4(t)})}const rM=t=>{const e=X.c(24),{editorView:n,code:o,currentLanguageAdapter:r,onAfterToggle:s}=t;let i,a;e[0]!==o?(a=new ia().isSupported(o)||o.trim()==="",e[0]=o,e[1]=a):a=e[1],i=a;const l=i;let c,d;e[2]!==o?(d=new zc().isSupported(o)||o.trim()==="",e[2]=o,e[3]=d):d=e[3],c=d;const u=c&&r==="python";let f,m;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(ur,{color:"var(--sky-11)",strokeWidth:2.5,className:"w-4 h-4"}),e[4]=f):f=e[4],e[5]!==r||e[6]!==n||e[7]!==s||e[8]!==u?(m=h.jsx(qu,{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:u,icon:f,toType:"sql",displayName:"SQL",onAfterToggle:s}),e[5]=r,e[6]=n,e[7]=s,e[8]=u,e[9]=m):m=e[9];const _=l&&r==="python";let g,p,b,y,x;return e[10]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx(gc,{fill:"var(--sky-11)",color:"black",className:"w-4 h-4"}),e[10]=g):g=e[10],e[11]!==r||e[12]!==n||e[13]!==s||e[14]!==_?(p=h.jsx(qu,{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:_,icon:g,toType:"markdown",displayName:"Markdown",onAfterToggle:s}),e[11]=r,e[12]=n,e[13]=s,e[14]=_,e[15]=p):p=e[15],e[16]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(_c,{fill:"var(--sky-11)",color:"black",className:"w-4 h-4"}),e[16]=b):b=e[16],e[17]!==r||e[18]!==n?(y=h.jsx(qu,{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:!0,icon:b,toType:"python",displayName:"Python",onAfterToggle:In.NOOP}),e[17]=r,e[18]=n,e[19]=y):y=e[19],e[20]!==p||e[21]!==y||e[22]!==m?(x=h.jsxs("div",{className:"absolute right-3 top-2 z-20 flex hover-action gap-1",children:[m,p,y]}),e[20]=p,e[21]=y,e[22]=m,e[23]=x):x=e[23],x},qu=t=>{const e=X.c(10),{editorView:n,currentLanguageAdapter:o,canSwitchToLanguage:r,icon:s,toType:i,displayName:a,onAfterToggle:l}=t;let c;e[0]!==n||e[1]!==l||e[2]!==i?(c=()=>{n&&(Pr(n,i),l())},e[0]=n,e[1]=l,e[2]=i,e[3]=c):c=e[3];const d=c;if(!r||o===i)return null;const u=`View as ${a}`;let f,m;return e[4]!==d||e[5]!==s?(f=h.jsx(Pe,{"data-testid":"language-toggle-button",variant:"text",size:"xs",className:"opacity-80 px-1",onClick:d,children:s}),e[4]=d,e[5]=s,e[6]=f):f=e[6],e[7]!==u||e[8]!==f?(m=h.jsx(Le,{content:u,children:f}),e[7]=u,e[8]=f,e[9]=m):m=e[9],m},yx=({theme:t,showPlaceholder:e,allowFocus:n,id:o,config:r,code:s,status:i,serializedEditorState:a,setEditorView:l,runCell:c,userConfig:d,editorViewRef:u,editorViewParentRef:f,hidden:m,hasOutput:_,temporarilyShowCode:g,languageAdapter:p,setLanguageAdapter:b,showLanguageToggles:y=!0})=>{var re;const[x,v]=fn(La),S=$U(),k=fd(),{saveOrNameNotebook:E}=Hg(),j=i==="running"||i==="queued",I=Ft(),T=sg(),M=p==="markdown",L=tt(()=>!j&&(k({cellId:o}),!0)),B=tt(()=>!j&&(c(),!0)),O=tt(()=>{const ne=!r.hide_code;return Lr({configs:{[o]:{hide_code:ne}}}),I.updateCellConfig({cellId:o,config:{hide_code:ne}}),ne}),z=$e(Ls),F=tt(()=>{hr(z,I.createNewCell)}),V=WU(d),R=A.useMemo(()=>{const ne=g5({cellId:o,showPlaceholder:e,enableAI:V,cellActions:{...I,afterToggleMarkdown:F,onRun:B,deleteCell:L,saveNotebook:E,createManyBelow:oe=>{for(const G of[...oe].reverse())I.createNewCell({code:G,before:!1,cellId:o,skipIfCodeExists:!0})},splitCell:T,toggleHideCode:O,aiCellCompletion:()=>{let oe=!1;return v(G=>(G==null?void 0:G.cellId)===o?(oe=!0,null):{cellId:o}),oe}},completionConfig:d.completion,keymapConfig:d.keymap,lspConfig:d.language_servers,theme:t,hotkeys:new B4(d.keymap.overrides??{}),diagnosticsConfig:d.diagnostics});return ne.push(Tn.define(oe=>{const G=oe.state.field(Pc);return b(G.type),{update(Q){const ce=Q.state.field(Pc);b(ce.type)}}}),st.updateListener.of(oe=>{oe.selectionSet&&oe.state.selection.ranges.some(G=>G.from!==G.to)&&g({focus:!1})})),ne},[o,d.keymap,d.completion,d.language_servers,d.diagnostics,V,t,e,I,T,O,L,B,v,F,b,g,E]),C=ya(),H=tt(()=>{if(C){const oe=Pu(o,0,s);R.push(oe.extension),s=oe.code}const ne=new st({state:mr.create({doc:s,extensions:R})});l(ne),C||Pr(ne,Bm(ne.state).type)}),N=tt(()=>{if(Bo(u.current!==null,"Editor view is not initialized"),C){const ne=Pu(o);R.push(ne.extension)}u.current.dispatch({effects:[zt.reconfigure.of([R]),qU(u.current,d.completion,new B4(d.keymap.overrides??{}),{...d.language_servers,diagnostics:d.diagnostics})]})}),$=tt(()=>{if(Bo(a,"Editor view is not initialized"),C){const oe=Pu(o,0,s);R.push(oe.extension),s=oe.code}const ne=new st({state:mr.fromJSON(a,{doc:s,extensions:R},{history:GU})});C||Pr(ne,Bm(ne.state).type),l(ne),I.clearSerializedEditorState({cellId:o})});A.useEffect(()=>{a===null?u.current===null?H():N():$(),u.current!==null&&f&&f.current!==null&&f.current.replaceChildren(u.current.dom)},[H,N,$,u,f,a,R]);const Y=(u.current===null||a!==null)&&!ya();A.useEffect(()=>{const ne=ct.get(fc).scrollKey!==null;Y&&n&&!ne&&requestAnimationFrame(()=>{var oe,G;(oe=u.current)==null||oe.focus(),(G=u.current)==null||G.dom.scrollIntoView({behavior:"smooth",block:"nearest"})})},[Y,n,u]),A.useEffect(()=>{const ne=u.current;return()=>{ne==null||ne.destroy()}},[u]);const Z=m&&!M||m&&M&&!_;let q="";return M&&m&&_?q="h-0 overflow-hidden":m&&(q="opacity-20 h-8 overflow-hidden"),h.jsx(nM,{enabled:(x==null?void 0:x.cellId)===o,initialPrompt:x==null?void 0:x.initialPrompt,currentCode:((re=u.current)==null?void 0:re.state.doc.toString())??s,currentLanguageAdapter:p,declineChange:tt(()=>{var ne;v(null),(ne=u.current)==null||ne.focus()}),onChange:tt(ne=>{var oe;(oe=u.current)==null||oe.dispatch({changes:{from:0,to:u.current.state.doc.length,insert:ne}})}),acceptChange:tt(ne=>{var oe,G;(oe=u.current)==null||oe.dispatch({changes:{from:0,to:u.current.state.doc.length,insert:ne}}),(G=u.current)==null||G.focus(),v(null)}),children:h.jsxs("div",{className:"relative w-full",onFocus:()=>S(o),children:[Z&&h.jsx(U4,{tooltip:"Edit code",className:"absolute inset-0 z-10",onClick:g}),h.jsx(xx,{className:q,editorView:u.current,ref:f}),!m&&y&&h.jsx("div",{className:"absolute top-1 right-5",children:h.jsx(rM,{code:s,editorView:u.current,currentLanguageAdapter:p,onAfterToggle:F})})]})})},xx=K.forwardRef((t,e)=>{const n=X.c(10),{className:o,editorView:r}=t,s=A.useRef(null);let i,a,l,c,d;return n[0]!==r?(i=()=>{r!==null&&s.current!==null&&s.current.children.length===0&&s.current.append(r.dom)},a=[r,s],n[0]=r,n[1]=i,n[2]=a):(i=n[1],a=n[2]),A.useEffect(i,a),n[3]!==o?(l=Oe("cm mathjax_ignore",o),n[3]=o,n[4]=l):l=n[4],n[5]!==e?(c=u=>{e?jl(e,s)(u):jl(s)(u)},n[5]=e,n[6]=c):c=n[6],n[7]!==l||n[8]!==c?(d=h.jsx("div",{className:l,ref:c,"data-testid":"cell-editor"}),n[7]=l,n[8]=c,n[9]=d):d=n[9],d});xx.displayName="CellCodeMirrorEditor";const Gu=ya()?function(t){const e=n=>{const o=X.c(5),r=$e(mn),[s,i]=fn(ts);if(r.state===mt.CONNECTING||s===void 0){let l,c;return o[0]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx("span",{children:"Waiting for real-time collaboration connection..."}),o[0]=l):l=o[0],o[1]!==i?(c=h.jsx("div",{className:"flex h-full w-full items-baseline p-4",children:h.jsxs(Wm,{milliseconds:1e3,fallback:null,children:[l,h.jsx(Pe,{variant:"link",onClick:()=>{i("disabled")},children:"Turn off real-time collaboration"})]})}),o[1]=i,o[2]=c):c=o[2],c}let a;return o[3]!==n?(a=h.jsx(t,{...n}),o[3]=n,o[4]=a):a=o[4],a};return e.displayName=`WithWaitUntilConnected(${t.displayName})`,e}(A.memo(yx)):A.memo(yx),sM=t=>{const e=X.c(10);let n,o,r,s;return e[0]!==t.left?(n=h.jsx("div",{className:"flex-1 flex item-center gap-2",children:t.left}),e[0]=t.left,e[1]=n):n=e[1],e[2]!==t.center?(o=h.jsx("div",{className:"flex-1 flex item-center gap-2 justify-center",children:t.center}),e[2]=t.center,e[3]=o):o=e[3],e[4]!==t.right?(r=h.jsx("div",{className:"flex-1 flex item-center gap-2 justify-end",children:t.right}),e[4]=t.right,e[5]=r):r=e[5],e[6]!==n||e[7]!==o||e[8]!==r?(s=h.jsxs("div",{className:"flex items-center gap-2 w-full px-3",children:[n,o,r]}),e[6]=n,e[7]=o,e[8]=r,e[9]=s):s=e[9],s},iM=t=>{const e=X.c(8);if(!t.canCollapse&&!t.isCollapsed)return null;const n=t.isCollapsed?"Expand":"Collapse";let o,r,s;return e[0]!==t.isCollapsed?(o=h.jsx("span",{children:h.jsx(aM,{isCollapsed:t.isCollapsed})}),e[0]=t.isCollapsed,e[1]=o):o=e[1],e[2]!==n||e[3]!==o?(r=h.jsx(Le,{content:n,children:o}),e[2]=n,e[3]=o,e[4]=r):r=e[4],e[5]!==t.onClick||e[6]!==r?(s=h.jsx(Pe,{variant:"text",size:"icon",onClick:t.onClick,children:r}),e[5]=t.onClick,e[6]=r,e[7]=s):s=e[7],s},aM=t=>{const e=X.c(2),{isCollapsed:n}=t;let o;return e[0]!==n?(o=n?h.jsx(bc,{className:"w-5 h-5 flex-shrink-0"}):h.jsx(ra,{className:"w-5 h-5 flex-shrink-0"}),e[0]=n,e[1]=o):o=e[1],o},wx=A.memo(t=>{const e=X.c(24),{onClick:n,count:o,cellId:r}=t,s=Ec();let i;e[0]!==r||e[1]!==s?(i=YU(s,r),e[0]=r,e[1]=s,e[2]=i):i=e[2];const a=i;let l,c;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=Oe("flex items-center justify-between w-[calc(100%-2rem)] h-9 bg-muted rounded-b mx-4 opacity-80 hover:opacity-100 cursor-pointer"),e[3]=l):l=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(JU,{className:"w-4 h-4 flex-shrink-0"}),e[4]=c):c=e[4];const d=o===1?"cell":"cells";let u,f,m,_,g,p,b;return e[5]!==o||e[6]!==d?(u=h.jsxs(h.Fragment,{children:[c,h.jsxs("span",{className:"text-sm text-gray-500",children:[o," ",d," collapsed"]})]}),e[5]=o,e[6]=d,e[7]=u):u=e[7],e[8]!==a.errored?(f=a.errored&&h.jsx(Le,{content:"Has errors",delayDuration:100,children:h.jsx(Pp,{className:"w-4 h-4 flex-shrink-0 text-destructive"})}),e[8]=a.errored,e[9]=f):f=e[9],e[10]!==a.stale?(m=a.stale&&h.jsx(Le,{content:"Has stale cells",delayDuration:100,children:h.jsx(V4,{className:"w-4 h-4 flex-shrink-0 text-[var(--yellow-11)]"})}),e[10]=a.stale,e[11]=m):m=e[11],e[12]!==a.runningOrQueued?(_=a.runningOrQueued&&h.jsx(Le,{content:"Running",delayDuration:100,children:h.jsx($m,{className:"w-4 h-4 flex-shrink-0 animate-spin"})}),e[12]=a.runningOrQueued,e[13]=_):_=e[13],e[14]!==f||e[15]!==m||e[16]!==_?(g=h.jsxs(h.Fragment,{children:[f,m,_]}),e[14]=f,e[15]=m,e[16]=_,e[17]=g):g=e[17],e[18]!==u||e[19]!==g?(p=h.jsx(sM,{center:u,right:g}),e[18]=u,e[19]=g,e[20]=p):p=e[20],e[21]!==n||e[22]!==p?(b=h.jsx("div",{onClick:n,className:l,children:p}),e[21]=n,e[22]=p,e[23]=b):b=e[23],b});wx.displayName="CollapsedCellBanner";const vx=t=>{const e=X.c(31),{status:n,connectionState:o,onClick:r}=t,s=n==="running"||n==="queued";let i,a,l,c,d,u,f,m,_,g,p,b,y,x;if(e[0]!==o||e[1]!==s||e[2]!==r||e[3]!==n){const v=qo(o);let S;if(v){let k;e[14]!==o?(k=Fd(o),e[14]=o,e[15]=k):k=e[15],S=k}else S=n==="running"?"A cell can't be deleted when it's running":n==="queued"?"A cell can't be deleted when it's queued to run":"Delete";a=Le,_=S,g=!1,i=Pe,l="ghost",c="icon",d=r,u="delete-button",f=$n.preventFocus,m=Oe("hover:bg-transparent text-destructive/60 hover:text-destructive",(v||s)&&"inactive-button"),e[0]=o,e[1]=s,e[2]=r,e[3]=n,e[4]=i,e[5]=a,e[6]=l,e[7]=c,e[8]=d,e[9]=u,e[10]=f,e[11]=m,e[12]=_,e[13]=g}else i=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],f=e[10],m=e[11],_=e[12],g=e[13];return e[16]===Symbol.for("react.memo_cache_sentinel")?(p={boxShadow:"none"},b=h.jsx(cm,{size:14}),e[16]=p,e[17]=b):(p=e[16],b=e[17]),e[18]!==i||e[19]!==l||e[20]!==c||e[21]!==d||e[22]!==u||e[23]!==f||e[24]!==m?(y=h.jsx(i,{variant:l,size:c,onClick:d,"data-testid":u,onMouseDown:f,className:m,style:p,children:b}),e[18]=i,e[19]=l,e[20]=c,e[21]=d,e[22]=u,e[23]=f,e[24]=m,e[25]=y):y=e[25],e[26]!==a||e[27]!==y||e[28]!==_||e[29]!==g?(x=h.jsx(a,{content:_,usePortal:g,children:y}),e[26]=a,e[27]=y,e[28]=_,e[29]=g,e[30]=x):x=e[30],x},lM=t=>{const e=X.c(27),{onClick:n,connectionState:o,needsRun:r,status:s,config:i,edited:a}=t,l=s==="disabled-transitively",c=s==="running"||s==="queued";let d,u;e[0]!==l||e[1]!==i.disabled||e[2]!==o||e[3]!==a||e[4]!==c||e[5]!==r?(d=qo(o)||c||!i.disabled&&l&&!a,u=function(p,b,y,x){return qo(p)?"disabled":b&&!y?"stale":y||x?"disabled":"green"}(o,r,c,d),e[0]=l,e[1]=i.disabled,e[2]=o,e[3]=a,e[4]=c,e[5]=r,e[6]=d,e[7]=u):(d=e[6],u=e[7]);const f=u;if(i.disabled){let p,b;return e[8]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(Np,{}),e[8]=p):p=e[8],e[9]!==d||e[10]!==n||e[11]!==f?(b=h.jsx(mi,{tooltip:"Add code to notebook",disabled:d,onClick:n,variant:f,"data-testid":"run-button",children:p}),e[9]=d,e[10]=n,e[11]=f,e[12]=b):b=e[12],b}if(!i.disabled&&l&&!a){let p,b;return e[13]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(ri,{strokeWidth:1.2}),e[13]=p):p=e[13],e[14]!==d||e[15]!==n||e[16]!==f?(b=h.jsx(mi,{disabled:d,tooltip:"This cell can't be run because it has a disabled ancestor",onClick:n,variant:f,"data-testid":"run-button",children:p}),e[14]=d,e[15]=n,e[16]=f,e[17]=b):b=e[17],b}let m,_,g;if(qo(o)){let p;e[18]!==o?(p=Fd(o),e[18]=o,e[19]=p):p=e[19],m=p}else if(s==="queued")m="This cell is already queued to run";else if(s==="running")m="This cell is already running.";else{let p;e[20]===Symbol.for("react.memo_cache_sentinel")?(p=pn("cell.run"),e[20]=p):p=e[20],m=p}return e[21]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx(ri,{strokeWidth:1.2}),e[21]=_):_=e[21],e[22]!==d||e[23]!==n||e[24]!==m||e[25]!==f?(g=h.jsx(mi,{tooltip:m,disabled:d,onClick:n,variant:f,"data-testid":"run-button",children:_}),e[22]=d,e[23]=n,e[24]=m,e[25]=f,e[26]=g):g=e[26],g},kx=K.createContext(null),Sx=A.memo(()=>A.use(kx));Sx.displayName="DragHandle";const Cx=K.forwardRef((t,e)=>{const n=X.c(21);let o,r,s,i,a;n[0]!==t?({cellId:r,canMoveX:o,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]),n[4]!==r?(i=r.toString(),n[4]=r,n[5]=i):i=n[5],n[6]!==i?(a={id:i},n[6]=i,n[7]=a):a=n[7];const{attributes:l,listeners:c,setNodeRef:d,transform:u,transition:f,isDragging:m}=S1(a);let _;n[8]!==u?(_=function(y){return!y||y.x===0&&y.y===0&&y.scaleX===1&&y.scaleY===1}(u)?null:u,n[8]=u,n[9]=_):_=n[9];const g=_,p=g==null?void 0:f;let b;return n[10]!==l||n[11]!==o||n[12]!==r||n[13]!==m||n[14]!==c||n[15]!==s||n[16]!==e||n[17]!==d||n[18]!==g||n[19]!==p?(b=h.jsx(Nx,{ref:e,cellId:r,canMoveX:o,...s,attributes:l,listeners:c,setNodeRef:d,transform:g,transition:p,isDragging:m}),n[10]=l,n[11]=o,n[12]=r,n[13]=m,n[14]=c,n[15]=s,n[16]=e,n[17]=d,n[18]=g,n[19]=p,n[20]=b):b=n[20],b});Cx.displayName="SortableCell";const Nx=K.forwardRef((t,e)=>{const n=X.c(37);let o,r,s,i,a,l,c,d,u,f;if(n[0]!==t){const{cellId:I,canMoveX:T,children:M,attributes:L,listeners:B,setNodeRef:O,transform:z,transition:F,isDragging:V,...R}=t;r=T,s=M,o=L,a=B,c=O,d=z,u=F,i=V,l=R,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i,n[5]=a,n[6]=l,n[7]=c,n[8]=d,n[9]=u}else o=n[1],r=n[2],s=n[3],i=n[4],a=n[5],l=n[6],c=n[7],d=n[8],u=n[9];n[10]!==r||n[11]!==d?(f=d?Mc.Transform.toString({x:r?d.x:0,y:d.y,scaleX:1,scaleY:1}):void 0,n[10]=r,n[11]=d,n[12]=f):f=n[12];const m=i?2:void 0;let _;n[13]!==f||n[14]!==m||n[15]!==u?(_={transform:f,transition:u,zIndex:m,position:"relative"},n[13]=f,n[14]=m,n[15]=u,n[16]=_):_=n[16];const g=_;let p,b;n[17]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(Cp,{strokeWidth:1,size:20}),n[17]=p):p=n[17],n[18]!==o||n[19]!==a?(b=h.jsx("div",{...o,...a,onMouseDown:$n.preventFocus,"data-testid":"drag-button",className:"py-[1px] cursor-grab opacity-50 hover:opacity-100 hover-action hover:bg-muted rounded border border-transparent hover:border-border active:bg-accent",children:p}),n[18]=o,n[19]=a,n[20]=b):b=n[20];const y=b,x=!!d;let v;n[21]!==e||n[22]!==c?(v=I=>{jl(e,c)(I)},n[21]=e,n[22]=c,n[23]=v):v=n[23];const S=x&&"is-moving";let k,E,j;return n[24]!==l.className||n[25]!==S?(k=Oe(l.className,S,"outline-offset-4 outline-primary/40 rounded-lg"),n[24]=l.className,n[25]=S,n[26]=k):k=n[26],n[27]!==s||n[28]!==y?(E=h.jsx(kx.Provider,{value:y,children:s}),n[27]=s,n[28]=y,n[29]=E):E=n[29],n[30]!==i||n[31]!==l||n[32]!==g||n[33]!==v||n[34]!==k||n[35]!==E?(j=h.jsx("div",{tabIndex:-1,ref:v,...l,"data-is-dragging":i,className:k,style:g,children:E}),n[30]=i,n[31]=l,n[32]=g,n[33]=v,n[34]=k,n[35]=E,n[36]=j):j=n[36],j});function jx(t,e){const n=X.c(9);let o;n[0]!==t.current||n[1]!==e?(o=l=>{t.current===null||t.current.contains(l.relatedTarget)||e.current===null||sm(e.current)},n[0]=t.current,n[1]=e,n[2]=o):o=n[2];const r=tt(o);let s;n[3]!==t.current||n[4]!==e?(s=l=>{if(t.current===document.activeElement&&e.current!==null&&ga(e.current.state)==="active"){for(const c of S4)if(l.key===c.key&&c.run){c.run(e.current),l.preventDefault(),l.stopPropagation();break}e.current.focus()}},n[3]=t.current,n[4]=e,n[5]=s):s=n[5];const i=tt(s);let a;return n[6]!==r||n[7]!==i?(a={closeCompletionHandler:r,resumeCompletionHandler:i},n[6]=r,n[7]=i,n[8]=a):a=n[8],a}function Ex(t,e,n,o,r,s,i,a,l){const c=X.c(51);let d,u,f,m,_,g,p,b,y,x,v,S,k,E,j,I;c[0]!==o||c[1]!==e||c[2]!==n?(d=()=>{n(),o.moveToNextCell({cellId:e,before:!1})},u=()=>{n(),o.moveToNextCell({cellId:e,before:!0})},c[0]=o,c[1]=e,c[2]=n,c[3]=d,c[4]=u):(d=c[3],u=c[4]),c[5]!==o||c[6]!==e?(f=()=>o.createNewCell({cellId:e,before:!0}),m=()=>o.createNewCell({cellId:e,before:!1}),_=()=>o.moveCell({cellId:e,before:!0}),g=()=>o.moveCell({cellId:e,before:!1}),c[5]=o,c[6]=e,c[7]=f,c[8]=m,c[9]=_,c[10]=g):(f=c[7],m=c[8],_=c[9],g=c[10]),c[11]!==o||c[12]!==r||c[13]!==e?(p=()=>r?o.moveCell({cellId:e,direction:"left"}):void 0,b=()=>r?o.moveCell({cellId:e,direction:"right"}):void 0,c[11]=o,c[12]=r,c[13]=e,c[14]=p,c[15]=b):(p=c[14],b=c[15]),c[16]!==o||c[17]!==s||c[18]!==e||c[19]!==(t==null?void 0:t.current)||c[20]!==i?(y=()=>{var M,L,B;const T=!s.hide_code;Lr({configs:{[e]:{hide_code:T}}}),o.updateCellConfig({cellId:e,config:{hide_code:T}}),T?((M=i.current)==null||M.contentDOM.blur(),(L=t==null?void 0:t.current)==null||L.focus()):(B=i.current)==null||B.focus()},c[16]=o,c[17]=s,c[18]=e,c[19]=t==null?void 0:t.current,c[20]=i,c[21]=y):y=c[21],c[22]!==o||c[23]!==e?(k=()=>o.moveToNextCell({cellId:e,before:!1,noCreate:!0}),x=()=>o.moveToNextCell({cellId:e,before:!0,noCreate:!0}),v=()=>o.sendToBottom({cellId:e}),S=()=>o.sendToTop({cellId:e}),c[22]=o,c[23]=e,c[24]=x,c[25]=v,c[26]=S,c[27]=k):(x=c[24],v=c[25],S=c[26],k=c[27]),c[28]!==e||c[29]!==i||c[30]!==a?(E=()=>{let T;T=!1,a(M=>(M==null?void 0:M.cellId)===e?(T=!0,null):{cellId:e}),T&&U_(i).focus()},c[28]=e,c[29]=i,c[30]=a,c[31]=E):E=c[31],c[32]!==l?(j=()=>{var T;(T=l.current)==null||T.toggle()},c[32]=l,c[33]=j):j=c[33],c[34]!==n||c[35]!==d||c[36]!==u||c[37]!==x||c[38]!==v||c[39]!==S||c[40]!==E||c[41]!==j||c[42]!==f||c[43]!==m||c[44]!==_||c[45]!==g||c[46]!==p||c[47]!==b||c[48]!==y||c[49]!==k?(I={"cell.run":n,"cell.runAndNewBelow":d,"cell.runAndNewAbove":u,"cell.createAbove":f,"cell.createBelow":m,"cell.moveUp":_,"cell.moveDown":g,"cell.moveLeft":p,"cell.moveRight":b,"cell.hideCode":y,"cell.focusDown":k,"cell.focusUp":x,"cell.sendToBottom":v,"cell.sendToTop":S,"cell.aiCompletion":E,"cell.cellActions":j},c[34]=n,c[35]=d,c[36]=u,c[37]=x,c[38]=v,c[39]=S,c[40]=E,c[41]=j,c[42]=f,c[43]=m,c[44]=_,c[45]=g,c[46]=p,c[47]=b,c[48]=y,c[49]=k,c[50]=I):I=c[50],ZU(t,I)}function Ix(t,e,n,o,r,s){const i=X.c(16);let a,l,c,d,u;i[0]!==n||i[1]!==e?(a=f=>(!f||!$n.fromInput(f))&&(n.moveToNextCell({cellId:e,before:!1,noCreate:!0}),!0),l=f=>(!f||!$n.fromInput(f))&&(n.moveToNextCell({cellId:e,before:!0,noCreate:!0}),!0),i[0]=n,i[1]=e,i[2]=a,i[3]=l):(a=i[2],l=i[3]),i[4]!==o?(c=()=>(o(),!1),i[4]=o,i[5]=c):c=i[5],i[6]!==n||i[7]!==e||i[8]!==s||i[9]!==r.keymap.preset?(d=r.keymap.preset!=="vim"||s?{}:{j:f=>(!f||!$n.fromInput(f))&&(n.moveToNextCell({cellId:e,before:!1,noCreate:!0}),!0),k:f=>(!f||!$n.fromInput(f))&&(n.moveToNextCell({cellId:e,before:!0,noCreate:!0}),!0)},i[6]=n,i[7]=e,i[8]=s,i[9]=r.keymap.preset,i[10]=d):d=i[10],i[11]!==a||i[12]!==l||i[13]!==c||i[14]!==d?(u={ArrowDown:a,ArrowUp:l,Enter:c,...d},i[11]=a,i[12]=l,i[13]=c,i[14]=d,i[15]=u):u=i[15],QU(t,u)}Nx.displayName="SortableCellInternal";const Ax=A.forwardRef((t,e)=>{const n=X.c(14),{id:o,output:r,interrupted:s,errored:i,stopped:a,name:l,outputStale:c,outputLoading:d}=t;let u;n[0]===Symbol.for("react.memo_cache_sentinel")?(u=qm("marimo-cell","hover-actions-parent z-10",{published:!0}),n[0]=u):u=n[0];const f=u;let m;n[1]!==o?(m=Ps.create(o),n[1]=o,n[2]=m):m=n[2];const _=m,g=W4(r==null?void 0:r.mimetype);if(i||s||a||g)return null;let p,b;return n[3]!==o||n[4]!==r||n[5]!==d||n[6]!==c?(p=h.jsx(Uc,{allowExpand:!1,forceExpand:!0,output:r,className:"output-area",cellId:o,stale:c,loading:d}),n[3]=o,n[4]=r,n[5]=d,n[6]=c,n[7]=p):p=n[7],n[8]!==_||n[9]!==o||n[10]!==l||n[11]!==e||n[12]!==p?(b=h.jsx("div",{tabIndex:-1,id:_,ref:e,className:f,"data-cell-id":o,"data-cell-name":l,children:p}),n[8]=_,n[9]=o,n[10]=l,n[11]=e,n[12]=p,n[13]=b):b=n[13],b});Ax.displayName="ReadonlyCellComponent";const cM=({theme:t,showPlaceholder:e,allowFocus:n,id:o,code:r,output:s,consoleOutputs:i,status:a,runStartTimestamp:l,lastRunStartTimestamp:c,runElapsedTimeMs:d,edited:u,interrupted:f,errored:m,stopped:_,staleInputs:g,serializedEditorState:p,serialization:b,debuggerActive:y,connectionState:x,canDelete:v,actions:S,deleteCell:k,userConfig:E,outline:j,isCollapsed:I,collapseCount:T,config:M,canMoveX:L,name:B,editorView:O,setEditorView:z,outputStale:F})=>{const V=A.useRef(null),R=A.useRef(null),C=A.useRef(null),H=A.useRef(null),N=Zt(La),$=ld(o),[Y,Z]=A.useState(),q=M.disabled||a==="disabled-transitively",re=q4({executionTime:d,status:a,errored:m,interrupted:f,stopped:_}),ne=u||f||g&&!q,oe=H4(a),G=(a==="queued"||u||g)&&!f,Q=A.useCallback(()=>O.current,[O]),{closeCompletionHandler:ce,resumeCompletionHandler:me}=jx(V,O),{isCellCodeShown:de,isMarkdown:ge,isMarkdownCodeHidden:ie,temporarilyShowCode:we,showHiddenMarkdownCode:ve}=function(he,_e,ue,ye){const Ne=X.c(13),[Be,et]=A.useState(!1),le=!he.hide_code||Be,Ee=_e==="markdown",Ie=Ee&&!le;let Ve;Ne[0]!==ue||Ne[1]!==ye||Ne[2]!==le?(Ve=Xe=>{var Ot,wt;if(le)return;const rt=(Xe==null?void 0:Xe.focus)??!0;et(!0),rt&&((Ot=ue.current)==null||Ot.focus());const gt=(wt=ye.current)==null?void 0:wt.parentElement;if(!gt)return void Qt.error("Cell: No parent element found for editor view");const xt=()=>{requestAnimationFrame(()=>{var Vt;gt.contains(document.activeElement)||(et(!1),(Vt=ue.current)==null||Vt.dom.blur(),gt.removeEventListener("focusout",xt))})};gt.addEventListener("focusout",xt)},Ne[0]=ue,Ne[1]=ye,Ne[2]=le,Ne[3]=Ve):Ve=Ne[3];const Ge=tt(Ve);let De;Ne[4]!==Ie||Ne[5]!==Ge?(De=()=>{Ie&&Ge({focus:!0})},Ne[4]=Ie,Ne[5]=Ge,Ne[6]=De):De=Ne[6];const Je=tt(De);let ot;return Ne[7]!==le||Ne[8]!==Ee||Ne[9]!==Ie||Ne[10]!==Je||Ne[11]!==Ge?(ot={isCellCodeShown:le,isMarkdown:Ee,isMarkdownCodeHidden:Ie,temporarilyShowCode:Ge,showHiddenMarkdownCode:Je},Ne[7]=le,Ne[8]=Ee,Ne[9]=Ie,Ne[10]=Je,Ne[11]=Ge,Ne[12]=ot):ot=Ne[12],ot}(M,Y,O,C);Ex(V,o,$,S,L,M,O,N,R),Ix(V,o,S,ve,E,de);const ae=XU(j),Se=!$4(s),pe=i.length>0,Te=E.display.cell_output,Re=Se&&Te==="above",We=Se&&Te==="below",[ze,Ce]=A.useState(!1),[qe,Ze]=A.useState(!1);(function(he){const{ref:_e,box:ue="content-box",skip:ye}=he,Ne=A.useRef({...b5}),Be=A.useRef(void 0);Be.current=he.onResize,A.useEffect(()=>{if(!_e.current||ye||typeof window>"u"||!("ResizeObserver"in window))return;const et=new ResizeObserver(([le])=>{const Ee=ue==="border-box"?"borderBoxSize":ue==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",Ie=B_(le,Ee,"inlineSize"),Ve=B_(le,Ee,"blockSize");if(Ne.current.width!==Ie||Ne.current.height!==Ve){const Ge={width:Ie,height:Ve};Ne.current.width=Ie,Ne.current.height=Ve,Be.current&&Be.current(Ge)}});return et.observe(_e.current,{box:ue}),()=>{et.disconnect()}},[ue,_e,ye])})({ref:H,skip:!ge,onResize:he=>{const _e=he.height&&he.height<68,ue=ie&&(_e||Te==="below");Ce(ue),ae&&ue?Ze(!0):qe&&Ze(!1)}});const at=he=>h.jsx(U4,{tooltip:"Edit markdown",className:Oe("z-20 relative",he),onClick:we}),te=Se&&h.jsxs("div",{className:"relative",onDoubleClick:ve,children:[h.jsx("div",{className:"absolute top-5 -left-8 z-10 print:hidden",children:h.jsx(iM,{isCollapsed:I,onClick:()=>{I?S.expandCell({cellId:o}):S.collapseCell({cellId:o})},canCollapse:ae})}),ie&&We&&at("top-3"),h.jsx(Uc,{allowExpand:!0,forceExpand:ie,output:s,className:"output-area",cellId:o,stale:F,loading:oe}),ie&&Re&&at("bottom-3")]}),je=qm("marimo-cell","hover-actions-parent z-10",{interactive:!0,"needs-run":ne,"has-error":m,stopped:_,disabled:M.disabled,stale:a==="disabled-transitively",borderless:ie&&Se}),Me=Ps.create(o),Ue=tt(he=>{N({cellId:o,initialPrompt:he.prompt})}),J=!(!b||b.toLowerCase()!=="valid");return h.jsx(Gm,{children:h.jsx(k0,{cellId:o,config:M,status:a,getEditorView:Q,hasOutput:Se,hasConsoleOutput:pe,name:B,children:h.jsxs(Cx,{tabIndex:-1,ref:V,"data-status":a,onBlur:ce,onKeyDown:me,cellId:o,canMoveX:L,title:M.disabled?"This cell is disabled":a==="disabled-transitively"?"This cell has a disabled ancestor":void 0,children:[h.jsxs("div",{className:je,id:Me,ref:H,"data-cell-id":o,"data-cell-name":B,children:[Te==="above"&&te,h.jsxs("div",{className:Oe("tray"),"data-hidden":ie,children:[h.jsx("div",{className:"absolute right-2 -top-4 z-10",children:h.jsx(Mx,{edited:u,connectionState:x,status:a,cellConfig:M,needsRun:ne,hasOutput:Se,hasConsoleOutput:pe,cellActionDropdownRef:R,cellId:o,name:B,getEditorView:Q,onRun:$})}),h.jsx(dM,{cellId:o,className:Oe(ie&&Re&&"-top-7",ie&&We&&"-bottom-8",ie&&qe&&"-left-[3.8rem]"),connectionState:x,actions:S}),h.jsx(Gu,{theme:t,showPlaceholder:e,allowFocus:n,id:o,code:r,config:M,status:a,serializedEditorState:p,runCell:$,setEditorView:z,userConfig:E,editorViewRef:O,editorViewParentRef:C,hidden:!de,hasOutput:Se,temporarilyShowCode:we,languageAdapter:Y,setLanguageAdapter:Z}),h.jsx(Tx,{className:Oe(ie&&Te==="below"&&"top-14"),edited:u,status:a,isCellStatusInline:ze,uninstantiated:re,disabled:M.disabled,runElapsedTimeMs:d,runStartTimestamp:l,lastRunStartTimestamp:c,staleInputs:g,interrupted:f}),h.jsx("div",{className:"shoulder-bottom hover-action",children:v&&de&&h.jsx(vx,{connectionState:x,status:a,onClick:()=>{oe||qo(x)||k({cellId:o})}})})]}),Te==="below"&&te,b&&h.jsxs("a",{href:"https://links.marimo.app/reusable-definitions",target:"_blank",className:"hover:underline py-1 px-2 flex items-center justify-end gap-2 last:rounded-b",rel:"noopener",children:[J&&h.jsx("span",{className:"text-muted-foreground text-xs font-bold",children:"reusable"}),h.jsx(Le,{content:h.jsx("span",{className:"max-w-16 text-xs",children:J?"This function or class can be imported into other Python notebooks or modules.":h.jsxs(h.Fragment,{children:["This definition can't be reused in other Python modules:",h.jsx("br",{}),h.jsx("br",{}),h.jsx("pre",{children:b}),h.jsx("br",{}),"Click this icon to learn more."]})}),children:J&&h.jsx(uc,{size:16,strokeWidth:1.5,className:"rounded-lg text-muted-foreground"})||h.jsx(Ym,{size:16,strokeWidth:1.5,className:"rounded-lg text-muted-foreground"})})]}),h.jsx(ip,{consoleOutputs:i,stale:G,cellName:b?"_":B,onRefactorWithAI:Ue,onClear:()=>{S.clearCellConsoleOutput({cellId:o})},onSubmitDebugger:(he,_e)=>{S.setStdinResponse({cellId:o,response:he,outputIndex:_e}),G4({text:he})},cellId:o,debuggerActive:y})]}),I&&h.jsx(wx,{onClick:()=>S.expandCell({cellId:o}),count:T,cellId:o})]})})})},Tx=t=>{const e=X.c(19),{className:n,disabled:o,edited:r,interrupted:s,isCellStatusInline:i,lastRunStartTimestamp:a,runElapsedTimeMs:l,runStartTimestamp:c,staleInputs:d,status:u,uninstantiated:f}=t,m=o!==void 0&&o;let _;e[0]!==m||e[1]!==r||e[2]!==s||e[3]!==a||e[4]!==l||e[5]!==c||e[6]!==d||e[7]!==u||e[8]!==f?(_=h.jsx($_,{status:u,staleInputs:d,interrupted:s,editing:!0,edited:r,disabled:m,elapsedTime:l,runStartTimestamp:c,uninstantiated:f,lastRunStartTimestamp:a}),e[0]=m,e[1]=r,e[2]=s,e[3]=a,e[4]=l,e[5]=c,e[6]=d,e[7]=u,e[8]=f,e[9]=_):_=e[9];const g=_;let p;e[10]!==n?(p=Oe("shoulder-right z-20",n),e[10]=n,e[11]=p):p=e[11];const b=!i&&g;let y;e[12]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx(Sx,{}),e[12]=y):y=e[12];const x=i&&g;let v,S;return e[13]!==x?(v=h.jsxs("div",{className:"flex gap-2 items-end",children:[y,x]}),e[13]=x,e[14]=v):v=e[14],e[15]!==p||e[16]!==b||e[17]!==v?(S=h.jsxs("div",{className:p,children:[b,v]}),e[15]=p,e[16]=b,e[17]=v,e[18]=S):S=e[18],S},dM=t=>{const e=X.c(21),{className:n,connectionState:o,actions:r,cellId:s}=t;let i;e[0]!==r||e[1]!==s?(i=v=>{const S=v===void 0?{}:v;return r.createNewCell({cellId:s,before:!1,...S})},e[0]=r,e[1]=s,e[2]=i):i=e[2];const a=tt(i);let l;e[3]!==r||e[4]!==s?(l=v=>{const S=v===void 0?{}:v;return r.createNewCell({cellId:s,before:!0,...S})},e[3]=r,e[4]=s,e[5]=l):l=e[5];const c=tt(l),d=Qa(o);let u,f;e[6]!==n?(u=Oe("absolute flex flex-col gap-[2px] justify-center h-full left-[-34px] z-20",n),e[6]=n,e[7]=u):u=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(f=pn("cell.createAbove"),e[8]=f):f=e[8];const m=d?c:void 0;let _,g,p;e[9]!==o||e[10]!==m?(_=h.jsx(x0,{tooltipContent:f,connectionState:o,onClick:m}),e[9]=o,e[10]=m,e[11]=_):_=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx("div",{className:"flex-1"}),e[12]=g):g=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(p=pn("cell.createBelow"),e[13]=p):p=e[13];const b=d?a:void 0;let y,x;return e[14]!==o||e[15]!==b?(y=h.jsx(x0,{tooltipContent:p,connectionState:o,onClick:b}),e[14]=o,e[15]=b,e[16]=y):y=e[16],e[17]!==u||e[18]!==_||e[19]!==y?(x=h.jsxs("div",{className:u,children:[_,g,y]}),e[17]=u,e[18]=_,e[19]=y,e[20]=x):x=e[20],x},Mx=t=>{const e=X.c(27),{edited:n,connectionState:o,status:r,cellConfig:s,needsRun:i,hasOutput:a,hasConsoleOutput:l,onRun:c,cellActionDropdownRef:d,cellId:u,getEditorView:f,name:m,includeCellActions:_}=t,g=_===void 0||_,p=Qa(o),b=!i&&"hover-action";let y;e[0]!==b?(y=Oe(b),e[0]=b,e[1]=y):y=e[1];const x=p?c:In.NOOP;let v,S,k,E;return e[2]!==s||e[3]!==o||e[4]!==n||e[5]!==i||e[6]!==r||e[7]!==x?(v=h.jsx(lM,{edited:n,onClick:x,connectionState:o,status:r,config:s,needsRun:i}),e[2]=s,e[3]=o,e[4]=n,e[5]=i,e[6]=r,e[7]=x,e[8]=v):v=e[8],e[9]!==o||e[10]!==r?(S=h.jsx($j,{status:r,connectionState:o}),e[9]=o,e[10]=r,e[11]=S):S=e[11],e[12]!==d||e[13]!==s||e[14]!==u||e[15]!==f||e[16]!==l||e[17]!==a||e[18]!==g||e[19]!==m||e[20]!==r?(k=g&&h.jsx(w0,{ref:d,cellId:u,status:r,getEditorView:f,name:m,config:s,hasOutput:a,hasConsoleOutput:l,children:h.jsx(mi,{variant:"green",tooltip:null,"data-testid":"cell-actions-button",children:h.jsx(BS,{strokeWidth:1.5})})}),e[12]=d,e[13]=s,e[14]=u,e[15]=f,e[16]=l,e[17]=a,e[18]=g,e[19]=m,e[20]=r,e[21]=k):k=e[21],e[22]!==y||e[23]!==v||e[24]!==S||e[25]!==k?(E=h.jsxs(Hj,{className:y,children:[v,S,k]}),e[22]=y,e[23]=v,e[24]=S,e[25]=k,e[26]=E):E=e[26],E},uM=({theme:t,showPlaceholder:e,allowFocus:n,id:o,code:r,output:s,consoleOutputs:i,status:a,runStartTimestamp:l,lastRunStartTimestamp:c,runElapsedTimeMs:d,edited:u,interrupted:f,errored:m,stopped:_,staleInputs:g,serializedEditorState:p,debuggerActive:b,connectionState:y,canDelete:x,actions:v,deleteCell:S,userConfig:k,config:E,canMoveX:j,name:I,editorView:T,setEditorView:M})=>{const L=A.useRef(null),B=A.useRef(null),O=A.useRef(null),z=Zt(La),F=ld(o),V=E.disabled||a==="disabled-transitively",R=q4({executionTime:d,status:a,errored:m,interrupted:f,stopped:_}),C=u||f||g&&!V,H=a==="running"||a==="queued",N=(a==="queued"||u||g)&&!f,$=A.useCallback(()=>T.current,[T]),{closeCompletionHandler:Y,resumeCompletionHandler:Z}=jx(L,T);Ex(L,o,F,v,j,E,T,z,B),Ix(L,o,v,In.NOOP,k,!0);const q=!$4(s),re=i.length>0,ne=W4(s==null?void 0:s.mimetype),oe=qm("marimo-cell","hover-actions-parent z-10 border shadow-sm","!border-[var(--blue-5)] !rounded-sm",{"needs-run":C,"has-error":m,stopped:_}),G=Ps.create(o),Q=tt(ce=>{z({cellId:o,initialPrompt:ce.prompt})});return h.jsx(Gm,{children:h.jsx(k0,{cellId:o,config:E,status:a,getEditorView:$,hasOutput:q,hasConsoleOutput:re,name:I,children:h.jsxs("div",{className:oe,"data-status":a,id:G,ref:L,onBlur:Y,onKeyDown:Z,title:E.disabled?"This cell is disabled":a==="disabled-transitively"?"This cell has a disabled ancestor":void 0,"data-cell-id":o,"data-cell-name":I,"data-setup-cell":!0,children:[h.jsxs("div",{className:Oe("tray"),"data-hidden":!1,children:[h.jsx("div",{className:"absolute right-2 -top-4 z-10",children:h.jsx(Mx,{edited:u,connectionState:y,status:a,cellConfig:E,needsRun:C,hasOutput:q,hasConsoleOutput:re,cellActionDropdownRef:B,cellId:o,name:I,getEditorView:$,onRun:F,includeCellActions:!1})}),h.jsx(Gu,{theme:t,showPlaceholder:e,allowFocus:n,id:o,code:r,config:E,status:a,serializedEditorState:p,runCell:F,setEditorView:M,userConfig:k,editorViewRef:T,editorViewParentRef:O,hidden:!1,hasOutput:q,temporarilyShowCode:In.NOOP,languageAdapter:"python",setLanguageAdapter:In.NOOP,showLanguageToggles:!1}),h.jsx(Tx,{edited:u,status:a,isCellStatusInline:!1,uninstantiated:R,disabled:E.disabled,runElapsedTimeMs:d,runStartTimestamp:l,lastRunStartTimestamp:c,staleInputs:g,interrupted:f}),h.jsx("div",{className:"shoulder-bottom hover-action",children:x&&h.jsx(vx,{connectionState:y,status:a,onClick:()=>{H||qo(y)||S({cellId:o})}})})]}),h.jsxs("div",{className:"py-1 px-2 flex justify-end gap-2 last:rounded-b",children:[h.jsx("span",{className:"text-muted-foreground text-xs font-bold",children:"setup cell"}),h.jsx(Le,{content:h.jsxs("span",{className:"max-w-16",children:["This ",h.jsx("b",{children:"setup cell"})," is guaranteed to run before all other cells. Include ",h.jsx("br",{}),"initialization or imports and constants required by top-level functions."]}),children:h.jsx(Ym,{size:16,strokeWidth:1.5,className:"rounded-lg text-muted-foreground"})})]}),ne&&h.jsx(Uc,{allowExpand:!0,forceExpand:!0,output:s,className:"output-area",cellId:o,stale:!1,loading:H}),h.jsx(ip,{consoleOutputs:i,stale:N,cellName:"_",onRefactorWithAI:Q,onClear:()=>{v.clearCellConsoleOutput({cellId:o})},onSubmitDebugger:(ce,me)=>{v.setStdinResponse({cellId:o,response:ce,outputIndex:me}),G4({text:ce})},cellId:o,debuggerActive:b})]})})})},Ox=A.memo(A.forwardRef((t,e)=>{const{status:n,output:o,runStartTimestamp:r,interrupted:s,staleInputs:i,edited:a,id:l,mode:c}=t;Qt.debug("Rendering Cell",l);const d=A.useRef(null);A.useImperativeHandle(e,()=>({get editorView(){return U_(d)},get editorViewOrNull(){return d.current}}),[d]);const u=KU({status:n,output:o,runStartTimestamp:r,interrupted:s,staleInputs:i},a),f=H4(n);return l===$o?h.jsx(uM,{...t,editorView:d,setEditorView:m=>{d.current=m},outputStale:u}):c==="edit"?h.jsx(cM,{...t,editorView:d,setEditorView:m=>{d.current=m},outputStale:u}):h.jsx(Ax,{...t,outputStale:u,outputLoading:f})})),hM=(t,e)=>function(n,o){const r=/^(\d+)\.(\d+)\.(\d+)(?:-([\w.-]+))?(?:\+([\w.-]+))?$/,s=i=>{const a=i.match(r);if(!a)return null;const[,l,c,d,u]=a;return{major:Number.parseInt(l,10),minor:Number.parseInt(c,10),patch:Number.parseInt(d,10),preRelease:u||""}};try{const i=s(n),a=s(o);return i&&a?i.major!==a.major?i.major-a.major:i.minor!==a.minor?i.minor-a.minor:i.patch!==a.patch?i.patch-a.patch:i.preRelease===""&&a.preRelease!==""?1:i.preRelease!==""&&a.preRelease===""?-1:i.preRelease.localeCompare(a.preRelease):n.localeCompare(o,void 0,{numeric:!0,sensitivity:"base"})}catch{return n.localeCompare(o,void 0,{numeric:!0,sensitivity:"base"})}}(e,t),Dx=new class{constructor(t){this.ttl=void 0,this.cache=new Map,this.ttl=t.ttl}cleanupExpiredEntries(){const t=Date.now();for(const[e,n]of this.cache.entries())t-n.timestamp>this.ttl&&this.cache.delete(e)}get(t){this.cleanupExpiredEntries();const e=this.cache.get(t);if(e){if(!(Date.now()-e.timestamp>this.ttl))return e.data;this.cache.delete(t)}}set(t,e){this.cache.set(t,{data:e,timestamp:Date.now()})}clear(){this.cache.clear()}}({ttl:3e5}),fM=Y4({info:Y4({provides_extra:J4().array().nullable()}),releases:eV(J4(),tV())});function Rx(t){const e=X.c(5);let n;e[0]!==t?(n=function(i){return i.replaceAll(/\[.*]/g,"").trim()}(t),e[0]=t,e[1]=n):n=e[1];const o=n;let r,s;return e[2]!==o?(r=async()=>{const i=Dx.get(o);if(i)return i;const a=await fetch(`https://pypi.org/pypi/${o}/json`,{method:"GET"});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const l=fM.transform(mM).parse(await a.json());return Dx.set(o,l),l},s=[o],e[2]=o,e[3]=r,e[4]=s):(r=e[3],s=e[4]),qn(r,s)}function mM(t){return{versions:Object.keys(t.releases).toSorted(hM),extras:t.info.provides_extra??[]}}function Px(t){const e=t.match(/^([^[]+)(?:\[([^\]]+)])?$/);if(!e)return{name:t,extras:[]};const[,n,o]=e;return{name:n,extras:o?o.split(",").map(r=>r.trim()):[]}}const pM=()=>{const t=X.c(70),{packageAlert:e}=l$(),{clearPackageAlert:n}=c$(),[o]=zs();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const[s,i]=A.useState(r);let a;t[1]===Symbol.for("react.memo_cache_sentinel")?(a={},t[1]=a):a=t[1];const[l,c]=A.useState(a);if(e===null)return null;const d=o.package_management.manager!=="pixi";if(d$(e)){let u,f,m,_,g,p,b,y,x,v;if(t[2]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[h.jsx(nd,{className:"w-5 h-5 inline-block mr-2"}),"Missing packages"]}),t[2]=u):u=t[2],t[3]!==n||t[4]!==e.id?(f=()=>n(e.id),t[3]=n,t[4]=e.id,t[5]=f):f=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsx(no,{className:"w-5 h-5"}),t[6]=m):m=t[6],t[7]!==f?(_=h.jsxs("div",{className:"flex justify-between",children:[u,h.jsx(Pe,{variant:"text","data-testid":"remove-banner-button",size:"icon",onClick:f,children:m})]}),t[7]=f,t[8]=_):_=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx("p",{children:"The following packages were not found:"}),t[9]=g):g=t[9],t[10]!==s||t[11]!==d||t[12]!==e.packages||t[13]!==l){let S;t[15]!==s||t[16]!==d||t[17]!==l?(S=(k,E)=>{const j=Px(k),I=l[k]||j.extras;return h.jsxs("li",{className:"flex items-center gap-2 font-mono text-sm",children:[h.jsx(ka,{size:"1rem"}),h.jsx(yM,{packageName:j.name,selectedExtras:I,onExtrasChange:T=>c(M=>({...M,[k]:T}))}),d&&h.jsx(xM,{value:s[k]??"latest",onChange:T=>i(M=>({...M,[k]:T})),packageName:j.name})]},E)},t[15]=s,t[16]=d,t[17]=l,t[18]=S):S=t[18],p=e.packages.map(S),t[10]=s,t[11]=d,t[12]=e.packages,t[13]=l,t[14]=p}else p=t[14];return t[19]!==p?(b=h.jsxs("div",{children:[g,h.jsx("ul",{className:"list-disc ml-4 mt-1",children:p})]}),t[19]=p,t[20]=b):b=t[20],t[21]!==n||t[22]!==s||t[23]!==e.id||t[24]!==e.isolated||t[25]!==e.packages||t[26]!==l||t[27]!==o.package_management.manager?(y=h.jsx("div",{className:"ml-auto flex flex-row items-baseline",children:e.isolated?h.jsxs(h.Fragment,{children:[h.jsx(_M,{manager:o.package_management.manager,packages:e.packages.map(S=>{const k=Px(S),E=l[S]||k.extras;return function(j,I){return I.length===0?j:`${j}[${I.join(",")}]`}(k.name,E)}),versions:s,clearPackageAlert:()=>n(e.id)}),!En()&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"px-2 text-sm",children:"with"})," ",h.jsx(bM,{})]})]}):h.jsxs("p",{children:["If you set up a"," ",h.jsx(xm,{href:"https://docs.python.org/3/tutorial/venv.html#creating-virtual-environments",children:"virtual environment"}),", marimo can install these packages for you."]})}),t[21]=n,t[22]=s,t[23]=e.id,t[24]=e.isolated,t[25]=e.packages,t[26]=l,t[27]=o.package_management.manager,t[28]=y):y=t[28],t[29]!==b||t[30]!==y?(x=h.jsxs("div",{className:"flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",children:[b,y]}),t[29]=b,t[30]=y,t[31]=x):x=t[31],t[32]!==x||t[33]!==_?(v=h.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-12 min-w-[400px] z-[200] opacity-95",children:h.jsxs(wa,{kind:"danger",className:"flex flex-col rounded py-3 px-5 animate-in slide-in-from-left",children:[_,x]})}),t[32]=x,t[33]=_,t[34]=v):v=t[34],v}if(u$(e)){let u;t[35]!==e.packages?(u=function(O){const z=new Set(Object.values(O)),F=z.has("queued")||z.has("installing")?"installing":z.has("failed")?"failed":"installed";return F==="installing"?{status:"installing",title:"Installing packages",titleIcon:h.jsx(Ia,{className:"w-5 h-5 inline-block mr-2"}),description:"Installing packages:"}:F==="installed"?{status:"installed",title:"All packages installed!",titleIcon:h.jsx(Lp,{className:"w-5 h-5 inline-block mr-2"}),description:"Installed packages:"}:{status:"failed",title:"Some packages failed to install",titleIcon:h.jsx(nd,{className:"w-5 h-5 inline-block mr-2"}),description:"See terminal for error logs."}}(e.packages),t[35]=e.packages,t[36]=u):u=t[36];const{status:f,title:m,titleIcon:_,description:g}=u;f==="installed"&&setTimeout(()=>n(e.id),1e4);const p=f==="failed"?"danger":"info";let b,y,x,v,S;t[37]!==m||t[38]!==_?(b=h.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[_,m]}),t[37]=m,t[38]=_,t[39]=b):b=t[39],t[40]!==n||t[41]!==e.id?(y=()=>n(e.id),t[40]=n,t[41]=e.id,t[42]=y):y=t[42],t[43]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(no,{className:"w-5 h-5"}),t[43]=x):x=t[43],t[44]!==y?(v=h.jsx(Pe,{variant:"text","data-testid":"remove-banner-button",size:"icon",onClick:y,children:x}),t[44]=y,t[45]=v):v=t[45],t[46]!==b||t[47]!==v?(S=h.jsxs("div",{className:"flex justify-between",children:[b,v]}),t[46]=b,t[47]=v,t[48]=S):S=t[48];const k=f==="installed"&&"text-accent-foreground";let E,j,I,T,M,L,B;if(t[49]!==k?(E=Oe("flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",k),t[49]=k,t[50]=E):E=t[50],t[51]!==g?(j=h.jsx("p",{children:g}),t[51]=g,t[52]=j):j=t[52],t[53]!==e.packages||t[54]!==f){let O;t[56]!==f?(O=(z,F)=>{const[V,R]=z;return h.jsxs("li",{className:Oe("flex items-center gap-1 font-mono text-sm",R==="installing"&&"font-semibold",R==="failed"&&"text-destructive",R==="installed"&&"text-accent-foreground",R==="installed"&&f==="failed"&&"text-muted-foreground"),children:[h.jsx(gM,{status:R}),V]},F)},t[56]=f,t[57]=O):O=t[57],I=Object.entries(e.packages).map(O),t[53]=e.packages,t[54]=f,t[55]=I}else I=t[55];return t[58]!==I?(T=h.jsx("ul",{className:"list-disc ml-4 mt-1",children:I}),t[58]=I,t[59]=T):T=t[59],t[60]!==j||t[61]!==T?(M=h.jsxs("div",{children:[j,T]}),t[60]=j,t[61]=T,t[62]=M):M=t[62],t[63]!==E||t[64]!==M?(L=h.jsx("div",{className:E,children:M}),t[63]=E,t[64]=M,t[65]=L):L=t[65],t[66]!==L||t[67]!==p||t[68]!==S?(B=h.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-12 min-w-[400px] z-[200] opacity-95",children:h.jsxs(wa,{kind:p,className:"flex flex-col rounded pt-3 pb-4 px-5",children:[S,L]})}),t[66]=L,t[67]=p,t[68]=S,t[69]=B):B=t[69],B}return wc(e),null},gM=t=>{const e=X.c(4),{status:n}=t;switch(n){case"queued":{let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(ka,{size:"1rem"}),e[0]=o):o=e[0],o}case"installing":{let o;return e[1]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(Ia,{size:"1rem"}),e[1]=o):o=e[1],o}case"installed":{let o;return e[2]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(kc,{size:"1rem"}),e[2]=o):o=e[2],o}case"failed":{let o;return e[3]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(no,{size:"1rem"}),e[3]=o):o=e[3],o}default:return wc(n),null}},_M=t=>{const e=X.c(9),{manager:n,packages:o,versions:r,clearPackageAlert:s}=t;let i,a,l,c;return e[0]!==s||e[1]!==n||e[2]!==o||e[3]!==r?(i=async()=>{s();const d={...r};for(const u of o)d[u]=d[u]??"";await sV({manager:n,versions:d}).catch(wM)},e[0]=s,e[1]=n,e[2]=o,e[3]=r,e[4]=i):i=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(Ia,{className:"w-4 h-4 mr-2"}),l=h.jsx("span",{className:"font-semibold",children:"Install"}),e[5]=a,e[6]=l):(a=e[5],l=e[6]),e[7]!==i?(c=h.jsxs(Pe,{variant:"outline","data-testid":"install-packages-button",size:"sm",onClick:i,children:[a,l]}),e[7]=i,e[8]=c):c=e[8],c},bM=()=>{const t=X.c(16),[e,n]=zs();let o,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=Q3(nV),t[0]=o):o=t[0],t[1]!==e?(r={resolver:o,defaultValues:e},t[1]=e,t[2]=r):r=t[2];const s=e4(r);let i;t[3]!==n?(i=async f=>{await Bs({config:f}).then(()=>{n(f)})},t[3]=n,t[4]=i):i=t[4];const a=i;let l,c,d,u;return t[5]!==s||t[6]!==a?(l=s.handleSubmit(a),t[5]=s,t[6]=a,t[7]=l):l=t[7],t[8]!==s.control?(c=h.jsx("div",{className:"flex flex-col gap-3",children:h.jsx(J3,{control:s.control,name:"package_management.manager",render:kM})}),t[8]=s.control,t[9]=c):c=t[9],t[10]!==l||t[11]!==c?(d=h.jsx("form",{onChange:l,className:"flex flex-col gap-5",children:c}),t[10]=l,t[11]=c,t[12]=d):d=t[12],t[13]!==s||t[14]!==d?(u=h.jsx(oV,{...s,children:d}),t[13]=s,t[14]=d,t[15]=u):u=t[15],u},yM=t=>{const e=X.c(14),{packageName:n,selectedExtras:o,onExtrasChange:r}=t,[s,i]=A.useState(!1),{isPending:a,error:l,data:c}=Rx(n);let d;e[0]!==r||e[1]!==o?(d=(g,p)=>{r(p?[...o,g]:o.filter(b=>b!==g))},e[0]=r,e[1]=o,e[2]=d):d=e[2];const u=d,f=!a&&!l;let m,_;if(e[3]!==(c==null?void 0:c.extras)?(m=(c==null?void 0:c.extras)??[],e[3]=c==null?void 0:c.extras,e[4]=m):m=e[4],e[5]!==f||e[6]!==u||e[7]!==s||e[8]!==n||e[9]!==o||e[10]!==m){const g=m.filter(SM);let p;e[12]!==n?(p=h.jsx("span",{className:"shrink-0",children:n}),e[12]=n,e[13]=p):p=e[13],_=h.jsxs("div",{className:"flex items-center max-w-72",children:[p,o.length>0?h.jsxs("span",{className:"flex items-center min-w-0 flex-1",children:[h.jsx("span",{className:"shrink-0",children:"["}),h.jsxs(Us,{open:s&&f,onOpenChange:b=>{f&&i(b)},children:[h.jsx(Vs,{asChild:!0,children:h.jsx("button",{className:"hover:bg-muted/50 rounded text-sm px-1 transition-colors border border-muted-foreground/30 hover:border-muted-foreground/60 min-w-0 flex-1 truncate text-left",title:`Selected extras: ${o.join(", ")}`,children:o.join(",")})}),h.jsxs(Hs,{align:"start",className:"w-64 p-0 max-h-96 flex flex-col",children:[o.length>0&&h.jsx("div",{className:"p-2 bg-popover border-b border-border",children:h.jsx("div",{className:"flex flex-wrap gap-1 p-1 min-h-[24px]",children:o.map(b=>h.jsxs("span",{className:"inline-flex items-center gap-1 px-1 py-0.5 text-sm font-mono border border-muted-foreground/30 hover:border-muted-foreground/60 rounded-sm cursor-pointer group transition-colors",onClick:()=>u(b,!1),children:[b,h.jsx(no,{className:"w-3 h-3 opacity-60 group-hover:opacity-100"})]},b))})}),h.jsx("div",{className:"overflow-y-auto flex-1",children:g.map(b=>h.jsx(K4,{checked:o.includes(b),onCheckedChange:y=>{u(b,y)},className:"font-mono text-sm",onSelect:CM,children:b},b))})]})]}),h.jsx("span",{className:"shrink-0",children:"]"})]}):g.length>0?h.jsxs(Us,{open:s&&f,onOpenChange:b=>{f&&i(b)},children:[h.jsx(Vs,{asChild:!0,children:h.jsx("button",{disabled:!f,className:Oe("hover:bg-muted/50 rounded text-sm ml-2 transition-colors border border-muted-foreground/30 hover:border-muted-foreground/60 h-5 w-5 flex items-center justify-center p-0",!f&&"opacity-50 cursor-not-allowed"),title:f?"Add extras":"Loading extras...",children:h.jsx(gr,{className:"w-3 h-3 flex-shrink-0"})})}),h.jsxs(Hs,{align:"start",className:"w-64 p-0 max-h-96 flex flex-col",children:[h.jsx("div",{className:"p-2 bg-popover border-b border-border",children:h.jsx("span",{className:"text-muted-foreground italic text-sm",children:"Package extras"})}),h.jsx("div",{className:"overflow-y-auto flex-1",children:g.map(b=>h.jsx(K4,{checked:o.includes(b),onCheckedChange:y=>{u(b,y)},className:"font-mono text-sm",onSelect:NM,children:b},b))})]})]}):null]}),e[5]=f,e[6]=u,e[7]=s,e[8]=n,e[9]=o,e[10]=m,e[11]=_}else _=e[11];return _},xM=t=>{const e=X.c(16),{value:n,onChange:o,packageName:r}=t,{error:s,isPending:i,data:a}=Rx(r);if(s){let u,f,m;return e[0]!==o?(u=_=>o(_.target.value),e[0]=o,e[1]=u):u=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx("option",{value:"latest",children:"latest"}),e[2]=f):f=e[2],e[3]!==u||e[4]!==n?(m=h.jsx(Le,{content:"Failed to fetch package versions",children:h.jsx(Jm,{value:n,onChange:u,disabled:!0,className:"inline-flex ml-2 w-24 text-ellipsis",children:f})}),e[3]=u,e[4]=n,e[5]=m):m=e[5],m}let l,c,d;return e[6]!==o?(l=u=>o(u.target.value),e[6]=o,e[7]=l):l=e[7],e[8]!==i||e[9]!==a?(c=i?h.jsx("option",{value:"latest",children:"latest"}):["latest",...a.versions.slice(0,100)].map(jM),e[8]=i,e[9]=a,e[10]=c):c=e[10],e[11]!==i||e[12]!==l||e[13]!==c||e[14]!==n?(d=h.jsx(Jm,{value:n,onChange:l,disabled:i,className:"inline-flex ml-2 w-24 text-ellipsis",children:c}),e[11]=i,e[12]=l,e[13]=c,e[14]=n,e[15]=d):d=e[15],d};function wM(t){Qt.error(t)}function vM(t){return h.jsx("option",{value:t,children:t},t)}function kM(t){const{field:e}=t;return h.jsxs(K3,{children:[h.jsx(X3,{children:h.jsx(Jm,{"data-testid":"install-package-manager-select",onChange:n=>e.onChange(n.target.value),value:e.value,disabled:e.disabled,className:"inline-flex mr-2",children:rV.map(vM)})}),h.jsx(Z3,{})]})}function SM(t){return!/^(dev|test|testing)$/i.test(t)}function CM(t){return t.preventDefault()}function NM(t){return t.preventDefault()}function jM(t){return h.jsx("option",{value:t,children:t},t)}const EM=t=>{let{transform:e}=t;return{...e,x:0}},IM={threshold:{x:0,y:.1}},AM=K.memo(t=>{const e=X.c(23),{children:n,multiColumn:o}=t,{dropCellOverCell:r,dropCellOverColumn:s,moveColumn:i,compactColumns:a}=Ft(),[l,c]=A.useState(null),[d,u]=A.useState(null),[f]=W3();let m;e:{if(f.width==="columns"){m=Km.EMPTY;break e}let O;e[0]===Symbol.for("react.memo_cache_sentinel")?(O=[EM],e[0]=O):O=e[0],m=O}const _=m;let g,p;e[1]===Symbol.for("react.memo_cache_sentinel")?(g={activationConstraint:{distance:8}},e[1]=g):g=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(p={coordinateGetter:Uj},e[2]=p):p=e[2];const b=function(){for(var O=arguments.length,z=new Array(O),F=0;F<O;F++)z[F]=arguments[F];return A.useMemo(()=>[...z].filter(V=>V!=null),[...z])}(Gg(Dd,g),Gg(Md,p));let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=O=>{c(O.active.id);const z=po();u(z.cellIds)},e[3]=y):y=e[3];const x=tt(y);let v;e[4]!==d?(v=()=>{c(null),u(null)},e[4]=d,e[5]=v):v=e[5];const S=tt(v);let k;e[6]!==l?(k=O=>{const z=O.droppableContainers.filter(TM);if(l&&is(l))return jd({...O,droppableContainers:z});const F=(N=>{let{droppableContainers:$,droppableRects:Y,pointerCoordinates:Z}=N;if(!Z)return[];const q=[];for(const re of $){const{id:ne}=re,oe=Y.get(ne);if(oe&&sj(Z,oe)){const G=Cd(oe).reduce((ce,me)=>ce+kd(Z,me),0),Q=Number((G/4).toFixed(4));q.push({id:ne,data:{droppableContainer:re,value:Q}})}}return q.sort(Sd)})({...O,droppableContainers:z}),V=Nd(F.length>0?F:Jg({...O,droppableContainers:z}),"id");if(!V)return[];Bo(is(V),`Expected column id. Got: ${V}`);const R=po().cellIds.get(V);if(Bo(R,`Expected column. Got: ${V}`),R&&R.topLevelIds.length===0)return[{id:V}];const C=new Set(R.topLevelIds),H=jd({...O,droppableContainers:O.droppableContainers.filter(N=>N.id!==V&&C.has(N.id))});if(H.length>0){const N=H[0].id;return Bo(Yu(N),`Expected cell id. Got: ${N}`),[{id:N}]}return[]},e[6]=l,e[7]=k):k=e[7];const E=k;let j;e[8]!==r||e[9]!==s||e[10]!==i?(j=O=>{const{active:z,over:F}=O,V=F==null?void 0:F.id;if(V!=null&&z.id!==V){if(Yu(z.id)){if(is(V))return void s({cellId:z.id,columnId:V});if(Yu(V))return void r({cellId:z.id,overCellId:V})}is(z.id)&&is(V)&&i({column:z.id,overColumn:V})}},e[8]=r,e[9]=s,e[10]=i,e[11]=j):j=e[11];const I=tt(j);let T;e[12]!==a?(T=O=>{const{active:z,over:F}=O;F!==null&&z.id!==F.id&&a()},e[12]=a,e[13]=T):T=e[13];const M=tt(T),L=o?E:jd;let B;return e[14]!==n||e[15]!==S||e[16]!==M||e[17]!==I||e[18]!==x||e[19]!==_||e[20]!==b||e[21]!==L?(B=h.jsx(Ej,{autoScroll:IM,sensors:b,collisionDetection:L,modifiers:_,onDragEnd:M,onDragStart:x,onDragCancel:S,onDragOver:I,children:n}),e[14]=n,e[15]=S,e[16]=M,e[17]=I,e[18]=x,e[19]=_,e[20]=b,e[21]=L,e[22]=B):B=e[22],B});function Yu(t){return typeof t=="string"&&!t.startsWith("tree_")}function is(t){return typeof t=="string"&&t.startsWith("tree_")}function TM(t){return is(t.id)}const MM=t=>{const e=X.c(11),{title:n,children:o,show:r,delayMs:s,kind:i}=t,a=s===void 0?2e3:s,l=i===void 0?"info":i;if(!r)return null;let c,d,u;e[0]!==n?(c=h.jsx("div",{className:"flex justify-between",children:h.jsx("span",{className:"font-bold text-lg flex items-center mb-1",children:n})}),e[0]=n,e[1]=c):c=e[1],e[2]!==o?(d=h.jsx("div",{className:"flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",children:h.jsx("div",{children:o})}),e[2]=o,e[3]=d):d=e[3],e[4]!==l||e[5]!==c||e[6]!==d?(u=h.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-1/2 transform -translate-x-1/2 z-[200] opacity-95",children:h.jsxs(wa,{kind:l,className:"flex flex-col rounded py-2 px-4 animate-in slide-in-from-top w-fit",children:[c,d]})}),e[4]=l,e[5]=c,e[6]=d,e[7]=u):u=e[7];const f=u;let m;return e[8]!==f||e[9]!==a?(m=h.jsx(Wm,{milliseconds:a,children:f}),e[8]=f,e[9]=a,e[10]=m):m=e[10],m},OM=()=>{const t=X.c(3),e=$e(iV);let n,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Jn,{className:"h-4 w-4"}),h.jsx("p",{children:"Connecting to a marimo runtime ..."})]}),t[0]=n):n=t[0],t[1]!==e?(o=h.jsx(MM,{title:"Connecting",show:e,delayMs:1e3,children:n}),t[1]=e,t[2]=o):o=t[2],o},Lx=K.forwardRef((t,e)=>{const n=X.c(62);let o,r,s,i,a,l;n[0]!==t?({columnId:i,canDelete:o,canMoveLeft:r,canMoveRight:s,...a}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i,n[5]=a):(o=n[1],r=n[2],s=n[3],i=n[4],a=n[5]),n[6]!==i?(l={id:i},n[6]=i,n[7]=l):l=n[7];const{attributes:c,listeners:d,setNodeRef:u,transform:f,transition:m,isDragging:_,isOver:g}=S1(l);let p;n[8]!==f?(p=f?Mc.Transform.toString({x:f.x,y:0,scaleX:1,scaleY:1}):void 0,n[8]=f,n[9]=p):p=n[9];const b=_?2:void 0;let y;n[10]!==p||n[11]!==b||n[12]!==m?(y={transform:p,transition:m,zIndex:b,position:"relative","--gutter-width":"50px"},n[10]=p,n[11]=b,n[12]=m,n[13]=y):y=n[13];const x=y,{deleteColumn:v,moveColumn:S,addColumn:k}=Ft();let E;n[14]===Symbol.for("react.memo_cache_sentinel")?(E=Oe("h-full hover:bg-muted rounded-none"),n[14]=E):E=n[14];const j=E,I=RM;let T;n[15]!==i||n[16]!==S?(T=()=>S({column:i,overColumn:"_left_"}),n[15]=i,n[16]=S,n[17]=T):T=n[17];const M=!r;let L,B,O;n[18]===Symbol.for("react.memo_cache_sentinel")?(L=h.jsx($3,{className:"size-4"}),n[18]=L):L=n[18],n[19]!==T||n[20]!==M?(B=h.jsx(Le,{content:"Move column left",side:"top",delayDuration:300,children:h.jsx(Pe,{variant:"text",size:"sm",className:j,onClick:T,disabled:M,children:L})}),n[19]=T,n[20]=M,n[21]=B):B=n[21],n[22]!==i||n[23]!==S?(O=()=>S({column:i,overColumn:"_right_"}),n[22]=i,n[23]=S,n[24]=O):O=n[24];const z=!s;let F,V,R,C,H,N,$,Y;n[25]===Symbol.for("react.memo_cache_sentinel")?(F=h.jsx(bc,{className:"size-4"}),n[25]=F):F=n[25],n[26]!==O||n[27]!==z?(V=h.jsx(Le,{content:"Move column right",side:"top",delayDuration:300,children:h.jsx(Pe,{variant:"text",size:"sm",className:j,onClick:O,disabled:z,children:F})}),n[26]=O,n[27]=z,n[28]=V):V=n[28],n[29]!==c||n[30]!==d?(R=h.jsx("div",{className:"flex gap-2 h-full flex-grow active:bg-accent cursor-grab",...c,...d,"data-testid":"column-drag-button"}),n[29]=c,n[30]=d,n[31]=R):R=n[31],n[32]!==o||n[33]!==i||n[34]!==v?(C=o&&h.jsx(Le,{content:"Delete column",side:"top",delayDuration:300,children:h.jsx(Pe,{variant:"text",size:"sm",className:"opacity-0 group-hover:opacity-70 group-hover:hover:opacity-100 text-destructive h-full hover:bg-destructive/20 rounded-none",onClick:()=>v({columnId:i}),children:h.jsx(no,{className:"size-4"})})}),n[32]=o,n[33]=i,n[34]=v,n[35]=C):C=n[35],n[36]!==k||n[37]!==i?(H=()=>{k({columnId:i}),requestAnimationFrame(I)},n[36]=k,n[37]=i,n[38]=H):H=n[38],n[39]===Symbol.for("react.memo_cache_sentinel")?(N=h.jsx(gr,{className:"size-4"}),n[39]=N):N=n[39],n[40]!==H?($=h.jsx(Le,{content:"Add column",side:"top",delayDuration:300,children:h.jsx(Pe,{variant:"text",size:"sm",className:j,onClick:H,children:N})}),n[40]=H,n[41]=$):$=n[41],n[42]!==V||n[43]!==R||n[44]!==C||n[45]!==$||n[46]!==B?(Y=h.jsxs("div",{className:"h-6 group flex items-center rounded-t-lg border hover:border-border border-[var(--slate-3)] overflow-hidden bg-[var(--slate-1)]",children:[B,V,R,C,$]}),n[42]=V,n[43]=R,n[44]=C,n[45]=$,n[46]=B,n[47]=Y):Y=n[47];const Z=Y;let q;n[48]!==e||n[49]!==u?(q=ce=>{jl(e,u)(ce)},n[48]=e,n[49]=u,n[50]=q):q=n[50];const re=_?"":a.className,ne=_?"z-20":"z-1 hover:z-10 focus-within:z-10",oe=g&&"bg-accent/20";let G,Q;return n[51]!==re||n[52]!==ne||n[53]!==oe?(G=Oe(re,ne,oe),n[51]=re,n[52]=ne,n[53]=oe,n[54]=G):G=n[54],n[55]!==Z||n[56]!==_||n[57]!==a||n[58]!==x||n[59]!==q||n[60]!==G?(Q=h.jsxs("div",{tabIndex:-1,ref:q,...a,style:x,"data-is-dragging":_,className:G,children:[Z,a.children]}),n[55]=Z,n[56]=_,n[57]=a,n[58]=x,n[59]=q,n[60]=G,n[61]=Q):Q=n[61],Q});Lx.displayName="SortableColumn";const DM=A.memo(Lx);function RM(){const t=document.getElementById("App");t&&t.scrollTo({left:t.scrollLeft+1e3,behavior:"smooth"})}const{getColumnWidth:PM,saveColumnWidth:LM}=aV,Fx=A.memo(t=>{const e=X.c(14),n=A.useRef(null);let o;e[0]!==t.children||e[1]!==t.index||e[2]!==t.width?(o=t.width==="columns"?h.jsx(FM,{startingWidth:PM(t.index),onResize:i=>{LM(t.index,i)},children:t.children}):h.jsx("div",{className:"flex flex-col gap-5",children:t.children}),e[0]=t.children,e[1]=t.index,e[2]=t.width,e[3]=o):o=e[3];const r=o;if(t.width==="columns"){let i;return e[4]!==r||e[5]!==t.canDelete||e[6]!==t.canMoveLeft||e[7]!==t.canMoveRight||e[8]!==t.columnId||e[9]!==t.footer?(i=h.jsxs(DM,{tabIndex:-1,ref:n,canDelete:t.canDelete,columnId:t.columnId,canMoveLeft:t.canMoveLeft,canMoveRight:t.canMoveRight,className:"group/column",children:[r,t.footer]}),e[4]=r,e[5]=t.canDelete,e[6]=t.canMoveLeft,e[7]=t.canMoveRight,e[8]=t.columnId,e[9]=t.footer,e[10]=i):i=e[10],i}let s;return e[11]!==r||e[12]!==t.footer?(s=h.jsxs(h.Fragment,{children:[r,t.footer]}),e[11]=r,e[12]=t.footer,e[13]=s):s=e[13],s});Fx.displayName="Column";const FM=t=>{const e=X.c(15),{startingWidth:n,onResize:o,children:r}=t;let s;e[0]!==o||e[1]!==n?(s={startingWidth:n,onResize:o},e[0]=o,e[1]=n,e[2]=s):s=e[2];const{resizableDivRef:i,handleRefs:a,style:l}=lV(s),c=zM;let d,u,f,m;return e[3]!==a.left?(d=c(a.left),e[3]=a.left,e[4]=d):d=e[4],e[5]!==r||e[6]!==i||e[7]!==l?(u=h.jsx("div",{ref:i,className:"flex flex-col gap-5 box-content min-h-[100px] px-11 py-6 min-w-[500px] z-1",style:l,children:r}),e[5]=r,e[6]=i,e[7]=l,e[8]=u):u=e[8],e[9]!==a.right?(f=c(a.right),e[9]=a.right,e[10]=f):f=e[10],e[11]!==d||e[12]!==u||e[13]!==f?(m=h.jsxs("div",{className:"flex flex-row",children:[d,u,f]}),e[11]=d,e[12]=u,e[13]=f,e[14]=m):m=e[14],m};function zM(t){return h.jsx("div",{ref:t,className:`w-[3px] cursor-col-resize transition-colors duration-200 z-[100]
          relative before:content-[''] before:absolute before:inset-y-0 before:-left-[3px] 
          before:right-[-3px] before:w-[9px] before:z-[-1]
          hover/column:bg-[var(--slate-3)] dark:hover/column:bg-[var(--slate-5)]
          hover/column:hover:bg-primary/60 dark:hover/column:hover:bg-primary/60`})}const BM=t=>{const e=X.c(10),{width:n}=t,{banners:o}=h$(),{removeBanner:r}=f$();if(o.length===0)return null;const s=n==="columns"&&"sticky left-12 w-full max-w-[80vw]";let i,a,l;if(e[0]!==s?(i=Oe("flex flex-col gap-4 mb-5 print:hidden",s),e[0]=s,e[1]=i):i=e[1],e[2]!==o||e[3]!==r){let c;e[5]!==r?(c=d=>h.jsxs(wa,{kind:d.variant||"info",className:"flex flex-col rounded p-3",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[h.jsx(X4,{className:"w-5 h-5 inline-block mr-2"}),d.title]}),h.jsx(Pe,{"data-testid":"remove-banner-button",variant:"text",size:"icon",onClick:()=>r(d.id),children:h.jsx(no,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsx("span",{children:Xm({html:d.description})}),d.action==="restart"&&h.jsx(UM,{})]})]},d.id),e[5]=r,e[6]=c):c=e[6],a=o.map(c),e[2]=o,e[3]=r,e[4]=a}else a=e[4];return e[7]!==i||e[8]!==a?(l=h.jsx("div",{className:i,children:a}),e[7]=i,e[8]=a,e[9]=l):l=e[9],l},UM=()=>{const t=X.c(3),e=Rg();let n,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx(Vp,{className:"w-3 h-3 mr-2"}),t[0]=n):n=t[0],t[1]!==e?(o=h.jsxs(Pe,{"data-testid":"restart-session-button",variant:"link",size:"xs",onClick:e,children:[n,"Restart"]}),t[1]=e,t[2]=o):o=t[2],o},VM=en(t=>{const e=t(fc);for(const n of e.cellIds.inOrderIds){const o=e.cellRuntime[n];if(o.status==="idle"&&o.consoleOutputs.some(r=>r.channel==="stdin"&&r.response===void 0))return!0}return!1}),HM=()=>{const t=X.c(3),e=$M;if(!$e(VM))return null;let n,o,r;if(t[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx("div",{className:"flex justify-between",children:h.jsx("span",{className:"font-bold text-lg flex items-center mb-1",children:"Program waiting for input"})}),t[0]=n):n=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(pa,{className:"inline",children:"stdin"}),t[1]=o):o=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")){const s=h.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-1/2 transform -translate-x-1/2 z-[200] opacity-95",children:h.jsxs(wa,{kind:"info",className:"flex flex-col rounded py-2 px-4 animate-in slide-in-from-top w-fit",children:[n,h.jsx("div",{className:"flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",children:h.jsx("div",{children:h.jsxs("p",{children:["The program is still running, but blocked on"," ",o,".",h.jsx(Pe,{variant:"link",className:"h-auto font-normal",onClick:e,children:"Jump to the cell"})]})})})]})});r=h.jsx(Wm,{milliseconds:2e3,children:s}),t[2]=r}else r=t[2];return r};function $M(){const t=document.querySelector("[data-stdin-blocking]");t?(t.scrollIntoView({behavior:"smooth",block:"center"}),requestAnimationFrame(()=>{t.focus()})):Qt.error("No element with data-stdin-blocking found")}const WM=t=>{const e=X.c(8),n=$e(cV),o=t.appConfig.width==="columns";let r,s,i;return e[0]!==t?(r=h.jsx(qM,{...t}),e[0]=t,e[1]=r):r=e[1],e[2]!==n||e[3]!==r?(s=h.jsx(v1,{id:"column-container",items:n,strategy:Oj,children:r}),e[2]=n,e[3]=r,e[4]=s):s=e[4],e[5]!==o||e[6]!==s?(i=h.jsx(AM,{multiColumn:o,children:s}),e[5]=o,e[6]=s,e[7]=i):i=e[7],i},qM=t=>{const e=X.c(53),{mode:n,userConfig:o,appConfig:r,connStatus:s}=t,i=Ec(),a=Ft(),{theme:l}=Fo(),{toggleSidebarPanel:c}=aa(),{invisible:d}=m$(i.cellIds.idLength,n);Gt("global.focusTop",a.focusTopCell),Gt("global.focusBottom",a.focusBottomCell),Gt("global.toggleSidebar",c),Gt("global.foldCode",a.foldAll),Gt("global.unfoldCode",a.unfoldAll),Gt("global.formatAll",JM),Gt("cell.hideCode",In.NOOP),Gt("cell.format",In.NOOP);const u=fd(),f=a.scrollToTarget;let m,_,g,p,b,y,x,v,S,k,E,j,I,T,M,L;if(e[0]!==i.scrollKey||e[1]!==f?(m=()=>{i.scrollKey!==null&&f()},e[0]=i.scrollKey,e[1]=f,e[2]=m):m=e[2],e[3]!==i.cellIds||e[4]!==i.scrollKey||e[5]!==f?(_=[i.cellIds,i.scrollKey,f],e[3]=i.cellIds,e[4]=i.scrollKey,e[5]=f,e[6]=_):_=e[6],A.useEffect(m,_),e[7]!==a||e[8]!==r||e[9]!==s||e[10]!==d||e[11]!==n||e[12]!==i||e[13]!==u||e[14]!==l||e[15]!==o){const B=i.cellIds.getColumns();let O;e[27]!==i.cellIds?(O=i.cellIds.hasOnlyOneId(),e[27]=i.cellIds,e[28]=O):O=e[28];const z=O;let F;e[29]!==i.cellIds.inOrderIds?(F=i.cellIds.inOrderIds.includes($o),e[29]=i.cellIds.inOrderIds,e[30]=F):F=e[30];const V=F;g=p$,S="pb-[40vh]",k=d,E=r,j="pr-4",e[31]===Symbol.for("react.memo_cache_sentinel")?(I=h.jsx(pM,{}),p=h.jsx(HM,{}),b=h.jsx(OM,{}),e[31]=p,e[32]=b,e[33]=I):(p=e[31],b=e[32],I=e[33]),e[34]!==r.width?(y=h.jsx(BM,{width:r.width}),e[34]=r.width,e[35]=y):y=e[35];const R=r.width==="columns"&&"grid grid-flow-col auto-cols-min gap-6";e[36]!==R?(x=Oe(R),e[36]=R,e[37]=x):x=e[37],v=B.map((C,H)=>h.jsx(GM,{column:C,index:H,columnsLength:B.length,appConfig:r,notebook:i,mode:n,userConfig:o,connStatus:s,actions:a,theme:l,hasOnlyOneCell:z,invisible:d,hasSetupCell:V,onDeleteCell:u},C.id)),e[7]=a,e[8]=r,e[9]=s,e[10]=d,e[11]=n,e[12]=i,e[13]=u,e[14]=l,e[15]=o,e[16]=g,e[17]=p,e[18]=b,e[19]=y,e[20]=x,e[21]=v,e[22]=S,e[23]=k,e[24]=E,e[25]=j,e[26]=I}else g=e[16],p=e[17],b=e[18],y=e[19],x=e[20],v=e[21],S=e[22],k=e[23],E=e[24],j=e[25],I=e[26];return e[38]!==x||e[39]!==v?(T=h.jsx("div",{className:x,children:v}),e[38]=x,e[39]=v,e[40]=T):T=e[40],e[41]===Symbol.for("react.memo_cache_sentinel")?(M=h.jsx(g$,{}),e[41]=M):M=e[41],e[42]!==g||e[43]!==p||e[44]!==b||e[45]!==y||e[46]!==T||e[47]!==S||e[48]!==k||e[49]!==E||e[50]!==j||e[51]!==I?(L=h.jsxs(g,{className:S,invisible:k,appConfig:E,innerClassName:j,children:[I,p,b,y,T,M]}),e[42]=g,e[43]=p,e[44]=b,e[45]=y,e[46]=T,e[47]=S,e[48]=k,e[49]=E,e[50]=j,e[51]=I,e[52]=L):L=e[52],L},GM=t=>{const e=X.c(42),{column:n,index:o,columnsLength:r,appConfig:s,notebook:i,mode:a,userConfig:l,connStatus:c,actions:d,theme:u,hasOnlyOneCell:f,invisible:m,hasSetupCell:_,onDeleteCell:g}=t,p=c.state,b=n.id,y=o>0,x=o<r-1,v=s.width,S=r>1,k=n.id,E=s.width==="columns"&&"opacity-0 group-hover/column:opacity-100";let j,I;e[0]!==E?(j=Oe(E),e[0]=E,e[1]=j):j=e[1],e[2]!==n.id||e[3]!==j?(I=h.jsx(YM,{columnId:k,className:j}),e[2]=n.id,e[3]=j,e[4]=I):I=e[4];const T=`column-${o+1}`,M=n.topLevelIds;let L,B,O,z;return e[5]!==d||e[6]!==p||e[7]!==_||e[8]!==o||e[9]!==m||e[10]!==a||e[11]!==i||e[12]!==g||e[13]!==u||e[14]!==l?(L=o===0&&_&&h.jsx(Ox,{theme:u,showPlaceholder:!1,allowFocus:!m,...i.cellData[$o],...i.cellRuntime[$o],...d,runElapsedTimeMs:i.cellRuntime[$o].runElapsedTimeMs??i.cellData[$o].lastExecutionTime,canDelete:!0,mode:a,connectionState:p,ref:i.cellHandles[$o],userConfig:l,isCollapsed:!1,collapseCount:0,canMoveX:!1,actions:d,deleteCell:g},$o),e[5]=d,e[6]=p,e[7]=_,e[8]=o,e[9]=m,e[10]=a,e[11]=i,e[12]=g,e[13]=u,e[14]=l,e[15]=L):L=e[15],e[16]!==d||e[17]!==s.width||e[18]!==n||e[19]!==p||e[20]!==f||e[21]!==m||e[22]!==a||e[23]!==i||e[24]!==g||e[25]!==u||e[26]!==l?(B=n.topLevelIds.map(F=>{if(F===$o)return null;const V=i.cellData[F],R=i.cellRuntime[F];return h.jsx(Ox,{theme:u,showPlaceholder:f,allowFocus:!m,...V,...R,runElapsedTimeMs:R.runElapsedTimeMs??V.lastExecutionTime,canDelete:!f,mode:a,connectionState:p,ref:i.cellHandles[F],userConfig:l,config:V.config,name:V.name,isCollapsed:n.isCollapsed(F),collapseCount:n.getCount(F),canMoveX:s.width==="columns",actions:d,deleteCell:g},V.id.toString())}),e[16]=d,e[17]=s.width,e[18]=n,e[19]=p,e[20]=f,e[21]=m,e[22]=a,e[23]=i,e[24]=g,e[25]=u,e[26]=l,e[27]=B):B=e[27],e[28]!==n.topLevelIds||e[29]!==T||e[30]!==L||e[31]!==B?(O=h.jsxs(v1,{id:T,items:M,strategy:Dj,children:[L,B]}),e[28]=n.topLevelIds,e[29]=T,e[30]=L,e[31]=B,e[32]=O):O=e[32],e[33]!==s.width||e[34]!==n.id||e[35]!==o||e[36]!==O||e[37]!==y||e[38]!==x||e[39]!==S||e[40]!==I?(z=h.jsx(Fx,{columnId:b,index:o,canMoveLeft:y,canMoveRight:x,width:v,canDelete:S,footer:I,children:O}),e[33]=s.width,e[34]=n.id,e[35]=o,e[36]=O,e[37]=y,e[38]=x,e[39]=S,e[40]=I,e[41]=z):z=e[41],z},YM=t=>{const e=X.c(18),{columnId:n,className:o}=t,{createNewCell:r}=Ft(),s=$e(Ls),[i,a]=dV(!1),l=$e(pc),c=$e(b4);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=Oe("mb-0 rounded-none sm:px-4 md:px-5 lg:px-8 tracking-wide no-wrap whitespace-nowrap","hover:bg-accent hover:text-accent-foreground font-semibold uppercase text-xs"),e[0]=d):d=e[0];const u=d;let f;e[1]!==l||e[2]!==s||e[3]!==n||e[4]!==r||e[5]!==i||e[6]!==a.toggle||e[7]!==c?(f=()=>i?h.jsx(uV,{onClose:a.toggle}):h.jsxs(h.Fragment,{children:[h.jsxs(Pe,{className:u,variant:"text",size:"sm",disabled:!c,onClick:()=>r({cellId:{type:"__end__",columnId:n},before:!1}),children:[h.jsx(Wp,{className:"mr-2 size-4 flex-shrink-0"}),"Python"]}),h.jsxs(Pe,{className:u,variant:"text",size:"sm",disabled:!c,onClick:()=>{hr(s,r),r({cellId:{type:"__end__",columnId:n},before:!1,code:new ia().defaultCode})},children:[h.jsx(Yp,{className:"mr-2 size-4 flex-shrink-0"}),"Markdown"]}),h.jsxs(Pe,{className:u,variant:"text",size:"sm",disabled:!c,onClick:()=>{hr(s,r),r({cellId:{type:"__end__",columnId:n},before:!1,code:new zc().defaultCode})},children:[h.jsx(ur,{className:"mr-2 size-4 flex-shrink-0"}),"SQL"]}),h.jsx(Le,{content:l?null:h.jsx("span",{children:"Enable via settings under AI Assist"}),delayDuration:100,asChild:!1,children:h.jsxs(Pe,{className:u,variant:"text",size:"sm",disabled:!l||!c,onClick:a.toggle,children:[h.jsx(oa,{className:"mr-2 size-4 flex-shrink-0"}),"Generate with AI"]})})]}),e[1]=l,e[2]=s,e[3]=n,e[4]=r,e[5]=i,e[6]=a.toggle,e[7]=c,e[8]=f):f=e[8];const m=f,_=!i&&"w-fit",g=i&&"opacity-100 w-full max-w-4xl shadow-lg shadow-[var(--blue-3)]";let p,b,y;return e[9]!==o||e[10]!==_||e[11]!==g?(p=Oe("shadow-sm border border-border rounded transition-all duration-200 overflow-hidden divide-x divide-border flex",_,g,o),e[9]=o,e[10]=_,e[11]=g,e[12]=p):p=e[12],e[13]!==m?(b=m(),e[13]=m,e[14]=b):b=e[14],e[15]!==p||e[16]!==b?(y=h.jsx("div",{className:"flex justify-center mt-4 pt-6 pb-32 group gap-4 w-full print:hidden",children:h.jsx("div",{className:p,children:b})}),e[15]=p,e[16]=b,e[17]=y):y=e[17],y};function JM(){g4()}const KM=hV(fV,400),XM=(t,e)=>{ct.get(Fs)||t.isEmpty()||e.isEmpty()||ca(t.inOrderIds,e.inOrderIds)||KM({cell_ids:t.inOrderIds})},zx=t=>{const e=X.c(65),{userConfig:n,appConfig:o,hideControls:r}=t,s=r!==void 0&&r;mV(Z4,XM);const{setCells:i,mergeAllColumns:a,collapseAllCells:l,expandAllCells:c}=Ft(),d=$e(rm),u=$e(pV),f=$e(gV),m=Cm(),_=Zt(vd),g=d.mode==="edit",p=d.mode==="present",b=$e(_V);let y;e[0]===Symbol.for("react.memo_cache_sentinel")?(y=[],e[0]=y):y=e[0],A.useEffect(QM,y);const x=n.runtime.auto_instantiate;let v,S,k;e[1]!==i||e[2]!==_?(v=(ce,me)=>{i(ce);const de=ce.map(eO),ge=ce.map(tO),ie=ce.map(nO);_({names:de,codes:ge,configs:ie,layout:me})},e[1]=i,e[2]=_,e[3]=v):v=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(S=R4(),e[4]=S):S=e[4],e[5]!==v||e[6]!==n.runtime.auto_instantiate?(k={autoInstantiate:x,setCells:v,sessionId:S},e[5]=v,e[6]=n.runtime.auto_instantiate,e[7]=k):k=e[7];const{connection:E}=_$(k);let j,I;e[8]!==o.app_title||e[9]!==m?(j=()=>{document.title=o.app_title||An.basename(m??"")||"Untitled Notebook"},I=[o.app_title,m],e[8]=o.app_title,e[9]=m,e[10]=j,e[11]=I):(j=e[10],I=e[11]),A.useEffect(j,I);const T=Tc(o.width);let M,L;e[12]!==o.width||e[13]!==a||e[14]!==T?(M=()=>{T==="columns"&&o.width!=="columns"&&a()},e[12]=o.width,e[13]=a,e[14]=T,e[15]=M):M=e[15],e[16]!==o.width||e[17]!==a||e[18]!==u||e[19]!==T?(L=[o.width,T,a,u],e[16]=o.width,e[17]=a,e[18]=u,e[19]=T,e[20]=L):L=e[20],A.useEffect(M,L);const B=function(){const ce=X.c(2),me=cd();let de;return ce[0]!==me?(de=()=>me(az(po())),ce[0]=me,ce[1]=de):de=ce[1],tt(de)}(),O=og(),z=ng();let F,V,R,C,H,N;e[21]!==B?(F=()=>{B()},e[21]=B,e[22]=F):F=e[22],Gt("global.runStale",F),Gt("global.interrupt",oO),e[23]!==z?(V=()=>{z()},e[23]=z,e[24]=V):V=e[24],Gt("global.hideCode",V),e[25]!==O?(R=()=>{O()},e[25]=O,e[26]=R):R=e[26],Gt("global.runAll",R),e[27]!==l?(C=()=>{l()},e[27]=l,e[28]=C):C=e[28],Gt("global.collapseAllSections",C),e[29]!==c?(H=()=>{c()},e[29]=c,e[30]=H):H=e[30],Gt("global.expandAllSections",H),e[31]!==o||e[32]!==E||e[33]!==n||e[34]!==d.mode?(N=h.jsx(WM,{connStatus:E,mode:d.mode,userConfig:n,appConfig:o}),e[31]=o,e[32]=E,e[33]=n,e[34]=d.mode,e[35]=N):N=e[35];const $=N,Y=o.width;let Z,q,re,ne,oe,G,Q;return e[36]===Symbol.for("react.memo_cache_sentinel")?(Z=Oe("pt-4 sm:pt-12 pb-2 mb-4 print:hidden z-50","sticky left-0"),e[36]=Z):Z=e[36],e[37]!==m||e[38]!==g?(q=g&&h.jsx("div",{className:"flex items-center justify-center container",children:h.jsx(KN,{filename:m})}),e[37]=m,e[38]=g,e[39]=q):q=e[39],e[40]!==E||e[41]!==q?(re=h.jsx(y$,{connection:E,className:Z,children:q}),e[40]=E,e[41]=q,e[42]=re):re=e[42],e[43]!==o||e[44]!==$||e[45]!==f||e[46]!==d.mode?(ne=f&&h.jsx(b$,{appConfig:o,mode:d.mode,children:$}),e[43]=o,e[44]=$,e[45]=f,e[46]=d.mode,e[47]=ne):ne=e[47],e[48]!==o.width||e[49]!==E||e[50]!==b||e[51]!==re||e[52]!==ne?(oe=h.jsxs(x$,{connection:E,isRunning:b,width:Y,children:[re,ne]}),e[48]=o.width,e[49]=E,e[50]=b,e[51]=re,e[52]=ne,e[53]=oe):oe=e[53],e[54]!==o||e[55]!==E||e[56]!==s||e[57]!==p||e[58]!==b||e[59]!==B||e[60]!==z?(G=!s&&h.jsx(Vc,{children:h.jsx(WN,{presenting:p,onTogglePresenting:z,onInterrupt:Dm,onRun:B,closed:E.state===mt.CLOSED,running:b,appConfig:o})}),e[54]=o,e[55]=E,e[56]=s,e[57]=p,e[58]=b,e[59]=B,e[60]=z,e[61]=G):G=e[61],e[62]!==oe||e[63]!==G?(Q=h.jsxs(h.Fragment,{children:[oe,G]}),e[62]=oe,e[63]=G,e[64]=Q):Q=e[64],Q};function ZM(){US.INSTANCE.stop()}function QM(){return US.INSTANCE.start(bV),ZM}function eO(t){return t.name}function tO(t){return t.code}function nO(t){return t.config}function oO(){Dm()}const Bx=t=>$e(yV)[t.capability]?t.children:null,Zn=A.forwardRef((t,e)=>{const n=X.c(18);let o,r,s,i,a;n[0]!==t?({children:o,tooltip:a,selected:i,className:r,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s,n[4]=i,n[5]=a):(o=n[1],r=n[2],s=n[3],i=n[4],a=n[5]);const l=!i&&"hover:bg-[var(--sage-3)]",c=i&&"bg-[var(--sage-4)]";let d,u;n[6]!==r||n[7]!==l||n[8]!==c?(d=Oe("h-full flex items-center p-2 text-sm shadow-inset font-mono cursor-pointer rounded",l,c,r),n[6]=r,n[7]=l,n[8]=c,n[9]=d):d=n[9],n[10]!==o||n[11]!==e||n[12]!==s||n[13]!==d?(u=h.jsx("div",{ref:e,className:d,...s,children:o}),n[10]=o,n[11]=e,n[12]=s,n[13]=d,n[14]=u):u=n[14];const f=u;if(a){let m;return n[15]!==f||n[16]!==a?(m=h.jsx(Le,{content:a,side:"top",delayDuration:200,children:f}),n[15]=f,n[16]=a,n[17]=m):m=n[17],m}return f});Zn.displayName="FooterItem";const rO=()=>{var d;const t=X.c(14),e=$e(Q4),n=$e(pc),o=((d=e==null?void 0:e.open_ai)==null?void 0:d.model)||"gpt-4-turbo",{handleClick:r}=Ca();if(!n){let u,f,m;return t[0]!==r?(u=()=>r("ai"),t[0]=r,t[1]=u):u=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(oa,{className:"h-4 w-4 opacity-60"}),t[2]=f):f=t[2],t[3]!==u?(m=h.jsx(Zn,{tooltip:"Assist is disabled",selected:!1,onClick:u,"data-testid":"footer-ai-disabled",children:f}),t[3]=u,t[4]=m):m=t[4],m}let s,i,a,l,c;return t[5]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsx("b",{children:"Assist model:"}),t[5]=s):s=t[5],t[6]!==o?(i=h.jsxs(h.Fragment,{children:[s," ",o]}),t[6]=o,t[7]=i):i=t[7],t[8]!==r?(a=()=>r("ai"),t[8]=r,t[9]=a):a=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(oa,{className:"h-4 w-4"}),t[10]=l):l=t[10],t[11]!==i||t[12]!==a?(c=h.jsx(Zn,{tooltip:i,onClick:a,selected:!1,"data-testid":"footer-ai-enabled",children:l}),t[11]=i,t[12]=a,t[13]=c):c=t[13],c},sO=()=>{const t=X.c(26),e=$e(mn).state,n=Hm();let o,r;t[0]!==e||t[1]!==n?(o=async()=>{if(e===mt.OPEN){if(En())return{isHealthy:!0,lastChecked:new Date,error:void 0};try{return{isHealthy:await n.isHealthy(),lastChecked:new Date,error:void 0}}catch(v){const S=v;return{isHealthy:!1,lastChecked:new Date,error:S instanceof Error?S.message:"Unknown error"}}}},r=[n,e],t[0]=e,t[1]=n,t[2]=o,t[3]=r):(o=t[2],r=t[3]);const{isFetching:s,error:i,data:a,refetch:l}=qn(o,r),c=e===mt.OPEN?3e4:null;let d,u;t[4]!==c?(d={delayMs:c,whenVisible:!0},t[4]=c,t[5]=d):d=t[5],Sa(l,d),t[6]!==e||t[7]!==a||t[8]!==i?(u=()=>[vm(e.toLowerCase()),a!=null&&a.lastChecked?a.isHealthy?"\u2713 Healthy":"\u2717 Unhealthy":"Health: Unknown",i?`Error: ${i}`:""].filter(Boolean).join(`
`),t[6]=e,t[7]=a,t[8]=i,t[9]=u):u=t[9];const f=u;let m;t[10]!==e||t[11]!==(a==null?void 0:a.isHealthy)||t[12]!==(a==null?void 0:a.lastChecked)||t[13]!==s?(m=()=>s||e===mt.CONNECTING?h.jsx(Jn,{size:"small"}):e===mt.CLOSING?h.jsx(Jn,{className:"text-destructive",size:"small"}):e===mt.OPEN?a!=null&&a.isHealthy?h.jsx(Yc,{className:"w-4 h-4 text-[var(--green-9)]"}):a!=null&&a.lastChecked?h.jsx(X4,{className:"w-4 h-4 text-[var(--yellow-9)]"}):h.jsx(Yc,{className:"w-4 h-4"}):h.jsx(op,{className:"w-4 h-4 text-red-500"}),t[10]=e,t[11]=a==null?void 0:a.isHealthy,t[12]=a==null?void 0:a.lastChecked,t[13]=s,t[14]=m):m=t[14];const _=m,g=f();let p,b,y,x;return t[15]!==e?(p=e===mt.OPEN&&h.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Click to refresh health status"}),t[15]=e,t[16]=p):p=t[16],t[17]!==g||t[18]!==p?(b=h.jsxs("div",{className:"text-sm whitespace-pre-line",children:[g,p]}),t[17]=g,t[18]=p,t[19]=b):b=t[19],t[20]!==_?(y=_(),t[20]=_,t[21]=y):y=t[21],t[22]!==l||t[23]!==b||t[24]!==y?(x=h.jsx(Zn,{tooltip:b,selected:!1,onClick:l,"data-testid":"footer-backend-status",children:y}),t[22]=l,t[23]=b,t[24]=y,t[25]=x):x=t[25],x},iO=t=>{const e=X.c(3);let n,o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx("path",{d:"M205.28 31.36c14.096 14.88 20.016 35.2 22.512 63.68c6.626 0 12.805 1.47 16.976 7.152l7.792 10.56A17.55 17.55 0 0 1 256 123.2v28.688c-.008 3.704-1.843 7.315-4.832 9.504C215.885 187.222 172.35 208 128 208c-49.066 0-98.19-28.273-123.168-46.608c-2.989-2.189-4.825-5.8-4.832-9.504V123.2c0-3.776 1.2-7.424 3.424-10.464l7.792-10.544c4.173-5.657 10.38-7.152 16.992-7.152c2.496-28.48 8.4-48.8 22.512-63.68C77.331 3.165 112.567.06 127.552 0H128c14.72 0 50.4 2.88 77.28 31.36m-77.264 47.376c-3.04 0-6.544.176-10.272.544c-1.312 4.896-3.248 9.312-6.08 12.128c-11.2 11.2-24.704 12.928-31.936 12.928c-6.802 0-13.927-1.42-19.744-5.088c-5.502 1.808-10.786 4.415-11.136 10.912c-.586 12.28-.637 24.55-.688 36.824c-.026 6.16-.05 12.322-.144 18.488c.024 3.579 2.182 6.903 5.44 8.384C79.936 185.92 104.976 192 128.016 192c23.008 0 48.048-6.08 74.512-18.144c3.258-1.48 5.415-4.805 5.44-8.384c.317-18.418.062-36.912-.816-55.312h.016c-.342-6.534-5.648-9.098-11.168-10.912c-5.82 3.652-12.927 5.088-19.728 5.088c-7.232 0-20.72-1.728-31.936-12.928c-2.832-2.816-4.768-7.232-6.08-12.128a106 106 0 0 0-10.24-.544m-26.941 43.93c5.748 0 10.408 4.66 10.408 10.409v19.183c0 5.749-4.66 10.409-10.408 10.409s-10.408-4.66-10.408-10.409v-19.183c0-5.748 4.66-10.408 10.408-10.408m53.333 0c5.749 0 10.409 4.66 10.409 10.409v19.183c0 5.749-4.66 10.409-10.409 10.409c-5.748 0-10.408-4.66-10.408-10.409v-19.183c0-5.748 4.66-10.408 10.408-10.408M81.44 28.32c-11.2 1.12-20.64 4.8-25.44 9.92c-10.4 11.36-8.16 40.16-2.24 46.24c4.32 4.32 12.48 7.2 21.28 7.2c6.72 0 19.52-1.44 30.08-12.16c4.64-4.48 7.52-15.68 7.2-27.04c-.32-9.12-2.88-16.64-6.72-19.84c-4.16-3.68-13.6-5.28-24.16-4.32m68.96 4.32c-3.84 3.2-6.4 10.72-6.72 19.84c-.32 11.36 2.56 22.56 7.2 27.04c10.56 10.72 23.36 12.16 30.08 12.16c8.8 0 16.96-2.88 21.28-7.2c5.92-6.08 8.16-34.88-2.24-46.24c-4.8-5.12-14.24-8.8-25.44-9.92c-10.56-.96-20 .64-24.16 4.32M128 56c-2.56 0-5.6.16-8.96.48c.32 1.76.48 3.68.64 5.76c0 1.44 0 2.88-.16 4.48c3.2-.32 5.92-.32 8.48-.32s5.28 0 8.48.32c-.16-1.6-.16-3.04-.16-4.48c.16-2.08.32-4 .64-5.76c-3.36-.32-6.4-.48-8.96-.48"}),e[0]=n):n=e[0],e[1]!==t?(o=h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.24em",height:"1em",viewBox:"0 0 256 208",fill:"currentColor",...t,children:n}),e[1]=t,e[2]=o):o=e[2],o},aO=en(t=>t(xV).completion.copilot),lO=()=>{const t=X.c(1);if($e(aO)==="github"){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx(cO,{}),t[0]=e):e=t[0],e}return null},Ux=Qt.get("[copilot-status-bar]"),cO=()=>{const t=$e(IS),e=$e(e$)!==null,{handleClick:n}=Ca(),o=()=>n("ai"),r=t?"Ready":"Not connected",s=Zt(IS),i=Zt(t$);return wV(()=>{const a=ES();let l=!0;return(async()=>{try{if(await a.initializePromise.catch(d=>{throw Ux.error("Failed to initialize",d),a.close(),d}),!l)return;const c=await a.signedIn();if(!l)return;s(c),i(c?"signedIn":"signedOut")}catch(c){if(!l)return;Ux.warn("Connection failed",c),s(!1),i("connectionError"),lt({title:"GitHub Copilot Connection Error",description:"Failed to connect to GitHub Copilot. Check settings and try again.",variant:"danger",action:h.jsx(Pe,{variant:"link",onClick:o,children:"Settings"})})}})(),()=>{l=!1}}),h.jsx(Zn,{tooltip:h.jsxs(h.Fragment,{children:[h.jsx("b",{children:"GitHub Copilot:"})," ",r]}),selected:!1,onClick:o,"data-testid":"footer-copilot-status",children:h.jsx("span",{children:e?h.jsx(Jn,{className:"h-4 w-4"}):h.jsx(iO,{className:Oe("h-4 w-4",!t&&"opacity-60")})})})},dO=t=>{const e=X.c(17),[n,o]=A.useState(0),r=$e(mn);let s,i,a,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>o(mO),i={delayMs:1e4,whenVisible:!0},e[0]=s,e[1]=i):(s=e[0],i=e[1]),Sa(s,i),e[2]!==r.state?(a=async()=>En()||r.state!==mt.OPEN?null:vV(),e[2]=r.state,e[3]=a):a=e[3],e[4]!==r.state||e[5]!==n?(l=[n,r.state],e[4]=r.state,e[5]=n,e[6]=l):l=e[6];const{data:c}=qn(a,l);let d,u,f,m;return e[7]!==c?(d=(c==null?void 0:c.gpu)&&c.gpu.length>0&&h.jsx(fO,{gpus:c.gpu}),e[7]=c,e[8]=d):d=e[8],e[9]!==c?(u=c&&h.jsx(uO,{memory:c.memory,kernel:c.kernel,server:c.server}),e[9]=c,e[10]=u):u=e[10],e[11]!==c?(f=c&&h.jsx(hO,{cpu:c.cpu}),e[11]=c,e[12]=f):f=e[12],e[13]!==d||e[14]!==u||e[15]!==f?(m=h.jsxs("div",{className:"flex gap-2 items-center px-1",children:[d,u,f]}),e[13]=d,e[14]=u,e[15]=f,e[16]=m):m=e[16],m},uO=t=>{const e=X.c(25),{memory:n,kernel:o,server:r}=t,{percent:s,total:i,available:a}=n;let l;e[0]!==s?(l=Math.round(s),e[0]=s,e[1]=l):l=e[1];const c=l;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("b",{children:"computer memory:"}),e[2]=d):d=e[2];const u=i-a;let f,m,_,g,p,b,y,x,v;return e[3]!==u?(f=Ku(u),e[3]=u,e[4]=f):f=e[4],e[5]!==i?(m=Ku(i),e[5]=i,e[6]=m):m=e[6],e[7]!==c||e[8]!==f||e[9]!==m?(_=h.jsxs("span",{children:[d," ",f," / ",m," GB (",c,"%)"]}),e[7]=c,e[8]=f,e[9]=m,e[10]=_):_=e[10],e[11]!==r?(g=(r==null?void 0:r.memory)&&h.jsxs("span",{children:[h.jsx("b",{children:"marimo server:"})," ",Ol(r.memory)]}),e[11]=r,e[12]=g):g=e[12],e[13]!==o?(p=(o==null?void 0:o.memory)&&h.jsxs("span",{children:[h.jsx("b",{children:"kernel:"})," ",Ol(o.memory)]}),e[13]=o,e[14]=p):p=e[14],e[15]!==_||e[16]!==g||e[17]!==p?(b=h.jsxs("div",{className:"flex flex-col gap-1",children:[_,g,p]}),e[15]=_,e[16]=g,e[17]=p,e[18]=b):b=e[18],e[19]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx(Op,{className:"w-4 h-4"}),e[19]=y):y=e[19],e[20]!==c?(x=h.jsxs("div",{className:"flex items-center gap-1","data-testid":"memory-usage-bar",children:[y,h.jsx(Ju,{percent:c,colorClassName:"bg-primary"})]}),e[20]=c,e[21]=x):x=e[21],e[22]!==x||e[23]!==b?(v=h.jsx(Le,{delayDuration:200,content:b,children:x}),e[22]=x,e[23]=b,e[24]=v):v=e[24],v},hO=t=>{const e=X.c(11),{cpu:n}=t,{percent:o}=n;let r;e[0]!==o?(r=Math.round(o),e[0]=o,e[1]=r):r=e[1];const s=r;let i,a,l,c,d;return e[2]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx("b",{children:"CPU:"}),e[2]=i):i=e[2],e[3]!==s?(a=h.jsxs("span",{children:[i," ",s,"%"]}),e[3]=s,e[4]=a):a=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(n$,{className:"w-4 h-4"}),e[5]=l):l=e[5],e[6]!==s?(c=h.jsxs("div",{className:"flex items-center gap-1","data-testid":"cpu-bar",children:[l,h.jsx(Ju,{percent:s,colorClassName:"bg-primary"})]}),e[6]=s,e[7]=c):c=e[7],e[8]!==a||e[9]!==c?(d=h.jsx(Le,{delayDuration:200,content:a,children:c}),e[8]=a,e[9]=c,e[10]=d):d=e[10],d},fO=t=>{const e=X.c(12),{gpus:n}=t;let o;e[0]!==n?(o=Math.round(n.reduce(pO,0)/n.length),e[0]=n,e[1]=o):o=e[1];const r=o;let s,i,a,l,c;return e[2]!==n?(s=n.map(gO),e[2]=n,e[3]=s):s=e[3],e[4]!==s?(i=h.jsx("div",{className:"flex flex-col gap-1",children:s}),e[4]=s,e[5]=i):i=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(Rp,{className:"w-4 h-4"}),e[6]=a):a=e[6],e[7]!==r?(l=h.jsxs("div",{className:"flex items-center gap-1","data-testid":"gpu-bar",children:[a,h.jsx(Ju,{percent:r,colorClassName:"bg-[var(--grass-9)]"})]}),e[7]=r,e[8]=l):l=e[8],e[9]!==i||e[10]!==l?(c=h.jsx(Le,{delayDuration:200,content:i,children:l}),e[9]=i,e[10]=l,e[11]=c):c=e[11],c},Ju=t=>{const e=X.c(7),{percent:n,colorClassName:o}=t;let r;e[0]!==o?(r=Oe("h-full bg-primary",o),e[0]=o,e[1]=r):r=e[1];const s=`${n}%`;let i,a;return e[2]!==s?(i={width:s},e[2]=s,e[3]=i):i=e[3],e[4]!==r||e[5]!==i?(a=h.jsx("div",{className:"h-3 w-20 bg-[var(--slate-4)] rounded-lg overflow-hidden border",children:h.jsx("div",{className:r,style:i})}),e[4]=r,e[5]=i,e[6]=a):a=e[6],a};function Ol(t){return t>1073741824?`${Ku(t)} GB`:`${function(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(e/1048576)}(t)} MB`}function Ku(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(t/1073741824)}function mO(t){return t+1}function pO(t,e){return t+e.memory.percent}function gO(t){return h.jsxs("span",{children:[h.jsxs("b",{children:["GPU ",t.index," (",t.name,"):"]})," ",Ol(t.memory.used)," / ",Ol(t.memory.total)," GB (",Math.round(t.memory.percent),"%)"]},t.index)}const _O=()=>{const t=X.c(13),e=$e(ts),[n,o]=fn(P4),[r,s]=A.useState(!1);if(!ya()||e==="disabled")return null;const i=e?"Real-time collaboration active":"Connecting to real-time collaboration";let a,l,c,d,u,f;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(Qp,{className:"w-4 h-4"}),t[0]=a):a=t[0],t[1]!==i?(l=h.jsx(Qs,{asChild:!0,children:h.jsx(Zn,{tooltip:i,selected:!1,"data-testid":"footer-rtc-status",children:a})}),t[1]=i,t[2]=l):l=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"font-medium leading-none",children:"Username"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Set your username for real-time collaboration"})]}),t[3]=c):c=t[3],t[4]!==o?(d=m=>o(m.target.value),t[4]=o,t[5]=d):d=t[5],t[6]!==d||t[7]!==n?(u=h.jsx(Gs,{className:"w-80",children:h.jsxs("div",{className:"space-y-4",children:[c,h.jsx(cr,{value:n,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",onChange:d,placeholder:"Enter your username"})]})}),t[6]=d,t[7]=n,t[8]=u):u=t[8],t[9]!==r||t[10]!==l||t[11]!==u?(f=h.jsxs(zr,{open:r,onOpenChange:s,children:[l,u]}),t[9]=r,t[10]=l,t[11]=u,t[12]=f):f=t[12],f},bO=()=>{const t=X.c(56),{selectedPanel:e,isTerminalOpen:n}=vc(),{toggleApplication:o,toggleTerminal:r}=aa(),[s,i]=zs(),a=$e(kV),l=yO,c=dd.find(xO);let d;Bo(c,"Error panel not found"),t[0]!==r?(d=()=>{r()},t[0]=r,t[1]=d):d=t[1],Gt("global.toggleTerminal",d);const u=Zn,f=c.tooltip,m=e===c.type,_=()=>o(c.type),g=l(c,a>0?"text-destructive":"");let p,b,y,x,v;t[2]!==a?(p=h.jsx("span",{className:"ml-1 font-mono mt-[0.125rem]",children:a}),t[2]=a,t[3]=p):p=t[3],t[4]!==u||t[5]!==c||t[6]!==m||t[7]!==_||t[8]!==g||t[9]!==p?(b=h.jsxs(u,{tooltip:f,selected:m,onClick:_,"data-testid":"footer-errors",children:[g,p]}),t[4]=u,t[5]=c,t[6]=m,t[7]=_,t[8]=g,t[9]=p,t[10]=b):b=t[10],t[11]!==r?(y=()=>r(),t[11]=r,t[12]=y):y=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(Xp,{className:"h-5 w-5"}),t[13]=x):x=t[13],t[14]!==n||t[15]!==y?(v=h.jsx(Bx,{capability:"terminal",children:h.jsx(Zn,{tooltip:"Open terminal",selected:n,onClick:y,"data-testid":"footer-terminal",children:x})}),t[14]=n,t[15]=y,t[16]=v):v=t[16];const S=s.runtime.auto_instantiate?"Disable autorun on startup":"Enable autorun on startup";let k,E,j;t[17]!==s||t[18]!==i?(k=async()=>{const q={...s,runtime:{...s.runtime,auto_instantiate:!s.runtime.auto_instantiate}};await Bs({config:q}).then(()=>i(q))},t[17]=s,t[18]=i,t[19]=k):k=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(E=h.jsx("span",{children:"on startup: "}),t[20]=E):E=t[20],t[21]!==s.runtime.auto_instantiate?(j=s.runtime.auto_instantiate?h.jsx(wr,{size:14}):h.jsx(xr,{size:14}),t[21]=s.runtime.auto_instantiate,t[22]=j):j=t[22];const I=s.runtime.auto_instantiate?"autorun":"lazy";let T,M,L,B;t[23]!==I?(T=h.jsx("span",{children:I}),t[23]=I,t[24]=T):T=t[24],t[25]!==j||t[26]!==T?(M=h.jsxs("div",{className:"font-prose text-sm flex items-center gap-1",children:[E,j,T]}),t[25]=j,t[26]=T,t[27]=M):M=t[27],t[28]!==S||t[29]!==k||t[30]!==M?(L=h.jsx(Zn,{tooltip:S,selected:!1,onClick:k,"data-testid":"footer-autorun-startup",children:M}),t[28]=S,t[29]=k,t[30]=M,t[31]=L):L=t[31],t[32]===Symbol.for("react.memo_cache_sentinel")?(B=h.jsx("div",{className:"border-r border-border h-6 mx-1"}),t[32]=B):B=t[32];const O=s.runtime.on_cell_change==="autorun"?"Disable autorun":"Enable autorun";let z,F,V,R,C,H,N,$,Y,Z;return t[33]!==s||t[34]!==i?(z=async()=>{const q={...s,runtime:{...s.runtime,on_cell_change:s.runtime.on_cell_change==="autorun"?"lazy":"autorun"}};await Bs({config:q}).then(()=>i(q))},t[33]=s,t[34]=i,t[35]=z):z=t[35],t[36]===Symbol.for("react.memo_cache_sentinel")?(F=h.jsx("span",{children:"on cell change: "}),t[36]=F):F=t[36],t[37]!==s.runtime.on_cell_change?(V=h.jsxs("div",{className:"font-prose text-sm flex items-center gap-1",children:[F,s.runtime.on_cell_change==="autorun"?h.jsx(wr,{size:14}):h.jsx(xr,{size:14}),h.jsx("span",{children:s.runtime.on_cell_change})]}),t[37]=s.runtime.on_cell_change,t[38]=V):V=t[38],t[39]!==O||t[40]!==z||t[41]!==V?(R=h.jsx(Zn,{tooltip:O,selected:!1,onClick:z,"data-testid":"footer-autorun-cell-change",children:V}),t[39]=O,t[40]=z,t[41]=V,t[42]=R):R=t[42],t[43]===Symbol.for("react.memo_cache_sentinel")?(C=h.jsx("div",{className:"border-r border-border h-6 mx-1"}),t[43]=C):C=t[43],t[44]!==s||t[45]!==i?(H=!En()&&h.jsx(Zn,{tooltip:null,selected:!1,"data-testid":"footer-module-reload",children:h.jsxs(Us,{children:[h.jsxs(Vs,{className:"font-prose text-sm flex items-center gap-1",children:[h.jsx("span",{children:"on module change: "}),s.runtime.auto_reload==="off"&&h.jsx(op,{size:14}),s.runtime.auto_reload==="lazy"&&h.jsx(xr,{size:14}),s.runtime.auto_reload==="autorun"&&h.jsx(wr,{size:14}),h.jsx("span",{children:s.runtime.auto_reload}),h.jsx(ra,{size:14})]}),h.jsx(Hs,{children:["off","lazy","autorun"].map(q=>h.jsxs(sn,{onClick:async()=>{const re={...s,runtime:{...s.runtime,auto_reload:q}};await Bs({config:re}).then(()=>i(re))},children:[q==="off"&&h.jsx(op,{size:14,className:"mr-2 text-muted-foreground"}),q==="lazy"&&h.jsx(xr,{size:14,className:"mr-2 text-muted-foreground"}),q==="autorun"&&h.jsx(wr,{size:14,className:"mr-2 text-muted-foreground"}),q]},q))})]})}),t[44]=s,t[45]=i,t[46]=H):H=t[46],t[47]===Symbol.for("react.memo_cache_sentinel")?(N=h.jsx("div",{className:"mx-auto"}),t[47]=N):N=t[47],t[48]===Symbol.for("react.memo_cache_sentinel")?($=h.jsx(VN,{children:h.jsx(Le,{content:h.jsx("div",{className:"w-[200px]",children:"Kiosk mode is enabled. This allows you to view the outputs of the cells without the ability to edit them."}),children:h.jsx("span",{className:"text-muted-foreground text-sm mr-4",children:"kiosk mode"})})}),t[48]=$):$=t[48],t[49]===Symbol.for("react.memo_cache_sentinel")?(Y=h.jsxs("div",{className:"flex items-center",children:[h.jsx(dO,{}),h.jsx(rO,{}),h.jsx(lO,{}),h.jsx(_O,{}),h.jsx(sO,{})]}),t[49]=Y):Y=t[49],t[50]!==v||t[51]!==L||t[52]!==R||t[53]!==H||t[54]!==b?(Z=h.jsxs("footer",{className:"h-10 py-2 bg-background flex items-center text-muted-foreground text-md px-1 border-t border-border select-none no-print text-sm shadow-[0_0_4px_1px_rgba(0,0,0,0.1)] z-50 print:hidden hide-on-fullscreen",children:[b,v,L,B,R,C,H,N,$,Y]}),t[50]=v,t[51]=L,t[52]=R,t[53]=H,t[54]=b,t[55]=Z):Z=t[55],Z};function yO(t,e){const{Icon:n}=t;return h.jsx(n,{className:Oe("h-5 w-5",e)})}function xO(t){return t.type==="errors"}const wO=t=>{const e=X.c(6),{children:n}=t,{openModal:o,closeModal:r}=Wn();let s,i;return e[0]!==r||e[1]!==o?(s=()=>o(h.jsx(vO,{onClose:r})),e[0]=r,e[1]=o,e[2]=s):s=e[2],e[3]!==n||e[4]!==s?(i=h.jsx(eS,{onClick:s,children:n}),e[3]=n,e[4]=s,e[5]=i):i=e[5],i},vO=t=>{const e=X.c(9),{onClose:n}=t;let o,r,s,i,a,l,c;return e[0]!==n?(o=async d=>{d.preventDefault();const u=new FormData(d.target),f=u.get("rating"),m=u.get("message");fetch("https://marimo.io/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:f,message:m})}),n(),lt({title:"Feedback sent!",description:"Thank you for your feedback!"})},e[0]=n,e[1]=o):o=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(lr,{children:"Send Feedback"}),e[2]=r):r=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsx("p",{className:"my-2 prose dark:prose-invert",children:"We want to hear from you \u2014 from minor bug reports to wishlist features and everything in between. Here are some ways you can get in touch:"}),e[3]=s):s=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsxs("li",{className:"my-0",children:["Take our"," ",h.jsx("a",{href:to.feedbackForm,target:"_blank",className:"underline",children:"two-minute survey."})]}),e[4]=i):i=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsxs("li",{className:"my-0",children:["File a"," ",h.jsx("a",{href:to.issuesPage,target:"_blank",className:"underline",children:"GitHub issue."})]}),e[5]=a):a=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsxs(Os,{children:[r,h.jsxs(Ds,{children:[s,h.jsxs("ul",{className:"list-disc ml-8 my-2 prose dark:prose-invert",children:[i,a,h.jsxs("li",{className:"my-0",children:["Chat with us on"," ",h.jsx("a",{href:to.discordLink,target:"_blank",className:"underline",children:"Discord."})]})]}),h.jsx("p",{className:"my-2 prose dark:prose-invert",children:"We're excited you're here as we build the future of Python data tooling. Thanks for being part of our community!"})]})]}),e[6]=l):l=e[6],e[7]!==o?(c=h.jsx(dr,{className:"w-fit",children:h.jsx("form",{onSubmit:o,children:l})}),e[7]=o,e[8]=c):c=e[8],c},kO=()=>{const t=X.c(10),{selectedPanel:e}=vc(),{toggleApplication:n}=aa(),o=CO;let r,s,i,a,l,c;return t[0]!==e||t[1]!==n?(r="h-full pt-4 pb-1 px-1 flex flex-col items-start text-muted-foreground text-md select-none no-print text-sm z-50 dark:bg-background print:hidden hide-on-fullscreen",s=dd.filter(NO).map(d=>h.jsx(Vx,{tooltip:d.tooltip,selected:e===d.type,onClick:()=>n(d.type),children:o(d)},d.type)),t[0]=e,t[1]=n,t[2]=r,t[3]=s):(r=t[2],s=t[3]),t[4]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(wO,{children:h.jsx(Vx,{tooltip:"Send feedback!",selected:!1,children:h.jsx(Dp,{className:"h-5 w-5"})})}),a=h.jsx("div",{className:"flex-1"}),l=h.jsx(SO,{}),t[4]=i,t[5]=a,t[6]=l):(i=t[4],a=t[5],l=t[6]),t[7]!==r||t[8]!==s?(c=h.jsxs("div",{className:r,children:[s,i,a,l]}),t[7]=r,t[8]=s,t[9]=c):c=t[9],c},SO=()=>{const t=X.c(7),e=$e(SV);let n,o,r;return t[0]!==e?(n=e>0?h.jsxs("span",{children:[e," cell",e>1?"s":""," queued or running"]}):"No cells queued or running",t[0]=e,t[1]=n):n=t[1],t[2]!==e?(o=h.jsx("div",{className:"flex flex-col-reverse gap-[1px] overflow-hidden",children:Array.from({length:e}).map(jO)}),t[2]=e,t[3]=o):o=t[3],t[4]!==n||t[5]!==o?(r=h.jsx(Le,{content:n,side:"right",delayDuration:200,children:o}),t[4]=n,t[5]=o,t[6]=r):r=t[6],r},Vx=t=>{const e=X.c(17);let n,o,r,s,i;e[0]!==t?({children:n,tooltip:i,selected:s,className:o,...r}=t,e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=s,e[5]=i):(n=e[1],o=e[2],r=e[3],s=e[4],i=e[5]);const a=!s&&"hover:bg-[var(--sage-3)]",l=s&&"bg-[var(--sage-4)]";let c,d,u;return e[6]!==o||e[7]!==a||e[8]!==l?(c=Oe("flex items-center p-2 text-sm mx-[1px] shadow-inset font-mono cursor-pointer rounded",a,l,o),e[6]=o,e[7]=a,e[8]=l,e[9]=c):c=e[9],e[10]!==n||e[11]!==r||e[12]!==c?(d=h.jsx("div",{className:c,...r,children:n}),e[10]=n,e[11]=r,e[12]=c,e[13]=d):d=e[13],e[14]!==d||e[15]!==i?(u=h.jsx(Le,{content:i,side:"right",delayDuration:200,children:d}),e[14]=d,e[15]=i,e[16]=u):u=e[16],u};function CO(t,e){const{Icon:n}=t;return h.jsx(n,{className:Oe("h-5 w-5",e)})}function NO(t){return!t.hidden&&t.position==="sidebar"}function jO(t,e){return h.jsx("div",{className:"flex-shrink-0 h-1 w-2 bg-[var(--grass-6)] border border-[var(--grass-7)]"},e.toString())}var Xu="ScrollArea",[Hx,D$]=I4(Xu),[EO,zn]=Hx(Xu),$x=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:o="hover",dir:r,scrollHideDelay:s=600,...i}=t,[a,l]=A.useState(null),[c,d]=A.useState(null),[u,f]=A.useState(null),[m,_]=A.useState(null),[g,p]=A.useState(null),[b,y]=A.useState(0),[x,v]=A.useState(0),[S,k]=A.useState(!1),[E,j]=A.useState(!1),I=ti(e,M=>l(M)),T=CV(r);return h.jsx(EO,{scope:n,type:o,dir:T,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:d,content:u,onContentChange:f,scrollbarX:m,onScrollbarXChange:_,scrollbarXEnabled:S,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:p,scrollbarYEnabled:E,onScrollbarYEnabledChange:j,onCornerWidthChange:y,onCornerHeightChange:v,children:h.jsx(Zs.div,{dir:T,...i,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":x+"px",...t.style}})})});$x.displayName=Xu;var Wx="ScrollAreaViewport",qx=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:o,nonce:r,...s}=t,i=zn(Wx,n),a=A.useRef(null),l=ti(e,a,i.onViewportChange);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(Zs.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:h.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});qx.displayName=Wx;var lo="ScrollAreaScrollbar",Zu=A.forwardRef((t,e)=>{const{forceMount:n,...o}=t,r=zn(lo,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=r,a=t.orientation==="horizontal";return A.useEffect(()=>(a?s(!0):i(!0),()=>{a?s(!1):i(!1)}),[a,s,i]),r.type==="hover"?h.jsx(IO,{...o,ref:e,forceMount:n}):r.type==="scroll"?h.jsx(AO,{...o,ref:e,forceMount:n}):r.type==="auto"?h.jsx(Gx,{...o,ref:e,forceMount:n}):r.type==="always"?h.jsx(Qu,{...o,ref:e}):null});Zu.displayName=lo;var IO=A.forwardRef((t,e)=>{const{forceMount:n,...o}=t,r=zn(lo,t.__scopeScrollArea),[s,i]=A.useState(!1);return A.useEffect(()=>{const a=r.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),i(!0)},d=()=>{l=window.setTimeout(()=>i(!1),r.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[r.scrollArea,r.scrollHideDelay]),h.jsx(Hc,{present:n||s,children:h.jsx(Gx,{"data-state":s?"visible":"hidden",...o,ref:e})})}),AO=A.forwardRef((t,e)=>{const{forceMount:n,...o}=t,r=zn(lo,t.__scopeScrollArea),s=t.orientation==="horizontal",i=Ll(()=>l("SCROLL_END"),100),[a,l]=function(c,d){return A.useReducer((u,f)=>d[u][f]??u,c)}("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,r.scrollHideDelay,l]),A.useEffect(()=>{const c=r.viewport,d=s?"scrollLeft":"scrollTop";if(c){let u=c[d];const f=()=>{const m=c[d];u!==m&&(l("SCROLL"),i()),u=m};return c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[r.viewport,s,l,i]),h.jsx(Hc,{present:n||a!=="hidden",children:h.jsx(Qu,{"data-state":a==="hidden"?"hidden":"visible",...o,ref:e,onPointerEnter:Yn(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Yn(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),Gx=A.forwardRef((t,e)=>{const n=zn(lo,t.__scopeScrollArea),{forceMount:o,...r}=t,[s,i]=A.useState(!1),a=t.orientation==="horizontal",l=Ll(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?c:d)}},10);return as(n.viewport,l),as(n.content,l),h.jsx(Hc,{present:o||s,children:h.jsx(Qu,{"data-state":s?"visible":"hidden",...r,ref:e})})}),Qu=A.forwardRef((t,e)=>{const{orientation:n="vertical",...o}=t,r=zn(lo,t.__scopeScrollArea),s=A.useRef(null),i=A.useRef(0),[a,l]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Zx(a.viewport,a.content),d={...o,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:f=>i.current=f};function u(f,m){return function(_,g,p,b="ltr"){const y=Pl(p),x=y/2,v=g||x,S=y-v,k=p.scrollbar.paddingStart+v,E=p.scrollbar.size-p.scrollbar.paddingEnd-S,j=p.content-p.viewport,I=b==="ltr"?[0,j]:[-1*j,0];return ew([k,E],I)(_)}(f,i.current,a,m)}return n==="horizontal"?h.jsx(TO,{...d,ref:e,onThumbPositionChange:()=>{if(r.viewport&&s.current){const f=Qx(r.viewport.scrollLeft,a,r.dir);s.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:f=>{r.viewport&&(r.viewport.scrollLeft=f)},onDragScroll:f=>{r.viewport&&(r.viewport.scrollLeft=u(f,r.dir))}}):n==="vertical"?h.jsx(MO,{...d,ref:e,onThumbPositionChange:()=>{if(r.viewport&&s.current){const f=Qx(r.viewport.scrollTop,a);s.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:f=>{r.viewport&&(r.viewport.scrollTop=f)},onDragScroll:f=>{r.viewport&&(r.viewport.scrollTop=u(f))}}):null}),TO=A.forwardRef((t,e)=>{const{sizes:n,onSizesChange:o,...r}=t,s=zn(lo,t.__scopeScrollArea),[i,a]=A.useState(),l=A.useRef(null),c=ti(e,l,s.onScrollbarXChange);return A.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),h.jsx(Jx,{"data-orientation":"horizontal",...r,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Pl(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,u)=>{if(s.viewport){const f=s.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),tw(f,u)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&o({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Rl(i.paddingLeft),paddingEnd:Rl(i.paddingRight)}})}})}),MO=A.forwardRef((t,e)=>{const{sizes:n,onSizesChange:o,...r}=t,s=zn(lo,t.__scopeScrollArea),[i,a]=A.useState(),l=A.useRef(null),c=ti(e,l,s.onScrollbarYChange);return A.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),h.jsx(Jx,{"data-orientation":"vertical",...r,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Pl(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,u)=>{if(s.viewport){const f=s.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),tw(f,u)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&o({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Rl(i.paddingTop),paddingEnd:Rl(i.paddingBottom)}})}})}),[OO,Yx]=Hx(lo),Jx=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:o,hasThumb:r,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:u,...f}=t,m=zn(lo,n),[_,g]=A.useState(null),p=ti(e,I=>g(I)),b=A.useRef(null),y=A.useRef(""),x=m.viewport,v=o.content-o.viewport,S=pr(d),k=pr(l),E=Ll(u,10);function j(I){if(b.current){const T=I.clientX-b.current.left,M=I.clientY-b.current.top;c({x:T,y:M})}}return A.useEffect(()=>{const I=T=>{const M=T.target;(_==null?void 0:_.contains(M))&&S(T,v)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[x,_,v,S]),A.useEffect(k,[o,k]),as(_,E),as(m.content,E),h.jsx(OO,{scope:n,scrollbar:_,hasThumb:r,onThumbChange:pr(s),onThumbPointerUp:pr(i),onThumbPositionChange:k,onThumbPointerDown:pr(a),children:h.jsx(Zs.div,{...f,ref:p,style:{position:"absolute",...f.style},onPointerDown:Yn(t.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),b.current=_.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),j(I))}),onPointerMove:Yn(t.onPointerMove,j),onPointerUp:Yn(t.onPointerUp,I=>{const T=I.target;T.hasPointerCapture(I.pointerId)&&T.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),Dl="ScrollAreaThumb",Kx=A.forwardRef((t,e)=>{const{forceMount:n,...o}=t,r=Yx(Dl,t.__scopeScrollArea);return h.jsx(Hc,{present:n||r.hasThumb,children:h.jsx(DO,{ref:e,...o})})}),DO=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:o,...r}=t,s=zn(Dl,n),i=Yx(Dl,n),{onThumbPositionChange:a}=i,l=ti(e,u=>i.onThumbChange(u)),c=A.useRef(void 0),d=Ll(()=>{c.current&&(c.current(),c.current=void 0)},100);return A.useEffect(()=>{const u=s.viewport;if(u){const f=()=>{if(d(),!c.current){const m=PO(u,a);c.current=m,a()}};return a(),u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,d,a]),h.jsx(Zs.div,{"data-state":i.hasThumb?"visible":"hidden",...r,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:Yn(t.onPointerDownCapture,u=>{const f=u.target.getBoundingClientRect(),m=u.clientX-f.left,_=u.clientY-f.top;i.onThumbPointerDown({x:m,y:_})}),onPointerUp:Yn(t.onPointerUp,i.onThumbPointerUp)})});Kx.displayName=Dl;var eh="ScrollAreaCorner",Xx=A.forwardRef((t,e)=>{const n=zn(eh,t.__scopeScrollArea),o=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&o?h.jsx(RO,{...t,ref:e}):null});Xx.displayName=eh;var RO=A.forwardRef((t,e)=>{const{__scopeScrollArea:n,...o}=t,r=zn(eh,n),[s,i]=A.useState(0),[a,l]=A.useState(0),c=!!(s&&a);return as(r.scrollbarX,()=>{var u;const d=((u=r.scrollbarX)==null?void 0:u.offsetHeight)||0;r.onCornerHeightChange(d),l(d)}),as(r.scrollbarY,()=>{var u;const d=((u=r.scrollbarY)==null?void 0:u.offsetWidth)||0;r.onCornerWidthChange(d),i(d)}),c?h.jsx(Zs.div,{...o,ref:e,style:{width:s,height:a,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Rl(t){return t?parseInt(t,10):0}function Zx(t,e){const n=t/e;return isNaN(n)?0:n}function Pl(t){const e=Zx(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=(t.scrollbar.size-n)*e;return Math.max(o,18)}function Qx(t,e,n="ltr"){const o=Pl(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-r,i=e.content-e.viewport,a=s-o,l=jV(t,n==="ltr"?[0,i]:[-1*i,0]);return ew([0,i],[0,a])(l)}function ew(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const o=(e[1]-e[0])/(t[1]-t[0]);return e[0]+o*(n-t[0])}}function tw(t,e){return t>0&&t<e}var PO=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},o=0;return function r(){const s={left:t.scrollLeft,top:t.scrollTop},i=n.left!==s.left,a=n.top!==s.top;(i||a)&&e(),n=s,o=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(o)};function Ll(t,e){const n=pr(t),o=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(o.current),[]),A.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(n,e)},[n,e])}function as(t,e){const n=pr(e);NV(()=>{let o=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(n)});return r.observe(t),()=>{window.cancelAnimationFrame(o),r.unobserve(t)}}},[t,n])}var nw=$x,LO=qx,FO=Xx;const ow=A.forwardRef((t,e)=>{const n=X.c(15);let o,r,s,i,a,l,c,d;return n[0]!==t?({className:r,children:o,...s}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]),n[4]!==r?(i=Oe("relative overflow-hidden",r),n[4]=r,n[5]=i):i=n[5],n[6]!==o?(a=h.jsx(LO,{className:"h-full w-full rounded-[inherit]",children:o}),n[6]=o,n[7]=a):a=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(rw,{}),c=h.jsx(FO,{}),n[8]=l,n[9]=c):(l=n[8],c=n[9]),n[10]!==s||n[11]!==e||n[12]!==i||n[13]!==a?(d=h.jsxs(nw,{ref:e,className:i,...s,children:[a,l,c]}),n[10]=s,n[11]=e,n[12]=i,n[13]=a,n[14]=d):d=n[14],d});ow.displayName=nw.displayName;const rw=A.forwardRef((t,e)=>{const n=X.c(14);let o,r,s;n[0]!==t?({className:o,orientation:s,...r}=t,n[0]=t,n[1]=o,n[2]=r,n[3]=s):(o=n[1],r=n[2],s=n[3]);const i=s===void 0?"vertical":s,a=i==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",l=i==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]";let c,d,u;return n[4]!==o||n[5]!==a||n[6]!==l?(c=Oe("flex touch-none select-none transition-colors",a,l,o),n[4]=o,n[5]=a,n[6]=l,n[7]=c):c=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx(Kx,{className:"relative flex-1 rounded-full bg-border"}),n[8]=d):d=n[8],n[9]!==i||n[10]!==r||n[11]!==e||n[12]!==c?(u=h.jsx(Zu,{ref:e,orientation:i,className:c,...r,children:d}),n[9]=i,n[10]=r,n[11]=e,n[12]=c,n[13]=u):u=n[13],u});rw.displayName=Zu.displayName;let Fl;Fl=(t,e,n,o,r)=>e?{...t,chats:t.chats.map(s=>s.id===e?{...s,messages:[...s.messages,{role:n,content:o,timestamp:Date.now(),parts:r}],updatedAt:Date.now()}:s)}:(Qt.warn("No active chat"),t),On=t=>{const e=X.c(15),{title:n,description:o,icon:r,action:s}=t;let i,a,l,c,d,u;return e[0]!==r?(i=r&&K.cloneElement(r,{className:"text-accent-foreground"}),e[0]=r,e[1]=i):i=e[1],e[2]!==n?(a=h.jsx("span",{className:"mt-1 text-accent-foreground",children:n}),e[2]=n,e[3]=a):a=e[3],e[4]!==i||e[5]!==a?(l=h.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[i,a]}),e[4]=i,e[5]=a,e[6]=l):l=e[6],e[7]!==o?(c=h.jsx("span",{className:"text-muted-foreground text-sm",children:o}),e[7]=o,e[8]=c):c=e[8],e[9]!==s?(d=s&&h.jsx("div",{className:"mt-2",children:s}),e[9]=s,e[10]=d):d=e[10],e[11]!==l||e[12]!==c||e[13]!==d?(u=h.jsxs("div",{className:"mx-6 my-6 flex flex-col gap-2",children:[l,c,d]}),e[11]=l,e[12]=c,e[13]=d,e[14]=u):u=e[14],u};const zO=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,BO=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,UO={};function sw(t,e){return(UO.jsx?BO:zO).test(t)}const VO=/[ \t\n\f\r]/g;function iw(t){return t.replace(VO,"")===""}class Fi{constructor(e,n,o){this.property=e,this.normal=n,o&&(this.space=o)}}function aw(t,e){const n={},o={};let r=-1;for(;++r<t.length;)Object.assign(n,t[r].property),Object.assign(o,t[r].normal);return new Fi(n,o,e)}function th(t){return t.toLowerCase()}Fi.prototype.property={},Fi.prototype.normal={},Fi.prototype.space=null;class Bn{constructor(e,n){this.property=e,this.attribute=n}}Bn.prototype.space=null,Bn.prototype.boolean=!1,Bn.prototype.booleanish=!1,Bn.prototype.overloadedBoolean=!1,Bn.prototype.number=!1,Bn.prototype.commaSeparated=!1,Bn.prototype.spaceSeparated=!1,Bn.prototype.commaOrSpaceSeparated=!1,Bn.prototype.mustUseProperty=!1,Bn.prototype.defined=!1;let HO=0;const nt=Mr(),Rt=Mr(),lw=Mr(),xe=Mr(),bt=Mr(),ls=Mr(),kn=Mr();function Mr(){return 2**++HO}const nh=Object.freeze(Object.defineProperty({__proto__:null,boolean:nt,booleanish:Rt,commaOrSpaceSeparated:kn,commaSeparated:ls,number:xe,overloadedBoolean:lw,spaceSeparated:bt},Symbol.toStringTag,{value:"Module"})),oh=Object.keys(nh);class rh extends Bn{constructor(e,n,o,r){let s=-1;if(super(e,n),cw(this,"space",r),typeof o=="number")for(;++s<oh.length;){const i=oh[s];cw(this,oh[s],(o&nh[i])===nh[i])}}}function cw(t,e,n){n&&(t[e]=n)}rh.prototype.defined=!0;const $O={}.hasOwnProperty;function cs(t){const e={},n={};let o;for(o in t.properties)if($O.call(t.properties,o)){const r=t.properties[o],s=new rh(o,t.transform(t.attributes||{},o),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(o)&&(s.mustUseProperty=!0),e[o]=s,n[th(o)]=o,n[th(s.attribute)]=o}return new Fi(e,n,t.space)}const dw=cs({space:"xlink",transform:(t,e)=>"xlink:"+e.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),uw=cs({space:"xml",transform:(t,e)=>"xml:"+e.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function hw(t,e){return e in t?t[e]:e}function fw(t,e){return hw(t,e.toLowerCase())}const mw=cs({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:fw,properties:{xmlns:null,xmlnsXLink:null}}),pw=cs({transform:(t,e)=>e==="role"?e:"aria-"+e.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:Rt,ariaAutoComplete:null,ariaBusy:Rt,ariaChecked:Rt,ariaColCount:xe,ariaColIndex:xe,ariaColSpan:xe,ariaControls:bt,ariaCurrent:null,ariaDescribedBy:bt,ariaDetails:null,ariaDisabled:Rt,ariaDropEffect:bt,ariaErrorMessage:null,ariaExpanded:Rt,ariaFlowTo:bt,ariaGrabbed:Rt,ariaHasPopup:null,ariaHidden:Rt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:bt,ariaLevel:xe,ariaLive:null,ariaModal:Rt,ariaMultiLine:Rt,ariaMultiSelectable:Rt,ariaOrientation:null,ariaOwns:bt,ariaPlaceholder:null,ariaPosInSet:xe,ariaPressed:Rt,ariaReadOnly:Rt,ariaRelevant:null,ariaRequired:Rt,ariaRoleDescription:bt,ariaRowCount:xe,ariaRowIndex:xe,ariaRowSpan:xe,ariaSelected:Rt,ariaSetSize:xe,ariaSort:null,ariaValueMax:xe,ariaValueMin:xe,ariaValueNow:xe,ariaValueText:null,role:null}}),WO=cs({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:fw,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ls,acceptCharset:bt,accessKey:bt,action:null,allow:null,allowFullScreen:nt,allowPaymentRequest:nt,allowUserMedia:nt,alt:null,as:null,async:nt,autoCapitalize:null,autoComplete:bt,autoFocus:nt,autoPlay:nt,blocking:bt,capture:null,charSet:null,checked:nt,cite:null,className:bt,cols:xe,colSpan:null,content:null,contentEditable:Rt,controls:nt,controlsList:bt,coords:xe|ls,crossOrigin:null,data:null,dateTime:null,decoding:null,default:nt,defer:nt,dir:null,dirName:null,disabled:nt,download:lw,draggable:Rt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:nt,formTarget:null,headers:bt,height:xe,hidden:nt,high:xe,href:null,hrefLang:null,htmlFor:bt,httpEquiv:bt,id:null,imageSizes:null,imageSrcSet:null,inert:nt,inputMode:null,integrity:null,is:null,isMap:nt,itemId:null,itemProp:bt,itemRef:bt,itemScope:nt,itemType:bt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:nt,low:xe,manifest:null,max:null,maxLength:xe,media:null,method:null,min:null,minLength:xe,multiple:nt,muted:nt,name:null,nonce:null,noModule:nt,noValidate:nt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:nt,optimum:xe,pattern:null,ping:bt,placeholder:null,playsInline:nt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:nt,referrerPolicy:null,rel:bt,required:nt,reversed:nt,rows:xe,rowSpan:xe,sandbox:bt,scope:null,scoped:nt,seamless:nt,selected:nt,shadowRootClonable:nt,shadowRootDelegatesFocus:nt,shadowRootMode:null,shape:null,size:xe,sizes:null,slot:null,span:xe,spellCheck:Rt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xe,step:null,style:null,tabIndex:xe,target:null,title:null,translate:null,type:null,typeMustMatch:nt,useMap:null,value:Rt,width:xe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:bt,axis:null,background:null,bgColor:null,border:xe,borderColor:null,bottomMargin:xe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:nt,declare:nt,event:null,face:null,frame:null,frameBorder:null,hSpace:xe,leftMargin:xe,link:null,longDesc:null,lowSrc:null,marginHeight:xe,marginWidth:xe,noResize:nt,noHref:nt,noShade:nt,noWrap:nt,object:null,profile:null,prompt:null,rev:null,rightMargin:xe,rules:null,scheme:null,scrolling:Rt,standby:null,summary:null,text:null,topMargin:xe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:nt,disableRemotePlayback:nt,prefix:null,property:null,results:xe,security:null,unselectable:null}}),qO=cs({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:hw,properties:{about:kn,accentHeight:xe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xe,amplitude:xe,arabicForm:null,ascent:xe,attributeName:null,attributeType:null,azimuth:xe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xe,by:null,calcMode:null,capHeight:xe,className:bt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xe,diffuseConstant:xe,direction:null,display:null,dur:null,divisor:xe,dominantBaseline:null,download:nt,dx:null,dy:null,edgeMode:null,editable:null,elevation:xe,enableBackground:null,end:null,event:null,exponent:xe,externalResourcesRequired:null,fill:null,fillOpacity:xe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ls,g2:ls,glyphName:ls,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xe,horizOriginX:xe,horizOriginY:xe,id:null,ideographic:xe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xe,k:xe,k1:xe,k2:xe,k3:xe,k4:xe,kernelMatrix:kn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xe,overlineThickness:xe,paintOrder:null,panose1:null,path:null,pathLength:xe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:bt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xe,pointsAtY:xe,pointsAtZ:xe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:kn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:kn,rev:kn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:kn,requiredFeatures:kn,requiredFonts:kn,requiredFormats:kn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xe,specularExponent:xe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xe,strikethroughThickness:xe,string:null,stroke:null,strokeDashArray:kn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xe,strokeOpacity:xe,strokeWidth:null,style:null,surfaceScale:xe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:kn,tabIndex:xe,tableValues:null,target:null,targetX:xe,targetY:xe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:kn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xe,underlineThickness:xe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xe,values:null,vAlphabetic:xe,vMathematical:xe,vectorEffect:null,vHanging:xe,vIdeographic:xe,version:null,vertAdvY:xe,vertOriginX:xe,vertOriginY:xe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),GO=/^data[-\w.:]+$/i,gw=/-[a-z]/g,YO=/[A-Z]/g;function JO(t){return"-"+t.toLowerCase()}function KO(t){return t.charAt(1).toUpperCase()}const XO={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},ZO=aw([uw,dw,mw,pw,WO],"html"),sh=aw([uw,dw,mw,pw,qO],"svg"),_w=tS(EV()),QO=_w.default||_w,bw=yw("end"),ih=yw("start");function yw(t){return function(e){const n=e&&e.position&&e.position[t]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function zi(t){return t&&typeof t=="object"?"position"in t||"type"in t?xw(t.position):"start"in t||"end"in t?xw(t):"line"in t||"column"in t?ah(t):"":""}function ah(t){return ww(t&&t.line)+":"+ww(t&&t.column)}function xw(t){return ah(t&&t.start)+"-"+ah(t&&t.end)}function ww(t){return t&&typeof t=="number"?t:1}class nn extends Error{constructor(e,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let r="",s={},i=!1;if(n&&(s="line"in n&&"column"in n||"start"in n&&"end"in n?{place:n}:"type"in n?{ancestors:[n],place:n.position}:{...n}),typeof e=="string"?r=e:!s.cause&&e&&(i=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof o=="string"){const l=o.indexOf(":");l===-1?s.ruleId=o:(s.source=o.slice(0,l),s.ruleId=o.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=a?a.line:void 0,this.name=zi(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=i&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}nn.prototype.file="",nn.prototype.name="",nn.prototype.reason="",nn.prototype.message="",nn.prototype.stack="",nn.prototype.column=void 0,nn.prototype.line=void 0,nn.prototype.ancestors=void 0,nn.prototype.cause=void 0,nn.prototype.fatal=void 0,nn.prototype.place=void 0,nn.prototype.ruleId=void 0,nn.prototype.source=void 0;const lh={}.hasOwnProperty,e9=new Map,t9=/[A-Z]/g,n9=/-([a-z])/g,o9=new Set(["table","tbody","thead","tfoot","tr"]),r9=new Set(["td","th"]),vw="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function s9(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let o;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");o=function(i,a){return l;function l(c,d,u,f){const m=Array.isArray(u.children),_=ih(c);return a(d,u,f,m,{columnNumber:_?_.column-1:void 0,fileName:i,lineNumber:_?_.line:void 0},void 0)}}(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");o=function(i,a,l){return c;function c(d,u,f,m){const _=Array.isArray(f.children)?l:a;return m?_(u,f,m):_(u,f)}}(0,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:o,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?sh:ZO,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=kw(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function kw(t,e,n){return e.type==="element"?function(o,r,s){const i=o.schema;let a=i;r.tagName.toLowerCase()==="svg"&&i.space==="html"&&(a=sh,o.schema=a),o.ancestors.push(r);const l=Cw(o,r.tagName,!1),c=function(u,f){const m={};let _,g;for(g in f.properties)if(g!=="children"&&lh.call(f.properties,g)){const p=i9(u,g,f.properties[g]);if(p){const[b,y]=p;u.tableCellAlignToStyle&&b==="align"&&typeof y=="string"&&r9.has(f.tagName)?_=y:m[b]=y}}return _&&((m.style||(m.style={}))[u.stylePropertyNameCase==="css"?"text-align":"textAlign"]=_),m}(o,r);let d=dh(o,r);return o9.has(r.tagName)&&(d=d.filter(function(u){return typeof u!="string"||!(typeof(f=u)=="object"?f.type==="text"&&iw(f.value):iw(f));var f})),Sw(o,c,l,r),ch(c,d),o.ancestors.pop(),o.schema=i,o.create(r,l,c,s)}(t,e,n):e.type==="mdxFlowExpression"||e.type==="mdxTextExpression"?function(o,r){if(r.data&&r.data.estree&&o.evaluater){const s=r.data.estree.body[0];return s.type,o.evaluater.evaluateExpression(s.expression)}Bi(o,r.position)}(t,e):e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement"?function(o,r,s){const i=o.schema;let a=i;r.name==="svg"&&i.space==="html"&&(a=sh,o.schema=a),o.ancestors.push(r);const l=r.name===null?o.Fragment:Cw(o,r.name,!0),c=function(u,f){const m={};for(const _ of f.attributes)if(_.type==="mdxJsxExpressionAttribute")if(_.data&&_.data.estree&&u.evaluater){const g=_.data.estree.body[0];g.type;const p=g.expression;p.type;const b=p.properties[0];b.type,Object.assign(m,u.evaluater.evaluateExpression(b.argument))}else Bi(u,f.position);else{const g=_.name;let p;if(_.value&&typeof _.value=="object")if(_.value.data&&_.value.data.estree&&u.evaluater){const b=_.value.data.estree.body[0];b.type,p=u.evaluater.evaluateExpression(b.expression)}else Bi(u,f.position);else p=_.value===null||_.value;m[g]=p}return m}(o,r),d=dh(o,r);return Sw(o,c,l,r),ch(c,d),o.ancestors.pop(),o.schema=i,o.create(r,l,c,s)}(t,e,n):e.type==="mdxjsEsm"?function(o,r){if(r.data&&r.data.estree&&o.evaluater)return o.evaluater.evaluateProgram(r.data.estree);Bi(o,r.position)}(t,e):e.type==="root"?function(o,r,s){const i={};return ch(i,dh(o,r)),o.create(r,o.Fragment,i,s)}(t,e,n):e.type==="text"?function(o,r){return r.value}(0,e):void 0}function Sw(t,e,n,o){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=o)}function ch(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function dh(t,e){const n=[];let o=-1;const r=t.passKeys?new Map:e9;for(;++o<e.children.length;){const s=e.children[o];let i;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=r.get(l)||0;i=l+"-"+c,r.set(l,c+1)}}const a=kw(t,s,i);a!==void 0&&n.push(a)}return n}function i9(t,e,n){const o=function(r,s){const i=th(s);let a=s,l=Bn;if(i in r.normal)return r.property[r.normal[i]];if(i.length>4&&i.slice(0,4)==="data"&&GO.test(s)){if(s.charAt(4)==="-"){const c=s.slice(5).replace(gw,KO);a="data"+c.charAt(0).toUpperCase()+c.slice(1)}else{const c=s.slice(4);if(!gw.test(c)){let d=c.replace(YO,JO);d.charAt(0)!=="-"&&(d="-"+d),s="data"+d}}l=rh}return new l(a,s)}(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=o.commaSeparated?function(r){const s={};return(r[r.length-1]===""?[...r,""]:r).join((s.padRight?" ":"")+","+(s.padLeft===!1?"":" ")).trim()}(n):n.join(" ").trim()),o.property==="style"){let r=typeof n=="object"?n:function(s,i){const a={};try{QO(i,l)}catch(c){if(!s.ignoreInvalidStyle){const d=c,u=new nn("Cannot parse `style` attribute",{ancestors:s.ancestors,cause:d,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw u.file=s.filePath||void 0,u.url=vw+"#cannot-parse-style-attribute",u}}return a;function l(c,d){let u=c;u.slice(0,2)!=="--"&&(u.slice(0,4)==="-ms-"&&(u="ms-"+u.slice(4)),u=u.replace(n9,l9)),a[u]=d}}(t,String(n));return t.stylePropertyNameCase==="css"&&(r=function(s){const i={};let a;for(a in s)lh.call(s,a)&&(i[a9(a)]=s[a]);return i}(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&o.space?XO[o.property]||o.property:o.attribute,n]}}function Cw(t,e,n){let o;if(n)if(e.includes(".")){const r=e.split(".");let s,i=-1;for(;++i<r.length;){const a=sw(r[i])?{type:"Identifier",name:r[i]}:{type:"Literal",value:r[i]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(i&&a.type==="Literal"),optional:!1}:a}o=s}else o=sw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};else o={type:"Literal",value:e};if(o.type==="Literal"){const r=o.value;return lh.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(o);Bi(t)}function Bi(t,e){const n=new nn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=vw+"#cannot-handle-mdx-estrees-without-createevaluater",n}function a9(t){let e=t.replace(t9,c9);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function l9(t,e){return e.toUpperCase()}function c9(t){return"-"+t.toLowerCase()}const uh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},zl={};function Nw(t,e,n){if(function(o){return!!(o&&typeof o=="object")}(t)){if("value"in t)return t.type!=="html"||n?t.value:"";if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return jw(t.children,e,n)}return Array.isArray(t)?jw(t,e,n):""}function jw(t,e,n){const o=[];let r=-1;for(;++r<t.length;)o[r]=Nw(t[r],e,n);return o.join("")}const Ew=document.createElement("i");function hh(t){const e="&"+t+";";Ew.innerHTML=e;const n=Ew.textContent;return(n.charCodeAt(n.length-1)!==59||t==="semi")&&n!==e&&n}function co(t,e,n,o){const r=t.length;let s,i=0;if(e=e<0?-e>r?0:r+e:e>r?r:e,n=n>0?n:0,o.length<1e4)s=Array.from(o),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);i<o.length;)s=o.slice(i,i+1e4),s.unshift(e,0),t.splice(...s),i+=1e4,e+=1e4}function Un(t,e){return t.length>0?(co(t,t.length,0,e),t):e}const Iw={}.hasOwnProperty;function d9(t,e){let n;for(n in e){const o=(Iw.call(t,n)?t[n]:void 0)||(t[n]={}),r=e[n];let s;if(r)for(s in r){Iw.call(o,s)||(o[s]=[]);const i=r[s];u9(o[s],Array.isArray(i)?i:i?[i]:[])}}}function u9(t,e){let n=-1;const o=[];for(;++n<e.length;)(e[n].add==="after"?t:o).push(e[n]);co(t,0,0,o)}function Aw(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||(65535&n)==65534||n>1114111?"\uFFFD":String.fromCodePoint(n)}function ds(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const uo=Qo(/[A-Za-z]/),Sn=Qo(/[\dA-Za-z]/),h9=Qo(/[#-'*+\--9=?A-Z^-~]/);function fh(t){return t!==null&&(t<32||t===127)}const mh=Qo(/\d/),f9=Qo(/[\dA-Fa-f]/),m9=Qo(/[!-/:-@[-`{-~]/);function Qe(t){return t!==null&&t<-2}function bn(t){return t!==null&&(t<0||t===32)}function ht(t){return t===-2||t===-1||t===32}const p9=Qo(new RegExp("\\p{P}|\\p{S}","u")),g9=Qo(/\s/);function Qo(t){return function(e){return e!==null&&e>-1&&t.test(String.fromCharCode(e))}}function us(t){const e=[];let n=-1,o=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let i="";if(s===37&&Sn(t.charCodeAt(n+1))&&Sn(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(i=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(i=String.fromCharCode(s,a),r=1):i="\uFFFD"}else i=String.fromCharCode(s);i&&(e.push(t.slice(o,n),encodeURIComponent(i)),o=n+r+1,i=""),r&&(n+=r,r=0)}return e.join("")+t.slice(o)}function yt(t,e,n,o){const r=o?o-1:Number.POSITIVE_INFINITY;let s=0;return function(a){return ht(a)?(t.enter(n),i(a)):e(a)};function i(a){return ht(a)&&s++<r?(t.consume(a),i):(t.exit(n),e(a))}}const _9={tokenize:function(t){const e=t.attempt(this.parser.constructs.contentInitial,function(s){return s===null?void t.consume(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),yt(t,e,"linePrefix"))},function(s){return t.enter("paragraph"),o(s)});let n;return e;function o(s){const i=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=i),n=i,r(s)}function r(s){return s===null?(t.exit("chunkText"),t.exit("paragraph"),void t.consume(s)):Qe(s)?(t.consume(s),t.exit("chunkText"),o):(t.consume(s),r)}}},b9={tokenize:function(t){const e=this,n=[];let o,r,s,i=0;return a;function a(x){if(i<n.length){const v=n[i];return e.containerState=v[1],t.attempt(v[0].continuation,l,c)(x)}return c(x)}function l(x){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&y();const v=e.events.length;let S,k=v;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){S=e.events[k][1].end;break}b(i);let E=v;for(;E<e.events.length;)e.events[E][1].end={...S},E++;return co(e.events,k+1,0,e.events.slice(v)),e.events.length=E,c(x)}return a(x)}function c(x){if(i===n.length){if(!o)return f(x);if(o.currentConstruct&&o.currentConstruct.concrete)return _(x);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Tw,d,u)(x)}function d(x){return o&&y(),b(i),f(x)}function u(x){return e.parser.lazy[e.now().line]=i!==n.length,s=e.now().offset,_(x)}function f(x){return e.containerState={},t.attempt(Tw,m,_)(x)}function m(x){return i++,n.push([e.currentConstruct,e.containerState]),f(x)}function _(x){return x===null?(o&&y(),b(0),void t.consume(x)):(o=o||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:r}),g(x))}function g(x){return x===null?(p(t.exit("chunkFlow"),!0),b(0),void t.consume(x)):Qe(x)?(t.consume(x),p(t.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(t.consume(x),g)}function p(x,v){const S=e.sliceStream(x);if(v&&S.push(null),x.previous=r,r&&(r.next=x),r=x,o.defineSkip(x.start),o.write(S),e.parser.lazy[x.start.line]){let k=o.events.length;for(;k--;)if(o.events[k][1].start.offset<s&&(!o.events[k][1].end||o.events[k][1].end.offset>s))return;const E=e.events.length;let j,I,T=E;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){if(j){I=e.events[T][1].end;break}j=!0}for(b(i),k=E;k<e.events.length;)e.events[k][1].end={...I},k++;co(e.events,T+1,0,e.events.slice(E)),e.events.length=k}}function b(x){let v=n.length;for(;v-- >x;){const S=n[v];e.containerState=S[1],S[0].exit.call(e,t)}n.length=x}function y(){o.write([null]),r=void 0,o=void 0,e.containerState._closeFlow=void 0}}},Tw={tokenize:function(t,e,n){return yt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function Mw(t){return t===null||bn(t)||g9(t)?1:p9(t)?2:void 0}function ph(t,e,n){const o=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!o.includes(s)&&(e=s(e,n),o.push(s))}return e}const gh={name:"attention",resolveAll:function(t,e){let n,o,r,s,i,a,l,c,d=-1;for(;++d<t.length;)if(t[d][0]==="enter"&&t[d][1].type==="attentionSequence"&&t[d][1]._close){for(n=d;n--;)if(t[n][0]==="exit"&&t[n][1].type==="attentionSequence"&&t[n][1]._open&&e.sliceSerialize(t[n][1]).charCodeAt(0)===e.sliceSerialize(t[d][1]).charCodeAt(0)){if((t[n][1]._close||t[d][1]._open)&&(t[d][1].end.offset-t[d][1].start.offset)%3&&!((t[n][1].end.offset-t[n][1].start.offset+t[d][1].end.offset-t[d][1].start.offset)%3))continue;a=t[n][1].end.offset-t[n][1].start.offset>1&&t[d][1].end.offset-t[d][1].start.offset>1?2:1;const u={...t[n][1].end},f={...t[d][1].start};Ow(u,-a),Ow(f,a),s={type:a>1?"strongSequence":"emphasisSequence",start:u,end:{...t[n][1].end}},i={type:a>1?"strongSequence":"emphasisSequence",start:{...t[d][1].start},end:f},r={type:a>1?"strongText":"emphasisText",start:{...t[n][1].end},end:{...t[d][1].start}},o={type:a>1?"strong":"emphasis",start:{...s.start},end:{...i.end}},t[n][1].end={...s.start},t[d][1].start={...i.end},l=[],t[n][1].end.offset-t[n][1].start.offset&&(l=Un(l,[["enter",t[n][1],e],["exit",t[n][1],e]])),l=Un(l,[["enter",o,e],["enter",s,e],["exit",s,e],["enter",r,e]]),l=Un(l,ph(e.parser.constructs.insideSpan.null,t.slice(n+1,d),e)),l=Un(l,[["exit",r,e],["enter",i,e],["exit",i,e],["exit",o,e]]),t[d][1].end.offset-t[d][1].start.offset?(c=2,l=Un(l,[["enter",t[d][1],e],["exit",t[d][1],e]])):c=0,co(t,n-1,d-n+3,l),d=n+l.length-c-2;break}}for(d=-1;++d<t.length;)t[d][1].type==="attentionSequence"&&(t[d][1].type="data");return t},tokenize:function(t,e){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,r=Mw(o);let s;return function(a){return s=a,t.enter("attentionSequence"),i(a)};function i(a){if(a===s)return t.consume(a),i;const l=t.exit("attentionSequence"),c=Mw(a),d=!c||c===2&&r||n.includes(a),u=!r||r===2&&c||n.includes(o);return l._open=!!(s===42?d:d&&(r||!u)),l._close=!!(s===42?u:u&&(c||!d)),e(a)}}};function Ow(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const y9={name:"autolink",tokenize:function(t,e,n){let o=0;return function(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),r};function r(f){return uo(f)?(t.consume(f),s):f===64?n(f):l(f)}function s(f){return f===43||f===45||f===46||Sn(f)?(o=1,i(f)):l(f)}function i(f){return f===58?(t.consume(f),o=0,a):(f===43||f===45||f===46||Sn(f))&&o++<32?(t.consume(f),i):(o=0,l(f))}function a(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||fh(f)?n(f):(t.consume(f),a)}function l(f){return f===64?(t.consume(f),c):h9(f)?(t.consume(f),l):n(f)}function c(f){return Sn(f)?d(f):n(f)}function d(f){return f===46?(t.consume(f),o=0,c):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):u(f)}function u(f){if((f===45||Sn(f))&&o++<63){const m=f===45?u:d;return t.consume(f),m}return n(f)}}},Bl={partial:!0,tokenize:function(t,e,n){return function(r){return ht(r)?yt(t,o,"linePrefix")(r):o(r)};function o(r){return r===null||Qe(r)?e(r):n(r)}}},Dw={continuation:{tokenize:function(t,e,n){const o=this;return function(s){return ht(s)?yt(t,r,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):r(s)};function r(s){return t.attempt(Dw,e,n)(s)}}},exit:function(t){t.exit("blockQuote")},name:"blockQuote",tokenize:function(t,e,n){const o=this;return function(s){if(s===62){const i=o.containerState;return i.open||(t.enter("blockQuote",{_container:!0}),i.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(s),t.exit("blockQuoteMarker"),r}return n(s)};function r(s){return ht(s)?(t.enter("blockQuotePrefixWhitespace"),t.consume(s),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(s))}}},Rw={name:"characterEscape",tokenize:function(t,e,n){return function(r){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(r),t.exit("escapeMarker"),o};function o(r){return m9(r)?(t.enter("characterEscapeValue"),t.consume(r),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(r)}}},Pw={name:"characterReference",tokenize:function(t,e,n){const o=this;let r,s,i=0;return function(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),a};function a(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),l):(t.enter("characterReferenceValue"),r=31,s=Sn,c(d))}function l(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),r=6,s=f9,c):(t.enter("characterReferenceValue"),r=7,s=mh,c(d))}function c(d){if(d===59&&i){const u=t.exit("characterReferenceValue");return s!==Sn||hh(o.sliceSerialize(u))?(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e):n(d)}return s(d)&&i++<r?(t.consume(d),c):n(d)}}},Lw={partial:!0,tokenize:function(t,e,n){const o=this;return function(s){return s===null?n(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),r)};function r(s){return o.parser.lazy[o.now().line]?n(s):e(s)}}},Fw={concrete:!0,name:"codeFenced",tokenize:function(t,e,n){const o=this,r={partial:!0,tokenize:function(x,v,S){let k=0;return E;function E(L){return x.enter("lineEnding"),x.consume(L),x.exit("lineEnding"),j}function j(L){return x.enter("codeFencedFence"),ht(L)?yt(x,I,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):I(L)}function I(L){return L===s?(x.enter("codeFencedFenceSequence"),T(L)):S(L)}function T(L){return L===s?(k++,x.consume(L),T):k>=a?(x.exit("codeFencedFenceSequence"),ht(L)?yt(x,M,"whitespace")(L):M(L)):S(L)}function M(L){return L===null||Qe(L)?(x.exit("codeFencedFence"),v(L)):S(L)}}};let s,i=0,a=0;return function(x){return function(v){const S=o.events[o.events.length-1];return i=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,s=v,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),l(v)}(x)};function l(x){return x===s?(a++,t.consume(x),l):a<3?n(x):(t.exit("codeFencedFenceSequence"),ht(x)?yt(t,c,"whitespace")(x):c(x))}function c(x){return x===null||Qe(x)?(t.exit("codeFencedFence"),o.interrupt?e(x):t.check(Lw,m,y)(x)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),d(x))}function d(x){return x===null||Qe(x)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),c(x)):ht(x)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),yt(t,u,"whitespace")(x)):x===96&&x===s?n(x):(t.consume(x),d)}function u(x){return x===null||Qe(x)?c(x):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===null||Qe(x)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),c(x)):x===96&&x===s?n(x):(t.consume(x),f)}function m(x){return t.attempt(r,y,_)(x)}function _(x){return t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),g}function g(x){return i>0&&ht(x)?yt(t,p,"linePrefix",i+1)(x):p(x)}function p(x){return x===null||Qe(x)?t.check(Lw,m,y)(x):(t.enter("codeFlowValue"),b(x))}function b(x){return x===null||Qe(x)?(t.exit("codeFlowValue"),p(x)):(t.consume(x),b)}function y(x){return t.exit("codeFenced"),e(x)}}},_h={name:"codeIndented",tokenize:function(t,e,n){const o=this;return function(l){return t.enter("codeIndented"),yt(t,r,"linePrefix",5)(l)};function r(l){const c=o.events[o.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?s(l):n(l)}function s(l){return l===null?a(l):Qe(l)?t.attempt(x9,s,a)(l):(t.enter("codeFlowValue"),i(l))}function i(l){return l===null||Qe(l)?(t.exit("codeFlowValue"),s(l)):(t.consume(l),i)}function a(l){return t.exit("codeIndented"),e(l)}}},x9={partial:!0,tokenize:function(t,e,n){const o=this;return r;function r(i){return o.parser.lazy[o.now().line]?n(i):Qe(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),r):yt(t,s,"linePrefix",5)(i)}function s(i){const a=o.events[o.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(i):Qe(i)?r(i):n(i)}}},w9={name:"codeText",previous:function(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"},resolve:function(t){let e,n,o=t.length-4,r=3;if(!(t[r][1].type!=="lineEnding"&&t[r][1].type!=="space"||t[o][1].type!=="lineEnding"&&t[o][1].type!=="space")){for(e=r;++e<o;)if(t[e][1].type==="codeTextData"){t[r][1].type="codeTextPadding",t[o][1].type="codeTextPadding",r+=2,o-=2;break}}for(e=r-1,o++;++e<=o;)n===void 0?e!==o&&t[e][1].type!=="lineEnding"&&(n=e):e!==o&&t[e][1].type!=="lineEnding"||(t[n][1].type="codeTextData",e!==n+2&&(t[n][1].end=t[e-1][1].end,t.splice(n+2,e-n-2),o-=e-n-2,e=n+2),n=void 0);return t},tokenize:function(t,e,n){let o,r,s=0;return function(d){return t.enter("codeText"),t.enter("codeTextSequence"),i(d)};function i(d){return d===96?(t.consume(d),s++,i):(t.exit("codeTextSequence"),a(d))}function a(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),a):d===96?(r=t.enter("codeTextSequence"),o=0,c(d)):Qe(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),a):(t.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||Qe(d)?(t.exit("codeTextData"),a(d)):(t.consume(d),l)}function c(d){return d===96?(t.consume(d),o++,c):o===s?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(r.type="codeTextData",l(d))}}};class v9{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const o=n??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(e,o):e>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(e,n,o){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return o&&Ui(this.left,o),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ui(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ui(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Ui(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ui(this.left,n.reverse())}}}function Ui(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function zw(t){const e={};let n,o,r,s,i,a,l,c=-1;const d=new v9(t);for(;++c<d.length;){for(;c in e;)c=e[c];if(n=d.get(c),c&&n[1].type==="chunkFlow"&&d.get(c-1)[1].type==="listItemPrefix"&&(a=n[1]._tokenizer.events,r=0,r<a.length&&a[r][1].type==="lineEndingBlank"&&(r+=2),r<a.length&&a[r][1].type==="content"))for(;++r<a.length&&a[r][1].type!=="content";)a[r][1].type==="chunkText"&&(a[r][1]._isInFirstContentOfListItem=!0,r++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,k9(d,c)),c=e[c],l=!0);else if(n[1]._container){for(r=c,o=void 0;r--&&(s=d.get(r),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(o&&(d.get(o)[1].type="lineEndingBlank"),s[1].type="lineEnding",o=r);o&&(n[1].end={...d.get(o)[1].start},i=d.slice(o,c),i.unshift(n),d.splice(o,c-o+1,i))}}return co(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!l}function k9(t,e){const n=t.get(e)[1],o=t.get(e)[2];let r=e-1;const s=[],i=n._tokenizer||o.parser[n.contentType](n.start),a=i.events,l=[],c={};let d,u,f=-1,m=n,_=0,g=0;const p=[g];for(;m;){for(;t.get(++r)[1]!==m;);s.push(r),m._tokenizer||(d=o.sliceStream(m),m.next||d.push(null),u&&i.defineSkip(m.start),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(d),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),u=m,m=m.next}for(m=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(g=f+1,p.push(g),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(i.events=[],m?(m._tokenizer=void 0,m.previous=void 0):p.pop(),f=p.length;f--;){const b=a.slice(p[f],p[f+1]),y=s.pop();l.push([y,y+b.length-1]),t.splice(y,2,b)}for(l.reverse(),f=-1;++f<l.length;)c[_+l[f][0]]=_+l[f][1],_+=l[f][1]-l[f][0]-1;return c}const S9={resolve:function(t){return zw(t),t},tokenize:function(t,e){let n;return function(i){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),o(i)};function o(i){return i===null?r(i):Qe(i)?t.check(C9,s,r)(i):(t.consume(i),o)}function r(i){return t.exit("chunkContent"),t.exit("content"),e(i)}function s(i){return t.consume(i),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}},C9={partial:!0,tokenize:function(t,e,n){const o=this;return function(s){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),yt(t,r,"linePrefix")};function r(s){if(s===null||Qe(s))return n(s);const i=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(s):t.interrupt(o.parser.constructs.flow,n,e)(s)}}};function Bw(t,e,n,o,r,s,i,a,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return function(p){return p===60?(t.enter(o),t.enter(r),t.enter(s),t.consume(p),t.exit(s),u):p===null||p===32||p===41||fh(p)?n(p):(t.enter(o),t.enter(i),t.enter(a),t.enter("chunkString",{contentType:"string"}),_(p))};function u(p){return p===62?(t.enter(s),t.consume(p),t.exit(s),t.exit(r),t.exit(o),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===62?(t.exit("chunkString"),t.exit(a),u(p)):p===null||p===60||Qe(p)?n(p):(t.consume(p),p===92?m:f)}function m(p){return p===60||p===62||p===92?(t.consume(p),f):f(p)}function _(p){return d||p!==null&&p!==41&&!bn(p)?d<c&&p===40?(t.consume(p),d++,_):p===41?(t.consume(p),d--,_):p===null||p===32||p===40||fh(p)?n(p):(t.consume(p),p===92?g:_):(t.exit("chunkString"),t.exit(a),t.exit(i),t.exit(o),e(p))}function g(p){return p===40||p===41||p===92?(t.consume(p),_):_(p)}}function Uw(t,e,n,o,r,s){const i=this;let a,l=0;return function(f){return t.enter(o),t.enter(r),t.consume(f),t.exit(r),t.enter(s),c};function c(f){return l>999||f===null||f===91||f===93&&!a||f===94&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(f):f===93?(t.exit(s),t.enter(r),t.consume(f),t.exit(r),t.exit(o),e):Qe(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||Qe(f)||l++>999?(t.exit("chunkString"),c(f)):(t.consume(f),a||(a=!ht(f)),f===92?u:d)}function u(f){return f===91||f===92||f===93?(t.consume(f),l++,d):d(f)}}function Vw(t,e,n,o,r,s){let i;return function(u){return u===34||u===39||u===40?(t.enter(o),t.enter(r),t.consume(u),t.exit(r),i=u===40?41:u,a):n(u)};function a(u){return u===i?(t.enter(r),t.consume(u),t.exit(r),t.exit(o),e):(t.enter(s),l(u))}function l(u){return u===i?(t.exit(s),a(i)):u===null?n(u):Qe(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),yt(t,l,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(u))}function c(u){return u===i||u===null||Qe(u)?(t.exit("chunkString"),l(u)):(t.consume(u),u===92?d:c)}function d(u){return u===i||u===92?(t.consume(u),c):c(u)}}function Vi(t,e){let n;return function o(r){return Qe(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,o):ht(r)?yt(t,o,n?"linePrefix":"lineSuffix")(r):e(r)}}const N9={name:"definition",tokenize:function(t,e,n){const o=this;let r;return function(u){return t.enter("definition"),function(f){return Uw.call(o,t,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}(u)};function s(u){return r=ds(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),u===58?(t.enter("definitionMarker"),t.consume(u),t.exit("definitionMarker"),i):n(u)}function i(u){return bn(u)?Vi(t,a)(u):a(u)}function a(u){return Bw(t,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(u)}function l(u){return t.attempt(j9,c,c)(u)}function c(u){return ht(u)?yt(t,d,"whitespace")(u):d(u)}function d(u){return u===null||Qe(u)?(t.exit("definition"),o.parser.defined.push(r),e(u)):n(u)}}},j9={partial:!0,tokenize:function(t,e,n){return function(i){return bn(i)?Vi(t,o)(i):n(i)};function o(i){return Vw(t,r,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(i)}function r(i){return ht(i)?yt(t,s,"whitespace")(i):s(i)}function s(i){return i===null||Qe(i)?e(i):n(i)}}},E9={name:"hardBreakEscape",tokenize:function(t,e,n){return function(r){return t.enter("hardBreakEscape"),t.consume(r),o};function o(r){return Qe(r)?(t.exit("hardBreakEscape"),e(r)):n(r)}}},I9={name:"headingAtx",resolve:function(t,e){let n,o,r=t.length-2,s=3;return t[s][1].type==="whitespace"&&(s+=2),r-2>s&&t[r][1].type==="whitespace"&&(r-=2),t[r][1].type==="atxHeadingSequence"&&(s===r-1||r-4>s&&t[r-2][1].type==="whitespace")&&(r-=s+1===r?2:4),r>s&&(n={type:"atxHeadingText",start:t[s][1].start,end:t[r][1].end},o={type:"chunkText",start:t[s][1].start,end:t[r][1].end,contentType:"text"},co(t,s,r-s+1,[["enter",n,e],["enter",o,e],["exit",o,e],["exit",n,e]])),t},tokenize:function(t,e,n){let o=0;return function(l){return t.enter("atxHeading"),function(c){return t.enter("atxHeadingSequence"),r(c)}(l)};function r(l){return l===35&&o++<6?(t.consume(l),r):l===null||bn(l)?(t.exit("atxHeadingSequence"),s(l)):n(l)}function s(l){return l===35?(t.enter("atxHeadingSequence"),i(l)):l===null||Qe(l)?(t.exit("atxHeading"),e(l)):ht(l)?yt(t,s,"whitespace")(l):(t.enter("atxHeadingText"),a(l))}function i(l){return l===35?(t.consume(l),i):(t.exit("atxHeadingSequence"),s(l))}function a(l){return l===null||l===35||bn(l)?(t.exit("atxHeadingText"),s(l)):(t.consume(l),a)}}},A9=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Hw=["pre","script","style","textarea"],T9={concrete:!0,name:"htmlFlow",resolveTo:function(t){let e=t.length;for(;e--&&(t[e][0]!=="enter"||t[e][1].type!=="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t},tokenize:function(t,e,n){const o=this;let r,s,i,a,l;return function(N){return function($){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume($),c}(N)};function c(N){return N===33?(t.consume(N),d):N===47?(t.consume(N),s=!0,m):N===63?(t.consume(N),r=3,o.interrupt?e:R):uo(N)?(t.consume(N),i=String.fromCharCode(N),_):n(N)}function d(N){return N===45?(t.consume(N),r=2,u):N===91?(t.consume(N),r=5,a=0,f):uo(N)?(t.consume(N),r=4,o.interrupt?e:R):n(N)}function u(N){return N===45?(t.consume(N),o.interrupt?e:R):n(N)}function f(N){return N==="CDATA[".charCodeAt(a++)?(t.consume(N),a===6?o.interrupt?e:T:f):n(N)}function m(N){return uo(N)?(t.consume(N),i=String.fromCharCode(N),_):n(N)}function _(N){if(N===null||N===47||N===62||bn(N)){const $=N===47,Y=i.toLowerCase();return $||s||!Hw.includes(Y)?A9.includes(i.toLowerCase())?(r=6,$?(t.consume(N),g):o.interrupt?e(N):T(N)):(r=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(N):s?p(N):b(N)):(r=1,o.interrupt?e(N):T(N))}return N===45||Sn(N)?(t.consume(N),i+=String.fromCharCode(N),_):n(N)}function g(N){return N===62?(t.consume(N),o.interrupt?e:T):n(N)}function p(N){return ht(N)?(t.consume(N),p):j(N)}function b(N){return N===47?(t.consume(N),j):N===58||N===95||uo(N)?(t.consume(N),y):ht(N)?(t.consume(N),b):j(N)}function y(N){return N===45||N===46||N===58||N===95||Sn(N)?(t.consume(N),y):x(N)}function x(N){return N===61?(t.consume(N),v):ht(N)?(t.consume(N),x):b(N)}function v(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),l=N,S):ht(N)?(t.consume(N),v):k(N)}function S(N){return N===l?(t.consume(N),l=null,E):N===null||Qe(N)?n(N):(t.consume(N),S)}function k(N){return N===null||N===34||N===39||N===47||N===60||N===61||N===62||N===96||bn(N)?x(N):(t.consume(N),k)}function E(N){return N===47||N===62||ht(N)?b(N):n(N)}function j(N){return N===62?(t.consume(N),I):n(N)}function I(N){return N===null||Qe(N)?T(N):ht(N)?(t.consume(N),I):n(N)}function T(N){return N===45&&r===2?(t.consume(N),O):N===60&&r===1?(t.consume(N),z):N===62&&r===4?(t.consume(N),C):N===63&&r===3?(t.consume(N),R):N===93&&r===5?(t.consume(N),V):!Qe(N)||r!==6&&r!==7?N===null||Qe(N)?(t.exit("htmlFlowData"),M(N)):(t.consume(N),T):(t.exit("htmlFlowData"),t.check(M9,H,M)(N))}function M(N){return t.check(O9,L,H)(N)}function L(N){return t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),B}function B(N){return N===null||Qe(N)?M(N):(t.enter("htmlFlowData"),T(N))}function O(N){return N===45?(t.consume(N),R):T(N)}function z(N){return N===47?(t.consume(N),i="",F):T(N)}function F(N){if(N===62){const $=i.toLowerCase();return Hw.includes($)?(t.consume(N),C):T(N)}return uo(N)&&i.length<8?(t.consume(N),i+=String.fromCharCode(N),F):T(N)}function V(N){return N===93?(t.consume(N),R):T(N)}function R(N){return N===62?(t.consume(N),C):N===45&&r===2?(t.consume(N),R):T(N)}function C(N){return N===null||Qe(N)?(t.exit("htmlFlowData"),H(N)):(t.consume(N),C)}function H(N){return t.exit("htmlFlow"),e(N)}}},M9={partial:!0,tokenize:function(t,e,n){return function(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),t.attempt(Bl,e,n)}}},O9={partial:!0,tokenize:function(t,e,n){const o=this;return function(s){return Qe(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),r):n(s)};function r(s){return o.parser.lazy[o.now().line]?n(s):e(s)}}},D9={name:"htmlText",tokenize:function(t,e,n){const o=this;let r,s,i;return function(C){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(C),a};function a(C){return C===33?(t.consume(C),l):C===47?(t.consume(C),v):C===63?(t.consume(C),y):uo(C)?(t.consume(C),E):n(C)}function l(C){return C===45?(t.consume(C),c):C===91?(t.consume(C),s=0,m):uo(C)?(t.consume(C),b):n(C)}function c(C){return C===45?(t.consume(C),f):n(C)}function d(C){return C===null?n(C):C===45?(t.consume(C),u):Qe(C)?(i=d,F(C)):(t.consume(C),d)}function u(C){return C===45?(t.consume(C),f):d(C)}function f(C){return C===62?z(C):C===45?u(C):d(C)}function m(C){return C==="CDATA[".charCodeAt(s++)?(t.consume(C),s===6?_:m):n(C)}function _(C){return C===null?n(C):C===93?(t.consume(C),g):Qe(C)?(i=_,F(C)):(t.consume(C),_)}function g(C){return C===93?(t.consume(C),p):_(C)}function p(C){return C===62?z(C):C===93?(t.consume(C),p):_(C)}function b(C){return C===null||C===62?z(C):Qe(C)?(i=b,F(C)):(t.consume(C),b)}function y(C){return C===null?n(C):C===63?(t.consume(C),x):Qe(C)?(i=y,F(C)):(t.consume(C),y)}function x(C){return C===62?z(C):y(C)}function v(C){return uo(C)?(t.consume(C),S):n(C)}function S(C){return C===45||Sn(C)?(t.consume(C),S):k(C)}function k(C){return Qe(C)?(i=k,F(C)):ht(C)?(t.consume(C),k):z(C)}function E(C){return C===45||Sn(C)?(t.consume(C),E):C===47||C===62||bn(C)?j(C):n(C)}function j(C){return C===47?(t.consume(C),z):C===58||C===95||uo(C)?(t.consume(C),I):Qe(C)?(i=j,F(C)):ht(C)?(t.consume(C),j):z(C)}function I(C){return C===45||C===46||C===58||C===95||Sn(C)?(t.consume(C),I):T(C)}function T(C){return C===61?(t.consume(C),M):Qe(C)?(i=T,F(C)):ht(C)?(t.consume(C),T):j(C)}function M(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(t.consume(C),r=C,L):Qe(C)?(i=M,F(C)):ht(C)?(t.consume(C),M):(t.consume(C),B)}function L(C){return C===r?(t.consume(C),r=void 0,O):C===null?n(C):Qe(C)?(i=L,F(C)):(t.consume(C),L)}function B(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||bn(C)?j(C):(t.consume(C),B)}function O(C){return C===47||C===62||bn(C)?j(C):n(C)}function z(C){return C===62?(t.consume(C),t.exit("htmlTextData"),t.exit("htmlText"),e):n(C)}function F(C){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),V}function V(C){return ht(C)?yt(t,R,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):R(C)}function R(C){return t.enter("htmlTextData"),i(C)}}},bh={name:"labelEnd",resolveAll:function(t){let e=-1;const n=[];for(;++e<t.length;){const o=t[e][1];if(n.push(t[e]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const r=o.type==="labelImage"?4:2;o.type="data",e+=r}}return t.length!==n.length&&co(t,0,t.length,n),t},resolveTo:function(t,e){let n,o,r,s,i=t.length,a=0;for(;i--;)if(n=t[i][1],o){if(n.type==="link"||n.type==="labelLink"&&n._inactive)break;t[i][0]==="enter"&&n.type==="labelLink"&&(n._inactive=!0)}else if(r){if(t[i][0]==="enter"&&(n.type==="labelImage"||n.type==="labelLink")&&!n._balanced&&(o=i,n.type!=="labelLink")){a=2;break}}else n.type==="labelEnd"&&(r=i);const l={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[o][1].start},end:{...t[r][1].end}},d={type:"labelText",start:{...t[o+a+2][1].end},end:{...t[r-2][1].start}};return s=[["enter",l,e],["enter",c,e]],s=Un(s,t.slice(o+1,o+a+3)),s=Un(s,[["enter",d,e]]),s=Un(s,ph(e.parser.constructs.insideSpan.null,t.slice(o+a+4,r-3),e)),s=Un(s,[["exit",d,e],t[r-2],t[r-1],["exit",c,e]]),s=Un(s,t.slice(r+1)),s=Un(s,[["exit",l,e]]),co(t,o,t.length,s),t},tokenize:function(t,e,n){const o=this;let r,s,i=o.events.length;for(;i--;)if((o.events[i][1].type==="labelImage"||o.events[i][1].type==="labelLink")&&!o.events[i][1]._balanced){r=o.events[i][1];break}return function(u){return r?r._inactive?d(u):(s=o.parser.defined.includes(ds(o.sliceSerialize({start:r.end,end:o.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelEnd"),a):n(u)};function a(u){return u===40?t.attempt(R9,c,s?c:d)(u):u===91?t.attempt(P9,c,s?l:d)(u):s?c(u):d(u)}function l(u){return t.attempt(L9,c,d)(u)}function c(u){return e(u)}function d(u){return r._balanced=!0,n(u)}}},R9={tokenize:function(t,e,n){return function(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),o};function o(d){return bn(d)?Vi(t,r)(d):r(d)}function r(d){return d===41?c(d):Bw(t,s,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function s(d){return bn(d)?Vi(t,a)(d):c(d)}function i(d){return n(d)}function a(d){return d===34||d===39||d===40?Vw(t,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function l(d){return bn(d)?Vi(t,c)(d):c(d)}function c(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}},P9={tokenize:function(t,e,n){const o=this;return function(i){return Uw.call(o,t,r,s,"reference","referenceMarker","referenceString")(i)};function r(i){return o.parser.defined.includes(ds(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?e(i):n(i)}function s(i){return n(i)}}},L9={tokenize:function(t,e,n){return function(r){return t.enter("reference"),t.enter("referenceMarker"),t.consume(r),t.exit("referenceMarker"),o};function o(r){return r===93?(t.enter("referenceMarker"),t.consume(r),t.exit("referenceMarker"),t.exit("reference"),e):n(r)}}},F9={name:"labelStartImage",resolveAll:bh.resolveAll,tokenize:function(t,e,n){const o=this;return function(i){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(i),t.exit("labelImageMarker"),r};function r(i){return i===91?(t.enter("labelMarker"),t.consume(i),t.exit("labelMarker"),t.exit("labelImage"),s):n(i)}function s(i){return i===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(i):e(i)}}},z9={name:"labelStartLink",resolveAll:bh.resolveAll,tokenize:function(t,e,n){const o=this;return function(s){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelLink"),r};function r(s){return s===94&&"_hiddenFootnoteSupport"in o.parser.constructs?n(s):e(s)}}},yh={name:"lineEnding",tokenize:function(t,e){return function(n){return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),yt(t,e,"linePrefix")}}},Ul={name:"thematicBreak",tokenize:function(t,e,n){let o,r=0;return function(a){return t.enter("thematicBreak"),function(l){return o=l,s(l)}(a)};function s(a){return a===o?(t.enter("thematicBreakSequence"),i(a)):r>=3&&(a===null||Qe(a))?(t.exit("thematicBreak"),e(a)):n(a)}function i(a){return a===o?(t.consume(a),r++,i):(t.exit("thematicBreakSequence"),ht(a)?yt(t,s,"whitespace")(a):s(a))}}},yn={continuation:{tokenize:function(t,e,n){const o=this;return o.containerState._closeFlow=void 0,t.check(Bl,r,s);function r(a){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,yt(t,e,"listItemIndent",o.containerState.size+1)(a)}function s(a){return o.containerState.furtherBlankLines||!ht(a)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,i(a)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,t.attempt(U9,e,i)(a))}function i(a){return o.containerState._closeFlow=!0,o.interrupt=void 0,yt(t,t.attempt(yn,e,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}},exit:function(t){t.exit(this.containerState.type)},name:"list",tokenize:function(t,e,n){const o=this,r=o.events[o.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,i=0;return function(f){const m=o.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!o.containerState.marker||f===o.containerState.marker:mh(f)){if(o.containerState.type||(o.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(Ul,n,l)(f):l(f);if(!o.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(f)}return n(f)};function a(f){return mh(f)&&++i<10?(t.consume(f),a):(!o.interrupt||i<2)&&(o.containerState.marker?f===o.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),l(f)):n(f)}function l(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||f,t.check(Bl,o.interrupt?n:c,t.attempt(B9,u,d))}function c(f){return o.containerState.initialBlankLine=!0,s++,u(f)}function d(f){return ht(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),u):n(f)}function u(f){return o.containerState.size=s+o.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}},B9={partial:!0,tokenize:function(t,e,n){const o=this;return yt(t,function(r){const s=o.events[o.events.length-1];return!ht(r)&&s&&s[1].type==="listItemPrefixWhitespace"?e(r):n(r)},"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},U9={partial:!0,tokenize:function(t,e,n){const o=this;return yt(t,function(r){const s=o.events[o.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===o.containerState.size?e(r):n(r)},"listItemIndent",o.containerState.size+1)}},$w={name:"setextUnderline",resolveTo:function(t,e){let n,o,r,s=t.length;for(;s--;)if(t[s][0]==="enter"){if(t[s][1].type==="content"){n=s;break}t[s][1].type==="paragraph"&&(o=s)}else t[s][1].type==="content"&&t.splice(s,1),r||t[s][1].type!=="definition"||(r=s);const i={type:"setextHeading",start:{...t[o][1].start},end:{...t[t.length-1][1].end}};return t[o][1].type="setextHeadingText",r?(t.splice(o,0,["enter",i,e]),t.splice(r+1,0,["exit",t[n][1],e]),t[n][1].end={...t[r][1].end}):t[n][1]=i,t.push(["exit",i,e]),t},tokenize:function(t,e,n){const o=this;let r;return function(a){let l,c=o.events.length;for(;c--;)if(o.events[c][1].type!=="lineEnding"&&o.events[c][1].type!=="linePrefix"&&o.events[c][1].type!=="content"){l=o.events[c][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||l)?(t.enter("setextHeadingLine"),r=a,function(d){return t.enter("setextHeadingLineSequence"),s(d)}(a)):n(a)};function s(a){return a===r?(t.consume(a),s):(t.exit("setextHeadingLineSequence"),ht(a)?yt(t,i,"lineSuffix")(a):i(a))}function i(a){return a===null||Qe(a)?(t.exit("setextHeadingLine"),e(a)):n(a)}}},V9={tokenize:function(t){const e=this,n=t.attempt(Bl,function(r){return r===null?void t.consume(r):(t.enter("lineEndingBlank"),t.consume(r),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n)},t.attempt(this.parser.constructs.flowInitial,o,yt(t,t.attempt(this.parser.constructs.flow,o,t.attempt(S9,o)),"linePrefix")));return n;function o(r){if(r!==null)return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),e.currentConstruct=void 0,n;t.consume(r)}}},H9={resolveAll:qw()},$9=Ww("string"),W9=Ww("text");function Ww(t){return{resolveAll:qw(t==="text"?q9:void 0),tokenize:function(e){const n=this,o=this.parser.constructs[t],r=e.attempt(o,s,i);return s;function s(c){return l(c)?r(c):i(c)}function i(c){if(c!==null)return e.enter("data"),e.consume(c),a;e.consume(c)}function a(c){return l(c)?(e.exit("data"),r(c)):(e.consume(c),a)}function l(c){if(c===null)return!0;const d=o[c];let u=-1;if(d)for(;++u<d.length;){const f=d[u];if(!f.previous||f.previous.call(n,n.previous))return!0}return!1}}}}function qw(t){return function(e,n){let o,r=-1;for(;++r<=e.length;)o===void 0?e[r]&&e[r][1].type==="data"&&(o=r,r++):e[r]&&e[r][1].type==="data"||(r!==o+2&&(e[o][1].end=e[r-1][1].end,e.splice(o+2,r-o-2),r=o+2),o=void 0);return t?t(e,n):e}}function q9(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const o=t[n-1][1],r=e.sliceStream(o);let s,i=r.length,a=-1,l=0;for(;i--;){const c=r[i];if(typeof c=="string"){for(a=c.length;c.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(c===-2)s=!0,l++;else if(c!==-1){i++;break}}if(l){const c={type:n===t.length||s||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:o.start._bufferIndex+a,_index:o.start._index+i,line:o.end.line,column:o.end.column-l,offset:o.end.offset-l},end:{...o.end}};o.end={...c.start},o.start.offset===o.end.offset?Object.assign(o,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const G9={42:yn,43:yn,45:yn,48:yn,49:yn,50:yn,51:yn,52:yn,53:yn,54:yn,55:yn,56:yn,57:yn,62:Dw},Y9={91:N9},J9={[-2]:_h,[-1]:_h,32:_h},K9={35:I9,42:Ul,45:[$w,Ul],60:T9,61:$w,95:Ul,96:Fw,126:Fw},X9={38:Pw,92:Rw},Z9={[-5]:yh,[-4]:yh,[-3]:yh,33:F9,38:Pw,42:gh,60:[y9,D9],91:z9,92:[E9,Rw],93:bh,95:gh,96:w9},Q9={null:[gh,H9]},eD=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:Y9,disable:{null:[]},document:G9,flow:K9,flowInitial:J9,insideSpan:Q9,string:X9,text:Z9},Symbol.toStringTag,{value:"Module"}));function tD(t,e,n){let o={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let i=[],a=[];const l={attempt:p(function(x,v){b(x,v.from)}),check:p(g),consume:function(x){Qe(x)?(o.line++,o.column=1,o.offset+=x===-3?2:1,y()):x!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===i[o._index].length&&(o._bufferIndex=-1,o._index++)),c.previous=x},enter:function(x,v){const S=v||{};return S.type=x,S.start=f(),c.events.push(["enter",S,c]),a.push(S),S},exit:function(x){const v=a.pop();return v.end=f(),c.events.push(["exit",v,c]),v},interrupt:p(g,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(x){r[x.line]=x.column,y()},events:[],now:f,parser:t,previous:null,sliceSerialize:function(x,v){return function(S,k){let E=-1;const j=[];let I;for(;++E<S.length;){const T=S[E];let M;if(typeof T=="string")M=T;else switch(T){case-5:M="\r";break;case-4:M=`
`;break;case-3:M=`\r
`;break;case-2:M=k?" ":"	";break;case-1:if(!k&&I)continue;M=" ";break;default:M=String.fromCharCode(T)}I=T===-2,j.push(M)}return j.join("")}(u(x),v)},sliceStream:u,write:function(x){return i=Un(i,x),m(),i[i.length-1]!==null?[]:(b(e,0),c.events=ph(s,c.events,c),c.events)}};let d=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function u(x){return function(v,S){const k=S.start._index,E=S.start._bufferIndex,j=S.end._index,I=S.end._bufferIndex;let T;if(k===j)T=[v[k].slice(E,I)];else{if(T=v.slice(k,j),E>-1){const M=T[0];typeof M=="string"?T[0]=M.slice(E):T.shift()}I>0&&T.push(v[j].slice(0,I))}return T}(i,x)}function f(){const{_bufferIndex:x,_index:v,line:S,column:k,offset:E}=o;return{_bufferIndex:x,_index:v,line:S,column:k,offset:E}}function m(){let x;for(;o._index<i.length;){const v=i[o._index];if(typeof v=="string")for(x=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===x&&o._bufferIndex<v.length;)_(v.charCodeAt(o._bufferIndex));else _(v)}}function _(x){d=d(x)}function g(x,v){v.restore()}function p(x,v){return function(S,k,E){let j,I,T,M;return Array.isArray(S)?L(S):"tokenize"in S?L([S]):function(F){return V;function V(R){const C=R!==null&&F[R],H=R!==null&&F.null;return L([...Array.isArray(C)?C:C?[C]:[],...Array.isArray(H)?H:H?[H]:[]])(R)}}(S);function L(F){return j=F,I=0,F.length===0?E:B(F[I])}function B(F){return function(V){return M=function(){const R=f(),C=c.previous,H=c.currentConstruct,N=c.events.length,$=Array.from(a);return{from:N,restore:Y};function Y(){o=R,c.previous=C,c.currentConstruct=H,c.events.length=N,a=$,y()}}(),T=F,F.partial||(c.currentConstruct=F),F.name&&c.parser.constructs.disable.null.includes(F.name)?z():F.tokenize.call(v?Object.assign(Object.create(c),v):c,l,O,z)(V)}}function O(F){return x(T,M),k}function z(F){return M.restore(),++I<j.length?B(j[I]):E}}}function b(x,v){x.resolveAll&&!s.includes(x)&&s.push(x),x.resolve&&co(c.events,v,c.events.length-v,x.resolve(c.events.slice(v),c)),x.resolveTo&&(c.events=x.resolveTo(c.events,c))}function y(){o.line in r&&o.column<2&&(o.column=r[o.line],o.offset+=r[o.line]-1)}}function nD(t){const e=function(r){const s={};let i=-1;for(;++i<r.length;)d9(s,r[i]);return s}([eD,...(t||{}).extensions||[]]),n={constructs:e,content:o(_9),defined:[],document:o(b9),flow:o(V9),lazy:{},string:o($9),text:o(W9)};return n;function o(r){return function(s){return tD(n,r,s)}}}const Gw=/[\0\t\n\r]/g,oD=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function rD(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),r=o===120||o===88;return Aw(n.slice(r?2:1),r?16:10)}return hh(n)||t}const Yw={}.hasOwnProperty;function sD(t,e,n){return typeof e!="string"&&(n=e,e=void 0),function(o){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(Re),autolinkProtocol:L,autolinkEmail:L,atxHeading:l(ae),blockQuote:l(de),characterEscape:L,characterReference:L,codeFenced:l(ge),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(ge,c),codeText:l(ie,c),codeTextData:L,data:L,codeFlowValue:L,definition:l(we),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(ve),hardBreakEscape:l(Se),hardBreakTrailing:l(Se),htmlFlow:l(pe,c),htmlFlowData:L,htmlText:l(pe,c),htmlTextData:L,image:l(Te),label:c,link:l(Re),listItem:l(ze),listItemValue:g,listOrdered:l(We,_),listUnordered:l(We),paragraph:l(Ce),reference:re,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(ae),strong:l(qe),thematicBreak:l(at)},exit:{atxHeading:u(),atxHeadingSequence:j,autolink:u(),autolinkEmail:me,autolinkProtocol:ce,blockQuote:u(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:G,characterReference:Q,codeFenced:u(x),codeFencedFence:y,codeFencedFenceInfo:p,codeFencedFenceMeta:b,codeFlowValue:B,codeIndented:u(v),codeText:u(R),codeTextData:B,data:B,definition:u(),definitionDestinationString:E,definitionLabelString:S,definitionTitleString:k,emphasis:u(),hardBreakEscape:u(z),hardBreakTrailing:u(z),htmlFlow:u(F),htmlFlowData:B,htmlText:u(V),htmlTextData:B,image:u(H),label:$,labelText:N,lineEnding:O,link:u(C),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ne,resourceDestinationString:Y,resourceTitleString:Z,resource:q,setextHeading:u(M),setextHeadingLineSequence:T,setextHeadingText:I,strong:u(),thematicBreak:u()}};Jw(r,(o||{}).mdastExtensions||[]);const s={};return i;function i(te){let je={type:"root",children:[]};const Me={stack:[je],tokenStack:[],config:r,enter:d,exit:f,buffer:c,resume:m,data:s},Ue=[];let J=-1;for(;++J<te.length;)(te[J][1].type==="listOrdered"||te[J][1].type==="listUnordered")&&(te[J][0]==="enter"?Ue.push(J):J=a(te,Ue.pop(),J));for(J=-1;++J<te.length;){const he=r[te[J][0]];Yw.call(he,te[J][1].type)&&he[te[J][1].type].call(Object.assign({sliceSerialize:te[J][2].sliceSerialize},Me),te[J][1])}if(Me.tokenStack.length>0){const he=Me.tokenStack[Me.tokenStack.length-1];(he[1]||Kw).call(Me,void 0,he[0])}for(je.position={start:er(te.length>0?te[0][1].start:{line:1,column:1,offset:0}),end:er(te.length>0?te[te.length-2][1].end:{line:1,column:1,offset:0})},J=-1;++J<r.transforms.length;)je=r.transforms[J](je)||je;return je}function a(te,je,Me){let Ue,J,he,_e,ue=je-1,ye=-1,Ne=!1;for(;++ue<=Me;){const Be=te[ue];switch(Be[1].type){case"listUnordered":case"listOrdered":case"blockQuote":Be[0]==="enter"?ye++:ye--,_e=void 0;break;case"lineEndingBlank":Be[0]==="enter"&&(!Ue||_e||ye||he||(he=ue),_e=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:_e=void 0}if(!ye&&Be[0]==="enter"&&Be[1].type==="listItemPrefix"||ye===-1&&Be[0]==="exit"&&(Be[1].type==="listUnordered"||Be[1].type==="listOrdered")){if(Ue){let et=ue;for(J=void 0;et--;){const le=te[et];if(le[1].type==="lineEnding"||le[1].type==="lineEndingBlank"){if(le[0]==="exit")continue;J&&(te[J][1].type="lineEndingBlank",Ne=!0),le[1].type="lineEnding",J=et}else if(le[1].type!=="linePrefix"&&le[1].type!=="blockQuotePrefix"&&le[1].type!=="blockQuotePrefixWhitespace"&&le[1].type!=="blockQuoteMarker"&&le[1].type!=="listItemIndent")break}he&&(!J||he<J)&&(Ue._spread=!0),Ue.end=Object.assign({},J?te[J][1].start:Be[1].end),te.splice(J||ue,0,["exit",Ue,Be[2]]),ue++,Me++}if(Be[1].type==="listItemPrefix"){const et={type:"listItem",_spread:!1,start:Object.assign({},Be[1].start),end:void 0};Ue=et,te.splice(ue,0,["enter",et,Be[2]]),ue++,Me++,he=void 0,_e=!0}}}return te[je][1]._spread=Ne,Me}function l(te,je){return Me;function Me(Ue){d.call(this,te(Ue),Ue),je&&je.call(this,Ue)}}function c(){this.stack.push({type:"fragment",children:[]})}function d(te,je,Me){this.stack[this.stack.length-1].children.push(te),this.stack.push(te),this.tokenStack.push([je,Me||void 0]),te.position={start:er(je.start),end:void 0}}function u(te){return je;function je(Me){te&&te.call(this,Me),f.call(this,Me)}}function f(te,je){const Me=this.stack.pop(),Ue=this.tokenStack.pop();if(!Ue)throw new Error("Cannot close `"+te.type+"` ("+zi({start:te.start,end:te.end})+"): it\u2019s not open");Ue[0].type!==te.type&&(je?je.call(this,te,Ue[0]):(Ue[1]||Kw).call(this,te,Ue[0])),Me.position.end=er(te.end)}function m(){return function(te){return Nw(te,typeof zl.includeImageAlt!="boolean"||zl.includeImageAlt,typeof zl.includeHtml!="boolean"||zl.includeHtml)}(this.stack.pop())}function _(){this.data.expectingFirstListItemValue=!0}function g(te){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(te),10),this.data.expectingFirstListItemValue=void 0)}function p(){const te=this.resume();this.stack[this.stack.length-1].lang=te}function b(){const te=this.resume();this.stack[this.stack.length-1].meta=te}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const te=this.resume();this.stack[this.stack.length-1].value=te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const te=this.resume();this.stack[this.stack.length-1].value=te.replace(/(\r?\n|\r)$/g,"")}function S(te){const je=this.resume(),Me=this.stack[this.stack.length-1];Me.label=je,Me.identifier=ds(this.sliceSerialize(te)).toLowerCase()}function k(){const te=this.resume();this.stack[this.stack.length-1].title=te}function E(){const te=this.resume();this.stack[this.stack.length-1].url=te}function j(te){const je=this.stack[this.stack.length-1];if(!je.depth){const Me=this.sliceSerialize(te).length;je.depth=Me}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function T(te){this.stack[this.stack.length-1].depth=this.sliceSerialize(te).codePointAt(0)===61?1:2}function M(){this.data.setextHeadingSlurpLineEnding=void 0}function L(te){const je=this.stack[this.stack.length-1].children;let Me=je[je.length-1];Me&&Me.type==="text"||(Me=Ze(),Me.position={start:er(te.start),end:void 0},je.push(Me)),this.stack.push(Me)}function B(te){const je=this.stack.pop();je.value+=this.sliceSerialize(te),je.position.end=er(te.end)}function O(te){const je=this.stack[this.stack.length-1];if(this.data.atHardBreak)return je.children[je.children.length-1].position.end=er(te.end),void(this.data.atHardBreak=void 0);!this.data.setextHeadingSlurpLineEnding&&r.canContainEols.includes(je.type)&&(L.call(this,te),B.call(this,te))}function z(){this.data.atHardBreak=!0}function F(){const te=this.resume();this.stack[this.stack.length-1].value=te}function V(){const te=this.resume();this.stack[this.stack.length-1].value=te}function R(){const te=this.resume();this.stack[this.stack.length-1].value=te}function C(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const je=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=je,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function H(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const je=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=je,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function N(te){const je=this.sliceSerialize(te),Me=this.stack[this.stack.length-2];Me.label=function(Ue){return Ue.replace(oD,rD)}(je),Me.identifier=ds(je).toLowerCase()}function $(){const te=this.stack[this.stack.length-1],je=this.resume(),Me=this.stack[this.stack.length-1];if(this.data.inReference=!0,Me.type==="link"){const Ue=te.children;Me.children=Ue}else Me.alt=je}function Y(){const te=this.resume();this.stack[this.stack.length-1].url=te}function Z(){const te=this.resume();this.stack[this.stack.length-1].title=te}function q(){this.data.inReference=void 0}function re(){this.data.referenceType="collapsed"}function ne(te){const je=this.resume(),Me=this.stack[this.stack.length-1];Me.label=je,Me.identifier=ds(this.sliceSerialize(te)).toLowerCase(),this.data.referenceType="full"}function oe(te){this.data.characterReferenceType=te.type}function G(te){const je=this.sliceSerialize(te),Me=this.data.characterReferenceType;let Ue;Me?(Ue=Aw(je,Me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ue=hh(je),this.stack[this.stack.length-1].value+=Ue}function Q(te){this.stack.pop().position.end=er(te.end)}function ce(te){B.call(this,te),this.stack[this.stack.length-1].url=this.sliceSerialize(te)}function me(te){B.call(this,te),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(te)}function de(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function ie(){return{type:"inlineCode",value:""}}function we(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ve(){return{type:"emphasis",children:[]}}function ae(){return{type:"heading",depth:0,children:[]}}function Se(){return{type:"break"}}function pe(){return{type:"html",value:""}}function Te(){return{type:"image",title:null,url:"",alt:null}}function Re(){return{type:"link",title:null,url:"",children:[]}}function We(te){return{type:"list",ordered:te.type==="listOrdered",start:null,spread:te._spread,children:[]}}function ze(te){return{type:"listItem",spread:te._spread,checked:null,children:[]}}function Ce(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function Ze(){return{type:"text",value:""}}function at(){return{type:"thematicBreak"}}}(n)(function(o){for(;!zw(o););return o}(nD(n).document().write(function(){let o,r=1,s="",i=!0;return function(a,l,c){const d=[];let u,f,m,_,g;for(a=s+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),m=0,s="",i&&(a.charCodeAt(0)===65279&&m++,i=void 0);m<a.length;){if(Gw.lastIndex=m,u=Gw.exec(a),_=u&&u.index!==void 0?u.index:a.length,g=a.charCodeAt(_),!u){s=a.slice(m);break}if(g===10&&m===_&&o)d.push(-3),o=void 0;else switch(o&&(d.push(-5),o=void 0),m<_&&(d.push(a.slice(m,_)),r+=_-m),g){case 0:d.push(65533),r++;break;case 9:for(f=4*Math.ceil(r/4),d.push(-2);r++<f;)d.push(-1);break;case 10:d.push(-4),r=1;break;default:o=!0,r=1}m=_+1}return c&&(o&&d.push(-5),s&&d.push(s),d.push(null)),d}}()(t,e,!0))))}function er(t){return{line:t.line,column:t.column,offset:t.offset}}function Jw(t,e){let n=-1;for(;++n<e.length;){const o=e[n];Array.isArray(o)?Jw(t,o):iD(t,o)}}function iD(t,e){let n;for(n in e)if(Yw.call(e,n))switch(n){case"canContainEols":{const o=e[n];o&&t[n].push(...o);break}case"transforms":{const o=e[n];o&&t[n].push(...o);break}case"enter":case"exit":{const o=e[n];o&&Object.assign(t[n],o);break}}}function Kw(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+zi({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+zi({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+zi({start:e.start,end:e.end})+") is still open")}function aD(t){const e=this;e.parser=function(n){return sD(n,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Xw(t,e){const n=e.referenceType;let o="]";if(n==="collapsed"?o+="[]":n==="full"&&(o+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+o}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const i=r[r.length-1];return i&&i.type==="text"?i.value+=o:r.push({type:"text",value:o}),r}function Zw(t){const e=t.spread;return e??t.children.length>1}function lD(t){const e=String(t),n=/\r?\n|\r/g;let o=n.exec(e),r=0;const s=[];for(;o;)s.push(Qw(e.slice(r,o.index),r>0,!0),o[0]),r=o.index+o[0].length,o=n.exec(e);return s.push(Qw(e.slice(r),r>0,!1)),s.join("")}function Qw(t,e,n){let o=0,r=t.length;if(e){let s=t.codePointAt(o);for(;s===9||s===32;)o++,s=t.codePointAt(o)}if(n){let s=t.codePointAt(r-1);for(;s===9||s===32;)r--,s=t.codePointAt(r-1)}return r>o?t.slice(o,r):""}const cD={blockquote:function(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)},break:function(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]},code:function(t,e){const n=e.value?e.value+`
`:"",o={};e.lang&&(o.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:o,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r},delete:function(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},emphasis:function(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},footnoteReference:function(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",o=String(e.identifier).toUpperCase(),r=us(o.toLowerCase()),s=t.footnoteOrder.indexOf(o);let i,a=t.footnoteCounts.get(o);a===void 0?(a=0,t.footnoteOrder.push(o),i=t.footnoteOrder.length):i=s+1,a+=1,t.footnoteCounts.set(o,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)},heading:function(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},html:function(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}},imageReference:function(t,e){const n=String(e.identifier).toUpperCase(),o=t.definitionById.get(n);if(!o)return Xw(t,e);const r={src:us(o.url||""),alt:e.alt};o.title!==null&&o.title!==void 0&&(r.title=o.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)},image:function(t,e){const n={src:us(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const o={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,o),t.applyData(e,o)},inlineCode:function(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const o={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,o),t.applyData(e,o)},linkReference:function(t,e){const n=String(e.identifier).toUpperCase(),o=t.definitionById.get(n);if(!o)return Xw(t,e);const r={href:us(o.url||"")};o.title!==null&&o.title!==void 0&&(r.title=o.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)},link:function(t,e){const n={href:us(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const o={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)},listItem:function(t,e,n){const o=t.all(e),r=n?function(d){let u=!1;if(d.type==="list"){u=d.spread||!1;const f=d.children;let m=-1;for(;!u&&++m<f.length;)u=Zw(f[m])}return u}(n):Zw(e),s={},i=[];if(typeof e.checked=="boolean"){const d=o[0];let u;d&&d.type==="element"&&d.tagName==="p"?u=d:(u={type:"element",tagName:"p",properties:{},children:[]},o.unshift(u)),u.children.length>0&&u.children.unshift({type:"text",value:" "}),u.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<o.length;){const d=o[a];(r||a!==0||d.type!=="element"||d.tagName!=="p")&&i.push({type:"text",value:`
`}),d.type!=="element"||d.tagName!=="p"||r?i.push(d):i.push(...d.children)}const l=o[o.length-1];l&&(r||l.type!=="element"||l.tagName!=="p")&&i.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:i};return t.patch(e,c),t.applyData(e,c)},list:function(t,e){const n={},o=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<o.length;){const i=o[r];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(o,!0)};return t.patch(e,s),t.applyData(e,s)},paragraph:function(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},root:function(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)},strong:function(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},table:function(t,e){const n=t.all(e),o=n.shift(),r=[];if(o){const i={type:"element",tagName:"thead",properties:{},children:t.wrap([o],!0)};t.patch(e.children[0],i),r.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=ih(e.children[1]),l=bw(e.children[e.children.length-1]);a&&l&&(i.position={start:a,end:l}),r.push(i)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)},tableCell:function(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},tableRow:function(t,e,n){const o=n?n.children:void 0,r=(o?o.indexOf(e):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,i=s?s.length:e.children.length;let a=-1;const l=[];for(;++a<i;){const d=e.children[a],u={},f=s?s[a]:void 0;f&&(u.align=f);let m={type:"element",tagName:r,properties:u,children:[]};d&&(m.children=t.all(d),t.patch(d,m),m=t.applyData(d,m)),l.push(m)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(l,!0)};return t.patch(e,c),t.applyData(e,c)},text:function(t,e){const n={type:"text",value:lD(String(e.value))};return t.patch(e,n),t.applyData(e,n)},thematicBreak:function(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)},toml:Vl,yaml:Vl,definition:Vl,footnoteDefinition:Vl};function Vl(){}const ev=typeof self=="object"?self:globalThis,tv=t=>((e,n)=>{const o=(s,i)=>(e.set(i,s),s),r=s=>{if(e.has(s))return e.get(s);const[i,a]=n[s];switch(i){case 0:case-1:return o(a,s);case 1:{const l=o([],s);for(const c of a)l.push(r(c));return l}case 2:{const l=o({},s);for(const[c,d]of a)l[r(c)]=r(d);return l}case 3:return o(new Date(a),s);case 4:{const{source:l,flags:c}=a;return o(new RegExp(l,c),s)}case 5:{const l=o(new Map,s);for(const[c,d]of a)l.set(r(c),r(d));return l}case 6:{const l=o(new Set,s);for(const c of a)l.add(r(c));return l}case 7:{const{name:l,message:c}=a;return o(new ev[l](c),s)}case 8:return o(BigInt(a),s);case"BigInt":return o(Object(BigInt(a)),s)}return o(new ev[i](a),s)};return r})(new Map,t)(0),hs="",{toString:dD}={},{keys:uD}=Object,Hi=t=>{const e=typeof t;if(e!=="object"||!t)return[0,e];const n=dD.call(t).slice(8,-1);switch(n){case"Array":return[1,hs];case"Object":return[2,hs];case"Date":return[3,hs];case"RegExp":return[4,hs];case"Map":return[5,hs];case"Set":return[6,hs]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Hl=([t,e])=>t===0&&(e==="function"||e==="symbol"),nv=(t,{json:e,lossy:n}={})=>{const o=[];return((r,s,i,a)=>{const l=(d,u)=>{const f=a.push(d)-1;return i.set(u,f),f},c=d=>{if(i.has(d))return i.get(d);let[u,f]=Hi(d);switch(u){case 0:{let _=d;switch(f){case"bigint":u=8,_=d.toString();break;case"function":case"symbol":if(r)throw new TypeError("unable to serialize "+f);_=null;break;case"undefined":return l([-1],d)}return l([u,_],d)}case 1:{if(f)return l([f,[...d]],d);const _=[],g=l([u,_],d);for(const p of d)_.push(c(p));return g}case 2:{if(f)switch(f){case"BigInt":return l([f,d.toString()],d);case"Boolean":case"Number":case"String":return l([f,d.valueOf()],d)}if(s&&"toJSON"in d)return c(d.toJSON());const _=[],g=l([u,_],d);for(const p of uD(d))!r&&Hl(Hi(d[p]))||_.push([c(p),c(d[p])]);return g}case 3:return l([u,d.toISOString()],d);case 4:{const{source:_,flags:g}=d;return l([u,{source:_,flags:g}],d)}case 5:{const _=[],g=l([u,_],d);for(const[p,b]of d)(r||!Hl(Hi(p))&&!Hl(Hi(b)))&&_.push([c(p),c(b)]);return g}case 6:{const _=[],g=l([u,_],d);for(const p of d)!r&&Hl(Hi(p))||_.push(c(p));return g}}const{message:m}=d;return l([u,{name:f,message:m}],d)};return c})(!(e||n),!!e,new Map,o)(t),o},$l=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?tv(nv(t,e)):structuredClone(t):(t,e)=>tv(nv(t,e));function hD(t,e){const n=[{type:"text",value:"\u21A9"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function fD(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}const ov=function(t){if(t==null)return mD;if(typeof t=="function")return Wl(t);if(typeof t=="object")return Array.isArray(t)?function(e){const n=[];let o=-1;for(;++o<e.length;)n[o]=ov(e[o]);return Wl(r);function r(...s){let i=-1;for(;++i<n.length;)if(n[i].apply(this,s))return!0;return!1}}(t):function(e){const n=e;return Wl(o);function o(r){const s=r;let i;for(i in e)if(s[i]!==n[i])return!1;return!0}}(t);if(typeof t=="string")return function(e){return Wl(n);function n(o){return o&&o.type===e}}(t);throw new Error("Expected function, string, or object as test")};function Wl(t){return function(e,n,o){return!!(function(r){return r!==null&&typeof r=="object"&&"type"in r}(e)&&t.call(this,e,typeof n=="number"?n:void 0,o||void 0))}}function mD(){return!0}const rv=[],pD=!0,sv=!1;function gD(t,e,n,o){let r;typeof e=="function"&&typeof n!="function"?(o=n,n=e):r=e;const s=ov(r),i=o?-1:1;(function a(l,c,d){const u=l&&typeof l=="object"?l:{};if(typeof u.type=="string"){const m=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0;Object.defineProperty(f,"name",{value:"node ("+l.type+(m?"<"+m+">":"")+")"})}return f;function f(){let m,_,g,p=rv;if((!e||s(l,c,d[d.length-1]||void 0))&&(p=function(b){return Array.isArray(b)?b:typeof b=="number"?[pD,b]:b==null?rv:[b]}(n(l,d)),p[0]===sv))return p;if("children"in l&&l.children){const b=l;if(b.children&&p[0]!=="skip")for(_=(o?b.children.length:-1)+i,g=d.concat(b);_>-1&&_<b.children.length;){const y=b.children[_];if(m=a(y,_,g)(),m[0]===sv)return m;_=typeof m[1]=="number"?m[1]:_+i}}return p}})(t,void 0,[])()}function iv(t,e,n,o){let r,s,i;typeof e=="function"?(s=void 0,i=e,r=n):(s=e,i=n,r=o),gD(t,s,function(a,l){const c=l[l.length-1],d=c?c.children.indexOf(a):void 0;return i(a,d,c)},r)}const xh={}.hasOwnProperty,_D={};function bD(t,e){t.position&&(e.position=function(n){const o=ih(n),r=bw(n);if(o&&r)return{start:o,end:r}}(t))}function yD(t,e){let n=e;if(t&&t.data){const o=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;typeof o=="string"&&(n.type==="element"?n.tagName=o:n={type:"element",tagName:o,properties:{},children:"children"in n?n.children:[n]}),n.type==="element"&&s&&Object.assign(n.properties,$l(s)),"children"in n&&n.children&&r!=null&&(n.children=r)}return n}function xD(t,e){const n=e.data||{},o=!("value"in e)||xh.call(n,"hProperties")||xh.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:t.all(e)}:{type:"text",value:e.value};return t.patch(e,o),t.applyData(e,o)}function wD(t,e){const n=[];let o=-1;for(e&&n.push({type:"text",value:`
`});++o<t.length;)o&&n.push({type:"text",value:`
`}),n.push(t[o]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function av(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function lv(t,e){const n=function(i,a){const l=a||_D,c=new Map,d=new Map,u=new Map,f={...cD,...l.handlers},m={all:function(_){const g=[];if("children"in _){const p=_.children;let b=-1;for(;++b<p.length;){const y=m.one(p[b],_);if(y){if(b&&p[b-1].type==="break"&&(Array.isArray(y)||y.type!=="text"||(y.value=av(y.value)),!Array.isArray(y)&&y.type==="element")){const x=y.children[0];x&&x.type==="text"&&(x.value=av(x.value))}Array.isArray(y)?g.push(...y):g.push(y)}}}return g},applyData:yD,definitionById:c,footnoteById:d,footnoteCounts:u,footnoteOrder:[],handlers:f,one:function(_,g){const p=_.type,b=m.handlers[p];if(xh.call(m.handlers,p)&&b)return b(m,_,g);if(m.options.passThrough&&m.options.passThrough.includes(p)){if("children"in _){const{children:y,...x}=_,v=$l(x);return v.children=m.all(_),v}return $l(_)}return(m.options.unknownHandler||xD)(m,_,g)},options:l,patch:bD,wrap:wD};return iv(i,function(_){if(_.type==="definition"||_.type==="footnoteDefinition"){const g=_.type==="definition"?c:d,p=String(_.identifier).toUpperCase();g.has(p)||g.set(p,_)}}),m}(t,e),o=n.one(t,void 0),r=function(i){const a=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",l=i.options.footnoteBackContent||hD,c=i.options.footnoteBackLabel||fD,d=i.options.footnoteLabel||"Footnotes",u=i.options.footnoteLabelTagName||"h2",f=i.options.footnoteLabelProperties||{className:["sr-only"]},m=[];let _=-1;for(;++_<i.footnoteOrder.length;){const g=i.footnoteById.get(i.footnoteOrder[_]);if(!g)continue;const p=i.all(g),b=String(g.identifier).toUpperCase(),y=us(b.toLowerCase());let x=0;const v=[],S=i.footnoteCounts.get(b);for(;S!==void 0&&++x<=S;){v.length>0&&v.push({type:"text",value:" "});let j=typeof l=="string"?l:l(_,x);typeof j=="string"&&(j={type:"text",value:j}),v.push({type:"element",tagName:"a",properties:{href:"#"+a+"fnref-"+y+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof c=="string"?c:c(_,x),className:["data-footnote-backref"]},children:Array.isArray(j)?j:[j]})}const k=p[p.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const j=k.children[k.children.length-1];j&&j.type==="text"?j.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...v)}else p.push(...v);const E={type:"element",tagName:"li",properties:{id:a+"fn-"+y},children:i.wrap(p,!0)};i.patch(g,E),m.push(E)}if(m.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:u,properties:{...$l(f),id:"footnote-label"},children:[{type:"text",value:d}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:i.wrap(m,!0)},{type:"text",value:`
`}]}}(n),s=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function vD(t,e){return t&&"run"in t?async function(n,o){const r=lv(n,{file:o,...e});await t.run(r,o)}:function(n,o){return lv(n,{file:o,...t||e})}}function cv(t){if(t)throw t}var wh,dv,kD=function(){if(dv)return wh;dv=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,r=function(l){return typeof Array.isArray=="function"?Array.isArray(l):e.call(l)==="[object Array]"},s=function(l){if(!l||e.call(l)!=="[object Object]")return!1;var c,d=t.call(l,"constructor"),u=l.constructor&&l.constructor.prototype&&t.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!d&&!u)return!1;for(c in l);return c===void 0||t.call(l,c)},i=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__"){if(!t.call(l,c))return;if(o)return o(l,c).value}return l[c]};return wh=function l(){var c,d,u,f,m,_,g=arguments[0],p=1,b=arguments.length,y=!1;for(typeof g=="boolean"&&(y=g,g=arguments[1]||{},p=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});p<b;++p)if((c=arguments[p])!=null)for(d in c)u=a(g,d),g!==(f=a(c,d))&&(y&&f&&(s(f)||(m=r(f)))?(m?(m=!1,_=u&&r(u)?u:[]):_=u&&s(u)?u:{},i(g,{name:d,newValue:l(y,_,f)})):f!==void 0&&i(g,{name:d,newValue:f}));return g},wh}();const vh=tS(kD);function kh(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return!(e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.toStringTag in t||Symbol.iterator in t)}function SD(){const t=[],e={run:function(...n){let o=-1;const r=n.pop();if(typeof r!="function")throw new TypeError("Expected function as last argument, not "+r);(function s(i,...a){const l=t[++o];let c=-1;if(i)r(i);else{for(;++c<n.length;)a[c]!==null&&a[c]!==void 0||(a[c]=n[c]);n=a,l?function(d,u){let f;return m;function m(...p){const b=d.length>p.length;let y;b&&p.push(_);try{y=d.apply(this,p)}catch(x){if(b&&f)throw x;return _(x)}b||(y&&y.then&&typeof y.then=="function"?y.then(g,_):y instanceof Error?_(y):g(y))}function _(p,...b){f||(f=!0,u(p,...b))}function g(p){_(null,p)}}(l,s)(...a):r(null,...a)}})(null,...n)},use:function(n){if(typeof n!="function")throw new TypeError("Expected `middelware` to be a function, not "+n);return t.push(n),e}};return e}const ho={basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');$i(t);let n,o=0,r=-1,s=t.length;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(n){o=s+1;break}}else r<0&&(n=!0,r=s+1);return r<0?"":t.slice(o,r)}if(e===t)return"";let i=-1,a=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(n){o=s+1;break}}else i<0&&(n=!0,i=s+1),a>-1&&(t.codePointAt(s)===e.codePointAt(a--)?a<0&&(r=s):(a=-1,r=i));return o===r?r=i:r<0&&(r=t.length),t.slice(o,r)},dirname:function(t){if($i(t),t.length===0)return".";let e,n=-1,o=t.length;for(;--o;)if(t.codePointAt(o)===47){if(e){n=o;break}}else e||(e=!0);return n<0?t.codePointAt(0)===47?"/":".":n===1&&t.codePointAt(0)===47?"//":t.slice(0,n)},extname:function(t){$i(t);let e,n=t.length,o=-1,r=0,s=-1,i=0;for(;n--;){const a=t.codePointAt(n);if(a!==47)o<0&&(e=!0,o=n+1),a===46?s<0?s=n:i!==1&&(i=1):s>-1&&(i=-1);else if(e){r=n+1;break}}return s<0||o<0||i===0||i===1&&s===o-1&&s===r+1?"":t.slice(s,o)},join:function(...t){let e,n=-1;for(;++n<t.length;)$i(t[n]),t[n]&&(e=e===void 0?t[n]:e+"/"+t[n]);return e===void 0?".":function(o){$i(o);const r=o.codePointAt(0)===47;let s=function(i,a){let l,c,d="",u=0,f=-1,m=0,_=-1;for(;++_<=i.length;){if(_<i.length)l=i.codePointAt(_);else{if(l===47)break;l=47}if(l===47){if(!(f===_-1||m===1))if(f!==_-1&&m===2){if(d.length<2||u!==2||d.codePointAt(d.length-1)!==46||d.codePointAt(d.length-2)!==46){if(d.length>2){if(c=d.lastIndexOf("/"),c!==d.length-1){c<0?(d="",u=0):(d=d.slice(0,c),u=d.length-1-d.lastIndexOf("/")),f=_,m=0;continue}}else if(d.length>0){d="",u=0,f=_,m=0;continue}}a&&(d=d.length>0?d+"/..":"..",u=2)}else d.length>0?d+="/"+i.slice(f+1,_):d=i.slice(f+1,_),u=_-f-1;f=_,m=0}else l===46&&m>-1?m++:m=-1}return d}(o,!r);return s.length!==0||r||(s="."),s.length>0&&o.codePointAt(o.length-1)===47&&(s+="/"),r?"/"+s:s}(e)},sep:"/"};function $i(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const CD={cwd:function(){return"/"}};function Sh(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function ND(t){if(typeof t=="string")t=new URL(t);else if(!Sh(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const n=e.pathname;let o=-1;for(;++o<n.length;)if(n.codePointAt(o)===37&&n.codePointAt(o+1)===50){const r=n.codePointAt(o+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(n)}(t)}const Ch=["history","path","basename","stem","extname","dirname"];class uv{constructor(e){let n;n=e?Sh(e)?{path:e}:typeof e=="string"||function(s){return!!(s&&typeof s=="object"&&"byteLength"in s&&"byteOffset"in s)}(e)?{value:e}:e:{},this.cwd="cwd"in n?"":CD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o,r=-1;for(;++r<Ch.length;){const s=Ch[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}for(o in n)Ch.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?ho.basename(this.path):void 0}set basename(e){jh(e,"basename"),Nh(e,"basename"),this.path=ho.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ho.dirname(this.path):void 0}set dirname(e){hv(this.basename,"dirname"),this.path=ho.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ho.extname(this.path):void 0}set extname(e){if(Nh(e,"extname"),hv(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ho.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Sh(e)&&(e=ND(e)),jh(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ho.basename(this.path,this.extname):void 0}set stem(e){jh(e,"stem"),Nh(e,"stem"),this.path=ho.join(this.dirname||"",e+(this.extname||""))}fail(e,n,o){const r=this.message(e,n,o);throw r.fatal=!0,r}info(e,n,o){const r=this.message(e,n,o);return r.fatal=void 0,r}message(e,n,o){const r=new nn(e,n,o);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Nh(t,e){if(t&&t.includes(ho.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ho.sep+"`")}function jh(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function hv(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}const jD=function(t){const e=this.constructor.prototype,n=e[t],o=function(){return n.apply(o,arguments)};return Object.setPrototypeOf(o,e),o},ED={}.hasOwnProperty;class Eh extends jD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=SD()}copy(){const e=new Eh;let n=-1;for(;++n<this.attachers.length;){const o=this.attachers[n];e.use(...o)}return e.data(vh(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Th("data",this.frozen),this.namespace[e]=n,this):ED.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Th("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const r=n.call(e,...o);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=ql(e),o=this.parser||this.Parser;return Ih("parse",o),o(String(n),n)}process(e,n){const o=this;return this.freeze(),Ih("process",this.parser||this.Parser),Ah("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,i){const a=ql(e),l=o.parse(a);function c(d,u){d||!u?i(d):s?s(u):n(void 0,u)}o.run(l,a,function(d,u,f){if(d||!u||!f)return c(d);const m=u,_=o.stringify(m,f);var g;typeof(g=_)=="string"||function(p){return!!(p&&typeof p=="object"&&"byteLength"in p&&"byteOffset"in p)}(g)?f.value=_:f.result=_,c(d,f)})}}processSync(e){let n,o=!1;return this.freeze(),Ih("processSync",this.parser||this.Parser),Ah("processSync",this.compiler||this.Compiler),this.process(e,function(r,s){o=!0,cv(r),n=s}),mv("processSync","process",o),n}run(e,n,o){fv(e),this.freeze();const r=this.transformers;return o||typeof n!="function"||(o=n,n=void 0),o?s(void 0,o):new Promise(s);function s(i,a){const l=ql(n);r.run(e,l,function(c,d,u){const f=d||e;c?a(c):i?i(f):o(void 0,f,u)})}}runSync(e,n){let o,r=!1;return this.run(e,n,function(s,i){cv(s),o=i,r=!0}),mv("runSync","run",r),o}stringify(e,n){this.freeze();const o=ql(n),r=this.compiler||this.Compiler;return Ah("stringify",r),fv(e),r(e,o)}use(e,...n){const o=this.attachers,r=this.namespace;if(Th("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else{if(typeof e!="object")throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?a(e):i(e)}return this;function s(c){if(typeof c=="function")l(c,[]);else{if(typeof c!="object")throw new TypeError("Expected usable value, not `"+c+"`");if(Array.isArray(c)){const[d,...u]=c;l(d,u)}else i(c)}}function i(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(r.settings=vh(!0,r.settings,c.settings))}function a(c){let d=-1;if(c!=null){if(!Array.isArray(c))throw new TypeError("Expected a list of plugins, not `"+c+"`");for(;++d<c.length;)s(c[d])}}function l(c,d){let u=-1,f=-1;for(;++u<o.length;)if(o[u][0]===c){f=u;break}if(f===-1)o.push([c,...d]);else if(d.length>0){let[m,..._]=d;const g=o[f][1];kh(g)&&kh(m)&&(m=vh(!0,g,m)),o[f]=[c,m,..._]}}}}const ID=new Eh().freeze();function Ih(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Ah(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Th(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function fv(t){if(!kh(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function mv(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function ql(t){return function(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}(t)?t:new uv(t)}const pv=[],gv={allowDangerousHtml:!0},AD=/^(https?|ircs?|mailto|xmpp)$/i,TD=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function MD(t){const e=function(o){const r=o.rehypePlugins||pv,s=o.remarkPlugins||pv,i=o.remarkRehypeOptions?{...o.remarkRehypeOptions,...gv}:gv;return ID().use(aD).use(s).use(vD,i).use(r)}(t),n=function(o){const r=o.children||"",s=new uv;return typeof r=="string"&&(s.value=r),s}(t);return function(o,r){const s=r.allowedElements,i=r.allowElement,a=r.components,l=r.disallowedElements,c=r.skipHtml,d=r.unwrapDisallowed,u=r.urlTransform||OD;for(const m of TD)Object.hasOwn(r,m.from)&&(m.from,m.to&&m.to,m.id);return r.className&&(o={type:"element",tagName:"div",properties:{className:r.className},children:o.type==="root"?o.children:[o]}),iv(o,f),s9(o,{Fragment:h.Fragment,components:a,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0});function f(m,_,g){if(m.type==="raw"&&g&&typeof _=="number")return c?g.children.splice(_,1):g.children[_]={type:"text",value:m.value},_;if(m.type==="element"){let p;for(p in uh)if(Object.hasOwn(uh,p)&&Object.hasOwn(m.properties,p)){const b=m.properties[p],y=uh[p];(y===null||y.includes(m.tagName))&&(m.properties[p]=u(String(b||""),p,m))}}if(m.type==="element"){let p=s?!s.includes(m.tagName):!!l&&l.includes(m.tagName);if(!p&&i&&typeof _=="number"&&(p=!i(m,_,g)),p&&g&&typeof _=="number")return d&&m.children?g.children.splice(_,1,...m.children):g.children.splice(_,1),_}}}(e.runSync(e.parse(n),n),t)}function OD(t){const e=t.indexOf(":"),n=t.indexOf("?"),o=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||o!==-1&&e>o||AD.test(t.slice(0,e))?t:""}const DD=[st.lineWrapping],RD=new Set(["python","markdown","sql","json","yaml","toml","shell","javascript","typescript","jsx","tsx","css","html"]),PD=t=>{const e=X.c(26),{code:n,language:o}=t,{theme:r}=Fo(),{createNewCell:s}=Ft(),i=$s(),a=$e(Ls),[l,c]=A.useState(n);let d,u,f;e[0]!==n?(d=()=>{c(n)},u=[n],e[0]=n,e[1]=d,e[2]=u):(d=e[1],u=e[2]),A.useEffect(d,u),e[3]!==a||e[4]!==s||e[5]!==o||e[6]!==i||e[7]!==l?(f=()=>{const j=function(I,T){return I?I==="python"?{language:I,code:T}:I==="sql"?{language:"python",code:zc.fromQuery(T)}:I==="markdown"?{language:"python",code:ia.fromMarkdown(T)}:I==="shell"||I==="bash"?{language:"python",code:`import subprocess
subprocess.run("${T}")`}:{language:"python",code:`_${I} = """
${T}
"""`}:{language:"python",code:T}}(o,l);o==="sql"&&hr(a,s,i),s({code:j.code,before:!1,cellId:i??"__end__"})},e[3]=a,e[4]=s,e[5]=o,e[6]=i,e[7]=l,e[8]=f):f=e[8];const m=f;let _;e[9]!==l?(_=async()=>{await xn(l)},e[9]=l,e[10]=_):_=e[10];const g=_,p=r==="dark"?"dark":"light",b=o&&RD.has(o)?o:void 0;let y,x,v,S,k,E;return e[11]!==p||e[12]!==b||e[13]!==l?(y=h.jsx(A.Suspense,{children:h.jsx(va,{theme:p,language:b,className:"cm border rounded overflow-hidden",extensions:DD,value:l,onChange:c})}),e[11]=p,e[12]=b,e[13]=l,e[14]=y):y=e[14],e[15]!==g?(x=h.jsx(LD,{size:"xs",variant:"outline",onClick:g,children:"Copy"}),e[15]=g,e[16]=x):x=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(v=h.jsx(ii,{className:"ml-2 h-4 w-4"}),e[17]=v):v=e[17],e[18]!==m?(S=h.jsxs(Pe,{size:"xs",variant:"outline",onClick:m,children:["Add to Notebook",v]}),e[18]=m,e[19]=S):S=e[19],e[20]!==S||e[21]!==x?(k=h.jsxs("div",{className:"flex justify-end mt-2 space-x-2",children:[x,S]}),e[20]=S,e[21]=x,e[22]=k):k=e[22],e[23]!==k||e[24]!==y?(E=h.jsxs("div",{className:"relative",children:[y,k]}),e[23]=k,e[24]=y,e[25]=E):E=e[25],E},LD=t=>{const e=X.c(12);let n,o;e[0]!==t?({onClick:n,...o}=t,e[0]=t,e[1]=n,e[2]=o):(n=e[1],o=e[2]);const[r,s]=A.useState(!1);let i,a,l;e[3]!==r?(i=()=>{r&&setTimeout(()=>s(!1),1e3)},a=[r],e[3]=r,e[4]=i,e[5]=a):(i=e[4],a=e[5]),A.useEffect(i,a),e[6]!==n?(l=u=>{n==null||n(u),s(!0)},e[6]=n,e[7]=l):l=e[7];const c=r?"Copied":"Copy";let d;return e[8]!==o||e[9]!==l||e[10]!==c?(d=h.jsx(Pe,{...o,onClick:l,children:c}),e[8]=o,e[9]=l,e[10]=c,e[11]=d):d=e[11],d},FD={code:({children:t,className:e})=>{const n=e==null?void 0:e.replace("language-","");return n&&typeof t=="string"?h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-muted-foreground pl-1",children:n}),h.jsx(PD,{code:t.trim(),language:n})]}):h.jsx("code",{className:e,children:t})}},_v=A.memo(t=>{const e=X.c(2),{content:n}=t;let o;return e[0]!==n?(o=h.jsx(MD,{components:FD,className:"prose dark:prose-invert max-w-none prose-pre:pl-0",children:n}),e[0]=n,e[1]=o):o=e[1],o},(t,e)=>t.content===e.content);_v.displayName="MemoizedMarkdownBlock";const Mh=A.memo(({content:t})=>{const e=A.useMemo(()=>{return n=t,IV.lexer(n).map(o=>o.raw);var n},[t]);return h.jsx(h.Fragment,{children:e.map((n,o)=>h.jsx(_v,{content:n},`markdown-block-${o}`))})});Mh.displayName="MarkdownRenderer";const zD=t=>{const e=X.c(13),{reasoning:n,index:o,isStreaming:r}=t,s=o===void 0?0:o,i=r!==void 0&&r,a=i?"reasoning":void 0;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(hc,{className:"h-3 w-3"}),e[0]=l):l=e[0];const c=i?"Thinking":"View reasoning";let d,u,f,m;return e[1]!==n.length||e[2]!==c?(d=h.jsx(AV,{className:"text-xs text-muted-foreground hover:bg-muted/50 px-2 py-1 h-auto rounded-sm [&[data-state=open]>svg]:rotate-180",children:h.jsxs("span",{className:"flex items-center gap-2",children:[l,c," (",n.length," ","chars)"]})}),e[1]=n.length,e[2]=c,e[3]=d):d=e[3],e[4]!==n?(u=h.jsx(TV,{className:"pb-2 px-2",children:h.jsx("div",{className:"bg-muted/30 border border-muted/50 rounded-md p-3 italic text-muted-foreground/90 relative",children:h.jsx("div",{className:"pr-6",children:h.jsx(Mh,{content:n})})})}),e[4]=n,e[5]=u):u=e[5],e[6]!==d||e[7]!==u?(f=h.jsxs(MV,{value:"reasoning",className:"border-0",children:[d,u]}),e[6]=d,e[7]=u,e[8]=f):f=e[8],e[9]!==s||e[10]!==a||e[11]!==f?(m=h.jsx(OV,{type:"single",collapsible:!0,className:"w-full mb-2",value:a,children:f},s),e[9]=s,e[10]=a,e[11]=f,e[12]=m):m=e[12],m},BD=t=>{var x;const e=X.c(27),{onNewChat:n,activeChatId:o,setActiveChat:r,chats:s}=t,i=$e(Q4),{handleClick:a}=Ca(),l=((x=i==null?void 0:i.open_ai)==null?void 0:x.model)||"gpt-4-turbo";let c,d,u,f,m,_,g,p,b,y;if(e[0]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(gr,{className:"h-4 w-4"}),e[0]=c):c=e[0],e[1]!==n?(d=h.jsx(Le,{content:"New chat",children:h.jsx(Pe,{variant:"text",size:"icon",onClick:n,children:c})}),e[1]=n,e[2]=d):d=e[2],e[3]!==a?(u=()=>a("ai"),e[3]=a,e[4]=u):u=e[4],e[5]!==l||e[6]!==u?(f=h.jsx(Pe,{variant:"text",size:"xs",className:"hover:bg-foreground/10 py-2",onClick:u,children:l}),e[5]=l,e[6]=u,e[7]=f):f=e[7],e[8]!==d||e[9]!==f?(m=h.jsxs("div",{className:"flex items-center gap-2",children:[d,f]}),e[8]=d,e[9]=f,e[10]=m):m=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx(Le,{content:"Previous chats",children:h.jsx(Qs,{asChild:!0,children:h.jsx(Pe,{variant:"text",size:"icon",children:h.jsx(PV,{className:"h-4 w-4"})})})}),e[11]=_):_=e[11],e[12]!==s.length?(g=s.length===0&&h.jsx(On,{title:"No chats yet",description:"Start a new chat to get started",icon:h.jsx(hc,{})}),e[12]=s.length,e[13]=g):g=e[13],e[14]!==o||e[15]!==s||e[16]!==r){let v;e[18]!==o||e[19]!==r?(v=S=>h.jsxs("button",{className:Oe("p-3 rounded-md cursor-pointer hover:bg-accent",S.id===o&&"bg-accent"),onClick:()=>{r(S.id)},children:[h.jsx("div",{className:"font-medium",children:S.title}),h.jsx("div",{className:"text-sm text-muted-foreground",children:LV(S.updatedAt)})]},S.id),e[18]=o,e[19]=r,e[20]=v):v=e[20],p=s.map(v),e[14]=o,e[15]=s,e[16]=r,e[17]=p}else p=e[17];return e[21]!==g||e[22]!==p?(b=h.jsxs(zr,{children:[_,h.jsx(Gs,{className:"w-[520px] p-0",align:"start",side:"right",children:h.jsx(ow,{className:"h-[500px] p-4",children:h.jsxs("div",{className:"space-y-4",children:[g,p]})})})]}),e[21]=g,e[22]=p,e[23]=b):b=e[23],e[24]!==m||e[25]!==b?(y=h.jsxs("div",{className:"flex border-b px-2 py-1 justify-between flex-shrink-0 items-center",children:[m,b]}),e[24]=m,e[25]=b,e[26]=y):y=e[26],y},bv=A.memo(t=>{var f;const e=X.c(15),{message:n,index:o,theme:r,onEdit:s,isStreamingReasoning:i,totalMessages:a}=t,l=n.role==="user"?"justify-end":"justify-start";let c,d,u;return e[0]!==l?(c=Oe("flex group relative",l),e[0]=l,e[1]=c):c=e[1],e[2]!==o||e[3]!==i||e[4]!==n.content||e[5]!==n.id||e[6]!==n.parts||e[7]!==n.role||e[8]!==s||e[9]!==r||e[10]!==a?(d=n.role==="user"?h.jsx("div",{className:"w-[95%] bg-background border p-1 rounded-sm",children:h.jsx(Bc,{value:n.content,theme:r,placeholder:"Type your message...",onChange:HD,onSubmit:(m,_)=>{_.trim()&&s(o,_)},onClose:$D},n.id)}):h.jsxs("div",{className:"w-[95%]",children:[h.jsx("div",{className:"absolute right-1 top-1 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx(nS,{className:"h-3 w-3",value:n.content})}),(f=n.parts)==null?void 0:f.map((m,_)=>{switch(m.type){case"text":return h.jsx(Mh,{content:m.text},_);case"reasoning":return h.jsx(zD,{reasoning:m.reasoning,index:_,isStreaming:o===a-1&&i},_);default:return null}})]}),e[2]=o,e[3]=i,e[4]=n.content,e[5]=n.id,e[6]=n.parts,e[7]=n.role,e[8]=s,e[9]=r,e[10]=a,e[11]=d):d=e[11],e[12]!==c||e[13]!==d?(u=h.jsx("div",{className:c,children:d}),e[12]=c,e[13]=d,e[14]=u):u=e[14],u});bv.displayName="ChatMessage";const yv=A.memo(t=>{var c,d;const e=X.c(8),{input:n,setInput:o,onSubmit:r,theme:s,inputRef:i}=t;let a,l;return e[0]!==((c=i.current)==null?void 0:c.editor)?(a=()=>{var u,f;return(f=(u=i.current)==null?void 0:u.editor)==null?void 0:f.blur()},e[0]=(d=i.current)==null?void 0:d.editor,e[1]=a):a=e[1],e[2]!==n||e[3]!==r||e[4]!==o||e[5]!==a||e[6]!==s?(l=h.jsx("div",{className:"px-2 py-3 border-t relative flex-shrink-0 min-h-[80px]",children:h.jsx(Bc,{value:n,onChange:o,onSubmit:r,onClose:a,theme:s,placeholder:"Type your message..."})}),e[2]=n,e[3]=r,e[4]=o,e[5]=a,e[6]=s,e[7]=l):l=e[7],l});yv.displayName="ChatInput";const UD=()=>{const t=X.c(6),e=$e(pc),{handleClick:n}=Ca();if(!e){let r,s,i;return t[0]!==n?(r=h.jsx(Pe,{variant:"outline",size:"sm",onClick:()=>n("ai"),children:"Edit AI settings"}),t[0]=n,t[1]=r):r=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsx(hc,{}),t[2]=s):s=t[2],t[3]!==r?(i=h.jsx(On,{title:"Chat with AI",description:"AI is currently disabled. Add your API key to enable.",action:r,icon:s}),t[3]=r,t[4]=i):i=t[4],i}let o;return t[5]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(VD,{}),t[5]=o):o=t[5],o},VD=()=>{const t=X.c(88),[e,n]=fn(ud),[o,r]=fn(tC),[s,i]=A.useState(""),a=A.useRef(null),l=A.useRef(null),c=A.useRef(null),d=A.useRef(null),{theme:u}=Fo(),f=Hm(),m=o==null?void 0:o.id;let _,g,p,b,y,x;t[0]!==o?(g=o?o.messages.map(WD):[],t[0]=o,t[1]=g):g=t[1],_=g,t[2]!==f?(p=f.getAiURL("chat").toString(),t[2]=f,t[3]=p):p=t[3],t[4]!==f?(b=f.headers(),t[4]=f,t[5]=b):b=t[5],t[6]!==n?(y=ze=>{n(Ce=>Fl(Ce,Ce.activeChatId,"assistant",ze.content,ze.parts))},t[6]=n,t[7]=y):y=t[7],t[8]!==m||t[9]!==_||t[10]!==p||t[11]!==b||t[12]!==y?(x={id:m,initialMessages:_,keepLastMessageOnError:!0,experimental_throttle:100,api:p,headers:b,experimental_prepareRequestBody:GD,onFinish:y,onError:YD,onResponse:JD},t[8]=m,t[9]=_,t[10]=p,t[11]=b,t[12]=y,t[13]=x):x=t[13];const{messages:v,input:S,setInput:k,setMessages:E,append:j,handleSubmit:I,error:T,status:M,reload:L,stop:B}=DV(x),O=M==="submitted"||M==="streaming",z=KD,F=O&&v.length>0&&z(v);let V,R,C;t[14]===Symbol.for("react.memo_cache_sentinel")?(V=()=>{requestAnimationFrame(()=>{if(c.current){const ze=c.current;ze.scrollTop=ze.scrollHeight}})},t[14]=V):V=t[14],t[15]!==e.activeChatId?(R=[e.activeChatId],t[15]=e.activeChatId,t[16]=R):R=t[16],A.useEffect(V,R),t[17]!==j||t[18]!==n||t[19]!==k?(C=ze=>{const Ce={id:RV(),title:`${ze.slice(0,30)}...`,messages:[{role:"user",content:ze,timestamp:Date.now()}],createdAt:Date.now(),updatedAt:Date.now()};n(qe=>({chats:[...qe.chats,Ce],activeChatId:Ce.id})),k(""),j({role:"user",content:ze})},t[17]=j,t[18]=n,t[19]=k,t[20]=C):C=t[20];const H=C;let N;t[21]!==r||t[22]!==k?(N=()=>{r(null),k(""),i("")},t[21]=r,t[22]=k,t[23]=N):N=t[23];const $=N;let Y;t[24]!==j||t[25]!==e.activeChatId||t[26]!==n||t[27]!==E?(Y=(ze,Ce)=>{E(qe=>qe.slice(0,ze)),e.activeChatId&&n(qe=>({...qe,chats:qe.chats.map(Ze=>Ze.id===e.activeChatId?{...Ze,messages:Ze.messages.slice(0,ze),updatedAt:Date.now()}:Ze)})),j({role:"user",content:Ce}),e.activeChatId&&n(qe=>Fl(qe,e.activeChatId,"user",Ce))},t[24]=j,t[25]=e.activeChatId,t[26]=n,t[27]=E,t[28]=Y):Y=t[28];const Z=Y;let q;t[29]!==e.activeChatId||t[30]!==I||t[31]!==n?(q=(ze,Ce)=>{Ce.trim()&&(I(ze),e.activeChatId&&n(qe=>Fl(qe,e.activeChatId,"user",Ce)))},t[29]=e.activeChatId,t[30]=I,t[31]=n,t[32]=q):q=t[32];const re=q;let ne;t[33]!==L?(ne=()=>{L()},t[33]=L,t[34]=ne):ne=t[34];const oe=ne;let G;t[35]!==H||t[36]!==s?(G=()=>{s.trim()&&H(s.trim())},t[35]=H,t[36]=s,t[37]=G):G=t[37];const Q=G;let ce;t[38]===Symbol.for("react.memo_cache_sentinel")?(ce=()=>{var ze,Ce;return(Ce=(ze=a.current)==null?void 0:ze.editor)==null?void 0:Ce.blur()},t[38]=ce):ce=t[38];const me=ce,de=o==null?void 0:o.id;let ge,ie,we,ve,ae,Se,pe,Te,Re,We;if(t[39]!==e.chats||t[40]!==$||t[41]!==r||t[42]!==de?(ge=h.jsx(Gm,{children:h.jsx(BD,{onNewChat:$,activeChatId:de,setActiveChat:r,chats:e.chats})}),t[39]=e.chats,t[40]=$,t[41]=r,t[42]=de,t[43]=ge):ge=t[43],t[44]!==Q||t[45]!==v||t[46]!==s||t[47]!==u?(ie=(!v||v.length===0)&&h.jsx("div",{className:"flex rounded-md border px-1 bg-background",children:h.jsx(Bc,{value:s,placeholder:"Ask anything, @ to include context about tables or dataframes",theme:u,onClose:me,onChange:i,onSubmit:Q},"new-thread-input")}),t[44]=Q,t[45]=v,t[46]=s,t[47]=u,t[48]=ie):ie=t[48],t[49]!==e||t[50]!==Z||t[51]!==F||t[52]!==v||t[53]!==n||t[54]!==u){let ze;t[56]!==e||t[57]!==Z||t[58]!==F||t[59]!==v.length||t[60]!==n||t[61]!==u?(ze=(Ce,qe)=>h.jsx(bv,{message:Ce,index:qe,theme:u,onEdit:Z,setChatState:n,chatState:e,isStreamingReasoning:F,totalMessages:v.length},qe),t[56]=e,t[57]=Z,t[58]=F,t[59]=v.length,t[60]=n,t[61]=u,t[62]=ze):ze=t[62],we=v.map(ze),t[49]=e,t[50]=Z,t[51]=F,t[52]=v,t[53]=n,t[54]=u,t[55]=we}else we=t[55];return t[63]!==O?(ve=O&&h.jsx("div",{className:"flex justify-center py-4",children:h.jsx($m,{className:"h-4 w-4 animate-spin"})}),t[63]=O,t[64]=ve):ve=t[64],t[65]!==T||t[66]!==oe?(ae=T&&h.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[h.jsx(ni,{error:T}),h.jsx(Pe,{variant:"outline",size:"sm",onClick:oe,children:"Retry"})]}),t[65]=T,t[66]=oe,t[67]=ae):ae=t[67],t[68]===Symbol.for("react.memo_cache_sentinel")?(Se=h.jsx("div",{ref:d}),t[68]=Se):Se=t[68],t[69]!==ie||t[70]!==we||t[71]!==ve||t[72]!==ae?(pe=h.jsxs("div",{className:"flex-1 px-3 bg-[var(--slate-1)] gap-4 py-3 flex flex-col overflow-y-auto",ref:c,children:[ie,we,ve,ae,Se]}),t[69]=ie,t[70]=we,t[71]=ve,t[72]=ae,t[73]=pe):pe=t[73],t[74]!==O||t[75]!==B?(Te=O&&h.jsx("div",{className:"w-full flex justify-center items-center z-20 border-t",children:h.jsx(Pe,{variant:"linkDestructive",size:"sm",onClick:B,children:"Stop"})}),t[74]=O,t[75]=B,t[76]=Te):Te=t[76],t[77]!==re||t[78]!==S||t[79]!==v||t[80]!==k||t[81]!==u?(Re=v&&v.length>0&&h.jsx(yv,{input:S,setInput:k,onSubmit:re,theme:u,inputRef:l}),t[77]=re,t[78]=S,t[79]=v,t[80]=k,t[81]=u,t[82]=Re):Re=t[82],t[83]!==ge||t[84]!==pe||t[85]!==Te||t[86]!==Re?(We=h.jsxs("div",{className:"flex flex-col h-[calc(100%-53px)]",children:[ge,pe,Te,Re]}),t[83]=ge,t[84]=pe,t[85]=Te,t[86]=Re,t[87]=We):We=t[87],We};function HD(){}function $D(){}function WD(t){const{role:e,content:n,timestamp:o,parts:r}=t;return{role:e,content:n,id:o.toString(),parts:r}}function qD(t){return t.content}function GD(t){return{...t,...F4({input:t.messages.map(qD).join(`
`)}),includeOtherCode:Dc("")}}function YD(t){Qt.error("An error occurred:",t)}function JD(t){Qt.debug("Received HTTP response from server:",t)}function KD(t){if(t.length===0)return!1;const e=t.at(-1);if(!e||e.role!=="assistant"||!e.parts)return!1;const n=e.parts;return n.length===0?!1:n[n.length-1].type==="reasoning"}function un(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n,o=0;o<t.length;o++)(n=un(t[o]))!==""&&(e+=(e&&" ")+n);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}const{useDebugValue:XD}=K,{useSyncExternalStoreWithSelector:ZD}=FV,QD=t=>t;function xv(t,e=QD,n){const o=ZD(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return XD(o),o}const wv=(t,e)=>{const n=zV(t),o=(r,s=e)=>xv(n,r,s);return Object.assign(o,n),o};function on(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[o,r]of t)if(!Object.is(r,e.get(o)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const o of t)if(!e.has(o))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(e,o)||!Object.is(t[o],e[o]))return!1;return!0}function fo(t,e){if(t=function(s){let i;for(;i=s.sourceEvent;)s=i;return s}(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,[(o=o.matrixTransform(e.getScreenCTM().inverse())).x,o.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const eR={passive:!1},Wi={capture:!0,passive:!1};function Oh(t){t.stopImmediatePropagation()}function fs(t){t.preventDefault(),t.stopImmediatePropagation()}function vv(t){var e=t.document.documentElement,n=oo(t).on("dragstart.drag",fs,Wi);"onselectstart"in e?n.on("selectstart.drag",fs,Wi):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function kv(t,e){var n=t.document.documentElement,o=oo(t).on("dragstart.drag",null);e&&(o.on("click.drag",fs,Wi),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Gl=t=>()=>t;function Dh(t,{sourceEvent:e,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function tR(t){return!t.ctrlKey&&!t.button}function nR(){return this.parentNode}function oR(t,e){return e??{x:t.x,y:t.y}}function rR(){return navigator.maxTouchPoints||"ontouchstart"in this}Dh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};const Yl=t=>()=>t;function sR(t,{sourceEvent:e,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Rh(t){t.stopImmediatePropagation()}function qi(t){t.preventDefault(),t.stopImmediatePropagation()}function iR(t){return!(t.ctrlKey&&t.type!=="wheel"||t.button)}function aR(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Sv(){return this.__zoom||yr}function lR(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function cR(){return navigator.maxTouchPoints||"ontouchstart"in this}function dR(t,e,n){var o=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}const Jl=A.createContext(null),uR=Jl.Provider,hR=t=>`Node type "${t}" not found. Using fallback type "default".`,fR=()=>"The React Flow parent container needs a width and a height to render the graph.",mR=()=>"Only child nodes can use a parent extent.",pR=t=>`Marker type "${t}" doesn't exist.`,gR=(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,_R=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",bR=t=>`Edge type "${t}" not found. Using fallback type "default".`,yR=t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,Cv="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function pt(t,e){const n=A.useContext(Jl);if(n===null)throw new Error(Cv);return xv(n,t,e)}const qt=()=>{const t=A.useContext(Jl);if(t===null)throw new Error(Cv);return A.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},xR=t=>t.userSelectionActive?"none":"all";function Kl({position:t,children:e,className:n,style:o,...r}){const s=pt(xR),i=`${t}`.split("-");return K.createElement("div",{className:un(["react-flow__panel",n,...i]),style:{...o,pointerEvents:s},...r},e)}function wR({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:K.createElement(Kl,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},K.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var vR=A.memo(({x:t,y:e,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:l,className:c,...d})=>{const u=A.useRef(null),[f,m]=A.useState({x:0,y:0,width:0,height:0}),_=un(["react-flow__edge-textwrapper",c]);return A.useEffect(()=>{if(u.current){const g=u.current.getBBox();m({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),n!==void 0&&n?K.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:_,visibility:f.width?"visible":"hidden",...d},r&&K.createElement("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),K.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:u,style:o},n),l):null});const Ph=t=>({width:t.offsetWidth,height:t.offsetHeight}),ms=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Lh=(t={x:0,y:0},e)=>({x:ms(t.x,e[0][0],e[1][0]),y:ms(t.y,e[0][1],e[1][1])}),Nv=(t,e,n)=>t<e?ms(Math.abs(t-e),1,50)/50:t>n?-ms(Math.abs(t-n),1,50)/50:0,jv=(t,e)=>[20*Nv(t.x,35,e.width-35),20*Nv(t.y,35,e.height-35)],Ev=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Fh=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),Iv=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),zh=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},Vn=t=>!isNaN(t)&&isFinite(t),jt=Symbol.for("internals"),Av=["Enter"," ","Escape"];function Bh(t){var o,r;const e=(s=>"nativeEvent"in s)(t)?t.nativeEvent:t,n=((r=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:r[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Tv=t=>"clientX"in t,tr=(t,e)=>{var s,i;const n=Tv(t),o=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,r=n?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:o-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},Xl=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Gi=({id:t,path:e,labelX:n,labelY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:f,interactionWidth:m=20})=>K.createElement(K.Fragment,null,K.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:f}),m&&K.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),r&&Vn(n)&&Vn(o)?K.createElement(vR,{x:n,y:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c}):null);function Yi(t,e,n){return n===void 0?n:o=>{const r=e().edges.find(s=>s.id===t);r&&n(o,{...r})}}function Mv({sourceX:t,sourceY:e,targetX:n,targetY:o}){const r=Math.abs(n-t)/2,s=n<t?n+r:n-r,i=Math.abs(o-e)/2;return[s,o<e?o+i:o-i,r,i]}function Ov({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const l=.125*t+.375*r+.375*i+.125*n,c=.125*e+.375*s+.375*a+.125*o;return[l,c,Math.abs(l-t),Math.abs(c-e)]}var Or,Dv,nr,Uh,Ji,Rv,or,Ki,ps,Pv,He,Zl;function Lv({pos:t,x1:e,y1:n,x2:o,y2:r}){return t===He.Left||t===He.Right?[.5*(e+o),n]:[e,.5*(n+r)]}function Fv({sourceX:t,sourceY:e,sourcePosition:n=He.Bottom,targetX:o,targetY:r,targetPosition:s=He.Top}){const[i,a]=Lv({pos:n,x1:t,y1:e,x2:o,y2:r}),[l,c]=Lv({pos:s,x1:o,y1:r,x2:t,y2:e}),[d,u,f,m]=Ov({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${t},${e} C${i},${a} ${l},${c} ${o},${r}`,d,u,f,m]}Gi.displayName="BaseEdge",(Dv=Or||(Or={})).Strict="strict",Dv.Loose="loose",(Uh=nr||(nr={})).Free="free",Uh.Vertical="vertical",Uh.Horizontal="horizontal",(Rv=Ji||(Ji={})).Partial="partial",Rv.Full="full",(Ki=or||(or={})).Bezier="default",Ki.Straight="straight",Ki.Step="step",Ki.SmoothStep="smoothstep",Ki.SimpleBezier="simplebezier",(Pv=ps||(ps={})).Arrow="arrow",Pv.ArrowClosed="arrowclosed",(Zl=He||(He={})).Left="left",Zl.Top="top",Zl.Right="right",Zl.Bottom="bottom";const Vh=A.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=He.Bottom,targetPosition:s=He.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:_,interactionWidth:g})=>{const[p,b,y]=Fv({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:s});return K.createElement(Gi,{path:p,labelX:b,labelY:y,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:_,interactionWidth:g})});Vh.displayName="SimpleBezierEdge";const zv={[He.Left]:{x:-1,y:0},[He.Right]:{x:1,y:0},[He.Top]:{x:0,y:-1},[He.Bottom]:{x:0,y:1}},Bv=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function kR({source:t,sourcePosition:e=He.Bottom,target:n,targetPosition:o=He.Top,center:r,offset:s}){const i=zv[e],a=zv[o],l={x:t.x+i.x*s,y:t.y+i.y*s},c={x:n.x+a.x*s,y:n.y+a.y*s},d=(({source:k,sourcePosition:E=He.Bottom,target:j})=>E===He.Left||E===He.Right?k.x<j.x?{x:1,y:0}:{x:-1,y:0}:k.y<j.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:e,target:c}),u=d.x!==0?"x":"y",f=d[u];let m,_,g=[];const p={x:0,y:0},b={x:0,y:0},[y,x,v,S]=Mv({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(i[u]*a[u]===-1){m=r.x??y,_=r.y??x;const k=[{x:m,y:l.y},{x:m,y:c.y}],E=[{x:l.x,y:_},{x:c.x,y:_}];g=i[u]===f?u==="x"?k:E:u==="x"?E:k}else{const k=[{x:l.x,y:c.y}],E=[{x:c.x,y:l.y}];if(g=u==="x"?i.x===f?E:k:i.y===f?k:E,e===o){const T=Math.abs(t[u]-n[u]);if(T<=s){const M=Math.min(s-1,s-T);i[u]===f?p[u]=(l[u]>t[u]?-1:1)*M:b[u]=(c[u]>n[u]?-1:1)*M}}if(e!==o){const T=u==="x"?"y":"x",M=i[u]===a[T],L=l[T]>c[T],B=l[T]<c[T];(i[u]===1&&(!M&&L||M&&B)||i[u]!==1&&(!M&&B||M&&L))&&(g=u==="x"?k:E)}const j={x:l.x+p.x,y:l.y+p.y},I={x:c.x+b.x,y:c.y+b.y};Math.max(Math.abs(j.x-g[0].x),Math.abs(I.x-g[0].x))>=Math.max(Math.abs(j.y-g[0].y),Math.abs(I.y-g[0].y))?(m=(j.x+I.x)/2,_=g[0].y):(m=g[0].x,_=(j.y+I.y)/2)}return[[t,{x:l.x+p.x,y:l.y+p.y},...g,{x:c.x+b.x,y:c.y+b.y},n],m,_,v,S]}function Hh({sourceX:t,sourceY:e,sourcePosition:n=He.Bottom,targetX:o,targetY:r,targetPosition:s=He.Top,borderRadius:i=5,centerX:a,centerY:l,offset:c=20}){const[d,u,f,m,_]=kR({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:l},offset:c});return[d.reduce((g,p,b)=>{let y="";return y=b>0&&b<d.length-1?function(x,v,S,k){const E=Math.min(Bv(x,v)/2,Bv(v,S)/2,k),{x:j,y:I}=v;if(x.x===j&&j===S.x||x.y===I&&I===S.y)return`L${j} ${I}`;if(x.y===I)return`L ${j+E*(x.x<S.x?-1:1)},${I}Q ${j},${I} ${j},${I+E*(x.y<S.y?1:-1)}`;const T=x.x<S.x?1:-1;return`L ${j},${I+E*(x.y<S.y?-1:1)}Q ${j},${I} ${j+E*T},${I}`}(d[b-1],p,d[b+1],i):`${b===0?"M":"L"}${p.x} ${p.y}`,g+=y},""),u,f,m,_]}const Ql=A.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,sourcePosition:u=He.Bottom,targetPosition:f=He.Top,markerEnd:m,markerStart:_,pathOptions:g,interactionWidth:p})=>{const[b,y,x]=Hh({sourceX:t,sourceY:e,sourcePosition:u,targetX:n,targetY:o,targetPosition:f,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return K.createElement(Gi,{path:b,labelX:y,labelY:x,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:m,markerStart:_,interactionWidth:p})});Ql.displayName="SmoothStepEdge";const $h=A.memo(t=>{var e;return K.createElement(Ql,{...t,pathOptions:A.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});$h.displayName="StepEdge";const Wh=A.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:f,interactionWidth:m})=>{const[_,g,p]=function({sourceX:b,sourceY:y,targetX:x,targetY:v}){const[S,k,E,j]=Mv({sourceX:b,sourceY:y,targetX:x,targetY:v});return[`M ${b},${y}L ${x},${v}`,S,k,E,j]}({sourceX:t,sourceY:e,targetX:n,targetY:o});return K.createElement(Gi,{path:_,labelX:g,labelY:p,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:f,interactionWidth:m})});function ec(t,e){return t>=0?.5*t:25*e*Math.sqrt(-t)}function Uv({pos:t,x1:e,y1:n,x2:o,y2:r,c:s}){switch(t){case He.Left:return[e-ec(e-o,s),n];case He.Right:return[e+ec(o-e,s),n];case He.Top:return[e,n-ec(n-r,s)];case He.Bottom:return[e,n+ec(r-n,s)]}}function Vv({sourceX:t,sourceY:e,sourcePosition:n=He.Bottom,targetX:o,targetY:r,targetPosition:s=He.Top,curvature:i=.25}){const[a,l]=Uv({pos:n,x1:t,y1:e,x2:o,y2:r,c:i}),[c,d]=Uv({pos:s,x1:o,y1:r,x2:t,y2:e,c:i}),[u,f,m,_]=Ov({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${t},${e} C${a},${l} ${c},${d} ${o},${r}`,u,f,m,_]}Wh.displayName="StraightEdge";const tc=A.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=He.Bottom,targetPosition:s=He.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:_,pathOptions:g,interactionWidth:p})=>{const[b,y,x]=Vv({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:s,curvature:g==null?void 0:g.curvature});return K.createElement(Gi,{path:b,labelX:y,labelY:x,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:_,interactionWidth:p})});tc.displayName="BezierEdge";const qh=A.createContext(null),SR=qh.Provider;qh.Consumer;const CR=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`reactflow__edge-${t}${e||""}-${n}${o||""}`,Gh=(t,e)=>t===void 0?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,Yh=({x:t,y:e},[n,o,r],s,[i,a])=>{const l={x:(t-n)/r,y:(e-o)/r};return s?{x:i*Math.round(l.x/i),y:a*Math.round(l.y/a)}:l},Hv=({x:t,y:e},[n,o,r])=>({x:t*r+n,y:e*r+o}),gs=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],o=(t.height??0)*e[1],r={x:t.position.x-n,y:t.position.y-o};return{...r,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-o}:r}},Jh=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,r)=>{const{x:s,y:i}=gs(r,e).positionAbsolute;return a=o,l=Fh({x:s,y:i,width:r.width||0,height:r.height||0}),{x:Math.min(a.x,l.x),y:Math.min(a.y,l.y),x2:Math.max(a.x2,l.x2),y2:Math.max(a.y2,l.y2)};var a,l},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return(({x:o,y:r,x2:s,y2:i})=>({x:o,y:r,width:s-o,height:i-r}))(n)},$v=(t,e,[n,o,r]=[0,0,1],s=!1,i=!1,a=[0,0])=>{const l={x:(e.x-n)/r,y:(e.y-o)/r,width:e.width/r,height:e.height/r},c=[];return t.forEach(d=>{const{width:u,height:f,selectable:m=!0,hidden:_=!1}=d;if(i&&!m||_)return!1;const{positionAbsolute:g}=gs(d,a),p={x:g.x,y:g.y,width:u||0,height:f||0},b=zh(l,p);(u===void 0||f===void 0||u===null||f===null||s&&b>0||b>=(u||0)*(f||0)||d.dragging)&&c.push(d)}),c},Wv=(t,e)=>{const n=t.map(o=>o.id);return e.filter(o=>n.includes(o.source)||n.includes(o.target))},qv=(t,e,n,o,r,s=.1)=>{const i=e/(t.width*(1+s)),a=n/(t.height*(1+s)),l=Math.min(i,a),c=ms(l,o,r);return{x:e/2-(t.x+t.width/2)*c,y:n/2-(t.y+t.height/2)*c,zoom:c}},Dr=(t,e=0)=>t.transition().duration(e);function Gv(t,e,n,o){return(e[n]||[]).reduce((r,s)=>{var i,a;return`${t.id}-${s.id}-${n}`!==o&&r.push({id:s.id||null,type:n,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),r},[])}const NR={source:null,target:null,sourceHandle:null,targetHandle:null},Yv=()=>({handleDomNode:null,isValid:!1,connection:NR,endHandle:null});function Jv(t,e,n,o,r,s,i){const a=r==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...Yv(),handleDomNode:l};if(l){const d=Kh(void 0,l),u=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),_=l.classList.contains("connectableend"),g={source:a?u:n,sourceHandle:a?f:o,target:a?n:u,targetHandle:a?o:f};c.connection=g,m&&_&&(e===Or.Strict?a&&d==="source"||!a&&d==="target":u!==n||f!==o)&&(c.endHandle={nodeId:u,handleId:f,type:d},c.isValid=s(g))}return c}function Kh(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Xh(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function jR(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function Kv({event:t,handleId:e,nodeId:n,onConnect:o,isTarget:r,getState:s,setState:i,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:c}){const d=Ev(t.target),{connectionMode:u,domNode:f,autoPanOnConnect:m,connectionRadius:_,onConnectStart:g,panBy:p,getNodes:b,cancelConnection:y}=s();let x,v=0;const{x:S,y:k}=tr(t),E=d==null?void 0:d.elementFromPoint(S,k),j=Kh(l,E),I=f==null?void 0:f.getBoundingClientRect();if(!I||!j)return;let T,M=tr(t,I),L=!1,B=null,O=!1,z=null;const F=function({nodes:H,nodeId:N,handleId:$,handleType:Y}){return H.reduce((Z,q)=>{if(q[jt]){const{handleBounds:re}=q[jt];let ne=[],oe=[];re&&(ne=Gv(q,re,"source",`${N}-${$}-${Y}`),oe=Gv(q,re,"target",`${N}-${$}-${Y}`)),Z.push(...ne,...oe)}return Z},[])}({nodes:b(),nodeId:n,handleId:e,handleType:j}),V=()=>{if(!m)return;const[H,N]=jv(M,I);p({x:H,y:N}),v=requestAnimationFrame(V)};function R(H){const{transform:N}=s();M=tr(H,I);const{handle:$,validHandleResult:Y}=function(Z,q,re,ne,oe,G){const{x:Q,y:ce}=tr(Z),me=q.elementsFromPoint(Q,ce).find(ve=>ve.classList.contains("react-flow__handle"));if(me){const ve=me.getAttribute("data-nodeid");if(ve){const ae=Kh(void 0,me),Se=me.getAttribute("data-handleid"),pe=G({nodeId:ve,id:Se,type:ae});if(pe){const Te=oe.find(Re=>Re.nodeId===ve&&Re.type===ae&&Re.id===Se);return{handle:{id:Se,type:ae,nodeId:ve,x:(Te==null?void 0:Te.x)||re.x,y:(Te==null?void 0:Te.y)||re.y},validHandleResult:pe}}}}let de=[],ge=1/0;if(oe.forEach(ve=>{const ae=Math.sqrt((ve.x-re.x)**2+(ve.y-re.y)**2);if(ae<=ne){const Se=G(ve);ae<=ge&&(ae<ge?de=[{handle:ve,validHandleResult:Se}]:ae===ge&&de.push({handle:ve,validHandleResult:Se}),ge=ae)}}),!de.length)return{handle:null,validHandleResult:Yv()};if(de.length===1)return de[0];const ie=de.some(({validHandleResult:ve})=>ve.isValid),we=de.some(({handle:ve})=>ve.type==="target");return de.find(({handle:ve,validHandleResult:ae})=>we?ve.type==="target":!ie||ae.isValid)||de[0]}(H,d,Yh(M,N,!1,[1,1]),_,F,Z=>Jv(Z,u,n,e,r?"target":"source",a,d));if(x=$,L||(V(),L=!0),z=Y.handleDomNode,B=Y.connection,O=Y.isValid,i({connectionPosition:x&&O?Hv({x:x.x,y:x.y},N):M,connectionStatus:jR(!!x,O),connectionEndHandle:Y.endHandle}),!x&&!O&&!z)return Xh(T);B.source!==B.target&&z&&(Xh(T),T=z,z.classList.add("connecting","react-flow__handle-connecting"),z.classList.toggle("valid",O),z.classList.toggle("react-flow__handle-valid",O))}function C(H){var N,$;(x||z)&&B&&O&&(o==null||o(B)),($=(N=s()).onConnectEnd)==null||$.call(N,H),l&&(c==null||c(H)),Xh(T),y(),cancelAnimationFrame(v),L=!1,O=!1,B=null,z=null,d.removeEventListener("mousemove",R),d.removeEventListener("mouseup",C),d.removeEventListener("touchmove",R),d.removeEventListener("touchend",C)}i({connectionPosition:M,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:j,connectionStartHandle:{nodeId:n,handleId:e,type:j},connectionEndHandle:null}),g==null||g(t,{nodeId:n,handleId:e,handleType:j}),d.addEventListener("mousemove",R),d.addEventListener("mouseup",C),d.addEventListener("touchmove",R),d.addEventListener("touchend",C)}const Xv=()=>!0,ER=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Zv=A.forwardRef(({type:t="source",position:e=He.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:l,className:c,onMouseDown:d,onTouchStart:u,...f},m)=>{var j,I;const _=i||null,g=t==="target",p=qt(),b=A.useContext(qh),{connectOnClick:y,noPanClassName:x}=pt(ER,on),{connecting:v,clickConnecting:S}=pt(((T,M,L)=>B=>{const{connectionStartHandle:O,connectionEndHandle:z,connectionClickStartHandle:F}=B;return{connecting:(O==null?void 0:O.nodeId)===T&&(O==null?void 0:O.handleId)===M&&(O==null?void 0:O.type)===L||(z==null?void 0:z.nodeId)===T&&(z==null?void 0:z.handleId)===M&&(z==null?void 0:z.type)===L,clickConnecting:(F==null?void 0:F.nodeId)===T&&(F==null?void 0:F.handleId)===M&&(F==null?void 0:F.type)===L}})(b,_,t),on);b||((I=(j=p.getState()).onError)==null||I.call(j,"010",_R()));const k=T=>{const{defaultEdgeOptions:M,onConnect:L,hasDefaultEdges:B}=p.getState(),O={...M,...T};if(B){const{edges:z,setEdges:F}=p.getState();F(((V,R)=>{if(!V.source||!V.target)return R;let C;return C=(H=>"id"in H&&"source"in H&&"target"in H)(V)?{...V}:{...V,id:CR(V)},((H,N)=>N.some($=>!($.source!==H.source||$.target!==H.target||$.sourceHandle!==H.sourceHandle&&($.sourceHandle||H.sourceHandle)||$.targetHandle!==H.targetHandle&&($.targetHandle||H.targetHandle))))(C,R)?R:R.concat(C)})(O,z))}L==null||L(O),a==null||a(O)},E=T=>{if(!b)return;const M=Tv(T);r&&(M&&T.button===0||!M)&&Kv({event:T,handleId:_,nodeId:b,onConnect:k,isTarget:g,getState:p.getState,setState:p.setState,isValidConnection:n||p.getState().isValidConnection||Xv}),M?d==null||d(T):u==null||u(T)};return K.createElement("div",{"data-handleid":_,"data-nodeid":b,"data-handlepos":e,"data-id":`${b}-${_}-${t}`,className:un(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",x,c,{source:!g,target:g,connectable:o,connectablestart:r,connectableend:s,connecting:S,connectionindicator:o&&(r&&!v||s&&v)}]),onMouseDown:E,onTouchStart:E,onClick:y?T=>{const{onClickConnectStart:M,onClickConnectEnd:L,connectionClickStartHandle:B,connectionMode:O,isValidConnection:z}=p.getState();if(!b||!B&&!r)return;if(!B)return M==null||M(T,{nodeId:b,handleId:_,handleType:t}),void p.setState({connectionClickStartHandle:{nodeId:b,type:t,handleId:_}});const F=Ev(T.target),V=n||z||Xv,{connection:R,isValid:C}=Jv({nodeId:b,id:_,type:t},O,B.nodeId,B.handleId||null,B.type,V,F);C&&k(R),L==null||L(T),p.setState({connectionClickStartHandle:null})}:void 0,ref:m,...f},l)});Zv.displayName="Handle";var rr=A.memo(Zv);const Qv=({data:t,isConnectable:e,targetPosition:n=He.Top,sourcePosition:o=He.Bottom})=>K.createElement(K.Fragment,null,K.createElement(rr,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,K.createElement(rr,{type:"source",position:o,isConnectable:e}));Qv.displayName="DefaultNode";var Zh=A.memo(Qv);const e2=({data:t,isConnectable:e,sourcePosition:n=He.Bottom})=>K.createElement(K.Fragment,null,t==null?void 0:t.label,K.createElement(rr,{type:"source",position:n,isConnectable:e}));e2.displayName="InputNode";var t2=A.memo(e2);const n2=({data:t,isConnectable:e,targetPosition:n=He.Top})=>K.createElement(K.Fragment,null,K.createElement(rr,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);n2.displayName="OutputNode";var o2=A.memo(n2);const Qh=()=>null;Qh.displayName="GroupNode";const IR=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),nc=t=>t.id;function AR(t,e){return on(t.selectedNodes.map(nc),e.selectedNodes.map(nc))&&on(t.selectedEdges.map(nc),e.selectedEdges.map(nc))}const r2=A.memo(({onSelectionChange:t})=>{const e=qt(),{selectedNodes:n,selectedEdges:o}=pt(IR,AR);return A.useEffect(()=>{const r={nodes:n,edges:o};t==null||t(r),e.getState().onSelectionChange.forEach(s=>s(r))},[n,o,t]),null});r2.displayName="SelectionListener";const TR=t=>!!t.onSelectionChange;function MR({onSelectionChange:t}){const e=pt(TR);return t||e?K.createElement(r2,{onSelectionChange:t}):null}const OR=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function _s(t,e){A.useEffect(()=>{t!==void 0&&e(t)},[t])}function it(t,e,n){A.useEffect(()=>{e!==void 0&&n({[t]:e})},[e])}const DR=({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:d,nodesFocusable:u,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:_,minZoom:g,maxZoom:p,nodeExtent:b,onNodesChange:y,onEdgesChange:x,elementsSelectable:v,connectionMode:S,snapGrid:k,snapToGrid:E,translateExtent:j,connectOnClick:I,defaultEdgeOptions:T,fitView:M,fitViewOptions:L,onNodesDelete:B,onEdgesDelete:O,onNodeDrag:z,onNodeDragStart:F,onNodeDragStop:V,onSelectionDrag:R,onSelectionDragStart:C,onSelectionDragStop:H,noPanClassName:N,nodeOrigin:$,rfId:Y,autoPanOnConnect:Z,autoPanOnNodeDrag:q,onError:re,connectionRadius:ne,isValidConnection:oe,nodeDragThreshold:G})=>{const{setNodes:Q,setEdges:ce,setDefaultNodesAndEdges:me,setMinZoom:de,setMaxZoom:ge,setTranslateExtent:ie,setNodeExtent:we,reset:ve}=pt(OR,on),ae=qt();return A.useEffect(()=>{const Se=o==null?void 0:o.map(pe=>({...pe,...T}));return me(n,Se),()=>{ve()}},[]),it("defaultEdgeOptions",T,ae.setState),it("connectionMode",S,ae.setState),it("onConnect",r,ae.setState),it("onConnectStart",s,ae.setState),it("onConnectEnd",i,ae.setState),it("onClickConnectStart",a,ae.setState),it("onClickConnectEnd",l,ae.setState),it("nodesDraggable",c,ae.setState),it("nodesConnectable",d,ae.setState),it("nodesFocusable",u,ae.setState),it("edgesFocusable",f,ae.setState),it("edgesUpdatable",m,ae.setState),it("elementsSelectable",v,ae.setState),it("elevateNodesOnSelect",_,ae.setState),it("snapToGrid",E,ae.setState),it("snapGrid",k,ae.setState),it("onNodesChange",y,ae.setState),it("onEdgesChange",x,ae.setState),it("connectOnClick",I,ae.setState),it("fitViewOnInit",M,ae.setState),it("fitViewOnInitOptions",L,ae.setState),it("onNodesDelete",B,ae.setState),it("onEdgesDelete",O,ae.setState),it("onNodeDrag",z,ae.setState),it("onNodeDragStart",F,ae.setState),it("onNodeDragStop",V,ae.setState),it("onSelectionDrag",R,ae.setState),it("onSelectionDragStart",C,ae.setState),it("onSelectionDragStop",H,ae.setState),it("noPanClassName",N,ae.setState),it("nodeOrigin",$,ae.setState),it("rfId",Y,ae.setState),it("autoPanOnConnect",Z,ae.setState),it("autoPanOnNodeDrag",q,ae.setState),it("onError",re,ae.setState),it("connectionRadius",ne,ae.setState),it("isValidConnection",oe,ae.setState),it("nodeDragThreshold",G,ae.setState),_s(t,Q),_s(e,ce),_s(g,de),_s(p,ge),_s(j,ie),_s(b,we),null},s2={display:"none"},RR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},i2="react-flow__node-desc",a2="react-flow__edge-desc",PR=t=>t.ariaLiveMessage;function LR({rfId:t}){const e=pt(PR);return K.createElement("div",{id:`react-flow__aria-live-${t}`,"aria-live":"assertive","aria-atomic":"true",style:RR},e)}function FR({rfId:t,disableKeyboardA11y:e}){return K.createElement(K.Fragment,null,K.createElement("div",{id:`${i2}-${t}`,style:s2},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),K.createElement("div",{id:`${a2}-${t}`,style:s2},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&K.createElement(LR,{rfId:t}))}var Xi=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,o]=A.useState(!1),r=A.useRef(!1),s=A.useRef(new Set([])),[i,a]=A.useMemo(()=>{if(t!==null){const l=(Array.isArray(t)?t:[t]).filter(d=>typeof d=="string").map(d=>d.split("+")),c=l.reduce((d,u)=>d.concat(...u),[]);return[l,c]}return[[],[]]},[t]);return A.useEffect(()=>{const l=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||l;if(t!==null){const d=m=>{if(r.current=m.ctrlKey||m.metaKey||m.shiftKey,(!r.current||r.current&&!e.actInsideInputWithModifier)&&Bh(m))return!1;const _=c2(m.code,a);s.current.add(m[_]),l2(i,s.current,!1)&&(m.preventDefault(),o(!0))},u=m=>{if((!r.current||r.current&&!e.actInsideInputWithModifier)&&Bh(m))return!1;const _=c2(m.code,a);l2(i,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(m[_]),m.key==="Meta"&&s.current.clear(),r.current=!1},f=()=>{s.current.clear(),o(!1)};return c==null||c.addEventListener("keydown",d),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",f),()=>{c==null||c.removeEventListener("keydown",d),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",f)}}},[t,o]),n};function l2(t,e,n){return t.filter(o=>n||o.length===e.size).some(o=>o.every(r=>e.has(r)))}function c2(t,e){return e.includes(t)?"code":"key"}function d2(t,e,n,o){var a,l;const r=t.parentNode||t.parentId;if(!r)return n;const s=e.get(r),i=gs(s,o);return d2(s,e,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((a=s[jt])==null?void 0:a.z)??0)>(n.z??0)?((l=s[jt])==null?void 0:l.z)??0:n.z??0},o)}function u2(t,e,n){t.forEach(o=>{var s;const r=o.parentNode||o.parentId;if(r&&!t.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[o.id]){const{x:i,y:a,z:l}=d2(o,t,{...o.position,z:((s=o[jt])==null?void 0:s.z)??0},e);o.positionAbsolute={x:i,y:a},o[jt].z=l,n!=null&&n[o.id]&&(o[jt].isParent=!0)}})}function ef(t,e,n,o){const r=new Map,s={},i=o?1e3:0;return t.forEach(a=>{var m;const l=(Vn(a.zIndex)?a.zIndex:0)+(a.selected?i:0),c=e.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},u=a.parentNode||a.parentId;u&&(s[u]=!0);const f=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==a.type;Object.defineProperty(d,jt,{enumerable:!1,value:{handleBounds:f||(m=c==null?void 0:c[jt])==null?void 0:m.handleBounds,z:l}}),r.set(a.id,d)}),u2(r,n,s),r}function h2(t,e={}){const{getNodes:n,width:o,height:r,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:u}=t(),f=e.initial&&!c&&d;if(a&&l&&(f||!e.initial)){const m=n().filter(g=>{var b;const p=e.includeHiddenNodes?g.width&&g.height:!g.hidden;return(b=e.nodes)!=null&&b.length?p&&e.nodes.some(y=>y.id===g.id):p}),_=m.every(g=>g.width&&g.height);if(m.length>0&&_){const g=Jh(m,u),{x:p,y:b,zoom:y}=qv(g,o,r,e.minZoom??s,e.maxZoom??i,e.padding??.1),x=yr.translate(p,b).scale(y);return typeof e.duration=="number"&&e.duration>0?a.transform(Dr(l,e.duration),x):a.transform(l,x),!0}}return!1}function zR(t,e){return t.forEach(n=>{const o=e.get(n.id);o&&e.set(o.id,{...o,[jt]:o[jt],selected:n.selected})}),new Map(e)}function BR(t,e){return e.map(n=>{const o=t.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function oc({changedNodes:t,changedEdges:e,get:n,set:o}){const{nodeInternals:r,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:c}=n();t!=null&&t.length&&(l&&o({nodeInternals:zR(t,r)}),i==null||i(t)),e!=null&&e.length&&(c&&o({edges:BR(e,s)}),a==null||a(e))}const bs=()=>{},UR={zoomIn:bs,zoomOut:bs,zoomTo:bs,getZoom:()=>1,setViewport:bs,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:bs,fitBounds:bs,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},VR=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection});function Zi(){const t=(()=>{const g=qt(),{d3Zoom:p,d3Selection:b}=pt(VR,on);return A.useMemo(()=>b&&p?{zoomIn:x=>p.scaleBy(Dr(b,x==null?void 0:x.duration),1.2),zoomOut:x=>p.scaleBy(Dr(b,x==null?void 0:x.duration),1/1.2),zoomTo:(x,v)=>p.scaleTo(Dr(b,v==null?void 0:v.duration),x),getZoom:()=>g.getState().transform[2],setViewport:(x,v)=>{const[S,k,E]=g.getState().transform,j=yr.translate(x.x??S,x.y??k).scale(x.zoom??E);p.transform(Dr(b,v==null?void 0:v.duration),j)},getViewport:()=>{const[x,v,S]=g.getState().transform;return{x,y:v,zoom:S}},fitView:x=>h2(g.getState,x),setCenter:(x,v,S)=>{const{width:k,height:E,maxZoom:j}=g.getState(),I=(S==null?void 0:S.zoom)!==void 0?S.zoom:j,T=k/2-x*I,M=E/2-v*I,L=yr.translate(T,M).scale(I);p.transform(Dr(b,S==null?void 0:S.duration),L)},fitBounds:(x,v)=>{const{width:S,height:k,minZoom:E,maxZoom:j}=g.getState(),{x:I,y:T,zoom:M}=qv(x,S,k,E,j,(v==null?void 0:v.padding)??.1),L=yr.translate(I,T).scale(M);p.transform(Dr(b,v==null?void 0:v.duration),L)},project:x=>{const{transform:v,snapToGrid:S,snapGrid:k}=g.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Yh(x,v,S,k)},screenToFlowPosition:x=>{const{transform:v,snapToGrid:S,snapGrid:k,domNode:E}=g.getState();if(!E)return x;const{x:j,y:I}=E.getBoundingClientRect(),T={x:x.x-j,y:x.y-I};return Yh(T,v,S,k)},flowToScreenPosition:x=>{const{transform:v,domNode:S}=g.getState();if(!S)return x;const{x:k,y:E}=S.getBoundingClientRect(),j=Hv(x,v);return{x:j.x+k,y:j.y+E}},viewportInitialized:!0}:UR,[p,b])})(),e=qt(),n=A.useCallback(()=>e.getState().getNodes().map(g=>({...g})),[]),o=A.useCallback(g=>e.getState().nodeInternals.get(g),[]),r=A.useCallback(()=>{const{edges:g=[]}=e.getState();return g.map(p=>({...p}))},[]),s=A.useCallback(g=>{const{edges:p=[]}=e.getState();return p.find(b=>b.id===g)},[]),i=A.useCallback(g=>{const{getNodes:p,setNodes:b,hasDefaultNodes:y,onNodesChange:x}=e.getState(),v=p(),S=typeof g=="function"?g(v):g;if(y)b(S);else if(x){const k=S.length===0?v.map(E=>({type:"remove",id:E.id})):S.map(E=>({item:E,type:"reset"}));x(k)}},[]),a=A.useCallback(g=>{const{edges:p=[],setEdges:b,hasDefaultEdges:y,onEdgesChange:x}=e.getState(),v=typeof g=="function"?g(p):g;y?b(v):x&&x(v.length===0?p.map(S=>({type:"remove",id:S.id})):v.map(S=>({item:S,type:"reset"})))},[]),l=A.useCallback(g=>{const p=Array.isArray(g)?g:[g],{getNodes:b,setNodes:y,hasDefaultNodes:x,onNodesChange:v}=e.getState();if(x)y([...b(),...p]);else if(v){const S=p.map(k=>({item:k,type:"add"}));v(S)}},[]),c=A.useCallback(g=>{const p=Array.isArray(g)?g:[g],{edges:b=[],setEdges:y,hasDefaultEdges:x,onEdgesChange:v}=e.getState();x?y([...b,...p]):v&&v(p.map(S=>({item:S,type:"add"})))},[]),d=A.useCallback(()=>{const{getNodes:g,edges:p=[],transform:b}=e.getState(),[y,x,v]=b;return{nodes:g().map(S=>({...S})),edges:p.map(S=>({...S})),viewport:{x:y,y:x,zoom:v}}},[]),u=A.useCallback(({nodes:g,edges:p})=>{const{nodeInternals:b,getNodes:y,edges:x,hasDefaultNodes:v,hasDefaultEdges:S,onNodesDelete:k,onEdgesDelete:E,onNodesChange:j,onEdgesChange:I}=e.getState(),T=(g||[]).map(z=>z.id),M=(p||[]).map(z=>z.id),L=y().reduce((z,F)=>{const V=F.parentNode||F.parentId,R=!T.includes(F.id)&&V&&z.find(C=>C.id===V);return(typeof F.deletable!="boolean"||F.deletable)&&(T.includes(F.id)||R)&&z.push(F),z},[]),B=x.filter(z=>typeof z.deletable!="boolean"||z.deletable),O=B.filter(z=>M.includes(z.id));if(L||O){const z=Wv(L,B),F=[...O,...z],V=F.reduce((R,C)=>(R.includes(C.id)||R.push(C.id),R),[]);(S||v)&&(S&&e.setState({edges:x.filter(R=>!V.includes(R.id))}),v&&(L.forEach(R=>{b.delete(R.id)}),e.setState({nodeInternals:new Map(b)}))),V.length>0&&(E==null||E(F),I&&I(V.map(R=>({id:R,type:"remove"})))),L.length>0&&(k==null||k(L),j)&&j(L.map(R=>({id:R.id,type:"remove"})))}},[]),f=A.useCallback(g=>{const p=Vn((b=g).width)&&Vn(b.height)&&Vn(b.x)&&Vn(b.y);var b;const y=p?null:e.getState().nodeInternals.get(g.id);return!p&&!y?[null,null,p]:[p?g:Iv(y),y,p]},[]),m=A.useCallback((g,p=!0,b)=>{const[y,x,v]=f(g);return y?(b||e.getState().getNodes()).filter(S=>{if(!(v||S.id!==x.id&&S.positionAbsolute))return!1;const k=Iv(S),E=zh(k,y);return p&&E>0||E>=y.width*y.height}):[]},[]),_=A.useCallback((g,p,b=!0)=>{const[y]=f(g);if(!y)return!1;const x=zh(y,p);return b&&x>0||x>=y.width*y.height},[]);return A.useMemo(()=>({...t,getNodes:n,getNode:o,getEdges:r,getEdge:s,setNodes:i,setEdges:a,addNodes:l,addEdges:c,toObject:d,deleteElements:u,getIntersectingNodes:m,isNodeIntersecting:_}),[t,n,o,r,s,i,a,l,c,d,u,m,_])}const HR={actInsideInputWithModifier:!1},tf={position:"absolute",width:"100%",height:"100%",top:0,left:0},rc=t=>({x:t.x,y:t.y,zoom:t.k}),ys=(t,e)=>t.target.closest(`.${e}`),f2=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),m2=t=>{const e=t.ctrlKey&&Xl()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},$R=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),WR=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=nr.Free,zoomOnDoubleClick:c=!0,elementsSelectable:d,panOnDrag:u=!0,defaultViewport:f,translateExtent:m,minZoom:_,maxZoom:g,zoomActivationKeyCode:p,preventScrolling:b=!0,children:y,noWheelClassName:x,noPanClassName:v})=>{const S=A.useRef(),k=qt(),E=A.useRef(!1),j=A.useRef(!1),I=A.useRef(null),T=A.useRef({x:0,y:0,zoom:0}),{d3Zoom:M,d3Selection:L,d3ZoomHandler:B,userSelectionActive:O}=pt($R,on),z=Xi(p),F=A.useRef(0),V=A.useRef(!1),R=A.useRef();return function(C){const H=qt();A.useEffect(()=>{let N;const $=()=>{var Z,q;if(!C.current)return;const Y=Ph(C.current);Y.height!==0&&Y.width!==0||((q=(Z=H.getState()).onError)==null||q.call(Z,"004",fR())),H.setState({width:Y.width||500,height:Y.height||500})};return $(),window.addEventListener("resize",$),C.current&&(N=new ResizeObserver(()=>$()),N.observe(C.current)),()=>{window.removeEventListener("resize",$),N&&C.current&&N.unobserve(C.current)}},[])}(I),A.useEffect(()=>{if(I.current){const C=I.current.getBoundingClientRect(),H=function(){var q,re,ne,oe=iR,G=aR,Q=dR,ce=lR,me=cR,de=[0,1/0],ge=[[-1/0,-1/0],[1/0,1/0]],ie=250,we=T$,ve=VS("start","zoom","end"),ae=0,Se=10;function pe(J){J.property("__zoom",Sv).on("wheel.zoom",Ze,{passive:!1}).on("mousedown.zoom",at).on("dblclick.zoom",te).filter(me).on("touchstart.zoom",je).on("touchmove.zoom",Me).on("touchend.zoom touchcancel.zoom",Ue).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Te(J,he){return(he=Math.max(de[0],Math.min(de[1],he)))===J.k?J:new ap(he,J.x,J.y)}function Re(J,he,_e){var ue=he[0]-_e[0]*J.k,ye=he[1]-_e[1]*J.k;return ue===J.x&&ye===J.y?J:new ap(J.k,ue,ye)}function We(J){return[(+J[0][0]+ +J[1][0])/2,(+J[0][1]+ +J[1][1])/2]}function ze(J,he,_e,ue){J.on("start.zoom",function(){Ce(this,arguments).event(ue).start()}).on("interrupt.zoom end.zoom",function(){Ce(this,arguments).event(ue).end()}).tween("zoom",function(){var ye=this,Ne=arguments,Be=Ce(ye,Ne).event(ue),et=G.apply(ye,Ne),le=_e==null?We(et):typeof _e=="function"?_e.apply(ye,Ne):_e,Ee=Math.max(et[1][0]-et[0][0],et[1][1]-et[0][1]),Ie=ye.__zoom,Ve=typeof he=="function"?he.apply(ye,Ne):he,Ge=we(Ie.invert(le).concat(Ee/Ie.k),Ve.invert(le).concat(Ee/Ve.k));return function(De){if(De===1)De=Ve;else{var Je=Ge(De),ot=Ee/Je[2];De=new ap(ot,le[0]-Je[0]*ot,le[1]-Je[1]*ot)}Be.zoom(null,De)}})}function Ce(J,he,_e){return!_e&&J.__zooming||new qe(J,he)}function qe(J,he){this.that=J,this.args=he,this.active=0,this.sourceEvent=null,this.extent=G.apply(J,he),this.taps=0}function Ze(J,...he){if(oe.apply(this,arguments)){var _e=Ce(this,he).event(J),ue=this.__zoom,ye=Math.max(de[0],Math.min(de[1],ue.k*Math.pow(2,ce.apply(this,arguments)))),Ne=fo(J);if(_e.wheel)_e.mouse[0][0]===Ne[0]&&_e.mouse[0][1]===Ne[1]||(_e.mouse[1]=ue.invert(_e.mouse[0]=Ne)),clearTimeout(_e.wheel);else{if(ue.k===ye)return;_e.mouse=[Ne,ue.invert(Ne)],lp(this),_e.start()}qi(J),_e.wheel=setTimeout(function(){_e.wheel=null,_e.end()},150),_e.zoom("mouse",Q(Re(Te(ue,ye),_e.mouse[0],_e.mouse[1]),_e.extent,ge))}}function at(J,...he){if(!ne&&oe.apply(this,arguments)){var _e=J.currentTarget,ue=Ce(this,he,!0).event(J),ye=oo(J.view).on("mousemove.zoom",function(le){if(qi(le),!ue.moved){var Ee=le.clientX-Be,Ie=le.clientY-et;ue.moved=Ee*Ee+Ie*Ie>ae}ue.event(le).zoom("mouse",Q(Re(ue.that.__zoom,ue.mouse[0]=fo(le,_e),ue.mouse[1]),ue.extent,ge))},!0).on("mouseup.zoom",function(le){ye.on("mousemove.zoom mouseup.zoom",null),kv(le.view,ue.moved),qi(le),ue.event(le).end()},!0),Ne=fo(J,_e),Be=J.clientX,et=J.clientY;vv(J.view),Rh(J),ue.mouse=[Ne,this.__zoom.invert(Ne)],lp(this),ue.start()}}function te(J,...he){if(oe.apply(this,arguments)){var _e=this.__zoom,ue=fo(J.changedTouches?J.changedTouches[0]:J,this),ye=_e.invert(ue),Ne=_e.k*(J.shiftKey?.5:2),Be=Q(Re(Te(_e,Ne),ue,ye),G.apply(this,he),ge);qi(J),ie>0?oo(this).transition().duration(ie).call(ze,Be,ue,J):oo(this).call(pe.transform,Be,ue,J)}}function je(J,...he){if(oe.apply(this,arguments)){var _e,ue,ye,Ne,Be=J.touches,et=Be.length,le=Ce(this,he,J.changedTouches.length===et).event(J);for(Rh(J),ue=0;ue<et;++ue)Ne=[Ne=fo(ye=Be[ue],this),this.__zoom.invert(Ne),ye.identifier],le.touch0?le.touch1||le.touch0[2]===Ne[2]||(le.touch1=Ne,le.taps=0):(le.touch0=Ne,_e=!0,le.taps=1+!!q);q&&(q=clearTimeout(q)),_e&&(le.taps<2&&(re=Ne[0],q=setTimeout(function(){q=null},500)),lp(this),le.start())}}function Me(J,...he){if(this.__zooming){var _e,ue,ye,Ne,Be=Ce(this,he).event(J),et=J.changedTouches,le=et.length;for(qi(J),_e=0;_e<le;++_e)ye=fo(ue=et[_e],this),Be.touch0&&Be.touch0[2]===ue.identifier?Be.touch0[0]=ye:Be.touch1&&Be.touch1[2]===ue.identifier&&(Be.touch1[0]=ye);if(ue=Be.that.__zoom,Be.touch1){var Ee=Be.touch0[0],Ie=Be.touch0[1],Ve=Be.touch1[0],Ge=Be.touch1[1],De=(De=Ve[0]-Ee[0])*De+(De=Ve[1]-Ee[1])*De,Je=(Je=Ge[0]-Ie[0])*Je+(Je=Ge[1]-Ie[1])*Je;ue=Te(ue,Math.sqrt(De/Je)),ye=[(Ee[0]+Ve[0])/2,(Ee[1]+Ve[1])/2],Ne=[(Ie[0]+Ge[0])/2,(Ie[1]+Ge[1])/2]}else{if(!Be.touch0)return;ye=Be.touch0[0],Ne=Be.touch0[1]}Be.zoom("touch",Q(Re(ue,ye,Ne),Be.extent,ge))}}function Ue(J,...he){if(this.__zooming){var _e,ue,ye=Ce(this,he).event(J),Ne=J.changedTouches,Be=Ne.length;for(Rh(J),ne&&clearTimeout(ne),ne=setTimeout(function(){ne=null},500),_e=0;_e<Be;++_e)ue=Ne[_e],ye.touch0&&ye.touch0[2]===ue.identifier?delete ye.touch0:ye.touch1&&ye.touch1[2]===ue.identifier&&delete ye.touch1;if(ye.touch1&&!ye.touch0&&(ye.touch0=ye.touch1,delete ye.touch1),ye.touch0)ye.touch0[1]=this.__zoom.invert(ye.touch0[0]);else if(ye.end(),ye.taps===2&&(ue=fo(ue,this),Math.hypot(re[0]-ue[0],re[1]-ue[1])<Se)){var et=oo(this).on("dblclick.zoom");et&&et.apply(this,arguments)}}}return pe.transform=function(J,he,_e,ue){var ye=J.selection?J.selection():J;ye.property("__zoom",Sv),J!==ye?ze(J,he,_e,ue):ye.interrupt().each(function(){Ce(this,arguments).event(ue).start().zoom(null,typeof he=="function"?he.apply(this,arguments):he).end()})},pe.scaleBy=function(J,he,_e,ue){pe.scaleTo(J,function(){return this.__zoom.k*(typeof he=="function"?he.apply(this,arguments):he)},_e,ue)},pe.scaleTo=function(J,he,_e,ue){pe.transform(J,function(){var ye=G.apply(this,arguments),Ne=this.__zoom,Be=_e==null?We(ye):typeof _e=="function"?_e.apply(this,arguments):_e,et=Ne.invert(Be),le=typeof he=="function"?he.apply(this,arguments):he;return Q(Re(Te(Ne,le),Be,et),ye,ge)},_e,ue)},pe.translateBy=function(J,he,_e,ue){pe.transform(J,function(){return Q(this.__zoom.translate(typeof he=="function"?he.apply(this,arguments):he,typeof _e=="function"?_e.apply(this,arguments):_e),G.apply(this,arguments),ge)},null,ue)},pe.translateTo=function(J,he,_e,ue,ye){pe.transform(J,function(){var Ne=G.apply(this,arguments),Be=this.__zoom,et=ue==null?We(Ne):typeof ue=="function"?ue.apply(this,arguments):ue;return Q(yr.translate(et[0],et[1]).scale(Be.k).translate(typeof he=="function"?-he.apply(this,arguments):-he,typeof _e=="function"?-_e.apply(this,arguments):-_e),Ne,ge)},ue,ye)},qe.prototype={event:function(J){return J&&(this.sourceEvent=J),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(J,he){return this.mouse&&J!=="mouse"&&(this.mouse[1]=he.invert(this.mouse[0])),this.touch0&&J!=="touch"&&(this.touch0[1]=he.invert(this.touch0[0])),this.touch1&&J!=="touch"&&(this.touch1[1]=he.invert(this.touch1[0])),this.that.__zoom=he,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(J){var he=oo(this.that).datum();ve.call(J,this.that,new sR(J,{sourceEvent:this.sourceEvent,target:pe,transform:this.that.__zoom,dispatch:ve}),he)}},pe.wheelDelta=function(J){return arguments.length?(ce=typeof J=="function"?J:Yl(+J),pe):ce},pe.filter=function(J){return arguments.length?(oe=typeof J=="function"?J:Yl(!!J),pe):oe},pe.touchable=function(J){return arguments.length?(me=typeof J=="function"?J:Yl(!!J),pe):me},pe.extent=function(J){return arguments.length?(G=typeof J=="function"?J:Yl([[+J[0][0],+J[0][1]],[+J[1][0],+J[1][1]]]),pe):G},pe.scaleExtent=function(J){return arguments.length?(de[0]=+J[0],de[1]=+J[1],pe):[de[0],de[1]]},pe.translateExtent=function(J){return arguments.length?(ge[0][0]=+J[0][0],ge[1][0]=+J[1][0],ge[0][1]=+J[0][1],ge[1][1]=+J[1][1],pe):[[ge[0][0],ge[0][1]],[ge[1][0],ge[1][1]]]},pe.constrain=function(J){return arguments.length?(Q=J,pe):Q},pe.duration=function(J){return arguments.length?(ie=+J,pe):ie},pe.interpolate=function(J){return arguments.length?(we=J,pe):we},pe.on=function(){var J=ve.on.apply(ve,arguments);return J===ve?pe:J},pe.clickDistance=function(J){return arguments.length?(ae=(J=+J)*J,pe):Math.sqrt(ae)},pe.tapDistance=function(J){return arguments.length?(Se=+J,pe):Se},pe}().scaleExtent([_,g]).translateExtent(m),N=oo(I.current).call(H),$=yr.translate(f.x,f.y).scale(ms(f.zoom,_,g)),Y=[[0,0],[C.width,C.height]],Z=H.constrain()($,Y,m);H.transform(N,Z),H.wheelDelta(m2),k.setState({d3Zoom:H,d3Selection:N,d3ZoomHandler:N.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:I.current.closest(".react-flow")})}},[]),A.useEffect(()=>{L&&M&&(!i||z||O?B!==void 0&&L.on("wheel.zoom",function(C,H){if(!b&&C.type==="wheel"&&!C.ctrlKey||ys(C,x))return null;C.preventDefault(),B.call(this,C,H)},{passive:!1}):L.on("wheel.zoom",C=>{if(ys(C,x))return!1;C.preventDefault(),C.stopImmediatePropagation();const H=L.property("__zoom").k||1;if(C.ctrlKey&&s){const oe=fo(C),G=m2(C),Q=H*Math.pow(2,G);return void M.scaleTo(L,Q,oe,C)}const N=C.deltaMode===1?20:1;let $=l===nr.Vertical?0:C.deltaX*N,Y=l===nr.Horizontal?0:C.deltaY*N;!Xl()&&C.shiftKey&&l!==nr.Vertical&&($=C.deltaY*N,Y=0),M.translateBy(L,-$/H*a,-Y/H*a,{internal:!0});const Z=rc(L.property("__zoom")),{onViewportChangeStart:q,onViewportChange:re,onViewportChangeEnd:ne}=k.getState();clearTimeout(R.current),V.current||(V.current=!0,e==null||e(C,Z),q==null||q(Z)),V.current&&(t==null||t(C,Z),re==null||re(Z),R.current=setTimeout(()=>{n==null||n(C,Z),ne==null||ne(Z),V.current=!1},150))},{passive:!1}))},[O,i,l,L,M,B,z,s,b,x,e,t,n]),A.useEffect(()=>{M&&M.on("start",C=>{var $,Y;if(!C.sourceEvent||C.sourceEvent.internal)return null;F.current=($=C.sourceEvent)==null?void 0:$.button;const{onViewportChangeStart:H}=k.getState(),N=rc(C.transform);E.current=!0,T.current=N,((Y=C.sourceEvent)==null?void 0:Y.type)==="mousedown"&&k.setState({paneDragging:!0}),H==null||H(N),e==null||e(C.sourceEvent,N)})},[M,e]),A.useEffect(()=>{M&&(O&&!E.current?M.on("zoom",null):O||M.on("zoom",C=>{var N;const{onViewportChange:H}=k.getState();if(k.setState({transform:[C.transform.x,C.transform.y,C.transform.k]}),j.current=!(!o||!f2(u,F.current??0)),(t||H)&&!((N=C.sourceEvent)!=null&&N.internal)){const $=rc(C.transform);H==null||H($),t==null||t(C.sourceEvent,$)}}))},[O,M,t,u,o]),A.useEffect(()=>{M&&M.on("end",C=>{if(!C.sourceEvent||C.sourceEvent.internal)return null;const{onViewportChangeEnd:H}=k.getState();if(E.current=!1,k.setState({paneDragging:!1}),o&&f2(u,F.current??0)&&!j.current&&o(C.sourceEvent),j.current=!1,(n||H)&&(N=T.current,$=C.transform,N.x!==$.x||N.y!==$.y||N.zoom!==$.k)){const Y=rc(C.transform);T.current=Y,clearTimeout(S.current),S.current=setTimeout(()=>{H==null||H(Y),n==null||n(C.sourceEvent,Y)},i?150:0)}var N,$})},[M,i,u,n,o]),A.useEffect(()=>{M&&M.filter(C=>{const H=z||r,N=s&&C.ctrlKey;if((u===!0||Array.isArray(u)&&u.includes(1))&&C.button===1&&C.type==="mousedown"&&(ys(C,"react-flow__node")||ys(C,"react-flow__edge")))return!0;if(!(u||H||i||c||s)||O||!c&&C.type==="dblclick"||ys(C,x)&&C.type==="wheel"||ys(C,v)&&(C.type!=="wheel"||i&&C.type==="wheel"&&!z)||!s&&C.ctrlKey&&C.type==="wheel"||!H&&!i&&!N&&C.type==="wheel"||!u&&(C.type==="mousedown"||C.type==="touchstart")||Array.isArray(u)&&!u.includes(C.button)&&C.type==="mousedown")return!1;const $=Array.isArray(u)&&u.includes(C.button)||!C.button||C.button<=1;return(!C.ctrlKey||C.type==="wheel")&&$})},[O,M,r,s,i,c,u,d,z]),K.createElement("div",{className:"react-flow__renderer",ref:I,style:tf},y)},qR=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function GR(){const{userSelectionActive:t,userSelectionRect:e}=pt(qR,on);return t&&e?K.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function p2(t,e){const n=e.parentNode||e.parentId,o=t.find(r=>r.id===n);if(o){const r=e.position.x+e.width-o.width,s=e.position.y+e.height-o.height;if(r>0||s>0||e.position.x<0||e.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),s>0&&(o.style.height+=s),e.position.x<0){const i=Math.abs(e.position.x);o.position.x=o.position.x-i,o.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);o.position.y=o.position.y-i,o.style.height+=i,e.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function g2(t,e){if(t.some(o=>o.type==="reset"))return t.filter(o=>o.type==="reset").map(o=>o.item);const n=t.filter(o=>o.type==="add").map(o=>o.item);return e.reduce((o,r)=>{const s=t.filter(a=>a.id===r.id);if(s.length===0)return o.push(r),o;const i={...r};for(const a of s)if(a)switch(a.type){case"select":i.selected=a.selected;break;case"position":a.position!==void 0&&(i.position=a.position),a.positionAbsolute!==void 0&&(i.positionAbsolute=a.positionAbsolute),a.dragging!==void 0&&(i.dragging=a.dragging),i.expandParent&&p2(o,i);break;case"dimensions":a.dimensions!==void 0&&(i.width=a.dimensions.width,i.height=a.dimensions.height),a.updateStyle!==void 0&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&p2(o,i);break;case"remove":return o}return o.push(i),o},n)}function _2(t,e){return g2(t,e)}const sr=(t,e)=>({id:t,type:"select",selected:e});function xs(t,e){return t.reduce((n,o)=>{const r=e.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(sr(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(sr(o.id,!1))),n},[])}const nf=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},YR=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),b2=A.memo(({isSelecting:t,selectionMode:e=Ji.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:d,children:u})=>{const f=A.useRef(null),m=qt(),_=A.useRef(0),g=A.useRef(0),p=A.useRef(),{userSelectionActive:b,elementsSelectable:y,dragging:x}=pt(YR,on),v=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),_.current=0,g.current=0},S=j=>{s==null||s(j),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},k=a?j=>a(j):void 0,E=y&&(t||b);return K.createElement("div",{className:un(["react-flow__pane",{dragging:x,selection:t}]),onClick:E?void 0:nf(S,f),onContextMenu:nf(j=>{Array.isArray(n)&&(n!=null&&n.includes(2))?j.preventDefault():i==null||i(j)},f),onWheel:nf(k,f),onMouseEnter:E?void 0:l,onMouseDown:E?j=>{const{resetSelectedElements:I,domNode:T}=m.getState();if(p.current=T==null?void 0:T.getBoundingClientRect(),!y||!t||j.button!==0||j.target!==f.current||!p.current)return;const{x:M,y:L}=tr(j,p.current);I(),m.setState({userSelectionRect:{width:0,height:0,startX:M,startY:L,x:M,y:L}}),o==null||o(j)}:void 0,onMouseMove:E?j=>{const{userSelectionRect:I,nodeInternals:T,edges:M,transform:L,onNodesChange:B,onEdgesChange:O,nodeOrigin:z,getNodes:F}=m.getState();if(!t||!p.current||!I)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=tr(j,p.current),R=I.startX??0,C=I.startY??0,H={...I,x:V.x<R?V.x:R,y:V.y<C?V.y:C,width:Math.abs(V.x-R),height:Math.abs(V.y-C)},N=F(),$=$v(T,H,L,e===Ji.Partial,!0,z),Y=Wv($,M).map(q=>q.id),Z=$.map(q=>q.id);if(_.current!==Z.length){_.current=Z.length;const q=xs(N,Z);q.length&&(B==null||B(q))}if(g.current!==Y.length){g.current=Y.length;const q=xs(M,Y);q.length&&(O==null||O(q))}m.setState({userSelectionRect:H})}:c,onMouseUp:E?j=>{if(j.button!==0)return;const{userSelectionRect:I}=m.getState();!b&&I&&j.target===f.current&&(S==null||S(j)),m.setState({nodesSelectionActive:_.current>0}),v(),r==null||r(j)}:void 0,onMouseLeave:E?j=>{b&&(m.setState({nodesSelectionActive:_.current>0}),r==null||r(j)),v()}:d,ref:f,style:tf},u,K.createElement(GR,null))});function y2(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const o=e.get(n);return!!o&&(!!o.selected||y2(o,e))}function x2(t,e,n){let o=t;do{if(o!=null&&o.matches(e))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function JR(t,e,n,o){return Array.from(t.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!y2(r,t))&&(r.draggable||e&&r.draggable===void 0)).map(r=>{var s,i;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=r.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=r.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function w2(t,e,n,o,r=[0,0],s){const i=function(u,f){return f&&f!=="parent"?[f[0],[f[1][0]-(u.width||0),f[1][1]-(u.height||0)]]:f}(t,t.extent||o);let a=i;const l=t.parentNode||t.parentId;if(t.extent!=="parent"||t.expandParent){if(t.extent&&l&&t.extent!=="parent"){const u=n.get(l),{x:f,y:m}=gs(u,r).positionAbsolute;a=[[t.extent[0][0]+f,t.extent[0][1]+m],[t.extent[1][0]+f,t.extent[1][1]+m]]}}else if(l&&t.width&&t.height){const u=n.get(l),{x:f,y:m}=gs(u,r).positionAbsolute;a=u&&Vn(f)&&Vn(m)&&Vn(u.width)&&Vn(u.height)?[[f+t.width*r[0],m+t.height*r[1]],[f+u.width-t.width+t.width*r[0],m+u.height-t.height+t.height*r[1]]]:a}else s==null||s("005",mR()),a=i;let c={x:0,y:0};if(l){const u=n.get(l);c=gs(u,r).positionAbsolute}const d=a&&a!=="parent"?Lh(e,a):e;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function of({nodeId:t,dragItems:e,nodeInternals:n}){const o=e.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[t?o.find(r=>r.id===t):o[0],o]}b2.displayName="Pane";const v2=(t,e,n,o)=>{const r=e.querySelectorAll(t);if(!r||!r.length)return null;const s=Array.from(r),i=e.getBoundingClientRect(),a=i.width*o[0],l=i.height*o[1];return s.map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(d.left-i.left-a)/n,y:(d.top-i.top-l)/n,...Ph(c)}})};function Qi(t,e,n){return n===void 0?n:o=>{const r=e().nodeInternals.get(t);r&&n(o,{...r})}}function rf({id:t,store:e,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:a,onError:l}=e.getState(),c=a.get(t);c?(e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=o==null?void 0:o.current)==null?void 0:d.blur()})):r([t])):l==null||l("012",yR(t))}function sf(t){return(e,n,o)=>t==null?void 0:t(e,o)}function k2({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:s,selectNodesOnDrag:i}){const a=qt(),[l,c]=A.useState(!1),d=A.useRef([]),u=A.useRef({x:null,y:null}),f=A.useRef(0),m=A.useRef(null),_=A.useRef({x:0,y:0}),g=A.useRef(null),p=A.useRef(!1),b=A.useRef(!1),y=A.useRef(!1),x=function(){const v=qt();return A.useCallback(({sourceEvent:k})=>{const{transform:E,snapGrid:j,snapToGrid:I}=v.getState(),T=k.touches?k.touches[0].clientX:k.clientX,M=k.touches?k.touches[0].clientY:k.clientY,L={x:(T-E[0])/E[2],y:(M-E[1])/E[2]};return{xSnapped:I?j[0]*Math.round(L.x/j[0]):L.x,ySnapped:I?j[1]*Math.round(L.y/j[1]):L.y,...L}},[])}();return A.useEffect(()=>{if(t!=null&&t.current){const v=oo(t.current),S=({x:j,y:I})=>{const{nodeInternals:T,onNodeDrag:M,onSelectionDrag:L,updateNodePositions:B,nodeExtent:O,snapGrid:z,snapToGrid:F,nodeOrigin:V,onError:R}=a.getState();u.current={x:j,y:I};let C=!1,H={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&O){const $=Jh(d.current,V);H=Fh($)}if(d.current=d.current.map($=>{const Y={x:j-$.distance.x,y:I-$.distance.y};F&&(Y.x=z[0]*Math.round(Y.x/z[0]),Y.y=z[1]*Math.round(Y.y/z[1]));const Z=[[O[0][0],O[0][1]],[O[1][0],O[1][1]]];d.current.length>1&&O&&!$.extent&&(Z[0][0]=$.positionAbsolute.x-H.x+O[0][0],Z[1][0]=$.positionAbsolute.x+($.width??0)-H.x2+O[1][0],Z[0][1]=$.positionAbsolute.y-H.y+O[0][1],Z[1][1]=$.positionAbsolute.y+($.height??0)-H.y2+O[1][1]);const q=w2($,Y,T,Z,V,R);return C=C||$.position.x!==q.position.x||$.position.y!==q.position.y,$.position=q.position,$.positionAbsolute=q.positionAbsolute,$}),!C)return;B(d.current,!0,!0),c(!0);const N=r?M:sf(L);if(N&&g.current){const[$,Y]=of({nodeId:r,dragItems:d.current,nodeInternals:T});N(g.current,$,Y)}},k=()=>{if(!m.current)return;const[j,I]=jv(_.current,m.current);if(j!==0||I!==0){const{transform:T,panBy:M}=a.getState();u.current.x=(u.current.x??0)-j/T[2],u.current.y=(u.current.y??0)-I/T[2],M({x:j,y:I})&&S(u.current)}f.current=requestAnimationFrame(k)},E=j=>{var V;const{nodeInternals:I,multiSelectionActive:T,nodesDraggable:M,unselectNodesAndEdges:L,onNodeDragStart:B,onSelectionDragStart:O}=a.getState();b.current=!0;const z=r?B:sf(O);i&&s||T||!r||(V=I.get(r))!=null&&V.selected||L(),r&&s&&i&&rf({id:r,store:a,nodeRef:t});const F=x(j);if(u.current=F,d.current=JR(I,M,F,r),z&&d.current){const[R,C]=of({nodeId:r,dragItems:d.current,nodeInternals:I});z(j.sourceEvent,R,C)}};if(!e){const j=function(){var I,T,M,L,B=tR,O=nR,z=oR,F=rR,V={},R=VS("start","drag","end"),C=0,H=0;function N(G){G.on("mousedown.drag",$).filter(F).on("touchstart.drag",q).on("touchmove.drag",re,eR).on("touchend.drag touchcancel.drag",ne).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function $(G,Q){if(!L&&B.call(this,G,Q)){var ce=oe(this,O.call(this,G,Q),G,Q,"mouse");ce&&(oo(G.view).on("mousemove.drag",Y,Wi).on("mouseup.drag",Z,Wi),vv(G.view),Oh(G),M=!1,I=G.clientX,T=G.clientY,ce("start",G))}}function Y(G){if(fs(G),!M){var Q=G.clientX-I,ce=G.clientY-T;M=Q*Q+ce*ce>H}V.mouse("drag",G)}function Z(G){oo(G.view).on("mousemove.drag mouseup.drag",null),kv(G.view,M),fs(G),V.mouse("end",G)}function q(G,Q){if(B.call(this,G,Q)){var ce,me,de=G.changedTouches,ge=O.call(this,G,Q),ie=de.length;for(ce=0;ce<ie;++ce)(me=oe(this,ge,G,Q,de[ce].identifier,de[ce]))&&(Oh(G),me("start",G,de[ce]))}}function re(G){var Q,ce,me=G.changedTouches,de=me.length;for(Q=0;Q<de;++Q)(ce=V[me[Q].identifier])&&(fs(G),ce("drag",G,me[Q]))}function ne(G){var Q,ce,me=G.changedTouches,de=me.length;for(L&&clearTimeout(L),L=setTimeout(function(){L=null},500),Q=0;Q<de;++Q)(ce=V[me[Q].identifier])&&(Oh(G),ce("end",G,me[Q]))}function oe(G,Q,ce,me,de,ge){var ie,we,ve,ae=R.copy(),Se=fo(ge||ce,Q);if((ve=z.call(G,new Dh("beforestart",{sourceEvent:ce,target:N,identifier:de,active:C,x:Se[0],y:Se[1],dx:0,dy:0,dispatch:ae}),me))!=null)return ie=ve.x-Se[0]||0,we=ve.y-Se[1]||0,function pe(Te,Re,We){var ze,Ce=Se;switch(Te){case"start":V[de]=pe,ze=C++;break;case"end":delete V[de],--C;case"drag":Se=fo(We||Re,Q),ze=C}ae.call(Te,G,new Dh(Te,{sourceEvent:Re,subject:ve,target:N,identifier:de,active:ze,x:Se[0]+ie,y:Se[1]+we,dx:Se[0]-Ce[0],dy:Se[1]-Ce[1],dispatch:ae}),me)}}return N.filter=function(G){return arguments.length?(B=typeof G=="function"?G:Gl(!!G),N):B},N.container=function(G){return arguments.length?(O=typeof G=="function"?G:Gl(G),N):O},N.subject=function(G){return arguments.length?(z=typeof G=="function"?G:Gl(G),N):z},N.touchable=function(G){return arguments.length?(F=typeof G=="function"?G:Gl(!!G),N):F},N.on=function(){var G=R.on.apply(R,arguments);return G===R?N:G},N.clickDistance=function(G){return arguments.length?(H=(G=+G)*G,N):Math.sqrt(H)},N}().on("start",I=>{const{domNode:T,nodeDragThreshold:M}=a.getState();M===0&&E(I),y.current=!1;const L=x(I);u.current=L,m.current=(T==null?void 0:T.getBoundingClientRect())||null,_.current=tr(I.sourceEvent,m.current)}).on("drag",I=>{var B,O;const T=x(I),{autoPanOnNodeDrag:M,nodeDragThreshold:L}=a.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!p.current&&b.current&&M&&(p.current=!0,k()),!b.current){const z=T.xSnapped-(((B=u==null?void 0:u.current)==null?void 0:B.x)??0),F=T.ySnapped-(((O=u==null?void 0:u.current)==null?void 0:O.y)??0);Math.sqrt(z*z+F*F)>L&&E(I)}(u.current.x!==T.xSnapped||u.current.y!==T.ySnapped)&&d.current&&b.current&&(g.current=I.sourceEvent,_.current=tr(I.sourceEvent,m.current),S(T))}}).on("end",I=>{if(b.current&&!y.current&&(c(!1),p.current=!1,b.current=!1,cancelAnimationFrame(f.current),d.current)){const{updateNodePositions:T,nodeInternals:M,onNodeDragStop:L,onSelectionDragStop:B}=a.getState(),O=r?L:sf(B);if(T(d.current,!1,!1),O){const[z,F]=of({nodeId:r,dragItems:d.current,nodeInternals:M});O(I.sourceEvent,z,F)}}}).filter(I=>{const T=I.target;return!I.button&&(!n||!x2(T,`.${n}`,t))&&(!o||x2(T,o,t))});return v.call(j),()=>{v.on(".drag",null)}}v.on(".drag",null)}},[t,e,n,o,s,a,r,i,x]),l}function S2(){const t=qt();return A.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:s,getNodes:i,snapToGrid:a,snapGrid:l,onError:c,nodesDraggable:d}=t.getState(),u=i().filter(y=>y.selected&&(y.draggable||d&&y.draggable===void 0)),f=a?l[0]:5,m=a?l[1]:5,_=n.isShiftPressed?4:1,g=n.x*f*_,p=n.y*m*_,b=u.map(y=>{if(y.positionAbsolute){const x={x:y.positionAbsolute.x+g,y:y.positionAbsolute.y+p};a&&(x.x=l[0]*Math.round(x.x/l[0]),x.y=l[1]*Math.round(x.y/l[1]));const{positionAbsolute:v,position:S}=w2(y,x,o,r,void 0,c);y.position=S,y.positionAbsolute=v}return y});s(b,!0,!1)},[])}const ws={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ea=t=>{const e=({id:n,type:o,data:r,xPos:s,yPos:i,xPosOrigin:a,yPosOrigin:l,selected:c,onClick:d,onMouseEnter:u,onMouseMove:f,onMouseLeave:m,onContextMenu:_,onDoubleClick:g,style:p,className:b,isDraggable:y,isSelectable:x,isConnectable:v,isFocusable:S,selectNodesOnDrag:k,sourcePosition:E,targetPosition:j,hidden:I,resizeObserver:T,dragHandle:M,zIndex:L,isParent:B,noDragClassName:O,noPanClassName:z,initialized:F,disableKeyboardA11y:V,ariaLabel:R,rfId:C,hasHandleBounds:H})=>{const N=qt(),$=A.useRef(null),Y=A.useRef(null),Z=A.useRef(E),q=A.useRef(j),re=A.useRef(o),ne=x||y||d||u||f||m,oe=S2(),G=Qi(n,N.getState,u),Q=Qi(n,N.getState,f),ce=Qi(n,N.getState,m),me=Qi(n,N.getState,_),de=Qi(n,N.getState,g);A.useEffect(()=>()=>{Y.current&&(T==null||T.unobserve(Y.current),Y.current=null)},[]),A.useEffect(()=>{if($.current&&!I){const ie=$.current;F&&H&&Y.current===ie||(Y.current&&(T==null||T.unobserve(Y.current)),T==null||T.observe(ie),Y.current=ie)}},[I,F,H]),A.useEffect(()=>{const ie=re.current!==o,we=Z.current!==E,ve=q.current!==j;$.current&&(ie||we||ve)&&(ie&&(re.current=o),we&&(Z.current=E),ve&&(q.current=j),N.getState().updateNodeDimensions([{id:n,nodeElement:$.current,forceUpdate:!0}]))},[n,o,E,j]);const ge=k2({nodeRef:$,disabled:I||!y,noDragClassName:O,handleSelector:M,nodeId:n,isSelectable:x,selectNodesOnDrag:k});return I?null:K.createElement("div",{className:un(["react-flow__node",`react-flow__node-${o}`,{[z]:y},b,{selected:c,selectable:x,parent:B,dragging:ge}]),ref:$,style:{zIndex:L,transform:`translate(${a}px,${l}px)`,pointerEvents:ne?"all":"none",visibility:F?"visible":"hidden",...p},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:G,onMouseMove:Q,onMouseLeave:ce,onContextMenu:me,onClick:ie=>{const{nodeDragThreshold:we}=N.getState();if(x&&(!k||!y||we>0)&&rf({id:n,store:N,nodeRef:$}),d){const ve=N.getState().nodeInternals.get(n);ve&&d(ie,{...ve})}},onDoubleClick:de,onKeyDown:S?ie=>{if(!Bh(ie)&&!V)if(Av.includes(ie.key)&&x){const we=ie.key==="Escape";rf({id:n,store:N,unselect:we,nodeRef:$})}else y&&c&&Object.prototype.hasOwnProperty.call(ws,ie.key)&&(N.setState({ariaLiveMessage:`Moved selected node ${ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),oe({x:ws[ie.key].x,y:ws[ie.key].y,isShiftPressed:ie.shiftKey}))}:void 0,tabIndex:S?0:void 0,role:S?"button":void 0,"aria-describedby":V?void 0:`${i2}-${C}`,"aria-label":R},K.createElement(SR,{value:n},K.createElement(t,{id:n,data:r,type:o,xPos:s,yPos:i,selected:c,isConnectable:v,sourcePosition:E,targetPosition:j,dragging:ge,dragHandle:M,zIndex:L})))};return e.displayName="NodeWrapper",A.memo(e)};const KR=t=>{const e=t.getNodes().filter(n=>n.selected);return{...Jh(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};var XR=A.memo(function({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const o=qt(),{width:r,height:s,x:i,y:a,transformString:l,userSelectionActive:c}=pt(KR,on),d=S2(),u=A.useRef(null);if(A.useEffect(()=>{var m;n||((m=u.current)==null||m.focus({preventScroll:!0}))},[n]),k2({nodeRef:u}),c||!r||!s)return null;const f=t?m=>{const _=o.getState().getNodes().filter(g=>g.selected);t(m,_)}:void 0;return K.createElement("div",{className:un(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},K.createElement("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m=>{Object.prototype.hasOwnProperty.call(ws,m.key)&&d({x:ws[m.key].x,y:ws[m.key].y,isShiftPressed:m.shiftKey})},style:{width:r,height:s,top:a,left:i}}))});const ZR=t=>t.nodesSelectionActive,C2=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:l,onMoveStart:c,onMoveEnd:d,selectionKeyCode:u,selectionOnDrag:f,selectionMode:m,onSelectionStart:_,onSelectionEnd:g,multiSelectionKeyCode:p,panActivationKeyCode:b,zoomActivationKeyCode:y,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:S,panOnScroll:k,panOnScrollSpeed:E,panOnScrollMode:j,zoomOnDoubleClick:I,panOnDrag:T,defaultViewport:M,translateExtent:L,minZoom:B,maxZoom:O,preventScrolling:z,onSelectionContextMenu:F,noWheelClassName:V,noPanClassName:R,disableKeyboardA11y:C})=>{const H=pt(ZR),N=Xi(u),$=Xi(b),Y=$||T,Z=$||k,q=N||f&&Y!==!0;return(({deleteKeyCode:re,multiSelectionKeyCode:ne})=>{const oe=qt(),{deleteElements:G}=Zi(),Q=Xi(re,HR),ce=Xi(ne);A.useEffect(()=>{if(Q){const{edges:me,getNodes:de}=oe.getState(),ge=de().filter(we=>we.selected),ie=me.filter(we=>we.selected);G({nodes:ge,edges:ie}),oe.setState({nodesSelectionActive:!1})}},[Q]),A.useEffect(()=>{oe.setState({multiSelectionActive:ce})},[ce])})({deleteKeyCode:a,multiSelectionKeyCode:p}),K.createElement(WR,{onMove:l,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:S,panOnScroll:Z,panOnScrollSpeed:E,panOnScrollMode:j,zoomOnDoubleClick:I,panOnDrag:!N&&Y,defaultViewport:M,translateExtent:L,minZoom:B,maxZoom:O,zoomActivationKeyCode:y,preventScrolling:z,noWheelClassName:V,noPanClassName:R},K.createElement(b2,{onSelectionStart:_,onSelectionEnd:g,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:Y,isSelecting:!!q,selectionMode:m},t,H&&K.createElement(XR,{onSelectionContextMenu:F,noPanClassName:R,disableKeyboardA11y:C})))};C2.displayName="FlowRenderer";var QR=A.memo(C2);function eP(t){return{input:ea(t.input||t2),default:ea(t.default||Zh),output:ea(t.output||o2),group:ea(t.group||Qh),...Object.keys(t).filter(e=>!["input","default","output","group"].includes(e)).reduce((e,n)=>(e[n]=ea(t[n]||Zh),e),{})}}const tP=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),N2=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:s,onError:i}=pt(tP,on),a=(l=t.onlyRenderVisibleElements,pt(A.useCallback(u=>l?$v(u.nodeInternals,{x:0,y:0,width:u.width,height:u.height},u.transform,!0):u.getNodes(),[l])));var l;const c=A.useRef(),d=A.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(f=>{const m=f.map(_=>({id:_.target.getAttribute("data-id"),nodeElement:_.target,forceUpdate:!0}));s(m)});return c.current=u,u},[]);return A.useEffect(()=>()=>{var u;(u=c==null?void 0:c.current)==null||u.disconnect()},[]),K.createElement("div",{className:"react-flow__nodes",style:tf},a.map(u=>{var k,E,j;let f=u.type||"default";t.nodeTypes[f]||(i==null||i("003",hR(f)),f="default");const m=t.nodeTypes[f]||t.nodeTypes.default,_=!!(u.draggable||e&&u.draggable===void 0),g=!!(u.selectable||r&&u.selectable===void 0),p=!!(u.connectable||n&&u.connectable===void 0),b=!!(u.focusable||o&&u.focusable===void 0),y=t.nodeExtent?Lh(u.positionAbsolute,t.nodeExtent):u.positionAbsolute,x=(y==null?void 0:y.x)??0,v=(y==null?void 0:y.y)??0,S=(({x:I,y:T,width:M,height:L,origin:B})=>M&&L?B[0]<0||B[1]<0||B[0]>1||B[1]>1?{x:I,y:T}:{x:I-M*B[0],y:T-L*B[1]}:{x:I,y:T})({x,y:v,width:u.width??0,height:u.height??0,origin:t.nodeOrigin});return K.createElement(m,{key:u.id,id:u.id,className:u.className,style:u.style,type:f,data:u.data,sourcePosition:u.sourcePosition||He.Bottom,targetPosition:u.targetPosition||He.Top,hidden:u.hidden,xPos:x,yPos:v,xPosOrigin:S.x,yPosOrigin:S.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!u.selected,isDraggable:_,isSelectable:g,isConnectable:p,isFocusable:b,resizeObserver:d,dragHandle:u.dragHandle,zIndex:((k=u[jt])==null?void 0:k.z)??0,isParent:!!((E=u[jt])!=null&&E.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!u.width&&!!u.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((j=u[jt])!=null&&j.handleBounds)})}))};N2.displayName="NodeRenderer";var nP=A.memo(N2);const oP=(t,e,n)=>n===He.Left?t-e:n===He.Right?t+e:t,rP=(t,e,n)=>n===He.Top?t-e:n===He.Bottom?t+e:t,j2="react-flow__edgeupdater",E2=({position:t,centerX:e,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:s,onMouseOut:i,type:a})=>K.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:i,className:un([j2,`${j2}-${a}`]),cx:oP(e,o,t),cy:rP(n,o,t),r:o,stroke:"transparent",fill:"transparent"}),sP=()=>!0;var vs=t=>{const e=({id:n,className:o,type:r,data:s,onClick:i,onEdgeDoubleClick:a,selected:l,animated:c,label:d,labelStyle:u,labelShowBg:f,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g,style:p,source:b,target:y,sourceX:x,sourceY:v,targetX:S,targetY:k,sourcePosition:E,targetPosition:j,elementsSelectable:I,hidden:T,sourceHandleId:M,targetHandleId:L,onContextMenu:B,onMouseEnter:O,onMouseMove:z,onMouseLeave:F,reconnectRadius:V,onReconnect:R,onReconnectStart:C,onReconnectEnd:H,markerEnd:N,markerStart:$,rfId:Y,ariaLabel:Z,isFocusable:q,isReconnectable:re,pathOptions:ne,interactionWidth:oe,disableKeyboardA11y:G})=>{const Q=A.useRef(null),[ce,me]=A.useState(!1),[de,ge]=A.useState(!1),ie=qt(),we=A.useMemo(()=>`url('#${Gh($,Y)}')`,[$,Y]),ve=A.useMemo(()=>`url('#${Gh(N,Y)}')`,[N,Y]);if(T)return null;const ae=Yi(n,ie.getState,a),Se=Yi(n,ie.getState,B),pe=Yi(n,ie.getState,O),Te=Yi(n,ie.getState,z),Re=Yi(n,ie.getState,F),We=(Ze,at)=>{if(Ze.button!==0)return;const{edges:te,isValidConnection:je}=ie.getState(),Me=at?y:b,Ue=(at?L:M)||null,J=at?"target":"source",he=je||sP,_e=at,ue=te.find(ye=>ye.id===n);ge(!0),C==null||C(Ze,ue,J),Kv({event:Ze,handleId:Ue,nodeId:Me,onConnect:ye=>R==null?void 0:R(ue,ye),isTarget:_e,getState:ie.getState,setState:ie.setState,isValidConnection:he,edgeUpdaterType:J,onReconnectEnd:ye=>{ge(!1),H==null||H(ye,ue,J)}})},ze=()=>me(!0),Ce=()=>me(!1),qe=!I&&!i;return K.createElement("g",{className:un(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:l,animated:c,inactive:qe,updating:ce}]),onClick:Ze=>{var J;const{edges:at,addSelectedEdges:te,unselectNodesAndEdges:je,multiSelectionActive:Me}=ie.getState(),Ue=at.find(he=>he.id===n);Ue&&(I&&(ie.setState({nodesSelectionActive:!1}),Ue.selected&&Me?(je({nodes:[],edges:[Ue]}),(J=Q.current)==null||J.blur()):te([n])),i&&i(Ze,Ue))},onDoubleClick:ae,onContextMenu:Se,onMouseEnter:pe,onMouseMove:Te,onMouseLeave:Re,onKeyDown:q?Ze=>{var at;if(!G&&Av.includes(Ze.key)&&I){const{unselectNodesAndEdges:te,addSelectedEdges:je,edges:Me}=ie.getState();Ze.key==="Escape"?((at=Q.current)==null||at.blur(),te({edges:[Me.find(Ue=>Ue.id===n)]})):je([n])}}:void 0,tabIndex:q?0:void 0,role:q?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Z===null?void 0:Z||`Edge from ${b} to ${y}`,"aria-describedby":q?`${a2}-${Y}`:void 0,ref:Q},!de&&K.createElement(t,{id:n,source:b,target:y,selected:l,animated:c,label:d,labelStyle:u,labelShowBg:f,labelBgStyle:m,labelBgPadding:_,labelBgBorderRadius:g,data:s,style:p,sourceX:x,sourceY:v,targetX:S,targetY:k,sourcePosition:E,targetPosition:j,sourceHandleId:M,targetHandleId:L,markerStart:we,markerEnd:ve,pathOptions:ne,interactionWidth:oe}),re&&K.createElement(K.Fragment,null,(re==="source"||re===!0)&&K.createElement(E2,{position:E,centerX:x,centerY:v,radius:V,onMouseDown:Ze=>We(Ze,!0),onMouseEnter:ze,onMouseOut:Ce,type:"source"}),(re==="target"||re===!0)&&K.createElement(E2,{position:j,centerX:S,centerY:k,radius:V,onMouseDown:Ze=>We(Ze,!1),onMouseEnter:ze,onMouseOut:Ce,type:"target"})))};return e.displayName="EdgeWrapper",A.memo(e)};function iP(t){return{default:vs(t.default||tc),straight:vs(t.bezier||Wh),step:vs(t.step||$h),smoothstep:vs(t.step||Ql),simplebezier:vs(t.simplebezier||Vh),...Object.keys(t).filter(e=>!["default","bezier"].includes(e)).reduce((e,n)=>(e[n]=vs(t[n]||tc),e),{})}}function I2(t,e,n=null){const o=((n==null?void 0:n.x)||0)+e.x,r=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,i=(n==null?void 0:n.height)||e.height;switch(t){case He.Top:return{x:o+s/2,y:r};case He.Right:return{x:o+s,y:r+i/2};case He.Bottom:return{x:o+s/2,y:r+i};case He.Left:return{x:o,y:r+i/2}}}function A2(t,e){return t?t.length!==1&&e?e&&t.find(n=>n.id===e)||null:t[0]:null}function T2(t){var o,r,s,i,a;const e=((o=t==null?void 0:t[jt])==null?void 0:o.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&((r=t==null?void 0:t.positionAbsolute)==null?void 0:r.x)!==void 0&&((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)!==void 0;return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const aP=[{level:0,isMaxLevel:!0,edges:[]}];function lP(t,e,n){return function(o,r,s=!1){let i=-1;const a=o.reduce((c,d)=>{var m,_;const u=Vn(d.zIndex);let f=u?d.zIndex:0;if(s){const g=r.get(d.target),p=r.get(d.source),b=d.selected||(g==null?void 0:g.selected)||(p==null?void 0:p.selected),y=Math.max(((m=p==null?void 0:p[jt])==null?void 0:m.z)||0,((_=g==null?void 0:g[jt])==null?void 0:_.z)||0,1e3);f=(u?d.zIndex:0)+(b?y:0)}return c[f]?c[f].push(d):c[f]=[d],i=f>i?f:i,c},{}),l=Object.entries(a).map(([c,d])=>{const u=+c;return{edges:d,level:u,isMaxLevel:u===i}});return l.length===0?aP:l}(pt(A.useCallback(o=>t?o.edges.filter(r=>{const s=e.get(r.source),i=e.get(r.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&function({sourcePos:a,targetPos:l,sourceWidth:c,sourceHeight:d,targetWidth:u,targetHeight:f,width:m,height:_,transform:g}){const p={x:Math.min(a.x,l.x),y:Math.min(a.y,l.y),x2:Math.max(a.x+c,l.x+u),y2:Math.max(a.y+d,l.y+f)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const b=Fh({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:m/g[2],height:_/g[2]}),y=Math.max(0,Math.min(b.x2,p.x2)-Math.max(b.x,p.x)),x=Math.max(0,Math.min(b.y2,p.y2)-Math.max(b.y,p.y));return Math.ceil(y*x)>0}({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:i.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:i.width,targetHeight:i.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[t,e])),e,n)}const M2={[ps.Arrow]:({color:t="none",strokeWidth:e=1})=>K.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[ps.ArrowClosed]:({color:t="none",strokeWidth:e=1})=>K.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},cP=({id:t,type:e,color:n,width:o=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const l=function(c){const d=qt();return A.useMemo(()=>{var u,f;return Object.prototype.hasOwnProperty.call(M2,c)?M2[c]:((f=(u=d.getState()).onError)==null||f.call(u,"009",pR(c)),null)},[c])}(e);return l?K.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},K.createElement(l,{color:n,strokeWidth:i})):null},O2=({defaultColor:t,rfId:e})=>{const n=pt(A.useCallback((({defaultColor:o,rfId:r})=>s=>{const i=[];return s.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=Gh(c,r);i.includes(d)||(a.push({id:d,color:c.color||o,...c}),i.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))})({defaultColor:t,rfId:e}),[t,e]),(o,r)=>!(o.length!==r.length||o.some((s,i)=>s.id!==r[i].id)));return K.createElement("defs",null,n.map(o=>K.createElement(cP,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};O2.displayName="MarkerDefinitions";var dP=A.memo(O2);const uP=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),D2=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,onEdgeDoubleClick:u,onReconnect:f,onReconnectStart:m,onReconnectEnd:_,reconnectRadius:g,children:p,disableKeyboardA11y:b})=>{const{edgesFocusable:y,edgesUpdatable:x,elementsSelectable:v,width:S,height:k,connectionMode:E,nodeInternals:j,onError:I}=pt(uP,on),T=lP(e,j,n);return S?K.createElement(K.Fragment,null,T.map(({level:M,edges:L,isMaxLevel:B})=>K.createElement("svg",{key:M,style:{zIndex:M},width:S,height:k,className:"react-flow__edges react-flow__container"},B&&K.createElement(dP,{defaultColor:t,rfId:o}),K.createElement("g",null,L.map(O=>{const[z,F,V]=T2(j.get(O.source)),[R,C,H]=T2(j.get(O.target));if(!V||!H)return null;let N=O.type||"default";r[N]||(I==null||I("011",bR(N)),N="default");const $=r[N]||r.default,Y=E===Or.Strict?C.target:(C.target??[]).concat(C.source??[]),Z=A2(F.source,O.sourceHandle),q=A2(Y,O.targetHandle),re=(Z==null?void 0:Z.position)||He.Bottom,ne=(q==null?void 0:q.position)||He.Top,oe=!!(O.focusable||y&&O.focusable===void 0),G=O.reconnectable||O.updatable,Q=f!==void 0&&(G||x&&G===void 0);if(!Z||!q)return I==null||I("008",gR(Z,O)),null;const{sourceX:ce,sourceY:me,targetX:de,targetY:ge}=((ie,we,ve,ae,Se,pe)=>{const Te=I2(ve,ie,we),Re=I2(pe,ae,Se);return{sourceX:Te.x,sourceY:Te.y,targetX:Re.x,targetY:Re.y}})(z,Z,re,R,q,ne);return K.createElement($,{key:O.id,id:O.id,className:un([O.className,s]),type:N,data:O.data,selected:!!O.selected,animated:!!O.animated,hidden:!!O.hidden,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,style:O.style,source:O.source,target:O.target,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerEnd:O.markerEnd,markerStart:O.markerStart,sourceX:ce,sourceY:me,targetX:de,targetY:ge,sourcePosition:re,targetPosition:ne,elementsSelectable:v,onContextMenu:i,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onClick:d,onEdgeDoubleClick:u,onReconnect:f,onReconnectStart:m,onReconnectEnd:_,reconnectRadius:g,rfId:o,ariaLabel:O.ariaLabel,isFocusable:oe,isReconnectable:Q,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth,disableKeyboardA11y:b})})))),p):null};D2.displayName="EdgeRenderer";var hP=A.memo(D2);const fP=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function mP({children:t}){const e=pt(fP);return K.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}const pP={[He.Left]:He.Right,[He.Right]:He.Left,[He.Top]:He.Bottom,[He.Bottom]:He.Top},R2=({nodeId:t,handleType:e,style:n,type:o=or.Bezier,CustomComponent:r,connectionStatus:s})=>{var k,E,j;const{fromNode:i,handleId:a,toX:l,toY:c,connectionMode:d}=pt(A.useCallback(I=>({fromNode:I.nodeInternals.get(t),handleId:I.connectionHandleId,toX:(I.connectionPosition.x-I.transform[0])/I.transform[2],toY:(I.connectionPosition.y-I.transform[1])/I.transform[2],connectionMode:I.connectionMode}),[t]),on),u=(k=i==null?void 0:i[jt])==null?void 0:k.handleBounds;let f=u==null?void 0:u[e];if(d===Or.Loose&&(f=f||(u==null?void 0:u[e==="source"?"target":"source"])),!i||!f)return null;const m=a?f.find(I=>I.id===a):f[0],_=m?m.x+m.width/2:(i.width??0)/2,g=m?m.y+m.height/2:i.height??0,p=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+_,b=(((j=i.positionAbsolute)==null?void 0:j.y)??0)+g,y=m==null?void 0:m.position,x=y?pP[y]:null;if(!y||!x)return null;if(r)return K.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:i,fromHandle:m,fromX:p,fromY:b,toX:l,toY:c,fromPosition:y,toPosition:x,connectionStatus:s});let v="";const S={sourceX:p,sourceY:b,sourcePosition:y,targetX:l,targetY:c,targetPosition:x};return o===or.Bezier?[v]=Vv(S):o===or.Step?[v]=Hh({...S,borderRadius:0}):o===or.SmoothStep?[v]=Hh(S):o===or.SimpleBezier?[v]=Fv(S):v=`M${p},${b} ${l},${c}`,K.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};R2.displayName="ConnectionLine";const gP=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function _P({containerStyle:t,style:e,type:n,component:o}){const{nodeId:r,handleType:s,nodesConnectable:i,width:a,height:l,connectionStatus:c}=pt(gP,on);return r&&s&&a&&i?K.createElement("svg",{style:t,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},K.createElement("g",{className:un(["react-flow__connection",c])},K.createElement(R2,{nodeId:r,handleType:s,style:e,type:n,CustomComponent:o,connectionStatus:c}))):null}function P2(t,e){return A.useRef(null),qt(),A.useMemo(()=>e(t),[t])}const L2=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:_,onSelectionStart:g,onSelectionEnd:p,connectionLineType:b,connectionLineStyle:y,connectionLineComponent:x,connectionLineContainerStyle:v,selectionKeyCode:S,selectionOnDrag:k,selectionMode:E,multiSelectionKeyCode:j,panActivationKeyCode:I,zoomActivationKeyCode:T,deleteKeyCode:M,onlyRenderVisibleElements:L,elementsSelectable:B,selectNodesOnDrag:O,defaultViewport:z,translateExtent:F,minZoom:V,maxZoom:R,preventScrolling:C,defaultMarkerColor:H,zoomOnScroll:N,zoomOnPinch:$,panOnScroll:Y,panOnScrollSpeed:Z,panOnScrollMode:q,zoomOnDoubleClick:re,panOnDrag:ne,onPaneClick:oe,onPaneMouseEnter:G,onPaneMouseMove:Q,onPaneMouseLeave:ce,onPaneScroll:me,onPaneContextMenu:de,onEdgeContextMenu:ge,onEdgeMouseEnter:ie,onEdgeMouseMove:we,onEdgeMouseLeave:ve,onReconnect:ae,onReconnectStart:Se,onReconnectEnd:pe,reconnectRadius:Te,noDragClassName:Re,noWheelClassName:We,noPanClassName:ze,elevateEdgesOnSelect:Ce,disableKeyboardA11y:qe,nodeOrigin:Ze,nodeExtent:at,rfId:te})=>{const je=P2(t,eP),Me=P2(e,iP);return function(Ue){const J=Zi(),he=A.useRef(!1);A.useEffect(()=>{!he.current&&J.viewportInitialized&&Ue&&(setTimeout(()=>Ue(J),1),he.current=!0)},[Ue,J.viewportInitialized])}(s),K.createElement(QR,{onPaneClick:oe,onPaneMouseEnter:G,onPaneMouseMove:Q,onPaneMouseLeave:ce,onPaneContextMenu:de,onPaneScroll:me,deleteKeyCode:M,selectionKeyCode:S,selectionOnDrag:k,selectionMode:E,onSelectionStart:g,onSelectionEnd:p,multiSelectionKeyCode:j,panActivationKeyCode:I,zoomActivationKeyCode:T,elementsSelectable:B,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:N,zoomOnPinch:$,zoomOnDoubleClick:re,panOnScroll:Y,panOnScrollSpeed:Z,panOnScrollMode:q,panOnDrag:ne,defaultViewport:z,translateExtent:F,minZoom:V,maxZoom:R,onSelectionContextMenu:_,preventScrolling:C,noDragClassName:Re,noWheelClassName:We,noPanClassName:ze,disableKeyboardA11y:qe},K.createElement(mP,null,K.createElement(hP,{edgeTypes:Me,onEdgeClick:a,onEdgeDoubleClick:c,onlyRenderVisibleElements:L,onEdgeContextMenu:ge,onEdgeMouseEnter:ie,onEdgeMouseMove:we,onEdgeMouseLeave:ve,onReconnect:ae,onReconnectStart:Se,onReconnectEnd:pe,reconnectRadius:Te,defaultMarkerColor:H,noPanClassName:ze,elevateEdgesOnSelect:!!Ce,disableKeyboardA11y:qe,rfId:te},K.createElement(_P,{style:y,type:b,component:x,containerStyle:v})),K.createElement("div",{className:"react-flow__edgelabel-renderer"}),K.createElement(nP,{nodeTypes:je,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:O,onlyRenderVisibleElements:L,noPanClassName:ze,noDragClassName:Re,disableKeyboardA11y:qe,nodeOrigin:Ze,nodeExtent:at,rfId:te})))};L2.displayName="GraphView";var bP=A.memo(L2);const af=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ir={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:af,nodeExtent:af,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Or.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(t,e)=>{},isValidConnection:void 0},yP=()=>((t,e)=>t?wv(t,e):wv)((t,e)=>({...ir,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:s}=e();t({nodeInternals:ef(n,o,r,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=e();t({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=n!==void 0,s=o!==void 0,i=r?ef(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:s?o:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:l,nodeOrigin:c}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const u=window.getComputedStyle(d),{m22:f}=new window.DOMMatrixReadOnly(u.transform),m=n.reduce((g,p)=>{const b=r.get(p.id);if(b!=null&&b.hidden)r.set(b.id,{...b,[jt]:{...b[jt],handleBounds:void 0}});else if(b){const y=Ph(p.nodeElement);!(!y.width||!y.height||b.width===y.width&&b.height===y.height&&!p.forceUpdate)&&(r.set(b.id,{...b,[jt]:{...b[jt],handleBounds:{source:v2(".source",p.nodeElement,f,c),target:v2(".target",p.nodeElement,f,c)}},...y}),g.push({id:b.id,type:"dimensions",dimensions:y}))}return g},[]);u2(r,c);const _=i||s&&!i&&h2(e,{initial:!0,...a});t({nodeInternals:new Map(r),fitViewOnInitDone:_}),(m==null?void 0:m.length)>0&&(o==null||o(m))},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:s}=e(),i=n.map(a=>{const l={id:a.id,type:"position",dragging:r};return o&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(i)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(s){const c=ef(_2(n,a()),r,i,l);t({nodeInternals:c})}o==null||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=e();let i,a=null;o?i=n.map(l=>sr(l,!0)):(i=xs(s(),n),a=xs(r,[])),oc({changedNodes:i,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=e();let i,a=null;o?i=n.map(l=>sr(l,!0)):(i=xs(r,n),a=xs(s(),[])),oc({changedNodes:a,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:s}=e(),i=o||r;oc({changedNodes:(n||s()).map(a=>(a.selected=!1,sr(a.id,!1))),changedEdges:i.map(a=>sr(a.id,!1)),get:e,set:t})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=e();o==null||o.scaleExtent([n,r]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=e();o==null||o.scaleExtent([r,n]),t({maxZoom:n})},setTranslateExtent:n=>{var o;(o=e().d3Zoom)==null||o.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=e();oc({changedNodes:o().filter(r=>r.selected).map(r=>sr(r.id,!1)),changedEdges:n.filter(r=>r.selected).map(r=>sr(r.id,!1)),get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:o}=e();o.forEach(r=>{r.positionAbsolute=Lh(r.position,n)}),t({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:s,d3Zoom:i,d3Selection:a,translateExtent:l}=e();if(!i||!a||!n.x&&!n.y)return!1;const c=yr.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),d=[[0,0],[r,s]],u=i==null?void 0:i.constrain()(c,d,l);return i.transform(a,u),o[0]!==u.x||o[1]!==u.y||o[2]!==u.k},cancelConnection:()=>t({connectionNodeId:ir.connectionNodeId,connectionHandleId:ir.connectionHandleId,connectionHandleType:ir.connectionHandleType,connectionStatus:ir.connectionStatus,connectionStartHandle:ir.connectionStartHandle,connectionEndHandle:ir.connectionEndHandle}),reset:()=>t({...ir})}),Object.is),lf=({children:t})=>{const e=A.useRef(null);return e.current||(e.current=yP()),K.createElement(uR,{value:e.current},t)};lf.displayName="ReactFlowProvider";const F2=({children:t})=>A.useContext(Jl)?K.createElement(K.Fragment,null,t):K.createElement(lf,null,t);F2.displayName="ReactFlowWrapper";const xP={input:t2,default:Zh,output:o2,group:Qh},wP={default:tc,straight:Wh,step:$h,smoothstep:Ql,simplebezier:Vh},vP=[0,0],kP=[15,15],SP={x:0,y:0,zoom:1},CP={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},cf=A.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:s=xP,edgeTypes:i=wP,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:u,onMoveEnd:f,onConnect:m,onConnectStart:_,onConnectEnd:g,onClickConnectStart:p,onClickConnectEnd:b,onNodeMouseEnter:y,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:S,onNodeDoubleClick:k,onNodeDragStart:E,onNodeDrag:j,onNodeDragStop:I,onNodesDelete:T,onEdgesDelete:M,onSelectionChange:L,onSelectionDragStart:B,onSelectionDrag:O,onSelectionDragStop:z,onSelectionContextMenu:F,onSelectionStart:V,onSelectionEnd:R,connectionMode:C=Or.Strict,connectionLineType:H=or.Bezier,connectionLineStyle:N,connectionLineComponent:$,connectionLineContainerStyle:Y,deleteKeyCode:Z="Backspace",selectionKeyCode:q="Shift",selectionOnDrag:re=!1,selectionMode:ne=Ji.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:G=Xl()?"Meta":"Control",zoomActivationKeyCode:Q=Xl()?"Meta":"Control",snapToGrid:ce=!1,snapGrid:me=kP,onlyRenderVisibleElements:de=!1,selectNodesOnDrag:ge=!0,nodesDraggable:ie,nodesConnectable:we,nodesFocusable:ve,nodeOrigin:ae=vP,edgesFocusable:Se,edgesUpdatable:pe,elementsSelectable:Te,defaultViewport:Re=SP,minZoom:We=.5,maxZoom:ze=2,translateExtent:Ce=af,preventScrolling:qe=!0,nodeExtent:Ze,defaultMarkerColor:at="#b1b1b7",zoomOnScroll:te=!0,zoomOnPinch:je=!0,panOnScroll:Me=!1,panOnScrollSpeed:Ue=.5,panOnScrollMode:J=nr.Free,zoomOnDoubleClick:he=!0,panOnDrag:_e=!0,onPaneClick:ue,onPaneMouseEnter:ye,onPaneMouseMove:Ne,onPaneMouseLeave:Be,onPaneScroll:et,onPaneContextMenu:le,children:Ee,onEdgeContextMenu:Ie,onEdgeDoubleClick:Ve,onEdgeMouseEnter:Ge,onEdgeMouseMove:De,onEdgeMouseLeave:Je,onEdgeUpdate:ot,onEdgeUpdateStart:Xe,onEdgeUpdateEnd:rt,onReconnect:gt,onReconnectStart:xt,onReconnectEnd:Ot,reconnectRadius:wt=10,edgeUpdaterRadius:Vt=10,onNodesChange:Cn,onEdgesChange:hn,noDragClassName:rn="nodrag",noWheelClassName:Xt="nowheel",noPanClassName:eo="nopan",fitView:mo=!1,fitViewOptions:Ss,connectOnClick:Cs=!0,attributionPosition:Ns,proOptions:js,defaultEdgeOptions:Es,elevateNodesOnSelect:ar=!0,elevateEdgesOnSelect:Is=!1,disableKeyboardA11y:As=!1,autoPanOnConnect:Ts=!0,autoPanOnNodeDrag:Lt=!0,connectionRadius:vt=20,isValidConnection:Nn,onError:jn,style:Ms,id:lc,nodeDragThreshold:em,...tm},cc)=>{const nm=lc||"1";return K.createElement("div",{...tm,style:{...Ms,...CP},ref:cc,className:un(["react-flow",r]),"data-testid":"rf__wrapper",id:lc},K.createElement(F2,null,K.createElement(bP,{onInit:c,onMove:d,onMoveStart:u,onMoveEnd:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:S,onNodeDoubleClick:k,nodeTypes:s,edgeTypes:i,connectionLineType:H,connectionLineStyle:N,connectionLineComponent:$,connectionLineContainerStyle:Y,selectionKeyCode:q,selectionOnDrag:re,selectionMode:ne,deleteKeyCode:Z,multiSelectionKeyCode:G,panActivationKeyCode:oe,zoomActivationKeyCode:Q,onlyRenderVisibleElements:de,selectNodesOnDrag:ge,defaultViewport:Re,translateExtent:Ce,minZoom:We,maxZoom:ze,preventScrolling:qe,zoomOnScroll:te,zoomOnPinch:je,zoomOnDoubleClick:he,panOnScroll:Me,panOnScrollSpeed:Ue,panOnScrollMode:J,panOnDrag:_e,onPaneClick:ue,onPaneMouseEnter:ye,onPaneMouseMove:Ne,onPaneMouseLeave:Be,onPaneScroll:et,onPaneContextMenu:le,onSelectionContextMenu:F,onSelectionStart:V,onSelectionEnd:R,onEdgeContextMenu:Ie,onEdgeDoubleClick:Ve,onEdgeMouseEnter:Ge,onEdgeMouseMove:De,onEdgeMouseLeave:Je,onReconnect:gt??ot,onReconnectStart:xt??Xe,onReconnectEnd:Ot??rt,reconnectRadius:wt??Vt,defaultMarkerColor:at,noDragClassName:rn,noWheelClassName:Xt,noPanClassName:eo,elevateEdgesOnSelect:Is,rfId:nm,disableKeyboardA11y:As,nodeOrigin:ae,nodeExtent:Ze}),K.createElement(DR,{nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:m,onConnectStart:_,onConnectEnd:g,onClickConnectStart:p,onClickConnectEnd:b,nodesDraggable:ie,nodesConnectable:we,nodesFocusable:ve,edgesFocusable:Se,edgesUpdatable:pe,elementsSelectable:Te,elevateNodesOnSelect:ar,minZoom:We,maxZoom:ze,nodeExtent:Ze,onNodesChange:Cn,onEdgesChange:hn,snapToGrid:ce,snapGrid:me,connectionMode:C,translateExtent:Ce,connectOnClick:Cs,defaultEdgeOptions:Es,fitView:mo,fitViewOptions:Ss,onNodesDelete:T,onEdgesDelete:M,onNodeDragStart:E,onNodeDrag:j,onNodeDragStop:I,onSelectionDrag:O,onSelectionDragStart:B,onSelectionDragStop:z,noPanClassName:eo,nodeOrigin:ae,rfId:nm,autoPanOnConnect:Ts,autoPanOnNodeDrag:Lt,onError:jn,connectionRadius:vt,isValidConnection:Nn,nodeDragThreshold:em}),K.createElement(MR,{onSelectionChange:L}),Ee,K.createElement(wR,{proOptions:js,position:Ns}),K.createElement(FR,{rfId:nm,disableKeyboardA11y:As})))});function z2(t){return e=>{const[n,o]=A.useState(e),r=A.useCallback(s=>o(i=>t(s,i)),[]);return[n,o,r]}}cf.displayName="ReactFlow";const B2=z2(_2),U2=z2(function(t,e){return g2(t,e)});function NP(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},K.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function jP(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},K.createElement("path",{d:"M0 0h32v4.2H0z"}))}function EP(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},K.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function IP(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},K.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function AP(){return K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},K.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ks=({children:t,className:e,...n})=>K.createElement("button",{type:"button",className:un(["react-flow__controls-button",e]),...n},t);ks.displayName="ControlButton";const TP=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),V2=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:i,onFitView:a,onInteractiveChange:l,className:c,children:d,position:u="bottom-left"})=>{const f=qt(),[m,_]=A.useState(!1),{isInteractive:g,minZoomReached:p,maxZoomReached:b}=pt(TP,on),{zoomIn:y,zoomOut:x,fitView:v}=Zi();return A.useEffect(()=>{_(!0)},[]),m?K.createElement(Kl,{className:un(["react-flow__controls",c]),position:u,style:t,"data-testid":"rf__controls"},e&&K.createElement(K.Fragment,null,K.createElement(ks,{onClick:()=>{y(),s==null||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b},K.createElement(NP,null)),K.createElement(ks,{onClick:()=>{x(),i==null||i()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:p},K.createElement(jP,null))),n&&K.createElement(ks,{className:"react-flow__controls-fitview",onClick:()=>{v(r),a==null||a()},title:"fit view","aria-label":"fit view"},K.createElement(EP,null)),o&&K.createElement(ks,{className:"react-flow__controls-interactive",onClick:()=>{f.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)},title:"toggle interactivity","aria-label":"toggle interactivity"},g?K.createElement(AP,null):K.createElement(IP,null)),d):null};V2.displayName="Controls";var Hn,MP=A.memo(V2);function OP({color:t,dimensions:e,lineWidth:n}){return K.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function DP({color:t,radius:e}){return K.createElement("circle",{cx:e,cy:e,r:e,fill:t})}(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Hn||(Hn={}));const RP={[Hn.Dots]:"#91919a",[Hn.Lines]:"#eee",[Hn.Cross]:"#e2e2e2"},PP={[Hn.Dots]:1,[Hn.Lines]:1,[Hn.Cross]:6},LP=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function H2({id:t,variant:e=Hn.Dots,gap:n=20,size:o,lineWidth:r=1,offset:s=2,color:i,style:a,className:l}){const c=A.useRef(null),{transform:d,patternId:u}=pt(LP,on),f=i||RP[e],m=o||PP[e],_=e===Hn.Dots,g=e===Hn.Cross,p=Array.isArray(n)?n:[n,n],b=[p[0]*d[2]||1,p[1]*d[2]||1],y=m*d[2],x=g?[y,y]:b,v=_?[y/s,y/s]:[x[0]/s,x[1]/s];return K.createElement("svg",{className:un(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},K.createElement("pattern",{id:u+t,x:d[0]%b[0],y:d[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${v[0]},-${v[1]})`},_?K.createElement(DP,{color:f,radius:y/s}):K.createElement(OP,{dimensions:x,color:f,lineWidth:r})),K.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${u+t})`}))}H2.displayName="Background";var FP=A.memo(H2);function df(t){return Math.min(11*t+35,200)}const $2=K.createContext("LR"),W2=A.memo(t=>{const e=X.c(51),{data:n,selected:o}=t,r=$e(n.atom),s=$c().inOrderIds.indexOf(r.id),i=o?"var(--gray-9)":"var(--gray-3)",a=pt(zP),l=A.use($2);let c,d,u,f,m;if(e[0]!==r.code||e[1]!==i||e[2]!==l||e[3]!==o){const M=r.code.split(`
`).length,L=l==="LR"?He.Left:He.Top;let B;e[8]!==i?(B={background:i},e[8]=i,e[9]=B):B=e[9],e[10]!==L||e[11]!==B?(u=h.jsx(rr,{type:"target",id:"inputs",position:L,style:B}),e[10]=L,e[11]=B,e[12]=u):u=e[12];const O=l==="LR"?He.Left:He.Top;let z;e[13]!==i?(z={background:i},e[13]=i,e[14]=z):z=e[14],e[15]!==O||e[16]!==z?(f=h.jsx(rr,{type:"source",id:"inputs",position:O,style:z}),e[15]=O,e[16]=z,e[17]=f):f=e[17];const F=o&&"border-primary";e[18]!==F?(d=Oe("flex flex-col bg-card border border-input/50 rounded-md mx-[2px] overflow-hidden",F),e[18]=F,e[19]=d):d=e[19],c=df(M),e[0]=r.code,e[1]=i,e[2]=l,e[3]=o,e[4]=c,e[5]=d,e[6]=u,e[7]=f}else c=e[4],d=e[5],u=e[6],f=e[7];var _;let g;e[20]!==n.forceWidth||e[21]!==a?(m=n.forceWidth||(_=a,Math.min(Math.max(_-100,100),400)),e[20]=n.forceWidth,e[21]=a,e[22]=m):m=e[22],e[23]!==c||e[24]!==m?(g={height:c,width:m},e[23]=c,e[24]=m,e[25]=g):g=e[25];const p=BV(r.name,s);let b,y,x;e[26]!==p?(b=h.jsx("div",{className:"text-muted-foreground font-semibold text-xs py-1 px-2 bg-muted border-b",children:p}),e[26]=p,e[27]=b):b=e[27],e[28]!==r.code?(y=h.jsx(w$,{code:r.code}),e[28]=r.code,e[29]=y):y=e[29],e[30]!==d||e[31]!==g||e[32]!==b||e[33]!==y?(x=h.jsxs("div",{className:d,style:g,children:[b,y]}),e[30]=d,e[31]=g,e[32]=b,e[33]=y,e[34]=x):x=e[34];const v=l==="LR"?He.Right:He.Bottom;let S,k;e[35]!==i?(S={background:i},e[35]=i,e[36]=S):S=e[36],e[37]!==v||e[38]!==S?(k=h.jsx(rr,{type:"source",id:"outputs",position:v,style:S}),e[37]=v,e[38]=S,e[39]=k):k=e[39];const E=l==="LR"?He.Right:He.Bottom;let j,I,T;return e[40]!==i?(j={background:i},e[40]=i,e[41]=j):j=e[41],e[42]!==E||e[43]!==j?(I=h.jsx(rr,{type:"target",id:"outputs",position:E,style:j}),e[42]=E,e[43]=j,e[44]=I):I=e[44],e[45]!==x||e[46]!==k||e[47]!==I||e[48]!==u||e[49]!==f?(T=h.jsxs("div",{children:[u,f,x,k,I]}),e[45]=x,e[46]=k,e[47]=I,e[48]=u,e[49]=f,e[50]=T):T=e[50],T},(t,e)=>["data","selected","id"].every(n=>t[n]===e[n]));W2.displayName="CustomNode";const q2={custom:W2};function zP(t){const{width:e}=t;return e}const G2=t=>{const e=X.c(18),{maxCount:n,cellIds:o,onClick:r,skipScroll:s}=t,i=$c();let a,l,c,d;if(e[0]!==o||e[1]!==i||e[2]!==n||e[3]!==r||e[4]!==s){c=Symbol.for("react.early_return_sentinel");e:{let u;e[8]!==i?(u=(_,g)=>i.inOrderIds.indexOf(_)-i.inOrderIds.indexOf(g),e[8]=i,e[9]=u):u=e[9];const f=[...o].sort(u);if(o.length===0){let _;e[10]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx("div",{className:"text-muted-foreground",children:"--"}),e[10]=_):_=e[10],c=_;break e}let m;e[11]!==o.length||e[12]!==r||e[13]!==s?(m=(_,g)=>h.jsxs("span",{className:"truncate",children:[h.jsx(_r,{variant:"focus",cellId:_,skipScroll:s,className:"whitespace-nowrap",onClick:r?()=>r(_):void 0},_),g<o.length-1&&", "]},_),e[11]=o.length,e[12]=r,e[13]=s,e[14]=m):m=e[14],a=f.slice(0,n).map(m),l=o.length>n&&h.jsxs(zr,{children:[h.jsx(Qs,{asChild:!0,children:h.jsxs("span",{className:"whitespace-nowrap text-muted-foreground text-xs hover:underline cursor-pointer",children:["+",o.length-n," more"]})}),h.jsx(Gs,{className:"w-auto",children:h.jsx("div",{className:"flex flex-col gap-1 py-1",children:f.slice(n).map(_=>h.jsx(_r,{variant:"focus",cellId:_,className:"whitespace-nowrap",onClick:r?()=>r(_):void 0},_))})})]})}e[0]=o,e[1]=i,e[2]=n,e[3]=r,e[4]=s,e[5]=a,e[6]=l,e[7]=c}else a=e[5],l=e[6],c=e[7];return c!==Symbol.for("react.early_return_sentinel")?c:(e[15]!==a||e[16]!==l?(d=h.jsxs(h.Fragment,{children:[a,l]}),e[15]=a,e[16]=l,e[17]=d):d=e[17],d)},uf=t=>{const e=X.c(15);let n,o,r,s;e[0]!==t?({name:o,declaredBy:n,onClick:r,...s}=t,e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=s):(n=e[1],o=e[2],r=e[3],s=e[4]);const i=n.length>1?"destructive":"outline";let a,l,c;return e[5]!==o||e[6]!==r?(a=async d=>{r?r(d):(await xn(o),lt({title:"Copied to clipboard"}))},e[5]=o,e[6]=r,e[7]=a):a=e[7],e[8]!==o||e[9]!==i||e[10]!==a?(l=h.jsx(oS,{title:o,variant:i,className:"rounded-sm text-ellipsis block overflow-hidden max-w-fit cursor-pointer font-medium",onClick:a,children:o}),e[8]=o,e[9]=i,e[10]=a,e[11]=l):l=e[11],e[12]!==s||e[13]!==l?(c=h.jsx("div",{className:"max-w-[130px]",...s,children:l}),e[12]=s,e[13]=l,e[14]=c):c=e[14],c},hf=A.memo(t=>{const e=X.c(38),{onChange:n,view:o,settings:r,onSettingsChange:s}=t;let i;e[0]!==s||e[1]!==r?(i=(O,z)=>{s({...r,[O]:z})},e[0]=s,e[1]=r,e[2]=i):i=e[2];const a=i;let l,c,d,u,f,m;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(Qs,{asChild:!0,children:h.jsx(Pe,{variant:"text",size:"xs",children:h.jsx(i4,{className:"w-4 h-4"})})}),e[3]=l):l=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx("div",{className:"font-semibold pb-4",children:"Settings"}),e[4]=c):c=e[4],e[5]!==a?(d=O=>a("hidePureMarkdown",!!O),e[5]=a,e[6]=d):d=e[6],e[7]!==r.hidePureMarkdown||e[8]!==d?(u=h.jsx(z4,{"data-testid":"hide-pure-markdown-checkbox",id:"hide-pure-markdown",checked:r.hidePureMarkdown,onCheckedChange:d}),e[7]=r.hidePureMarkdown,e[8]=d,e[9]=u):u=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(Fr,{htmlFor:"hide-pure-markdown",children:"Hide pure markdown"}),e[10]=f):f=e[10],e[11]!==u?(m=h.jsxs(zr,{children:[l,h.jsxs(Gs,{className:"w-auto p-2 text-muted-foreground",children:[c,h.jsxs("div",{className:"flex items-center gap-2",children:[u,f]})]})]}),e[11]=u,e[12]=m):m=e[12];const _=m,g=o==="_minimap_";let p,b,y;e[13]!==n?(p=()=>n("_minimap_"),e[13]=n,e[14]=p):p=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(Hp,{className:"w-4 h-4 mr-1"}),e[15]=b):b=e[15],e[16]!==g||e[17]!==p?(y=h.jsxs(Pe,{variant:"outline",className:"bg-background","aria-selected":g,size:"xs",onClick:p,children:[b,"Mini Map"]}),e[16]=g,e[17]=p,e[18]=y):y=e[18];const x=o==="TB";let v,S,k;e[19]!==n?(v=()=>n("TB"),e[19]=n,e[20]=v):v=e[20],e[21]===Symbol.for("react.memo_cache_sentinel")?(S=h.jsx(Ta,{className:"w-4 h-4 mr-1"}),e[21]=S):S=e[21],e[22]!==x||e[23]!==v?(k=h.jsxs(Pe,{variant:"outline",className:"bg-background","aria-selected":x,size:"xs",onClick:v,children:[S,"Vertical Tree"]}),e[22]=x,e[23]=v,e[24]=k):k=e[24];const E=o==="LR";let j,I,T,M;e[25]!==n?(j=()=>n("LR"),e[25]=n,e[26]=j):j=e[26],e[27]===Symbol.for("react.memo_cache_sentinel")?(I=h.jsx(Ta,{className:"w-4 h-4 mr-1 transform -rotate-90"}),e[27]=I):I=e[27],e[28]!==E||e[29]!==j?(T=h.jsxs(Pe,{variant:"outline",className:"bg-background","aria-selected":E,size:"xs",onClick:j,children:[I," ","Horizontal Tree"]}),e[28]=E,e[29]=j,e[30]=T):T=e[30],e[31]!==y||e[32]!==k||e[33]!==T?(M=h.jsxs("div",{className:"flex gap-2",children:[y,k,T]}),e[31]=y,e[32]=k,e[33]=T,e[34]=M):M=e[34];const L=o!=="_minimap_"&&_;let B;return e[35]!==M||e[36]!==L?(B=h.jsxs(Kl,{position:"top-right",className:"flex flex-col items-end gap-2",children:[M,L]}),e[35]=M,e[36]=L,e[37]=B):B=e[37],B});hf.displayName="GraphToolbar";const sc=A.memo(t=>{const e=X.c(11),{selection:n,variables:o,onClearSelection:r}=t;if(!n)return null;const s=BP;let i;e[0]!==r||e[1]!==n.id||e[2]!==n.source||e[3]!==n.target||e[4]!==n.type||e[5]!==o?(i=()=>{if(n.type==="node"){const d=Object.values(o).filter(m=>m.usedBy.includes(n.id)),u=Object.values(o).filter(m=>m.declaredBy.includes(n.id)),f=(m,_)=>h.jsxs(h.Fragment,{children:[m.length===0&&h.jsx("div",{className:"text-muted-foreground text-sm text-center",children:"--"}),h.jsx("div",{className:"grid grid-cols-5 gap-3 items-center text-sm py-1 flex-1 empty:hidden",children:m.map(g=>h.jsxs(K.Fragment,{children:[h.jsx(uf,{declaredBy:g.declaredBy,name:g.name}),h.jsxs("div",{className:"truncate col-span-2",title:g.value??"",children:[g.value,h.jsxs("span",{className:"ml-1 truncate text-foreground/60 font-mono",children:["(",g.dataType,")"]})]}),h.jsx("div",{className:"truncate col-span-2 gap-1 items-center",children:h.jsx(G2,{skipScroll:!0,onClick:()=>s(_==="in"?g.declaredBy[0]:g.usedBy[0],g.name),maxCount:3,cellIds:g.usedBy})})]},g.name))})]});return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"font-bold py-2 flex items-center gap-2 border-b px-3",children:[h.jsx(uc,{className:"w-5 h-5"}),h.jsx(_r,{cellId:n.id}),h.jsx("div",{className:"flex-1"}),h.jsx(v0,{cellId:n.id,children:h.jsx(Pe,{variant:"ghost",size:"icon",children:h.jsx(Zc,{className:"w-4 h-4"})})}),h.jsx(Pe,{variant:"text",size:"icon",onClick:()=>{r()},children:h.jsx(no,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"text-sm flex flex-col py-3 pl-2 pr-4 flex-1 justify-center",children:[h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[h.jsx(gn,{className:"w-4 h-4"}),"Outputs"]}),f(u,"out")]}),h.jsx("hr",{className:"border-divider my-3"}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[h.jsx(up,{className:"w-4 h-4"}),"Inputs"]}),f(d,"in")]})]})]})}if(n.type==="edge"){const d=Object.values(o).filter(u=>u.declaredBy.includes(n.source)&&u.usedBy.includes(n.target));return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"font-bold py-2 flex items-center gap-2 border-b px-3",children:[h.jsx(Oa,{className:"w-4 h-4"}),h.jsx(_r,{cellId:n.source}),h.jsx(Jc,{className:"w-4 h-4"}),h.jsx(_r,{cellId:n.target})]}),h.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-[350px] items-center text-sm p-3 flex-1",children:d.map(u=>h.jsxs(K.Fragment,{children:[h.jsx(uf,{declaredBy:u.declaredBy,name:u.name,onClick:()=>{s(u.declaredBy[0],u.name)}}),h.jsx("div",{className:"truncate text-foreground/60 font-mono",children:u.dataType}),h.jsx("div",{className:"truncate col-span-2",title:u.value??"",children:u.value})]},u.name))})]})}},e[0]=r,e[1]=n.id,e[2]=n.source,e[3]=n.target,e[4]=n.type,e[5]=o,e[6]=i):i=e[6];const a=i;let l,c;return e[7]!==a?(l=a(),e[7]=a,e[8]=l):l=e[8],e[9]!==l?(c=h.jsx(Kl,{position:"bottom-left",className:"max-h-[90%] flex flex-col w-[calc(100%-5rem)]",children:h.jsx("div",{className:"min-h-[100px] shadow-md rounded-md border max-w-[550px] border-primary/40 my-4 min-w-[240px] bg-[var(--slate-1)] text-muted-foreground/80 flex flex-col overflow-y-auto",children:l})}),e[9]=l,e[10]=c):c=e[10],c});function BP(t,e){const n=mc(t);n&&Zm(n,e)}function Y2(){const t=X.c(7),e=Zi(),n=pt(VP),o=pt(UP);let r;t[0]!==e?(r=()=>{e.fitView({duration:100})},t[0]=e,t[1]=r):r=t[1];const s=UV(r,100);let i,a;t[2]!==s||t[3]!==o||t[4]!==n?(i=()=>{n&&o&&s()},a=[n,o,s],t[2]=s,t[3]=o,t[4]=n,t[5]=i,t[6]=a):(i=t[5],a=t[6]),A.useEffect(i,a)}function UP(t){const{height:e}=t;return e}function VP(t){const{width:e}=t;return e}sc.displayName="GraphSelectionPanel";const J2=new class{createEdge(t,e,n){return{type:"smoothstep",pathOptions:{offset:20,borderRadius:100},data:{direction:n},markerEnd:{type:ps.Arrow},id:`${t}-${e}-${n}`,source:t,sourceHandle:n,targetHandle:n,target:e}}createNode(t,e,n){return{id:t,data:{atom:e},width:250,type:"custom",height:df(ct.get(e).code.trim().split(`
`).length),position:{x:0,y:n+20}}}createElements(t,e,n,o){let r=0;const s=[],i=[];for(const[l,c]of Km.zip(t,e)){const d=this.createNode(l,c,r);s.push(d),r=d.position.y+(d.height||0)}const a=new Set;for(const l of Object.values(n)){const{declaredBy:c,usedBy:d}=l;for(const u of c)for(const f of d){const m=`${u}-${f}`;a.has(m)||(a.add(m),i.push(this.createEdge(u,f,"inputs"),this.createEdge(u,f,"outputs")))}}return{nodes:s,edges:i}}},HP=t=>{const e=X.c(37),{cellIds:n,variables:o,cellAtoms:r,children:s}=t;let i;e[0]!==r||e[1]!==n||e[2]!==o?(i=J2.createElements(n,r,o,!1),e[0]=r,e[1]=n,e[2]=o,e[3]=i):i=e[3];const{nodes:a,edges:l}=i;let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c=[],e[4]=c):c=e[4];const[d,u]=U2(c),[f,m]=B2(a),[_,g]=A.useState(),[p,b]=A.useState(),y=A.useRef(!1);Y2();const x=pt($P);let v;e[5]!==u||e[6]!==m?(v=C=>{m(C.nodes),u([])},e[5]=u,e[6]=m,e[7]=v):v=e[7];const S=tt(v);let k,E,j,I;e[8]!==r||e[9]!==n||e[10]!==S||e[11]!==o?(k=()=>{y.current?S(J2.createElements(n,r,o,!1)):y.current=!0},E=[n,o,r,S],e[8]=r,e[9]=n,e[10]=S,e[11]=o,e[12]=k,e[13]=E):(k=e[12],E=e[13]),A.useEffect(k,E),e[14]!==l||e[15]!==_||e[16]!==u?(j=()=>{if(_){const C=l.filter(H=>{const{source:N,target:$,data:Y}=H;return N===_&&Y.direction==="outputs"||$===_&&Y.direction==="inputs"});u(C)}},I=[_,u,l],e[14]=l,e[15]=_,e[16]=u,e[17]=j,e[18]=I):(j=e[17],I=e[18]),A.useEffect(j,I);const T=function(C,H){const N=X.c(17);let $,Y;if(N[0]!==H||N[1]!==C){let Q;N[3]!==H?(Q=(ce,me)=>{const{position:de}=me;return Math.min(ce,de.y-H/2-10)},N[3]=H,N[4]=Q):Q=N[4],Y=C.reduce(Q,Number.POSITIVE_INFINITY),N[0]=H,N[1]=C,N[2]=Y}else Y=N[2];const Z=Y;let q;if(N[5]!==H||N[6]!==C){let Q;N[8]!==H?(Q=(ce,me)=>{const{position:de}=me;return Math.max(ce,de.y+H/2+10)},N[8]=H,N[9]=Q):Q=N[9],q=C.reduce(Q,Number.NEGATIVE_INFINITY),N[5]=H,N[6]=C,N[7]=q}else q=N[7];const re=q;let ne,oe,G;return N[10]!==Z?(ne=[Number.NEGATIVE_INFINITY,Z],N[10]=Z,N[11]=ne):ne=N[11],N[12]!==re?(oe=[Number.POSITIVE_INFINITY,re],N[12]=re,N[13]=oe):oe=N[13],N[14]!==ne||N[15]!==oe?(G=[ne,oe],N[14]=ne,N[15]=oe,N[16]=G):G=N[16],$=G,$}(f,x);let M;e[19]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{g(void 0),b(void 0)},e[19]=M):M=e[19];const L=M;let B;e[20]!==d||e[21]!==p||e[22]!==_||e[23]!==o?(B=()=>p?h.jsx(sc,{selection:{type:"edge",source:p.source,target:p.target},onClearSelection:L,variables:o,edges:d}):_?h.jsx(sc,{selection:{type:"node",id:_},variables:o,edges:d,onClearSelection:L}):null,e[20]=d,e[21]=p,e[22]=_,e[23]=o,e[24]=B):B=e[24];const O=B;let z,F,V,R;return e[25]!==u?(z=(C,H)=>{const N=H.id;g(N),b(void 0),u([])},e[25]=u,e[26]=z):z=e[26],e[27]===Symbol.for("react.memo_cache_sentinel")?(F=(C,H)=>{b(H)},e[27]=F):F=e[27],e[28]!==O?(V=O(),e[28]=O,e[29]=V):V=e[29],e[30]!==s||e[31]!==d||e[32]!==f||e[33]!==z||e[34]!==V||e[35]!==T?(R=h.jsxs(cf,{nodes:f,edges:d,nodeTypes:q2,translateExtent:T,onNodeClick:z,onNodeDoubleClick:WP,onEdgeClick:F,snapToGrid:!0,fitView:!0,elementsSelectable:!0,minZoom:1,maxZoom:1,draggable:!1,panOnScrollMode:nr.Vertical,zoomOnDoubleClick:!1,nodesDraggable:!1,nodesConnectable:!1,nodesFocusable:!1,edgesFocusable:!1,selectNodesOnDrag:!1,panOnDrag:!1,preventScrolling:!1,zoomOnPinch:!1,panOnScroll:!0,autoPanOnNodeDrag:!1,autoPanOnConnect:!1,children:[V,s]}),e[30]=s,e[31]=d,e[32]=f,e[33]=z,e[34]=V,e[35]=T,e[36]=R):R=e[36],R};function $P(t){const{height:e}=t;return e}function WP(t,e){rS(e.id,"focus")}var ff,K2,X2,Z2,Q2,ek,mf,tk,pf,nk,gf,ok,_f,rk,bf,sk,yf,ik,xf,ak,wf,lk,vf,ck,kf,dk,Sf,uk,Cf,hk,Nf,fk,jf,mk,pk,gk,_k,bk,yk,xk,Ef,wk,If,vk,Af,kk,Tf,Sk,Mf,Ck,Of,Nk,Df,jk,Rf,Ek,Pf,Ik,Lf,Ak,Ff,Tk,zf,Mk,Bf,Ok,Uf,Dk,Rk,Pk,Lk,Fk,zk,Bk,Vf,Uk,Hf,Vk,Hk,$k,$f,Wk,Wf,qk,qf,Gk,Gf,Yk,Yf,Jk,Kk,Xk,Zk,Qk;function Jf(){if(K2)return ff;K2=1;var t="\0";function e(s,i){s[i]?s[i]++:s[i]=1}function n(s,i){--s[i]||delete s[i]}function o(s,i,a,l){var c=""+i,d=""+a;if(!s&&c>d){var u=c;c=d,d=u}return c+""+d+""+(l===void 0?"\0":l)}function r(s,i){return o(s,i.v,i.w,i.name)}return ff=class{constructor(s){ee(this,"_isDirected",!0);ee(this,"_isMultigraph",!1);ee(this,"_isCompound",!1);ee(this,"_label");ee(this,"_defaultNodeLabelFn",()=>{});ee(this,"_defaultEdgeLabelFn",()=>{});ee(this,"_nodes",{});ee(this,"_in",{});ee(this,"_preds",{});ee(this,"_out",{});ee(this,"_sucs",{});ee(this,"_edgeObjs",{});ee(this,"_edgeLabels",{});ee(this,"_nodeCount",0);ee(this,"_edgeCount",0);ee(this,"_parent");ee(this,"_children");s&&(this._isDirected=!Object.hasOwn(s,"directed")||s.directed,this._isMultigraph=!!Object.hasOwn(s,"multigraph")&&s.multigraph,this._isCompound=!!Object.hasOwn(s,"compound")&&s.compound),this._isCompound&&(this._parent={},this._children={},this._children[t]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(s){return this._label=s,this}graph(){return this._label}setDefaultNodeLabel(s){return this._defaultNodeLabelFn=s,typeof s!="function"&&(this._defaultNodeLabelFn=()=>s),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var s=this;return this.nodes().filter(i=>Object.keys(s._in[i]).length===0)}sinks(){var s=this;return this.nodes().filter(i=>Object.keys(s._out[i]).length===0)}setNodes(s,i){var a=arguments,l=this;return s.forEach(function(c){a.length>1?l.setNode(c,i):l.setNode(c)}),this}setNode(s,i){return Object.hasOwn(this._nodes,s)?(arguments.length>1&&(this._nodes[s]=i),this):(this._nodes[s]=arguments.length>1?i:this._defaultNodeLabelFn(s),this._isCompound&&(this._parent[s]=t,this._children[s]={},this._children[t][s]=!0),this._in[s]={},this._preds[s]={},this._out[s]={},this._sucs[s]={},++this._nodeCount,this)}node(s){return this._nodes[s]}hasNode(s){return Object.hasOwn(this._nodes,s)}removeNode(s){var i=this;if(Object.hasOwn(this._nodes,s)){var a=l=>i.removeEdge(i._edgeObjs[l]);delete this._nodes[s],this._isCompound&&(this._removeFromParentsChildList(s),delete this._parent[s],this.children(s).forEach(function(l){i.setParent(l)}),delete this._children[s]),Object.keys(this._in[s]).forEach(a),delete this._in[s],delete this._preds[s],Object.keys(this._out[s]).forEach(a),delete this._out[s],delete this._sucs[s],--this._nodeCount}return this}setParent(s,i){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(i===void 0)i=t;else{for(var a=i+="";a!==void 0;a=this.parent(a))if(a===s)throw new Error("Setting "+i+" as parent of "+s+" would create a cycle");this.setNode(i)}return this.setNode(s),this._removeFromParentsChildList(s),this._parent[s]=i,this._children[i][s]=!0,this}_removeFromParentsChildList(s){delete this._children[this._parent[s]][s]}parent(s){if(this._isCompound){var i=this._parent[s];if(i!==t)return i}}children(s=t){if(this._isCompound){var i=this._children[s];if(i)return Object.keys(i)}else{if(s===t)return this.nodes();if(this.hasNode(s))return[]}}predecessors(s){var i=this._preds[s];if(i)return Object.keys(i)}successors(s){var i=this._sucs[s];if(i)return Object.keys(i)}neighbors(s){var i=this.predecessors(s);if(i){const l=new Set(i);for(var a of this.successors(s))l.add(a);return Array.from(l.values())}}isLeaf(s){return(this.isDirected()?this.successors(s):this.neighbors(s)).length===0}filterNodes(s){var i=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});i.setGraph(this.graph());var a=this;Object.entries(this._nodes).forEach(function([d,u]){s(d)&&i.setNode(d,u)}),Object.values(this._edgeObjs).forEach(function(d){i.hasNode(d.v)&&i.hasNode(d.w)&&i.setEdge(d,a.edge(d))});var l={};function c(d){var u=a.parent(d);return u===void 0||i.hasNode(u)?(l[d]=u,u):u in l?l[u]:c(u)}return this._isCompound&&i.nodes().forEach(d=>i.setParent(d,c(d))),i}setDefaultEdgeLabel(s){return this._defaultEdgeLabelFn=s,typeof s!="function"&&(this._defaultEdgeLabelFn=()=>s),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(s,i){var a=this,l=arguments;return s.reduce(function(c,d){return l.length>1?a.setEdge(c,d,i):a.setEdge(c,d),d}),this}setEdge(){var s,i,a,l,c=!1,d=arguments[0];typeof d=="object"&&d!==null&&"v"in d?(s=d.v,i=d.w,a=d.name,arguments.length===2&&(l=arguments[1],c=!0)):(s=d,i=arguments[1],a=arguments[3],arguments.length>2&&(l=arguments[2],c=!0)),s=""+s,i=""+i,a!==void 0&&(a=""+a);var u=o(this._isDirected,s,i,a);if(Object.hasOwn(this._edgeLabels,u))return c&&(this._edgeLabels[u]=l),this;if(a!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(s),this.setNode(i),this._edgeLabels[u]=c?l:this._defaultEdgeLabelFn(s,i,a);var f=function(m,_,g,p){var b=""+_,y=""+g;if(!m&&b>y){var x=b;b=y,y=x}var v={v:b,w:y};return p&&(v.name=p),v}(this._isDirected,s,i,a);return s=f.v,i=f.w,Object.freeze(f),this._edgeObjs[u]=f,e(this._preds[i],s),e(this._sucs[s],i),this._in[i][u]=f,this._out[s][u]=f,this._edgeCount++,this}edge(s,i,a){var l=arguments.length===1?r(this._isDirected,arguments[0]):o(this._isDirected,s,i,a);return this._edgeLabels[l]}edgeAsObj(){const s=this.edge(...arguments);return typeof s!="object"?{label:s}:s}hasEdge(s,i,a){var l=arguments.length===1?r(this._isDirected,arguments[0]):o(this._isDirected,s,i,a);return Object.hasOwn(this._edgeLabels,l)}removeEdge(s,i,a){var l=arguments.length===1?r(this._isDirected,arguments[0]):o(this._isDirected,s,i,a),c=this._edgeObjs[l];return c&&(s=c.v,i=c.w,delete this._edgeLabels[l],delete this._edgeObjs[l],n(this._preds[i],s),n(this._sucs[s],i),delete this._in[i][l],delete this._out[s][l],this._edgeCount--),this}inEdges(s,i){var a=this._in[s];if(a){var l=Object.values(a);return i?l.filter(c=>c.v===i):l}}outEdges(s,i){var a=this._out[s];if(a){var l=Object.values(a);return i?l.filter(c=>c.w===i):l}}nodeEdges(s,i){var a=this.inEdges(s,i);if(a)return a.concat(this.outEdges(s,i))}},ff}function qP(){return ek?Q2:(ek=1,Q2={Graph:Jf(),version:Z2?X2:(Z2=1,X2="2.2.4")})}function GP(){if(tk)return mf;tk=1;var t=Jf();function e(o){return o.nodes().map(function(r){var s=o.node(r),i=o.parent(r),a={v:r};return s!==void 0&&(a.value=s),i!==void 0&&(a.parent=i),a})}function n(o){return o.edges().map(function(r){var s=o.edge(r),i={v:r.v,w:r.w};return r.name!==void 0&&(i.name=r.name),s!==void 0&&(i.value=s),i})}return mf={write:function(o){var r={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:e(o),edges:n(o)};return o.graph()!==void 0&&(r.value=structuredClone(o.graph())),r},read:function(o){var r=new t(o.options).setGraph(o.value);return o.nodes.forEach(function(s){r.setNode(s.v,s.value),s.parent&&r.setParent(s.v,s.parent)}),o.edges.forEach(function(s){r.setEdge({v:s.v,w:s.w,name:s.name},s.value)}),r}},mf}function YP(){return nk||(nk=1,pf=function(t){var e,n={},o=[];function r(s){Object.hasOwn(n,s)||(n[s]=!0,e.push(s),t.successors(s).forEach(r),t.predecessors(s).forEach(r))}return t.nodes().forEach(function(s){e=[],r(s),e.length&&o.push(e)}),o}),pf}function e3(){return ok?gf:(ok=1,gf=class{constructor(){ee(this,"_arr",[]);ee(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var e=this._keyIndices[t];if(e!==void 0)return this._arr[e].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,e){var n=this._keyIndices;if(t=String(t),!Object.hasOwn(n,t)){var o=this._arr,r=o.length;return n[t]=r,o.push({key:t,priority:e}),this._decrease(r),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)}_heapify(t){var e=this._arr,n=2*t,o=n+1,r=t;n<e.length&&(r=e[n].priority<e[r].priority?n:r,o<e.length&&(r=e[o].priority<e[r].priority?o:r),r!==t&&(this._swap(t,r),this._heapify(r)))}_decrease(t){for(var e,n=this._arr,o=n[t].priority;t!==0&&!(n[e=t>>1].priority<o);)this._swap(t,e),t=e}_swap(t,e){var n=this._arr,o=this._keyIndices,r=n[t],s=n[e];n[t]=s,n[e]=r,o[s.key]=t,o[r.key]=e}},gf)}function t3(){if(rk)return _f;rk=1;var t=e3();_f=function(n,o,r,s){return function(i,a,l,c){var d,u,f={},m=new t,_=function(g){var p=g.v!==d?g.v:g.w,b=f[p],y=l(g),x=u.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+y);x<b.distance&&(b.distance=x,b.predecessor=d,m.decrease(p,x))};for(i.nodes().forEach(function(g){var p=g===a?0:Number.POSITIVE_INFINITY;f[g]={distance:p},m.add(g,p)});m.size()>0&&(d=m.removeMin(),(u=f[d]).distance!==Number.POSITIVE_INFINITY);)c(d).forEach(_);return f}(n,String(o),r||e,s||function(i){return n.outEdges(i)})};var e=()=>1;return _f}function JP(){if(sk)return bf;sk=1;var t=t3();return bf=function(e,n,o){return e.nodes().reduce(function(r,s){return r[s]=t(e,s,n,o),r},{})},bf}function n3(){return ik||(ik=1,yf=function(t){var e=0,n=[],o={},r=[];function s(i){var a=o[i]={onStack:!0,lowlink:e,index:e++};if(n.push(i),t.successors(i).forEach(function(d){Object.hasOwn(o,d)?o[d].onStack&&(a.lowlink=Math.min(a.lowlink,o[d].index)):(s(d),a.lowlink=Math.min(a.lowlink,o[d].lowlink))}),a.lowlink===a.index){var l,c=[];do l=n.pop(),o[l].onStack=!1,c.push(l);while(i!==l);r.push(c)}}return t.nodes().forEach(function(i){Object.hasOwn(o,i)||s(i)}),r}),yf}function KP(){if(ak)return xf;ak=1;var t=n3();return xf=function(e){return t(e).filter(function(n){return n.length>1||n.length===1&&e.hasEdge(n[0],n[0])})},xf}function XP(){if(lk)return wf;lk=1,wf=function(e,n,o){return function(r,s,i){var a={},l=r.nodes();return l.forEach(function(c){a[c]={},a[c][c]={distance:0},l.forEach(function(d){c!==d&&(a[c][d]={distance:Number.POSITIVE_INFINITY})}),i(c).forEach(function(d){var u=d.v===c?d.w:d.v,f=s(d);a[c][u]={distance:f,predecessor:c}})}),l.forEach(function(c){var d=a[c];l.forEach(function(u){var f=a[u];l.forEach(function(m){var _=f[c],g=d[m],p=f[m],b=_.distance+g.distance;b<p.distance&&(p.distance=b,p.predecessor=g.predecessor)})})}),a}(e,n||t,o||function(r){return e.outEdges(r)})};var t=()=>1;return wf}function o3(){if(ck)return vf;function t(n){var o={},r={},s=[];if(n.sinks().forEach(function i(a){if(Object.hasOwn(r,a))throw new e;Object.hasOwn(o,a)||(r[a]=!0,o[a]=!0,n.predecessors(a).forEach(i),delete r[a],s.push(a))}),Object.keys(o).length!==n.nodeCount())throw new e;return s}ck=1;class e extends Error{constructor(){super(...arguments)}}return vf=t,t.CycleException=e,vf}function ZP(){if(dk)return kf;dk=1;var t=o3();return kf=function(e){try{t(e)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0},kf}function r3(){if(uk)return Sf;function t(o,r,s,i){for(var a=[[o,!1]];a.length>0;){var l=a.pop();l[1]?i.push(l[0]):Object.hasOwn(s,l[0])||(s[l[0]]=!0,a.push([l[0],!0]),n(r(l[0]),c=>a.push([c,!1])))}}function e(o,r,s,i){for(var a=[o];a.length>0;){var l=a.pop();Object.hasOwn(s,l)||(s[l]=!0,i.push(l),n(r(l),c=>a.push(c)))}}function n(o,r){for(var s=o.length;s--;)r(o[s],s,o);return o}return uk=1,Sf=function(o,r,s){Array.isArray(r)||(r=[r]);var i=o.isDirected()?d=>o.successors(d):d=>o.neighbors(d),a=s==="post"?t:e,l=[],c={};return r.forEach(d=>{if(!o.hasNode(d))throw new Error("Graph does not have node: "+d);a(d,i,c,l)}),l},Sf}function QP(){if(hk)return Cf;hk=1;var t=r3();return Cf=function(e,n){return t(e,n,"post")},Cf}function eL(){if(fk)return Nf;fk=1;var t=r3();return Nf=function(e,n){return t(e,n,"pre")},Nf}function tL(){if(mk)return jf;mk=1;var t=Jf(),e=e3();return jf=function(n,o){var r,s=new t,i={},a=new e;function l(d){var u=d.v===r?d.w:d.v,f=a.priority(u);if(f!==void 0){var m=o(d);m<f&&(i[u]=r,a.decrease(u,m))}}if(n.nodeCount()===0)return s;n.nodes().forEach(function(d){a.add(d,Number.POSITIVE_INFINITY),s.setNode(d)}),a.decrease(n.nodes()[0],0);for(var c=!1;a.size()>0;){if(r=a.removeMin(),Object.hasOwn(i,r))s.setEdge(r,i[r]);else{if(c)throw new Error("Input graph is not connected: "+n);c=!0}n.nodeEdges(r).forEach(l)}return s},jf}function Qn(){if(bk)return _k;bk=1;var t=qP();return _k={Graph:t.Graph,json:GP(),alg:gk?pk:(gk=1,pk={components:YP(),dijkstra:t3(),dijkstraAll:JP(),findCycles:KP(),floydWarshall:XP(),isAcyclic:ZP(),postorder:QP(),preorder:eL(),prim:tL(),tarjan:n3(),topsort:o3()}),version:t.version}}function nL(){if(wk)return Ef;wk=1;let t=Qn().Graph,e=function(){if(xk)return yk;function s(a){a._prev._next=a._next,a._next._prev=a._prev,delete a._next,delete a._prev}function i(a,l){if(a!=="_next"&&a!=="_prev")return l}return xk=1,yk=class{constructor(){let a={};a._next=a._prev=a,this._sentinel=a}dequeue(){let a=this._sentinel,l=a._prev;if(l!==a)return s(l),l}enqueue(a){let l=this._sentinel;a._prev&&a._next&&s(a),a._next=l._next,l._next._prev=a,l._next=a,a._prev=l}toString(){let a=[],l=this._sentinel,c=l._prev;for(;c!==l;)a.push(JSON.stringify(c,i)),c=c._prev;return"["+a.join(", ")+"]"}}}();Ef=function(s,i){if(s.nodeCount()<=1)return[];let a=function(l,c){let d=new t,u=0,f=0;l.nodes().forEach(g=>{d.setNode(g,{v:g,in:0,out:0})}),l.edges().forEach(g=>{let p=d.edge(g.v,g.w)||0,b=c(g),y=p+b;d.setEdge(g.v,g.w,y),f=Math.max(f,d.node(g.v).out+=b),u=Math.max(u,d.node(g.w).in+=b)});let m=function(g){const p=[];for(let b=0;b<g;b++)p.push(b);return p}(f+u+3).map(()=>new e),_=u+1;return d.nodes().forEach(g=>{r(m,_,d.node(g))}),{graph:d,buckets:m,zeroIdx:_}}(s,i||n);return function(l,c,d){let u,f=[],m=c[c.length-1],_=c[0];for(;l.nodeCount();){for(;u=_.dequeue();)o(l,c,d,u);for(;u=m.dequeue();)o(l,c,d,u);if(l.nodeCount()){for(let g=c.length-2;g>0;--g)if(u=c[g].dequeue(),u){f=f.concat(o(l,c,d,u,!0));break}}}return f}(a.graph,a.buckets,a.zeroIdx).flatMap(l=>s.outEdges(l.v,l.w))};let n=()=>1;function o(s,i,a,l,c){let d=c?[]:void 0;return s.inEdges(l.v).forEach(u=>{let f=s.edge(u),m=s.node(u.v);c&&d.push({v:u.v,w:u.w}),m.out-=f,r(i,a,m)}),s.outEdges(l.v).forEach(u=>{let f=s.edge(u),m=u.w,_=s.node(m);_.in-=f,r(i,a,_)}),s.removeNode(l.v),d}function r(s,i,a){a.out?a.in?s[a.out-a.in+i].enqueue(a):s[s.length-1].enqueue(a):s[0].enqueue(a)}return Ef}function Pt(){if(vk)return If;vk=1;let t=Qn().Graph;function e(c,d,u,f){let m;do m=i(f);while(c.hasNode(m));return u.dummy=d,c.setNode(m,u),m}If={addBorderNode:function(c,d,u,f){let m={width:0,height:0};return arguments.length>=4&&(m.rank=u,m.order=f),e(c,"border",m,d)},addDummyNode:e,applyWithChunking:o,asNonCompoundGraph:function(c){let d=new t({multigraph:c.isMultigraph()}).setGraph(c.graph());return c.nodes().forEach(u=>{c.children(u).length||d.setNode(u,c.node(u))}),c.edges().forEach(u=>{d.setEdge(u,c.edge(u))}),d},buildLayerMatrix:function(c){let d=a(r(c)+1).map(()=>[]);return c.nodes().forEach(u=>{let f=c.node(u),m=f.rank;m!==void 0&&(d[m][f.order]=u)}),d},intersectRect:function(c,d){let u,f,m=c.x,_=c.y,g=d.x-m,p=d.y-_,b=c.width/2,y=c.height/2;if(!g&&!p)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(p)*b>Math.abs(g)*y?(p<0&&(y=-y),u=y*g/p,f=y):(g<0&&(b=-b),u=b,f=b*p/g),{x:m+u,y:_+f}},mapValues:function(c,d){let u=d;return typeof d=="string"&&(u=f=>f[d]),Object.entries(c).reduce((f,[m,_])=>(f[m]=u(_,m),f),{})},maxRank:r,normalizeRanks:function(c){let d=c.nodes().map(f=>{let m=c.node(f).rank;return m===void 0?Number.MAX_VALUE:m}),u=o(Math.min,d);c.nodes().forEach(f=>{let m=c.node(f);Object.hasOwn(m,"rank")&&(m.rank-=u)})},notime:function(c,d){return d()},partition:function(c,d){let u={lhs:[],rhs:[]};return c.forEach(f=>{d(f)?u.lhs.push(f):u.rhs.push(f)}),u},pick:function(c,d){const u={};for(const f of d)c[f]!==void 0&&(u[f]=c[f]);return u},predecessorWeights:function(c){let d=c.nodes().map(u=>{let f={};return c.inEdges(u).forEach(m=>{f[m.v]=(f[m.v]||0)+c.edge(m).weight}),f});return l(c.nodes(),d)},range:a,removeEmptyRanks:function(c){let d=c.nodes().map(g=>c.node(g).rank),u=o(Math.min,d),f=[];c.nodes().forEach(g=>{let p=c.node(g).rank-u;f[p]||(f[p]=[]),f[p].push(g)});let m=0,_=c.graph().nodeRankFactor;Array.from(f).forEach((g,p)=>{g===void 0&&p%_!==0?--m:g!==void 0&&m&&g.forEach(b=>c.node(b).rank+=m)})},simplify:function(c){let d=new t().setGraph(c.graph());return c.nodes().forEach(u=>d.setNode(u,c.node(u))),c.edges().forEach(u=>{let f=d.edge(u.v,u.w)||{weight:0,minlen:1},m=c.edge(u);d.setEdge(u.v,u.w,{weight:f.weight+m.weight,minlen:Math.max(f.minlen,m.minlen)})}),d},successorWeights:function(c){let d=c.nodes().map(u=>{let f={};return c.outEdges(u).forEach(m=>{f[m.w]=(f[m.w]||0)+c.edge(m).weight}),f});return l(c.nodes(),d)},time:function(c,d){let u=Date.now();try{return d()}finally{console.log(c+" time: "+(Date.now()-u)+"ms")}},uniqueId:i,zipObject:l};const n=65535;function o(c,d){if(d.length>n){const u=function(f,m=n){const _=[];for(let g=0;g<f.length;g+=m){const p=f.slice(g,g+m);_.push(p)}return _}(d);return c.apply(null,u.map(f=>c.apply(null,f)))}return c.apply(null,d)}function r(c){const d=c.nodes().map(u=>{let f=c.node(u).rank;return f===void 0?Number.MIN_VALUE:f});return o(Math.max,d)}let s=0;function i(c){var d=++s;return toString(c)+d}function a(c,d,u=1){d==null&&(d=c,c=0);let f=_=>_<d;u<0&&(f=_=>d<_);const m=[];for(let _=c;f(_);_+=u)m.push(_);return m}function l(c,d){return c.reduce((u,f,m)=>(u[f]=d[m],u),{})}return If}function oL(){if(kk)return Af;kk=1;let t=nL(),e=Pt().uniqueId;return Af={run:function(n){(n.graph().acyclicer==="greedy"?t(n,function(r){return s=>r.edge(s).weight}(n)):function(r){let s=[],i={},a={};function l(c){Object.hasOwn(a,c)||(a[c]=!0,i[c]=!0,r.outEdges(c).forEach(d=>{Object.hasOwn(i,d.w)?s.push(d):l(d.w)}),delete i[c])}return r.nodes().forEach(l),s}(n)).forEach(r=>{let s=n.edge(r);n.removeEdge(r),s.forwardName=r.name,s.reversed=!0,n.setEdge(r.w,r.v,s,e("rev"))})},undo:function(n){n.edges().forEach(o=>{let r=n.edge(o);if(r.reversed){n.removeEdge(o);let s=r.forwardName;delete r.reversed,delete r.forwardName,n.setEdge(o.w,o.v,r,s)}})}},Af}function rL(){if(Sk)return Tf;Sk=1;let t=Pt();return Tf={run:function(e){e.graph().dummyChains=[],e.edges().forEach(n=>function(o,r){let s,i,a,l=r.v,c=o.node(l).rank,d=r.w,u=o.node(d).rank,f=r.name,m=o.edge(r),_=m.labelRank;if(u!==c+1){for(o.removeEdge(r),a=0,++c;c<u;++a,++c)m.points=[],i={width:0,height:0,edgeLabel:m,edgeObj:r,rank:c},s=t.addDummyNode(o,"edge",i,"_d"),c===_&&(i.width=m.width,i.height=m.height,i.dummy="edge-label",i.labelpos=m.labelpos),o.setEdge(l,s,{weight:m.weight},f),a===0&&o.graph().dummyChains.push(s),l=s;o.setEdge(l,d,{weight:m.weight},f)}}(e,n))},undo:function(e){e.graph().dummyChains.forEach(n=>{let o,r=e.node(n),s=r.edgeLabel;for(e.setEdge(r.edgeObj,s);r.dummy;)o=e.successors(n)[0],e.removeNode(n),s.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(s.x=r.x,s.y=r.y,s.width=r.width,s.height=r.height),n=o,r=e.node(n)})}},Tf}function ic(){if(Ck)return Mf;Ck=1;const{applyWithChunking:t}=Pt();return Mf={longestPath:function(e){var n={};e.sources().forEach(function o(r){var s=e.node(r);if(Object.hasOwn(n,r))return s.rank;n[r]=!0;let i=e.outEdges(r).map(l=>l==null?Number.POSITIVE_INFINITY:o(l.w)-e.edge(l).minlen);var a=t(Math.min,i);return a===Number.POSITIVE_INFINITY&&(a=0),s.rank=a})},slack:function(e,n){return e.node(n.w).rank-e.node(n.v).rank-e.edge(n).minlen}},Mf}function s3(){if(Nk)return Of;Nk=1;var t=Qn().Graph,e=ic().slack;function n(s,i){return s.nodes().forEach(function a(l){i.nodeEdges(l).forEach(c=>{var d=c.v,u=l===d?c.w:d;s.hasNode(u)||e(i,c)||(s.setNode(u,{}),s.setEdge(l,u,{}),a(u))})}),s.nodeCount()}function o(s,i){return i.edges().reduce((a,l)=>{let c=Number.POSITIVE_INFINITY;return s.hasNode(l.v)!==s.hasNode(l.w)&&(c=e(i,l)),c<a[0]?[c,l]:a},[Number.POSITIVE_INFINITY,null])[1]}function r(s,i,a){s.nodes().forEach(l=>i.node(l).rank+=a)}return Of=function(s){var i,a,l=new t({directed:!1}),c=s.nodes()[0],d=s.nodeCount();for(l.setNode(c,{});n(l,s)<d;)i=o(l,s),a=l.hasNode(i.v)?e(s,i):-e(s,i),r(l,s,a);return l},Of}function sL(){if(jk)return Df;jk=1;var t=s3(),e=ic().slack,n=ic().longestPath,o=Qn().alg.preorder,r=Qn().alg.postorder,s=Pt().simplify;function i(g){g=s(g),n(g);var p,b=t(g);for(c(b),a(b,g);p=u(b);)m(b,g,p,f(b,g,p))}function a(g,p){var b=r(g,g.nodes());(b=b.slice(0,b.length-1)).forEach(y=>function(x,v,S){var k=x.node(S),E=k.parent;x.edge(S,E).cutvalue=l(x,v,S)}(g,p,y))}function l(g,p,b){var y=g.node(b).parent,x=!0,v=p.edge(b,y),S=0;return v||(x=!1,v=p.edge(y,b)),S=v.weight,p.nodeEdges(b).forEach(k=>{var E,j,I=k.v===b,T=I?k.w:k.v;if(T!==y){var M=I===x,L=p.edge(k).weight;if(S+=M?L:-L,E=b,j=T,g.hasEdge(E,j)){var B=g.edge(b,T).cutvalue;S+=M?-B:B}}}),S}function c(g,p){arguments.length<2&&(p=g.nodes()[0]),d(g,{},1,p)}function d(g,p,b,y,x){var v=b,S=g.node(y);return p[y]=!0,g.neighbors(y).forEach(k=>{Object.hasOwn(p,k)||(b=d(g,p,b,k,y))}),S.low=v,S.lim=b++,x?S.parent=x:delete S.parent,b}function u(g){return g.edges().find(p=>g.edge(p).cutvalue<0)}function f(g,p,b){var y=b.v,x=b.w;p.hasEdge(y,x)||(y=b.w,x=b.v);var v=g.node(y),S=g.node(x),k=v,E=!1;v.lim>S.lim&&(k=S,E=!0);var j=p.edges().filter(I=>E===_(g,g.node(I.v),k)&&E!==_(g,g.node(I.w),k));return j.reduce((I,T)=>e(p,T)<e(p,I)?T:I)}function m(g,p,b,y){var x=b.v,v=b.w;g.removeEdge(x,v),g.setEdge(y.v,y.w,{}),c(g),a(g,p),function(S,k){var E=S.nodes().find(I=>!k.node(I).parent),j=o(S,E);(j=j.slice(1)).forEach(I=>{var T=S.node(I).parent,M=k.edge(I,T),L=!1;M||(M=k.edge(T,I),L=!0),k.node(I).rank=k.node(T).rank+(L?M.minlen:-M.minlen)})}(g,p)}function _(g,p,b){return b.low<=p.lim&&p.lim<=b.lim}return Df=i,i.initLowLimValues=c,i.initCutValues=a,i.calcCutValue=l,i.leaveEdge=u,i.enterEdge=f,i.exchangeEdges=m,Df}function iL(){if(Ek)return Rf;Ek=1;var t=ic().longestPath,e=s3(),n=sL();Rf=function(s){switch(s.graph().ranker){case"network-simplex":default:r(s);break;case"tight-tree":(function(i){t(i),e(i)})(s);break;case"longest-path":o(s)}};var o=t;function r(s){n(s)}return Rf}function aL(){return Ik||(Ik=1,Pf=function(t){let e=function(n){let o={},r=0;function s(i){let a=r;n.children(i).forEach(s),o[i]={low:a,lim:r++}}return n.children().forEach(s),o}(t);t.graph().dummyChains.forEach(n=>{let o=t.node(n),r=o.edgeObj,s=function(u,f,m,_){let g,p,b=[],y=[],x=Math.min(f[m].low,f[_].low),v=Math.max(f[m].lim,f[_].lim);g=m;do g=u.parent(g),b.push(g);while(g&&(f[g].low>x||v>f[g].lim));for(p=g,g=_;(g=u.parent(g))!==p;)y.push(g);return{path:b.concat(y.reverse()),lca:p}}(t,e,r.v,r.w),i=s.path,a=s.lca,l=0,c=i[l],d=!0;for(;n!==r.w;){if(o=t.node(n),d){for(;(c=i[l])!==a&&t.node(c).maxRank<o.rank;)l++;c===a&&(d=!1)}if(!d){for(;l<i.length-1&&t.node(c=i[l+1]).minRank<=o.rank;)l++;c=i[l]}t.setParent(n,c),n=t.successors(n)[0]}})}),Pf}function lL(){if(Ak)return Lf;Ak=1;let t=Pt();function e(n,o,r,s,i,a,l){let c=n.children(l);if(!c.length)return void(l!==o&&n.setEdge(o,l,{weight:0,minlen:r}));let d=t.addBorderNode(n,"_bt"),u=t.addBorderNode(n,"_bb"),f=n.node(l);n.setParent(d,l),f.borderTop=d,n.setParent(u,l),f.borderBottom=u,c.forEach(m=>{e(n,o,r,s,i,a,m);let _=n.node(m),g=_.borderTop?_.borderTop:m,p=_.borderBottom?_.borderBottom:m,b=_.borderTop?s:2*s,y=g!==p?1:i-a[l]+1;n.setEdge(d,g,{weight:b,minlen:y,nestingEdge:!0}),n.setEdge(p,u,{weight:b,minlen:y,nestingEdge:!0})}),n.parent(l)||n.setEdge(o,d,{weight:0,minlen:i+a[l]})}return Lf={run:function(n){let o=t.addDummyNode(n,"root",{},"_root"),r=function(c){var d={};function u(f,m){var _=c.children(f);_&&_.length&&_.forEach(g=>u(g,m+1)),d[f]=m}return c.children().forEach(f=>u(f,1)),d}(n),s=Object.values(r),i=t.applyWithChunking(Math.max,s)-1,a=2*i+1;n.graph().nestingRoot=o,n.edges().forEach(c=>n.edge(c).minlen*=a);let l=function(c){return c.edges().reduce((d,u)=>d+c.edge(u).weight,0)}(n)+1;n.children().forEach(c=>e(n,o,a,l,i,r,c)),n.graph().nodeRankFactor=a},cleanup:function(n){var o=n.graph();n.removeNode(o.nestingRoot),delete o.nestingRoot,n.edges().forEach(r=>{n.edge(r).nestingEdge&&n.removeEdge(r)})}},Lf}function cL(){if(Mk)return zf;function t(r){r.nodes().forEach(s=>e(r.node(s))),r.edges().forEach(s=>e(r.edge(s)))}function e(r){let s=r.width;r.width=r.height,r.height=s}function n(r){r.y=-r.y}function o(r){let s=r.x;r.x=r.y,r.y=s}return Mk=1,zf={adjust:function(r){let s=r.graph().rankdir.toLowerCase();s!=="lr"&&s!=="rl"||t(r)},undo:function(r){let s=r.graph().rankdir.toLowerCase();s!=="bt"&&s!=="rl"||function(i){i.nodes().forEach(a=>n(i.node(a))),i.edges().forEach(a=>{let l=i.edge(a);l.points.forEach(n),Object.hasOwn(l,"y")&&n(l)})}(r),s!=="lr"&&s!=="rl"||(function(i){i.nodes().forEach(a=>o(i.node(a))),i.edges().forEach(a=>{let l=i.edge(a);l.points.forEach(o),Object.hasOwn(l,"x")&&o(l)})}(r),t(r))}},zf}function dL(){if(Fk)return Lk;Fk=1;let t=Pt();return Lk=function(e,n){let o={};return e.forEach((r,s)=>{let i=o[r.v]={indegree:0,in:[],out:[],vs:[r.v],i:s};r.barycenter!==void 0&&(i.barycenter=r.barycenter,i.weight=r.weight)}),n.edges().forEach(r=>{let s=o[r.v],i=o[r.w];s!==void 0&&i!==void 0&&(i.indegree++,s.out.push(o[r.w]))}),function(r){let s=[];function i(l){return c=>{c.merged||(c.barycenter===void 0||l.barycenter===void 0||c.barycenter>=l.barycenter)&&function(d,u){let f=0,m=0;d.weight&&(f+=d.barycenter*d.weight,m+=d.weight),u.weight&&(f+=u.barycenter*u.weight,m+=u.weight),d.vs=u.vs.concat(d.vs),d.barycenter=f/m,d.weight=m,d.i=Math.min(u.i,d.i),u.merged=!0}(l,c)}}function a(l){return c=>{c.in.push(l),--c.indegree===0&&r.push(c)}}for(;r.length;){let l=r.pop();s.push(l),l.in.reverse().forEach(i(l)),l.out.forEach(a(l))}return s.filter(l=>!l.merged).map(l=>t.pick(l,["vs","i","barycenter","weight"]))}(Object.values(o).filter(r=>!r.indegree))}}function uL(){if(Uk)return Vf;Uk=1;let t=(Pk||(Pk=1,Rk=function(o,r=[]){return r.map(s=>{let i=o.inEdges(s);if(i.length){let a=i.reduce((l,c)=>{let d=o.edge(c),u=o.node(c.v);return{sum:l.sum+d.weight*u.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:s,barycenter:a.sum/a.weight,weight:a.weight}}return{v:s}})}),Rk),e=dL(),n=function(){if(Bk)return zk;Bk=1;let o=Pt();function r(s,i,a){let l;for(;i.length&&(l=i[i.length-1]).i<=a;)i.pop(),s.push(l.vs),a++;return a}return zk=function(s,i){let a=o.partition(s,p=>Object.hasOwn(p,"barycenter")),l=a.lhs,c=a.rhs.sort((p,b)=>b.i-p.i),d=[],u=0,f=0,m=0;var _;l.sort((_=!!i,(p,b)=>p.barycenter<b.barycenter?-1:p.barycenter>b.barycenter?1:_?b.i-p.i:p.i-b.i)),m=r(d,c,m),l.forEach(p=>{m+=p.vs.length,d.push(p.vs),u+=p.barycenter*p.weight,f+=p.weight,m=r(d,c,m)});let g={vs:d.flat(!0)};return f&&(g.barycenter=u/f,g.weight=f),g}}();return Vf=function o(r,s,i,a){let l=r.children(s),c=r.node(s),d=c?c.borderLeft:void 0,u=c?c.borderRight:void 0,f={};d&&(l=l.filter(p=>p!==d&&p!==u));let m=t(r,l);m.forEach(p=>{if(r.children(p.v).length){let x=o(r,p.v,i,a);f[p.v]=x,Object.hasOwn(x,"barycenter")&&(y=x,(b=p).barycenter!==void 0?(b.barycenter=(b.barycenter*b.weight+y.barycenter*y.weight)/(b.weight+y.weight),b.weight+=y.weight):(b.barycenter=y.barycenter,b.weight=y.weight))}var b,y});let _=e(m,i);(function(p,b){p.forEach(y=>{y.vs=y.vs.flatMap(x=>b[x]?b[x].vs:x)})})(_,f);let g=n(_,a);if(d&&(g.vs=[d,g.vs,u].flat(!0),r.predecessors(d).length)){let p=r.node(r.predecessors(d)[0]),b=r.node(r.predecessors(u)[0]);Object.hasOwn(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+p.order+b.order)/(g.weight+2),g.weight+=2}return g},Vf}function hL(){if(Vk)return Hf;Vk=1;let t=Qn().Graph,e=Pt();return Hf=function(n,o,r){let s=function(a){for(var l;a.hasNode(l=e.uniqueId("_root")););return l}(n),i=new t({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(a=>n.node(a));return n.nodes().forEach(a=>{let l=n.node(a),c=n.parent(a);(l.rank===o||l.minRank<=o&&o<=l.maxRank)&&(i.setNode(a),i.setParent(a,c||s),n[r](a).forEach(d=>{let u=d.v===a?d.w:d.v,f=i.edge(u,a),m=f!==void 0?f.weight:0;i.setEdge(u,a,{weight:n.edge(d).weight+m})}),Object.hasOwn(l,"minRank")&&i.setNode(a,{borderLeft:l.borderLeft[o],borderRight:l.borderRight[o]}))}),i},Hf}function fL(){if(Wk)return $f;Wk=1;let t=function(){if(Ok)return Bf;Ok=1;let d=Pt();return Bf=function(u){let f={},m=u.nodes().filter(y=>!u.children(y).length),_=m.map(y=>u.node(y).rank),g=d.applyWithChunking(Math.max,_),p=d.range(g+1).map(()=>[]);function b(y){if(f[y])return;f[y]=!0;let x=u.node(y);p[x.rank].push(y),u.successors(y).forEach(b)}return m.sort((y,x)=>u.node(y).rank-u.node(x).rank).forEach(b),p},Bf}(),e=function(){if(Dk)return Uf;Dk=1;let d=Pt().zipObject;function u(f,m,_){let g=d(_,_.map((S,k)=>k)),p=m.flatMap(S=>f.outEdges(S).map(k=>({pos:g[k.w],weight:f.edge(k).weight})).sort((k,E)=>k.pos-E.pos)),b=1;for(;b<_.length;)b<<=1;let y=2*b-1;b-=1;let x=new Array(y).fill(0),v=0;return p.forEach(S=>{let k=S.pos+b;x[k]+=S.weight;let E=0;for(;k>0;)k%2&&(E+=x[k+1]),k=k-1>>1,x[k]+=S.weight;v+=S.weight*E}),v}return Uf=function(f,m){let _=0;for(let g=1;g<m.length;++g)_+=u(f,m[g-1],m[g]);return _},Uf}(),n=uL(),o=hL(),r=($k||($k=1,Hk=function(d,u,f){let m,_={};f.forEach(g=>{let p,b,y=d.parent(g);for(;y;){if(p=d.parent(y),p?(b=_[p],_[p]=y):(b=m,m=y),b&&b!==y)return void u.setEdge(b,y);y=p}})}),Hk),s=Qn().Graph,i=Pt();function a(d,u,f){return u.map(function(m){return o(d,m,f)})}function l(d,u){let f=new s;d.forEach(function(m){let _=m.graph().root,g=n(m,_,f,u);g.vs.forEach((p,b)=>m.node(p).order=b),r(m,f,g.vs)})}function c(d,u){Object.values(u).forEach(f=>f.forEach((m,_)=>d.node(m).order=_))}return $f=function d(u,f){if(f&&typeof f.customOrder=="function")return void f.customOrder(u,d);let m=i.maxRank(u),_=a(u,i.range(1,m+1),"inEdges"),g=a(u,i.range(m-1,-1,-1),"outEdges"),p=t(u);if(c(u,p),f&&f.disableOptimalOrderHeuristic)return;let b,y=Number.POSITIVE_INFINITY;for(let x=0,v=0;v<4;++x,++v){l(x%2?_:g,x%4>=2),p=i.buildLayerMatrix(u);let S=e(u,p);S<y&&(v=0,b=Object.assign({},p),y=S)}c(u,b)},$f}function mL(){if(qk)return Wf;qk=1;let t=Qn().Graph,e=Pt();function n(u,f){let m={};return f.length&&f.reduce(function(_,g){let p=0,b=0,y=_.length,x=g[g.length-1];return g.forEach((v,S)=>{let k=function(j,I){if(j.node(I).dummy)return j.predecessors(I).find(T=>j.node(T).dummy)}(u,v),E=k?u.node(k).order:y;(k||v===x)&&(g.slice(b,S+1).forEach(j=>{u.predecessors(j).forEach(I=>{let T=u.node(I),M=T.order;!(M<p||E<M)||T.dummy&&u.node(j).dummy||r(m,I,j)})}),b=S+1,p=E)}),g}),m}function o(u,f){let m={};function _(g,p,b,y,x){let v;e.range(p,b).forEach(S=>{v=g[S],u.node(v).dummy&&u.predecessors(v).forEach(k=>{let E=u.node(k);E.dummy&&(E.order<y||E.order>x)&&r(m,k,v)})})}return f.length&&f.reduce(function(g,p){let b,y=-1,x=0;return p.forEach((v,S)=>{if(u.node(v).dummy==="border"){let k=u.predecessors(v);k.length&&(b=u.node(k[0]).order,_(p,x,S,y,b),x=S,y=b)}_(p,x,p.length,b,g.length)}),p}),m}function r(u,f,m){if(f>m){let g=f;f=m,m=g}let _=u[f];_||(u[f]=_={}),_[m]=!0}function s(u,f,m){if(f>m){let _=f;f=m,m=_}return!!u[f]&&Object.hasOwn(u[f],m)}function i(u,f,m,_){let g={},p={},b={};return f.forEach(y=>{y.forEach((x,v)=>{g[x]=x,p[x]=x,b[x]=v})}),f.forEach(y=>{let x=-1;y.forEach(v=>{let S=_(v);if(S.length){S=S.sort((E,j)=>b[E]-b[j]);let k=(S.length-1)/2;for(let E=Math.floor(k),j=Math.ceil(k);E<=j;++E){let I=S[E];p[v]===v&&x<b[I]&&!s(m,v,I)&&(p[I]=v,p[v]=g[v]=g[I],x=b[I])}}})}),{root:g,align:p}}function a(u,f,m,_,g){let p={},b=function(v,S,k,E){let j=new t,I=v.graph(),T=function(M,L,B){return(O,z,F)=>{let V,R=O.node(z),C=O.node(F),H=0;if(H+=R.width/2,Object.hasOwn(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":V=-R.width/2;break;case"r":V=R.width/2}if(V&&(H+=B?V:-V),V=0,H+=(R.dummy?L:M)/2,H+=(C.dummy?L:M)/2,H+=C.width/2,Object.hasOwn(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":V=C.width/2;break;case"r":V=-C.width/2}return V&&(H+=B?V:-V),V=0,H}}(I.nodesep,I.edgesep,E);return S.forEach(M=>{let L;M.forEach(B=>{let O=k[B];if(j.setNode(O),L){var z=k[L],F=j.edge(z,O);j.setEdge(z,O,Math.max(T(v,B,L),F||0))}L=B})}),j}(u,f,m,g),y=g?"borderLeft":"borderRight";function x(v,S){let k=b.nodes(),E=k.pop(),j={};for(;E;)j[E]?v(E):(j[E]=!0,k.push(E),k=k.concat(S(E))),E=k.pop()}return x(function(v){p[v]=b.inEdges(v).reduce((S,k)=>Math.max(S,p[k.v]+b.edge(k)),0)},b.predecessors.bind(b)),x(function(v){let S=b.outEdges(v).reduce((E,j)=>Math.min(E,p[j.w]-b.edge(j)),Number.POSITIVE_INFINITY),k=u.node(v);S!==Number.POSITIVE_INFINITY&&k.borderType!==y&&(p[v]=Math.max(p[v],S))},b.successors.bind(b)),Object.keys(_).forEach(v=>p[v]=p[m[v]]),p}function l(u,f){return Object.values(f).reduce((m,_)=>{let g=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY;Object.entries(_).forEach(([y,x])=>{let v=function(S,k){return S.node(k).width}(u,y)/2;g=Math.max(x+v,g),p=Math.min(x-v,p)});const b=g-p;return b<m[0]&&(m=[b,_]),m},[Number.POSITIVE_INFINITY,null])[1]}function c(u,f){let m=Object.values(f),_=e.applyWithChunking(Math.min,m),g=e.applyWithChunking(Math.max,m);["u","d"].forEach(p=>{["l","r"].forEach(b=>{let y=p+b,x=u[y];if(x===f)return;let v=Object.values(x),S=_-e.applyWithChunking(Math.min,v);b!=="l"&&(S=g-e.applyWithChunking(Math.max,v)),S&&(u[y]=e.mapValues(x,k=>k+S))})})}function d(u,f){return e.mapValues(u.ul,(m,_)=>{if(f)return u[f.toLowerCase()][_];{let g=Object.values(u).map(p=>p[_]).sort((p,b)=>p-b);return(g[1]+g[2])/2}})}return Wf={positionX:function(u){let f,m=e.buildLayerMatrix(u),_=Object.assign(n(u,m),o(u,m)),g={};["u","d"].forEach(b=>{f=b==="u"?m:Object.values(m).reverse(),["l","r"].forEach(y=>{y==="r"&&(f=f.map(k=>Object.values(k).reverse()));let x=(b==="u"?u.predecessors:u.successors).bind(u),v=i(u,f,_,x),S=a(u,f,v.root,v.align,y==="r");y==="r"&&(S=e.mapValues(S,k=>-k)),g[b+y]=S})});let p=l(u,g);return c(g,p),d(g,u.graph().align)},findType1Conflicts:n,findType2Conflicts:o,addConflict:r,hasConflict:s,verticalAlignment:i,horizontalCompaction:a,alignCoordinates:c,findSmallestWidthAlignment:l,balance:d},Wf}function pL(){if(Gk)return qf;Gk=1;let t=Pt(),e=mL().positionX;return qf=function(n){n=t.asNonCompoundGraph(n),function(o){let r=t.buildLayerMatrix(o),s=o.graph().ranksep,i=0;r.forEach(a=>{const l=a.reduce((c,d)=>{const u=o.node(d).height;return c>u?c:u},0);a.forEach(c=>o.node(c).y=i+l/2),i+=l+s})}(n),Object.entries(e(n)).forEach(([o,r])=>n.node(o).x=r)},qf}function gL(){if(Yk)return Gf;Yk=1;let t=oL(),e=rL(),n=iL(),o=Pt().normalizeRanks,r=aL(),s=Pt().removeEmptyRanks,i=lL(),a=function(){if(Tk)return Ff;Tk=1;let E=Pt();function j(I,T,M,L,B,O){let z={width:0,height:0,rank:O,borderType:T},F=B[T][O-1],V=E.addDummyNode(I,"border",z,M);B[T][O]=V,I.setParent(V,L),F&&I.setEdge(F,V,{weight:1})}return Ff=function(I){I.children().forEach(function T(M){let L=I.children(M),B=I.node(M);if(L.length&&L.forEach(T),Object.hasOwn(B,"minRank")){B.borderLeft=[],B.borderRight=[];for(let O=B.minRank,z=B.maxRank+1;O<z;++O)j(I,"borderLeft","_bl",M,B,O),j(I,"borderRight","_br",M,B,O)}})},Ff}(),l=cL(),c=fL(),d=pL(),u=Pt(),f=Qn().Graph;Gf=function(E,j){let I=j&&j.debugTiming?u.time:u.notime;I("layout",()=>{let T=I("  buildLayoutGraph",()=>function(M){let L=new f({multigraph:!0,compound:!0}),B=k(M.graph());return L.setGraph(Object.assign({},_,S(B,m),u.pick(B,g))),M.nodes().forEach(O=>{const z=S(k(M.node(O)),p);Object.keys(b).forEach(F=>{z[F]===void 0&&(z[F]=b[F])}),L.setNode(O,z),L.setParent(O,M.parent(O))}),M.edges().forEach(O=>{let z=k(M.edge(O));L.setEdge(O,Object.assign({},x,S(z,y),u.pick(z,v)))}),L}(E));I("  runLayout",()=>function(M,L,B){L("    makeSpaceForEdgeLabels",()=>function(O){let z=O.graph();z.ranksep/=2,O.edges().forEach(F=>{let V=O.edge(F);V.minlen*=2,V.labelpos.toLowerCase()!=="c"&&(z.rankdir==="TB"||z.rankdir==="BT"?V.width+=V.labeloffset:V.height+=V.labeloffset)})}(M)),L("    removeSelfEdges",()=>function(O){O.edges().forEach(z=>{if(z.v===z.w){var F=O.node(z.v);F.selfEdges||(F.selfEdges=[]),F.selfEdges.push({e:z,label:O.edge(z)}),O.removeEdge(z)}})}(M)),L("    acyclic",()=>t.run(M)),L("    nestingGraph.run",()=>i.run(M)),L("    rank",()=>n(u.asNonCompoundGraph(M))),L("    injectEdgeLabelProxies",()=>function(O){O.edges().forEach(z=>{let F=O.edge(z);if(F.width&&F.height){let V=O.node(z.v),R={rank:(O.node(z.w).rank-V.rank)/2+V.rank,e:z};u.addDummyNode(O,"edge-proxy",R,"_ep")}})}(M)),L("    removeEmptyRanks",()=>s(M)),L("    nestingGraph.cleanup",()=>i.cleanup(M)),L("    normalizeRanks",()=>o(M)),L("    assignRankMinMax",()=>function(O){let z=0;O.nodes().forEach(F=>{let V=O.node(F);V.borderTop&&(V.minRank=O.node(V.borderTop).rank,V.maxRank=O.node(V.borderBottom).rank,z=Math.max(z,V.maxRank))}),O.graph().maxRank=z}(M)),L("    removeEdgeLabelProxies",()=>function(O){O.nodes().forEach(z=>{let F=O.node(z);F.dummy==="edge-proxy"&&(O.edge(F.e).labelRank=F.rank,O.removeNode(z))})}(M)),L("    normalize.run",()=>e.run(M)),L("    parentDummyChains",()=>r(M)),L("    addBorderSegments",()=>a(M)),L("    order",()=>c(M,B)),L("    insertSelfEdges",()=>function(O){var z=u.buildLayerMatrix(O);z.forEach(F=>{var V=0;F.forEach((R,C)=>{var H=O.node(R);H.order=C+V,(H.selfEdges||[]).forEach(N=>{u.addDummyNode(O,"selfedge",{width:N.label.width,height:N.label.height,rank:H.rank,order:C+ ++V,e:N.e,label:N.label},"_se")}),delete H.selfEdges})})}(M)),L("    adjustCoordinateSystem",()=>l.adjust(M)),L("    position",()=>d(M)),L("    positionSelfEdges",()=>function(O){O.nodes().forEach(z=>{var F=O.node(z);if(F.dummy==="selfedge"){var V=O.node(F.e.v),R=V.x+V.width/2,C=V.y,H=F.x-R,N=V.height/2;O.setEdge(F.e,F.label),O.removeNode(z),F.label.points=[{x:R+2*H/3,y:C-N},{x:R+5*H/6,y:C-N},{x:R+H,y:C},{x:R+5*H/6,y:C+N},{x:R+2*H/3,y:C+N}],F.label.x=F.x,F.label.y=F.y}})}(M)),L("    removeBorderNodes",()=>function(O){O.nodes().forEach(z=>{if(O.children(z).length){let F=O.node(z),V=O.node(F.borderTop),R=O.node(F.borderBottom),C=O.node(F.borderLeft[F.borderLeft.length-1]),H=O.node(F.borderRight[F.borderRight.length-1]);F.width=Math.abs(H.x-C.x),F.height=Math.abs(R.y-V.y),F.x=C.x+F.width/2,F.y=V.y+F.height/2}}),O.nodes().forEach(z=>{O.node(z).dummy==="border"&&O.removeNode(z)})}(M)),L("    normalize.undo",()=>e.undo(M)),L("    fixupEdgeLabelCoords",()=>function(O){O.edges().forEach(z=>{let F=O.edge(z);if(Object.hasOwn(F,"x"))switch(F.labelpos!=="l"&&F.labelpos!=="r"||(F.width-=F.labeloffset),F.labelpos){case"l":F.x-=F.width/2+F.labeloffset;break;case"r":F.x+=F.width/2+F.labeloffset}})}(M)),L("    undoCoordinateSystem",()=>l.undo(M)),L("    translateGraph",()=>function(O){let z=Number.POSITIVE_INFINITY,F=0,V=Number.POSITIVE_INFINITY,R=0,C=O.graph(),H=C.marginx||0,N=C.marginy||0;function $(Y){let Z=Y.x,q=Y.y,re=Y.width,ne=Y.height;z=Math.min(z,Z-re/2),F=Math.max(F,Z+re/2),V=Math.min(V,q-ne/2),R=Math.max(R,q+ne/2)}O.nodes().forEach(Y=>$(O.node(Y))),O.edges().forEach(Y=>{let Z=O.edge(Y);Object.hasOwn(Z,"x")&&$(Z)}),z-=H,V-=N,O.nodes().forEach(Y=>{let Z=O.node(Y);Z.x-=z,Z.y-=V}),O.edges().forEach(Y=>{let Z=O.edge(Y);Z.points.forEach(q=>{q.x-=z,q.y-=V}),Object.hasOwn(Z,"x")&&(Z.x-=z),Object.hasOwn(Z,"y")&&(Z.y-=V)}),C.width=F-z+H,C.height=R-V+N}(M)),L("    assignNodeIntersects",()=>function(O){O.edges().forEach(z=>{let F,V,R=O.edge(z),C=O.node(z.v),H=O.node(z.w);R.points?(F=R.points[0],V=R.points[R.points.length-1]):(R.points=[],F=H,V=C),R.points.unshift(u.intersectRect(C,F)),R.points.push(u.intersectRect(H,V))})}(M)),L("    reversePoints",()=>function(O){O.edges().forEach(z=>{let F=O.edge(z);F.reversed&&F.points.reverse()})}(M)),L("    acyclic.undo",()=>t.undo(M))}(T,I,j)),I("  updateInputGraph",()=>function(M,L){M.nodes().forEach(B=>{let O=M.node(B),z=L.node(B);O&&(O.x=z.x,O.y=z.y,O.rank=z.rank,L.children(B).length&&(O.width=z.width,O.height=z.height))}),M.edges().forEach(B=>{let O=M.edge(B),z=L.edge(B);O.points=z.points,Object.hasOwn(z,"x")&&(O.x=z.x,O.y=z.y)}),M.graph().width=L.graph().width,M.graph().height=L.graph().height}(E,T))})};let m=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],p=["width","height"],b={width:0,height:0},y=["minlen","weight","width","height","labeloffset"],x={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},v=["labelpos"];function S(E,j){return u.mapValues(u.pick(E,j),Number)}function k(E){var j={};return E&&Object.entries(E).forEach(([I,T])=>{typeof I=="string"&&(I=I.toLowerCase()),j[I]=T}),j}return Gf}function _L(){if(Jk)return Yf;Jk=1;let t=Pt(),e=Qn().Graph;return Yf={debugOrdering:function(n){let o=t.buildLayerMatrix(n),r=new e({compound:!0,multigraph:!0}).setGraph({});return n.nodes().forEach(s=>{r.setNode(s,{label:s}),r.setParent(s,"layer"+n.node(s).rank)}),n.edges().forEach(s=>r.setEdge(s.v,s.w,{},s.name)),o.forEach((s,i)=>{let a="layer"+i;r.setNode(a,{rank:"same"}),s.reduce((l,c)=>(r.setEdge(l,c,{style:"invis"}),c))}),r}},Yf}var i3=Qk?Zk:(Qk=1,Zk={graphlib:Qn(),layout:gL(),debug:_L(),util:{time:Pt().time,notime:Pt().notime},version:Xk?Kk:(Xk=1,Kk="1.1.4")});const ta=new i3.graphlib.Graph().setDefaultEdgeLabel(()=>({})),a3=(t,e,n)=>(ta.setGraph({rankdir:n.direction,nodesep:150,ranksep:200,ranker:"longest-path"}),e.forEach(o=>ta.setEdge(o.source,o.target)),t.forEach(o=>ta.setNode(o.id,{...o,width:o.width??0,height:o.height??0})),i3.layout(ta),{nodes:t.map(o=>{const{x:r,y:s}=ta.node(o.id);return{...o,position:{x:r,y:s}}}),edges:e}),l3=new class{createEdge(t,e){return{animated:!0,markerEnd:{type:ps.ArrowClosed},id:`${t}-${e}`,style:{strokeWidth:2},source:t,sourceHandle:"outputs",targetHandle:"inputs",target:e}}createNode(t,e){return{id:t,data:{atom:e,forceWidth:300},width:300,type:"custom",height:df(ct.get(e).code.trim().split(`
`).length),position:{x:0,y:0}}}createElements(t,e,n,o){const r=[],s=[],i=new Set,a=new Set;for(const l of Object.values(n)){if(l.value==="marimo"&&l.name==="mo")continue;const{declaredBy:c,usedBy:d}=l;for(const u of c)for(const f of d){const m=`${u}-${f}`;a.has(m)||(a.add(m),i.add(u),i.add(f),s.push(this.createEdge(u,f)))}}for(const[l,c]of Km.zip(t,e)){o||r.push(this.createNode(l,c));const d=i.has(l),u=ct.get(c).code.trim().startsWith("mo.md");!d&&u||r.push(this.createNode(l,c))}return{nodes:r,edges:s}}},bL=t=>{const e=X.c(43),{cellIds:n,variables:o,cellAtoms:r,children:s,layoutDirection:i,settings:a}=t;let l;e[0]!==r||e[1]!==n||e[2]!==i||e[3]!==a.hidePureMarkdown||e[4]!==o?(l=()=>{let C=l3.createElements(n,r,o,a.hidePureMarkdown);return C=a3(C.nodes,C.edges,{direction:i}),C},e[0]=r,e[1]=n,e[2]=i,e[3]=a.hidePureMarkdown,e[4]=o,e[5]=l):l=e[5];const[c]=A.useState(l),[d,u,f]=B2(c.nodes),[m,_,g]=U2(c.edges),p=Zi();let b;e[6]!==i||e[7]!==_||e[8]!==u?(b=C=>{const H=a3(C.nodes,C.edges,{direction:i});u(H.nodes),_(H.edges)},e[6]=i,e[7]=_,e[8]=u,e[9]=b):b=e[9];const y=tt(b);let x,v;e[10]!==r||e[11]!==n||e[12]!==a.hidePureMarkdown||e[13]!==y||e[14]!==o?(x=()=>{y(l3.createElements(n,r,o,a.hidePureMarkdown))},v=[n,o,r,y,a.hidePureMarkdown],e[10]=r,e[11]=n,e[12]=a.hidePureMarkdown,e[13]=y,e[14]=o,e[15]=x,e[16]=v):(x=e[15],v=e[16]),A.useEffect(x,v);const[S,k]=A.useState();let E;Y2(),e[17]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{k(void 0)},e[17]=E):E=e[17];const j=E;let I,T,M,L,B,O,z,F,V,R;return e[18]===Symbol.for("react.memo_cache_sentinel")?(I={minZoom:.5,maxZoom:1.5},T=(C,H)=>{k({type:"node",id:H.id})},M=(C,H)=>{const{source:N,target:$}=H;k({type:"edge",source:N,target:$})},e[18]=I,e[19]=T,e[20]=M):(I=e[18],T=e[19],M=e[20]),e[21]===Symbol.for("react.memo_cache_sentinel")?(L=h.jsx(FP,{color:"#ccc",variant:Hn.Dots}),e[21]=L):L=e[21],e[22]!==p||e[23]!==d?(B=()=>{const C=ct.get(VV);if(C){const H=d.find(N=>N.id===C);H&&(p.fitView({padding:1,duration:600,nodes:[H]}),k({type:"node",id:C}))}},e[22]=p,e[23]=d,e[24]=B):B=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(O=h.jsx(Mp,{className:"size-4"}),e[25]=O):O=e[25],e[26]!==B?(z=h.jsx(MP,{position:"bottom-right",showInteractive:!1,children:h.jsx(Le,{content:"Jump to focused cell",delayDuration:200,side:"left",asChild:!1,children:h.jsx(ks,{onMouseDown:$n.preventFocus,onClick:B,children:O})})}),e[26]=B,e[27]=z):z=e[27],e[28]!==m||e[29]!==S||e[30]!==o?(F=h.jsx(sc,{selection:S,variables:o,edges:m,onClearSelection:j}),e[28]=m,e[29]=S,e[30]=o,e[31]=F):F=e[31],e[32]!==s||e[33]!==m||e[34]!==d||e[35]!==g||e[36]!==f||e[37]!==z||e[38]!==F?(V=h.jsxs(cf,{nodes:d,edges:m,nodeTypes:q2,minZoom:.2,fitViewOptions:I,onNodeClick:T,onEdgeClick:M,onNodeDoubleClick:yL,fitView:!0,onNodesChange:f,onEdgesChange:g,zoomOnDoubleClick:!1,nodesConnectable:!1,children:[L,z,F,s]}),e[32]=s,e[33]=m,e[34]=d,e[35]=g,e[36]=f,e[37]=z,e[38]=F,e[39]=V):V=e[39],e[40]!==i||e[41]!==V?(R=h.jsx($2,{value:i,children:V}),e[40]=i,e[41]=V,e[42]=R):R=e[42],R};function yL(t,e){rS(e.id,"focus")}const xL=en("_minimap_"),wL=en({hidePureMarkdown:!0}),vL=t=>{const e=X.c(11),[n,o]=fn(xL),[r,s]=fn(wL);let i;e[0]!==n||e[1]!==t||e[2]!==o||e[3]!==s||e[4]!==r?(i=()=>n==="_minimap_"?h.jsx(HP,{...t,children:h.jsx(hf,{settings:r,onSettingsChange:s,view:n,onChange:o})}):h.jsx(bL,{...t,settings:r,layoutDirection:n,children:h.jsx(hf,{settings:r,onSettingsChange:s,view:n,onChange:o})}),e[0]=n,e[1]=t,e[2]=o,e[3]=s,e[4]=r,e[5]=i):i=e[5];const a=i;let l,c;return e[6]!==a?(l=a(),e[6]=a,e[7]=l):l=e[7],e[8]!==n||e[9]!==l?(c=h.jsx(lf,{children:l},n),e[8]=n,e[9]=l,e[10]=c):c=e[10],c},kL=()=>{const t=X.c(5),e=sS(),n=$c(),[o]=HV();let r,s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=Oe("w-full h-full flex-1 mx-auto -mb-4 relative"),t[0]=r):r=t[0],t[1]!==n.inOrderIds||t[2]!==o||t[3]!==e?(s=h.jsx("div",{className:r,children:h.jsx(vL,{cellAtoms:o,variables:e,cellIds:n.inOrderIds})}),t[1]=n.inOrderIds,t[2]=o,t[3]=e,t[4]=s):s=t[4],s},SL=t=>{const e=X.c(4),{isOpen:n,children:o}=t,[r,s]=K.useState(!1);let i,a;return e[0]!==r||e[1]!==n?(i=()=>{n&&!r&&s(!0)},a=[n,r],e[0]=r,e[1]=n,e[2]=i,e[3]=a):(i=e[2],a=e[3]),K.useEffect(i,a),r?o:null},CL=t=>{const e=X.c(8),{variableName:n,className:o}=t;let r;e[0]!==n?(r=()=>{const l=function(d){const u=ct.get(iS)[d];if(u)return u.declaredBy[0]}(n);if(!l)return;const c=mc(l);c&&Zm(c,n)},e[0]=n,e[1]=r):r=e[1];const s=r;let i,a;return e[2]!==o?(i=Oe("text-link opacity-80 hover:opacity-100 hover:underline",o),e[2]=o,e[3]=i):i=e[3],e[4]!==s||e[5]!==i||e[6]!==n?(a=h.jsx("button",{type:"button",onClick:s,className:i,children:n}),e[4]=s,e[5]=i,e[6]=n,e[7]=a):a=e[7],a},NL=en(t=>{const e=t($V),n=t(iS),o=t(Z4);return Na(e,r=>{if(!r.variable_name)return-1;const s=Object.values(n).find(a=>a.name===r.variable_name);if(!s)return 0;const i=o.inOrderIds.indexOf(s.declaredBy[0]);return i===-1?0:i})}),jL=en(t=>{const e=new Map(t(WV));for(const n of aS){const o=e.get(n);o&&o.databases.length===0&&e.delete(n)}return Na([...e.values()],n=>aS.has(n.name)?1:0)}),EL=()=>{const t=X.c(32),[e,n]=K.useState(""),o=Zt(lS),r=$e(NL),s=$e(jL);if(r.length===0&&s.length===0){let b;return t[0]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(On,{title:"No tables found",description:"Any datasets/dataframes in the global scope will be shown here.",action:h.jsx(Tg,{children:h.jsxs(Pe,{variant:"outline",size:"sm",children:["Add database or catalog",h.jsx(gr,{className:"h-4 w-4 ml-2"})]})}),icon:h.jsx(ur,{})}),t[0]=b):b=t[0],b}const i=!!e.trim();let a,l,c,d,u,f,m,_,g,p;if(t[1]!==o?(a=b=>{o(b.length>0),n(b)},t[1]=o,t[2]=a):a=t[2],t[3]!==e||t[4]!==a?(l=h.jsx(sa,{placeholder:"Search tables...",className:"h-6 m-1",value:e,onValueChange:a,rootClassName:"flex-1 border-r"}),t[3]=e,t[4]=a,t[5]=l):l=t[5],t[6]!==i?(c=i&&h.jsx("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",onClick:()=>n(""),children:h.jsx(no,{className:"h-4 w-4"})}),t[6]=i,t[7]=c):c=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx(Tg,{children:h.jsx("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:h.jsx(gr,{className:"h-4 w-4"})})}),t[8]=d):d=t[8],t[9]!==l||t[10]!==c?(u=h.jsxs("div",{className:"flex items-center w-full",children:[l,c,d]}),t[9]=l,t[10]=c,t[11]=u):u=t[11],t[12]!==s||t[13]!==i||t[14]!==e){let b;t[16]!==i||t[17]!==e?(b=y=>h.jsx(IL,{connection:y,hasChildren:y.databases.length>0,children:y.databases.map(x=>h.jsx(AL,{engineName:y.name,database:x,hasSearch:i,children:h.jsx(TL,{schemas:x.schemas,defaultSchema:y.default_schema,defaultDatabase:y.default_database,engineName:y.name,databaseName:x.name,hasSearch:i,searchValue:e})},x.name))},y.name),t[16]=i,t[17]=e,t[18]=b):b=t[18],f=s.map(b),t[12]=s,t[13]=i,t[14]=e,t[15]=f}else f=t[15];return t[19]!==s.length||t[20]!==r.length?(m=s.length>0&&r.length>0&&h.jsxs(cS,{children:[h.jsx(_c,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-xs",children:"Python"})]}),t[19]=s.length,t[20]=r.length,t[21]=m):m=t[21],t[22]!==e||t[23]!==r?(_=r.length>0&&h.jsx(c3,{tables:r,searchValue:e}),t[22]=e,t[23]=r,t[24]=_):_=t[24],t[25]!==f||t[26]!==m||t[27]!==_?(g=h.jsxs(Fm,{className:"flex flex-col",children:[f,m,_]}),t[25]=f,t[26]=m,t[27]=_,t[28]=g):g=t[28],t[29]!==u||t[30]!==g?(p=h.jsxs(Nc,{className:"border-b bg-background rounded-none h-full pb-10 overflow-auto outline-none",shouldFilter:!1,children:[u,g]}),t[29]=u,t[30]=g,t[31]=p):p=t[31],p},IL=t=>{const e=X.c(25),{connection:n,children:o,hasChildren:r}=t,s=n.name===qV,i=s?"In-Memory":n.name,[a,l]=K.useState(!1);let c;e[0]!==n.name?(c=async()=>{l(!0),await YV({engine:n.name}),setTimeout(()=>l(!1),500)},e[0]=n.name,e[1]=c):c=e[1];const d=c;let u,f,m;e[2]!==n.dialect?(u=h.jsx(n4,{className:"h-4 w-4 text-muted-foreground",name:n.dialect}),e[2]=n.dialect,e[3]=u):u=e[3],e[4]!==n.dialect?(f=GV(n.dialect),e[4]=n.dialect,e[5]=f):f=e[5],e[6]!==f?(m=h.jsx("span",{className:"text-xs",children:f}),e[6]=f,e[7]=m):m=e[7];const _=i;let g,p,b,y,x;return e[8]!==_?(g=h.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",h.jsx(CL,{variableName:_}),")"]}),e[8]=_,e[9]=g):g=e[9],e[10]!==d||e[11]!==s||e[12]!==a?(p=!s&&h.jsx(Le,{content:"Refresh connection",children:h.jsx(Pe,{variant:"ghost",size:"icon",className:"ml-auto hover:bg-transparent hover:shadow-none",onClick:d,children:h.jsx(Lc,{className:Oe("h-4 w-4 text-muted-foreground hover:text-foreground",a&&"animate-[spin_0.5s]")})})}),e[10]=d,e[11]=s,e[12]=a,e[13]=p):p=e[13],e[14]!==u||e[15]!==m||e[16]!==g||e[17]!==p?(b=h.jsxs(cS,{children:[u,m,g,p]}),e[14]=u,e[15]=m,e[16]=g,e[17]=p,e[18]=b):b=e[18],e[19]!==o||e[20]!==r?(y=r?o:h.jsx(Wc,{content:"No databases available",className:"pl-2"}),e[19]=o,e[20]=r,e[21]=y):y=e[21],e[22]!==b||e[23]!==y?(x=h.jsxs(h.Fragment,{children:[b,y]}),e[22]=b,e[23]=y,e[24]=x):x=e[24],x},AL=t=>{const e=X.c(28),{hasSearch:n,engineName:o,database:r,children:s}=t,[i,a]=K.useState(!1),[l,c]=K.useState(!1);let d,u,f;e[0]!==n?(d=()=>{a(n)},u=[n],e[0]=n,e[1]=d,e[2]=u):(d=e[1],u=e[2]),K.useEffect(d,u),e[3]!==i||e[4]!==l?(f=()=>{a(!i),c(!l)},e[3]=i,e[4]=l,e[5]=f):f=e[5];const m=`${o}:${r.name}`;let _;e[6]!==i?(_=h.jsx(mS,{isExpanded:i}),e[6]=i,e[7]=_):_=e[7];const g=l&&i?"text-foreground":"text-muted-foreground";let p,b;e[8]!==g?(p=Oe("h-4 w-4",g),e[8]=g,e[9]=p):p=e[9],e[10]!==p?(b=h.jsx(ur,{className:p}),e[10]=p,e[11]=b):b=e[11];const y=l&&i&&"font-semibold";let x,v,S,k;e[12]!==y?(x=Oe(y),e[12]=y,e[13]=x):x=e[13],e[14]!==r.name?(v=r.name===""?h.jsx("i",{children:"Not connected"}):r.name,e[14]=r.name,e[15]=v):v=e[15],e[16]!==x||e[17]!==v?(S=h.jsx("span",{className:x,children:v}),e[16]=x,e[17]=v,e[18]=S):S=e[18],e[19]!==S||e[20]!==f||e[21]!==m||e[22]!==_||e[23]!==b?(k=h.jsxs(go,{className:"text-sm flex flex-row gap-1 items-center cursor-pointer rounded-none",onSelect:f,value:m,children:[_,b,S]}),e[19]=S,e[20]=f,e[21]=m,e[22]=_,e[23]=b,e[24]=k):k=e[24];const E=i&&s;let j;return e[25]!==k||e[26]!==E?(j=h.jsxs(h.Fragment,{children:[k,E]}),e[25]=k,e[26]=E,e[27]=j):j=e[27],j},TL=t=>{const e=X.c(20),{schemas:n,defaultSchema:o,defaultDatabase:r,engineName:s,databaseName:i,hasSearch:a,searchValue:l}=t;if(n.length===0){let u;return e[0]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx(Wc,{content:"No schemas available",className:"pl-6"}),e[0]=u):u=e[0],u}let c,d;if(e[1]!==i||e[2]!==r||e[3]!==o||e[4]!==s||e[5]!==a||e[6]!==n||e[7]!==l){let u;e[9]!==l?(u=_=>!l||_.tables.some(g=>g.name.toLowerCase().includes(l.toLowerCase())),e[9]=l,e[10]=u):u=e[10];const f=n.filter(u);let m;e[11]!==i||e[12]!==r||e[13]!==o||e[14]!==s||e[15]!==a||e[16]!==l?(m=_=>h.jsx(ML,{databaseName:i,schema:_,hasSearch:a,children:h.jsx(c3,{tables:_.tables,searchValue:l,sqlTableContext:{engine:s,database:i,schema:_.name,defaultSchema:o,defaultDatabase:r}})},_.name),e[11]=i,e[12]=r,e[13]=o,e[14]=s,e[15]=a,e[16]=l,e[17]=m):m=e[17],c=f.map(m),e[1]=i,e[2]=r,e[3]=o,e[4]=s,e[5]=a,e[6]=n,e[7]=l,e[8]=c}else c=e[8];return e[18]!==c?(d=h.jsx(h.Fragment,{children:c}),e[18]=c,e[19]=d):d=e[19],d},ML=t=>{const e=X.c(26),{databaseName:n,schema:o,children:r,hasSearch:s}=t,[i,a]=K.useState(!1),[l,c]=K.useState(!1),d=`${n}:${o.name}`;let u,f,m,_;if(e[0]!==s?(u=()=>{a(s)},f=[s],e[0]=s,e[1]=u,e[2]=f):(u=e[1],f=e[2]),K.useEffect(u,f),fS(o.name))return r;e[3]!==i||e[4]!==l?(m=()=>{a(!i),c(!l)},e[3]=i,e[4]=l,e[5]=m):m=e[5],e[6]!==i?(_=h.jsx(mS,{isExpanded:i}),e[6]=i,e[7]=_):_=e[7];const g=l&&i&&"text-foreground";let p,b;e[8]!==g?(p=Oe("h-4 w-4 text-muted-foreground",g),e[8]=g,e[9]=p):p=e[9],e[10]!==p?(b=h.jsx(tH,{className:p}),e[10]=p,e[11]=b):b=e[11];const y=l&&i&&"font-semibold";let x,v,S;e[12]!==y?(x=Oe(y),e[12]=y,e[13]=x):x=e[13],e[14]!==o.name||e[15]!==x?(v=h.jsx("span",{className:x,children:o.name}),e[14]=o.name,e[15]=x,e[16]=v):v=e[16],e[17]!==v||e[18]!==m||e[19]!==_||e[20]!==b||e[21]!==d?(S=h.jsxs(go,{className:"text-sm flex flex-row gap-1 items-center pl-5 cursor-pointer rounded-none",onSelect:m,value:d,children:[_,b,v]}),e[17]=v,e[18]=m,e[19]=_,e[20]=b,e[21]=d,e[22]=S):S=e[22];const k=i&&r;let E;return e[23]!==S||e[24]!==k?(E=h.jsxs(h.Fragment,{children:[S,k]}),e[23]=S,e[24]=k,e[25]=E):E=e[25],E},c3=t=>{const e=X.c(24),{tables:n,sqlTableContext:o,searchValue:r}=t,{addTableList:s}=dS(),[i,a]=K.useState(!1),[l,c]=K.useState(!1);let d,u;e[0]!==s||e[1]!==o||e[2]!==n.length||e[3]!==i?(d=async()=>{if(n.length===0&&o&&!i){a(!0),c(!0);const{engine:p,database:b,schema:y}=o,x=await v$.request({engine:p,database:b,schema:y});if(!(x!=null&&x.tables))throw c(!1),new Error("No tables available");s({tables:x.tables,sqlTableContext:o}),c(!1)}},e[0]=s,e[1]=o,e[2]=n.length,e[3]=i,e[4]=d):d=e[4],e[5]!==o||e[6]!==n.length||e[7]!==i?(u=[n.length,o,i],e[5]=o,e[6]=n.length,e[7]=i,e[8]=u):u=e[8];const{isPending:f,error:m}=qn(d,u);if(f||l){let p;return e[9]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(uS,{message:"Loading tables...",className:"pl-12"}),e[9]=p):p=e[9],p}if(m){let p;return e[10]!==m?(p=h.jsx(hS,{error:m,className:"pl-12"}),e[10]=m,e[11]=p):p=e[11],p}if(n.length===0){let p;return e[12]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(Wc,{content:"No tables found",className:"pl-9"}),e[12]=p):p=e[12],p}let _,g;if(e[13]!==r||e[14]!==o||e[15]!==n){let p;e[17]!==r?(p=x=>!r||x.name.toLowerCase().includes(r.toLowerCase()),e[17]=r,e[18]=p):p=e[18];const b=n.filter(p);let y;e[19]!==r||e[20]!==o?(y=x=>h.jsx(OL,{table:x,sqlTableContext:o,isSearching:!!r},x.name),e[19]=r,e[20]=o,e[21]=y):y=e[21],_=b.map(y),e[13]=r,e[14]=o,e[15]=n,e[16]=_}else _=e[16];return e[22]!==_?(g=h.jsx(h.Fragment,{children:_}),e[22]=_,e[23]=g):g=e[23],g},OL=t=>{const e=X.c(62),{table:n,sqlTableContext:o,isSearching:r}=t,{addTable:s}=dS(),[i,a]=K.useState(!1),[l,c]=K.useState(!1),d=n.columns.length>0;let u,f;e[0]!==s||e[1]!==i||e[2]!==o||e[3]!==n.name||e[4]!==d||e[5]!==l?(u=async()=>{if(i&&!d&&o&&!l){c(!0);const{engine:q,database:re,schema:ne}=o,oe=await k$.request({engine:q,database:re,schema:ne,tableName:n.name});if(!(oe!=null&&oe.table))throw new Error("No table details available");s({table:oe.table,sqlTableContext:o})}},e[0]=s,e[1]=i,e[2]=o,e[3]=n.name,e[4]=d,e[5]=l,e[6]=u):u=e[6],e[7]!==i||e[8]!==d?(f=[i,d],e[7]=i,e[8]=d,e[9]=f):f=e[9];const{isPending:m,error:_}=qn(u,f),g=$e(Ls),p=$s(),{createNewCell:b}=Ft();let y;e[10]!==g||e[11]!==b||e[12]!==p||e[13]!==o||e[14]!==n?(y=()=>{hr(g,b,p),b({code:(()=>{if(n.source_type==="catalog"){const q=o!=null&&o.database?`${o.database}.${n.name}`:n.name;return`${n.engine}.load_table("${q}")`}if(o)return pS(n,"*",o);switch(n.source_type){case"local":return`mo.ui.table(${n.name})`;case"duckdb":case"connection":return pS(n,"*",o);default:return wc(n.source_type),""}})(),before:!1,cellId:p??"__end__"})},e[10]=g,e[11]=b,e[12]=p,e[13]=o,e[14]=n,e[15]=y):y=e[15];const x=y;let v;e[16]!==n.num_columns||e[17]!==n.num_rows?(v=()=>{const q=[];return n.num_rows!=null&&q.push(`${n.num_rows} rows`),n.num_columns!=null&&q.push(`${n.num_columns} columns`),q.length===0?null:h.jsx("div",{className:"flex flex-row gap-2 items-center pl-6 group-hover:hidden",children:h.jsx("span",{className:"text-xs text-muted-foreground",children:q.join(", ")})})},e[16]=n.num_columns,e[17]=n.num_rows,e[18]=v):v=e[18];const S=v;let k;e[19]!==_||e[20]!==m||e[21]!==o||e[22]!==n?(k=()=>{if(m)return h.jsx(uS,{message:"Loading columns...",className:"pl-12"});if(_)return h.jsx(hS,{error:_,className:"pl-12"});const q=n.columns;return q.length===0?h.jsx(Wc,{content:"No columns found",className:"pl-12"}):q.map(re=>h.jsx(DL,{table:n,column:re,sqlTableContext:o},re.name))},e[19]=_,e[20]=m,e[21]=o,e[22]=n,e[23]=k):k=e[23];const E=k;let j;e[24]!==i||e[25]!==r||e[26]!==n.source_type||e[27]!==n.type?(j=()=>{if(n.source_type==="local")return;const q=n.type==="table"?JV:U3;return h.jsx(q,{className:"h-3 w-3",strokeWidth:i||r?2.5:void 0})},e[24]=i,e[25]=r,e[26]=n.source_type,e[27]=n.type,e[28]=j):j=e[28];const I=j,T=o?`${o.database}.${o.schema}.${n.name}`:n.name,M=o&&(fS(o.schema)?"pl-9":"pl-12"),L=(i||r)&&"font-semibold";let B,O,z,F,V,R,C,H,N,$,Y,Z;return e[29]!==M||e[30]!==L?(B=Oe("rounded-none group h-8 cursor-pointer",M,L),e[29]=M,e[30]=L,e[31]=B):B=e[31],e[32]!==i?(O=()=>a(!i),e[32]=i,e[33]=O):O=e[33],e[34]!==I?(z=I(),e[34]=I,e[35]=z):z=e[35],e[36]!==n.name?(F=h.jsx("span",{className:"text-sm",children:n.name}),e[36]=n.name,e[37]=F):F=e[37],e[38]!==z||e[39]!==F?(V=h.jsxs("div",{className:"flex gap-2 items-center flex-1",children:[z,F]}),e[38]=z,e[39]=F,e[40]=V):V=e[40],e[41]!==S?(R=S(),e[41]=S,e[42]=R):R=e[42],e[43]!==x?(C=$n.stopPropagation(()=>x()),e[43]=x,e[44]=C):C=e[44],e[45]===Symbol.for("react.memo_cache_sentinel")?(H=h.jsx(KV,{className:"h-3 w-3"}),e[45]=H):H=e[45],e[46]!==C?(N=h.jsx(Le,{content:"Add table to notebook",delayDuration:400,children:h.jsx(Pe,{className:"group-hover:inline-flex hidden",variant:"text",size:"icon",onClick:C,children:H})}),e[46]=C,e[47]=N):N=e[47],e[48]!==i||e[49]!==O||e[50]!==V||e[51]!==R||e[52]!==N||e[53]!==B||e[54]!==T?($=h.jsxs(go,{className:B,value:T,"aria-selected":i,forceMount:!0,onSelect:O,children:[V,R,N]}),e[48]=i,e[49]=O,e[50]=V,e[51]=R,e[52]=N,e[53]=B,e[54]=T,e[55]=$):$=e[55],e[56]!==i||e[57]!==E?(Y=i&&E(),e[56]=i,e[57]=E,e[58]=Y):Y=e[58],e[59]!==$||e[60]!==Y?(Z=h.jsxs(h.Fragment,{children:[$,Y]}),e[59]=$,e[60]=Y,e[61]=Z):Z=e[61],Z},DL=t=>{var Y,Z;const e=X.c(53),{table:n,column:o,sqlTableContext:r}=t,[s,i]=K.useState(!1),a=$e(lS),l=Zt(XV);let c,d;e[0]!==a?(c=()=>{a&&i(!1)},d=[a],e[0]=a,e[1]=c,e[2]=d):(c=e[1],d=e[2]),K.useEffect(c,d),l(s?q=>new Set([...q,`${n.name}:${o.name}`]):q=>(q.delete(`${n.name}:${o.name}`),new Set(q)));const u=$e(Ls),f=$s(),{createNewCell:m}=Ft(),{columnsPreviews:_}=ZV();let g;e[3]!==o.name||e[4]!==n.primary_keys?(g=((Y=n.primary_keys)==null?void 0:Y.includes(o.name))||!1,e[3]=o.name,e[4]=n.primary_keys,e[5]=g):g=e[5];const p=g;let b;e[6]!==o.name||e[7]!==n.indexes?(b=((Z=n.indexes)==null?void 0:Z.includes(o.name))||!1,e[6]=o.name,e[7]=n.indexes,e[8]=b):b=e[8];const y=b;let x;e[9]!==u||e[10]!==m||e[11]!==f?(x=q=>{q.includes("alt")&&nH(u,m,f),m({code:q,before:!1,cellId:f??"__end__"})},e[9]=u,e[10]=m,e[11]=f,e[12]=x):x=e[12];const v=x,S=RL,k=s?"font-semibold":"";let E;e[13]!==o.name||e[14]!==k?(E=h.jsx("span",{className:k,children:o.name}),e[13]=o.name,e[14]=k,e[15]=E):E=e[15];const j=E,I=`${n.name}.${o.name}`,T=`${n.name}.${o.name}`;let M;e[16]!==s?(M=()=>i(!s),e[16]=s,e[17]=M):M=e[17];const L=r?"pl-14":"pl-7";let B,O,z,F,V,R,C,H,N,$;return e[18]!==L?(B=Oe("flex flex-row gap-2 items-center flex-1",L),e[18]=L,e[19]=B):B=e[19],e[20]!==o.type||e[21]!==j?(O=h.jsx(QV,{columnName:j,dataType:o.type}),e[20]=o.type,e[21]=j,e[22]=O):O=e[22],e[23]!==p?(z=p&&S({tooltipContent:"Primary key",content:"PK"}),e[23]=p,e[24]=z):z=e[24],e[25]!==y?(F=y&&S({tooltipContent:"Indexed",content:"IDX"}),e[25]=y,e[26]=F):F=e[26],e[27]!==B||e[28]!==O||e[29]!==z||e[30]!==F?(V=h.jsxs("div",{className:B,children:[O,z,F]}),e[27]=B,e[28]=O,e[29]=z,e[30]=F,e[31]=V):V=e[31],e[32]!==o.name?(R=h.jsx(Le,{content:"Copy column name",delayDuration:400,children:h.jsx(Pe,{variant:"text",size:"icon",className:"group-hover:opacity-100 opacity-0 hover:bg-muted text-muted-foreground hover:text-foreground",children:h.jsx(nS,{tooltip:!1,value:o.name,className:"h-3 w-3"})})}),e[32]=o.name,e[33]=R):R=e[33],e[34]!==o.external_type?(C=h.jsx("span",{className:"text-xs text-muted-foreground",children:o.external_type}),e[34]=o.external_type,e[35]=C):C=e[35],e[36]!==M||e[37]!==V||e[38]!==R||e[39]!==C||e[40]!==I||e[41]!==T?(H=h.jsxs(go,{className:"rounded-none py-1 group cursor-pointer",value:T,onSelect:M,children:[V,R,C]},I),e[36]=M,e[37]=V,e[38]=R,e[39]=C,e[40]=I,e[41]=T,e[42]=H):H=e[42],e[43]!==o||e[44]!==_||e[45]!==v||e[46]!==s||e[47]!==r||e[48]!==n?(N=s&&h.jsx("div",{className:"pl-10 pr-2 py-2 bg-[var(--slate-1)] shadow-inner border-b",children:h.jsx(jc,{children:h.jsx(eH,{table:n,column:o,onAddColumnChart:v,preview:_.get(r?`${r.database}.${r.schema}.${n.name}:${o.name}`:`${n.name}:${o.name}`),sqlTableContext:r})})}),e[43]=o,e[44]=_,e[45]=v,e[46]=s,e[47]=r,e[48]=n,e[49]=N):N=e[49],e[50]!==H||e[51]!==N?($=h.jsxs(h.Fragment,{children:[H,N]}),e[50]=H,e[51]=N,e[52]=$):$=e[52],$};function RL(t){const{tooltipContent:e,content:n}=t;return h.jsx(Le,{content:e,delayDuration:100,children:h.jsx("span",{className:"text-xs text-black bg-gray-100 dark:invert rounded px-1",children:n})})}const PL=()=>{const t=X.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx(EL,{}),t[0]=e):e=t[0],e},LL=()=>{const t=X.c(5),{documentation:e}=$e(oH);if(!e){let r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(On,{title:"View docs as you type",description:"Move your text cursor over a symbol to see its documentation.",icon:h.jsx(id,{})}),t[0]=r):r=t[0],r}let n,o;return t[1]!==e?(n=Xm({html:e}),t[1]=e,t[2]=n):n=t[2],t[3]!==n?(o=h.jsx("div",{className:"p-3 overflow-y-auto overflow-x-hidden h-full docs-documentation flex flex-col gap-4",children:n}),t[3]=n,t[4]=o):o=t[4],o},FL=()=>{const t=X.c(5),e=rH();if(e.length===0){let r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(On,{title:"No errors!",icon:h.jsx(zp,{})}),t[0]=r):r=t[0],r}let n,o;return t[1]!==e?(n=e.map(zL),t[1]=e,t[2]=n):n=t[2],t[3]!==n?(o=h.jsx("div",{className:"flex flex-col overflow-auto",children:n}),t[3]=n,t[4]=o):o=t[4],o};function zL(t){return h.jsxs("div",{children:[h.jsx("div",{className:"text-xs font-mono font-semibold bg-muted border-y px-2 py-1",children:h.jsx(sH,{cellId:t.cellId})}),h.jsx("div",{className:"px-2",children:h.jsx(iH,{errors:t.output.data,cellId:t.cellId},t.cellId)},t.cellId)]},t.cellId)}function d3(t,e,n){return t[e]?t[e][0]?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}dp=function(t){t===void 0&&(t={});var e=t.onResize,n=A.useRef(void 0);n.current=e;var o=t.round||Math.round,r=A.useRef(),s=A.useState({width:void 0,height:void 0}),i=s[0],a=s[1],l=A.useRef(!1);A.useEffect(function(){return l.current=!1,function(){l.current=!0}},[]);var c=A.useRef({width:void 0,height:void 0}),d=function(u,f){var m=A.useRef(null),_=A.useRef(null);_.current=f;var g=A.useRef(null);A.useEffect(function(){p()});var p=A.useCallback(function(){var b=g.current,y=_.current,x=b||(y?y instanceof Element?y:y.current:null);m.current&&m.current.element===x&&m.current.subscriber===u||(m.current&&m.current.cleanup&&m.current.cleanup(),m.current={element:x,subscriber:u,cleanup:x?u(x):void 0})},[u]);return A.useEffect(function(){return function(){m.current&&m.current.cleanup&&(m.current.cleanup(),m.current=null)}},[]),A.useCallback(function(b){g.current=b,p()},[p])}(A.useCallback(function(u){return r.current&&r.current.box===t.box&&r.current.round===o||(r.current={box:t.box,round:o,instance:new ResizeObserver(function(f){var m=f[0],_=t.box==="border-box"?"borderBoxSize":t.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",g=d3(m,_,"inlineSize"),p=d3(m,_,"blockSize"),b=g?o(g):void 0,y=p?o(p):void 0;if(c.current.width!==b||c.current.height!==y){var x={width:b,height:y};c.current.width=b,c.current.height=y,n.current?n.current(x):l.current||a(x)}})}),r.current.instance.observe(u,{box:t.box}),function(){r.current&&r.current.instance.unobserve(u)}},[t.box,o]),t.ref);return A.useMemo(function(){return{ref:d,width:i.width,height:i.height}},[d,i.width,i.height])};const Kf=new Map,BL=({file:t,onOpenNotebook:e})=>{const{theme:n}=Fo(),o=$e(dm),[r,s]=A.useState(""),{data:i,isPending:a,error:l,setData:c}=qn(async()=>{const g=await gS({path:t.path}),p=g.contents||"";return s(Kf.get(t.path)||p),g},[t.path]),d=async()=>{r!==(i==null?void 0:i.contents)&&await fH({path:t.path,contents:r}).then(g=>{g.success&&(c(p=>({...p,contents:r})),s(r))})},u=A.useRef(r);if(u.current=r,A.useEffect(()=>()=>{if(!(i!=null&&i.contents))return;const g=u.current;g===i.contents?Kf.delete(t.path):Kf.set(t.path,g)},[t.path,i==null?void 0:i.contents]),l)return h.jsx(ni,{error:l});if(a||!i)return null;const f=i.mimeType||"text/plain",m=f in Xf;if(!i.contents&&!m)return h.jsxs("div",{className:"grid grid-cols-2 gap-2 p-6",children:[h.jsx("div",{className:"font-bold text-muted-foreground",children:"Name"}),h.jsx("div",{children:i.file.name}),h.jsx("div",{className:"font-bold text-muted-foreground",children:"Type"}),h.jsx("div",{children:f})]});const _=h.jsxs("div",{className:"text-xs text-muted-foreground p-1 flex justify-end gap-2 border-b",children:[t.isMarimoFile&&!En()&&h.jsx(Le,{content:"Open notebook",children:h.jsx(wn,{size:"small",onClick:g=>e(g),children:h.jsx(Sc,{})})}),h.jsx(Le,{content:"Download",children:h.jsx(wn,{size:"small",onClick:()=>{if(u3(f)){const g=uH(i.contents,f);hH(g,i.file.name)}else la(new Blob([i.contents||r],{type:f}),i.file.name)},children:h.jsx(Nm,{})})}),!u3(f)&&h.jsxs(h.Fragment,{children:[h.jsx(Le,{content:"Copy contents to clipboard",children:h.jsx(wn,{size:"small",onClick:async()=>{await xn(r)},children:h.jsx(Rs,{})})}),h.jsx(Le,{content:pn("global.save"),children:h.jsx(wn,{size:"small",color:r===i.contents?void 0:"green",onClick:d,disabled:r===i.contents,children:h.jsx(Ma,{})})})]})]});return f.startsWith("image/")?h.jsxs(h.Fragment,{children:[_,h.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:h.jsx(aH,{base64:i.contents,mime:f})})]}):f==="text/csv"&&i.contents?h.jsxs(h.Fragment,{children:[_,h.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:h.jsx(lH,{contents:i.contents})})]}):f.startsWith("audio/")?h.jsxs(h.Fragment,{children:[_,h.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:h.jsx(cH,{base64:i.contents,mime:f})})]}):f.startsWith("video/")?h.jsxs(h.Fragment,{children:[_,h.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:h.jsx(dH,{base64:i.contents,mime:f})})]}):h.jsxs(h.Fragment,{children:[_,h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsx(A.Suspense,{children:h.jsx(va,{theme:n==="dark"?"dark":"light",language:Xf[f]||Xf.default,className:"border-b",extensions:[st.lineWrapping,Gn.of([{key:o.getHotkey("global.save").key,stopPropagation:!0,run:()=>r!==i.contents&&(d(),!0)}])],value:r,onChange:s})})})]})},u3=t=>t.startsWith("image/")||t.startsWith("audio/")||t.startsWith("video/"),Xf={"application/javascript":"javascript","text/markdown":"markdown","text/html":"html","text/css":"css","text/x-python":"python","application/json":"json","application/xml":"xml","text/x-yaml":"yaml","text/csv":"markdown","text/plain":"markdown",default:"markdown"},h3=en(new class{constructor(t){this.callbacks=t,this.delegate=new rp([]),this.rootPath="",this.onChange=In.NOOP,this.path=new Sm("/"),this.initialize=async e=>{if(this.onChange=e,this.delegate.data.length===0)try{const n=await this.callbacks.listFiles({path:this.rootPath});this.delegate=new rp(n.files),this.rootPath=n.root,this.path=Sm.guessDeliminator(n.root)}catch(n){lt({title:"Failed",description:L4(n)})}this.onChange(this.delegate.data)},this.refreshAll=async e=>{const n=[this.rootPath,...e.map(r=>{var s;return(s=this.delegate.find(r))==null?void 0:s.data.path})].filter(Boolean),o=await Promise.all(n.map(r=>this.callbacks.listFiles({path:r}).catch(()=>({files:[]}))));for(const[r,s]of n.entries()){const i=o[r];s===this.rootPath?this.delegate=new rp(i.files):this.delegate.update({id:s,changes:{children:i.files}})}this.onChange(this.delegate.data)},this.relativeFromRoot=e=>{const n=function(o){return o.endsWith("/")?o:`${o}/`}(this.rootPath);return e.startsWith(n)?e.slice(n.length):e},this.handleResponse=e=>e.success?e:(lt({title:"Failed",description:e.message}),null)}async expand(t){const e=this.delegate.find(t);if(!e||!e.data.isDirectory)return!1;if(e.children&&e.children.length>0)return!0;const n=await this.callbacks.listFiles({path:e.data.path});return this.delegate.update({id:t,changes:{children:n.files}}),this.onChange(this.delegate.data),!0}async rename(t,e){const n=this.delegate.find(t);if(!n)return;const o=n.data.path,r=this.path.join(this.path.dirname(o),e);await this.callbacks.renameFileOrFolder({path:o,newPath:r}).then(this.handleResponse),this.delegate.update({id:t,changes:{name:e,path:r}}),this.onChange(this.delegate.data),await this.refreshAll([r])}async move(t,e){var o;const n=e?((o=this.delegate.find(e))==null?void 0:o.data.path)??e:this.rootPath;await Promise.all(t.map(r=>{this.delegate.move({id:r,parentId:e,index:0});const s=this.delegate.find(r);if(!s)return Promise.resolve();const i=this.path.join(n,this.path.basename(s.data.path));return this.delegate.update({id:r,changes:{path:i}}),this.callbacks.renameFileOrFolder({path:s.data.path,newPath:i}).then(this.handleResponse)})),this.onChange(this.delegate.data),await this.refreshAll([n])}async createFile(t,e){var r;const n=e?((r=this.delegate.find(e))==null?void 0:r.data.path)??e:this.rootPath,o=await this.callbacks.createFileOrFolder({path:n,type:"file",name:t}).then(this.handleResponse);o!=null&&o.info&&(this.delegate.create({parentId:e,index:0,data:o.info}),this.onChange(this.delegate.data),await this.refreshAll([n]))}async createFolder(t,e){var r;const n=e?((r=this.delegate.find(e))==null?void 0:r.data.path)??e:this.rootPath,o=await this.callbacks.createFileOrFolder({path:n,type:"directory",name:t}).then(this.handleResponse);o!=null&&o.info&&(this.delegate.create({parentId:e,index:0,data:o.info}),this.onChange(this.delegate.data),await this.refreshAll([n]))}async delete(t){const e=this.delegate.find(t);e&&(await this.callbacks.deleteFileOrFolder({path:e.data.path}).then(this.handleResponse),this.delegate.drop({id:t}),this.onChange(this.delegate.data))}}({listFiles:u4,createFileOrFolder:_S,deleteFileOrFolder:pH,renameFileOrFolder:mH})),UL=en({});function VL(t){return new Promise((e,n)=>{const o=new FileReader;o.onload=r=>{var s;e((s=r.target)==null?void 0:s.result)},o.onerror=r=>{n(new Error(`Failed to read blob: ${r.type}`))},o.readAsDataURL(t)})}function f3(t){const e=X.c(4);let n;e[0]!==t?(n=t===void 0?{}:t,e[0]=t,e[1]=n):n=e[1];const o=n;let r;return e[2]!==o?(r={multiple:!0,maxSize:104857600,onError:GL,onDropRejected:$L,onDrop:HL,...o},e[2]=o,e[3]=r):r=e[3],gH(r)}async function HL(t){for(const e of t){const n=(await VL(e)).split(",")[1];await _S({path:"",type:"file",name:e.name,contents:n})}await async function(){await ct.get(h3).refreshAll([])}()}function $L(t){lt({title:"File upload failed",description:h.jsx("div",{className:"flex flex-col gap-1",children:t.map(WL)}),variant:"danger"})}function WL(t){return h.jsxs("div",{children:[t.file.name," (",t.errors.map(qL).join(", "),")"]},t.file.name)}function qL(t){return t.message}function GL(t){Qt.error(t),lt({title:"File upload failed",description:t.message,variant:"danger"})}const m3=K.createContext(null),YL=t=>{const e=X.c(60),{height:n}=t,o=A.useRef(null),[r]=fn(h3);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],e[0]=s):s=e[0];const[i,a]=A.useState(s),[l,c]=A.useState(null),{openPrompt:d}=Wn(),[u,f]=fn(UL);let m,_;e[1]!==r?(m=()=>r.initialize(a),e[1]=r,e[2]=m):m=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(_=[],e[3]=_):_=e[3];const{isPending:g,error:p}=qn(m,_);let b;e[4]!==u||e[5]!==r?(b=()=>{r.refreshAll(Object.keys(u).filter(C=>u[C]))},e[4]=u,e[5]=r,e[6]=b):b=e[6];const y=tt(b);let x;e[7]!==d||e[8]!==r?(x=async()=>{d({title:"Folder name",onConfirm:async C=>{r.createFolder(C,null)}})},e[7]=d,e[8]=r,e[9]=x):x=e[9];const v=tt(x);let S;e[10]!==d||e[11]!==r?(S=async()=>{d({title:"File name",onConfirm:async C=>{r.createFile(C,null)}})},e[10]=d,e[11]=r,e[12]=S):S=e[12];const k=tt(S);let E;e[13]!==f?(E=()=>{var C;(C=o.current)==null||C.closeAll(),f({})},e[13]=f,e[14]=E):E=e[14];const j=tt(E);if(g){let C;return e[15]===Symbol.for("react.memo_cache_sentinel")?(C=h.jsx(Jn,{size:"medium",centered:!0}),e[15]=C):C=e[15],C}if(p){let C;return e[16]!==p?(C=h.jsx(ni,{error:p}),e[16]=p,e[17]=C):C=e[17],C}if(l){let C,H,N,$,Y,Z;return e[18]===Symbol.for("react.memo_cache_sentinel")?(C=()=>c(null),e[18]=C):C=e[18],e[19]===Symbol.for("react.memo_cache_sentinel")?(H=h.jsx(Pe,{onClick:C,"data-testid":"file-explorer-back-button",variant:"text",size:"xs",className:"mb-0",children:h.jsx(It,{size:16})}),e[19]=H):H=e[19],e[20]!==l.name?(N=h.jsxs("div",{className:"flex items-center pl-1 pr-3 flex-shrink-0 border-b justify-between",children:[H,h.jsx("span",{className:"font-bold",children:l.name})]}),e[20]=l.name,e[21]=N):N=e[21],e[22]!==l.path||e[23]!==r?($=q=>p3(q,r.relativeFromRoot(l.path)),e[22]=l.path,e[23]=r,e[24]=$):$=e[24],e[25]!==l||e[26]!==$?(Y=h.jsx(A.Suspense,{children:h.jsx(BL,{onOpenNotebook:$,file:l})}),e[25]=l,e[26]=$,e[27]=Y):Y=e[27],e[28]!==N||e[29]!==Y?(Z=h.jsxs(h.Fragment,{children:[N,Y]}),e[28]=N,e[29]=Y,e[30]=Z):Z=e[30],Z}let I;e[31]!==j||e[32]!==k||e[33]!==v||e[34]!==y||e[35]!==r?(I=h.jsx(KL,{onRefresh:y,onCreateFile:k,onCreateFolder:v,onCollapseAll:j,tree:r}),e[31]=j,e[32]=k,e[33]=v,e[34]=y,e[35]=r,e[36]=I):I=e[36];const T=n-33;let M,L,B,O,z,F,V,R;return e[37]!==r?(M=async C=>{const{ids:H}=C;for(const N of H)await r.delete(N)},L=async C=>{const{id:H,name:N}=C;await r.rename(H,N)},B=async C=>{const{dragIds:H,parentId:N}=C;await r.move(H,N)},e[37]=r,e[38]=M,e[39]=L,e[40]=B):(M=e[38],L=e[39],B=e[40]),e[41]===Symbol.for("react.memo_cache_sentinel")?(O=C=>{const H=C[0];H&&(H.data.isDirectory||c(H.data))},e[41]=O):O=e[41],e[42]!==u||e[43]!==f||e[44]!==r?(z=async C=>{if(await r.expand(C)){const H=u[C]??!1;f({...u,[C]:!H})}},e[42]=u,e[43]=f,e[44]=r,e[45]=z):z=e[45],e[46]!==i||e[47]!==u||e[48]!==M||e[49]!==L||e[50]!==B||e[51]!==z||e[52]!==T?(F=h.jsx(o$,{width:"100%",ref:o,height:T,className:"h-full",data:i,initialOpenState:u,openByDefault:!1,renderCursor:tF,disableDrop:nF,onDelete:M,onRename:L,onMove:B,onSelect:O,onToggle:z,padding:15,rowHeight:30,indent:JL,overscanCount:1e3,disableMultiSelection:!0,children:QL}),e[46]=i,e[47]=u,e[48]=M,e[49]=L,e[50]=B,e[51]=z,e[52]=T,e[53]=F):F=e[53],e[54]!==F||e[55]!==r?(V=h.jsx(m3,{value:r,children:F}),e[54]=F,e[55]=r,e[56]=V):V=e[56],e[57]!==V||e[58]!==I?(R=h.jsxs(h.Fragment,{children:[I,V]}),e[57]=V,e[58]=I,e[59]=R):R=e[59],R},JL=15,KL=t=>{const e=X.c(30),{onRefresh:n,onCreateFile:o,onCreateFolder:r,onCollapseAll:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={noDrag:!0,noDragEventsBubbling:!0},e[0]=i):i=e[0];const{getRootProps:a,getInputProps:l}=f3(i);let c,d,u,f,m,_,g,p,b,y,x,v,S,k,E;return e[1]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Aa,{size:16}),e[1]=c):c=e[1],e[2]!==o?(d=h.jsx(Le,{content:"Add file",children:h.jsx(Pe,{"data-testid":"file-explorer-add-file-button",onClick:o,variant:"text",size:"xs",children:c})}),e[2]=o,e[3]=d):d=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx(Qc,{size:16}),e[4]=u):u=e[4],e[5]!==r?(f=h.jsx(Le,{content:"Add folder",children:h.jsx(Pe,{"data-testid":"file-explorer-add-folder-button",onClick:r,variant:"text",size:"xs",children:u})}),e[5]=r,e[6]=f):f=e[6],e[7]!==a?(m=a({}),e[7]=a,e[8]=m):m=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(_=_H({variant:"text",size:"xs"}),g=h.jsx(bH,{size:16}),e[9]=_,e[10]=g):(_=e[9],g=e[10]),e[11]!==m?(p=h.jsx(Le,{content:"Upload file",children:h.jsx("button",{"data-testid":"file-explorer-upload-button",...m,className:_,children:g})}),e[11]=m,e[12]=p):p=e[12],e[13]!==l?(b=l({}),e[13]=l,e[14]=b):b=e[14],e[15]!==b?(y=h.jsx("input",{...b,type:"file"}),e[15]=b,e[16]=y):y=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(V4,{size:16}),e[17]=x):x=e[17],e[18]!==n?(v=h.jsx(Le,{content:"Refresh",children:h.jsx(Pe,{"data-testid":"file-explorer-refresh-button",onClick:n,variant:"text",size:"xs",children:x})}),e[18]=n,e[19]=v):v=e[19],e[20]===Symbol.for("react.memo_cache_sentinel")?(S=h.jsx(bp,{size:16}),e[20]=S):S=e[20],e[21]!==s?(k=h.jsx(Le,{content:"Collapse all folders",children:h.jsx(Pe,{"data-testid":"file-explorer-collapse-button",onClick:s,variant:"text",size:"xs",children:S})}),e[21]=s,e[22]=k):k=e[22],e[23]!==y||e[24]!==v||e[25]!==k||e[26]!==d||e[27]!==f||e[28]!==p?(E=h.jsxs("div",{className:"flex items-center justify-end px-2 flex-shrink-0 border-b",children:[d,f,p,y,v,k]}),e[23]=y,e[24]=v,e[25]=k,e[26]=d,e[27]=f,e[28]=p,e[29]=E):E=e[29],E},XL=t=>{const e=X.c(9),{node:n,onOpenMarimoFile:o}=t;let r,s,i;return e[0]!==n?(r=a=>{n.data.isDirectory||(a.stopPropagation(),n.select())},e[0]=n,e[1]=r):r=e[1],e[2]!==n.data.isMarimoFile||e[3]!==o?(s=n.data.isMarimoFile&&!En()&&h.jsxs("span",{className:"flex-shrink-0 ml-2 text-sm hidden group-hover:inline hover:underline",onClick:o,children:["open ",h.jsx(Sc,{className:"inline ml-1",size:12})]}),e[2]=n.data.isMarimoFile,e[3]=o,e[4]=s):s=e[4],e[5]!==n.data.name||e[6]!==r||e[7]!==s?(i=h.jsxs("span",{className:"flex-1 overflow-hidden text-ellipsis",onClick:r,children:[n.data.name,s]}),e[5]=n.data.name,e[6]=r,e[7]=s,e[8]=i):i=e[8],i},ZL=t=>{const e=X.c(10),{node:n}=t,o=A.useRef(null);let r,s,i,a,l;return e[0]!==n.data.name?(r=()=>{var c,d;(c=o.current)==null||c.focus(),(d=o.current)==null||d.setSelectionRange(0,n.data.name.lastIndexOf("."))},s=[n.data.name],e[0]=n.data.name,e[1]=r,e[2]=s):(r=e[1],s=e[2]),A.useEffect(r,s),e[3]!==n?(i=()=>n.reset(),a=c=>{c.key==="Escape"&&n.reset(),c.key==="Enter"&&n.submit(c.currentTarget.value)},e[3]=n,e[4]=i,e[5]=a):(i=e[4],a=e[5]),e[6]!==n.data.name||e[7]!==i||e[8]!==a?(l=h.jsx("input",{ref:o,className:"flex-1 bg-transparent border border-border text-muted-foreground",defaultValue:n.data.name,onClick:oF,onBlur:i,onKeyDown:a}),e[6]=n.data.name,e[7]=i,e[8]=a,e[9]=l):l=e[9],l},QL=t=>{const e=X.c(53),{node:n,style:o,dragHandle:r}=t;let s;e[0]!==n.data.isDirectory||e[1]!==n.data.name?(s=n.data.isDirectory?"directory":c4(n.data.name),e[0]=n.data.isDirectory,e[1]=n.data.name,e[2]=s):s=e[2];const i=s,a=d4[i],{openConfirm:l,openPrompt:c}=Wn(),d=A.use(m3);let u;e[3]!==n.data.path||e[4]!==d?(u=async F=>{p3(F,d?d.relativeFromRoot(n.data.path):n.data.path)},e[3]=n.data.path,e[4]=d,e[5]=u):u=e[5];const f=u;let m;e[6]!==n.data.name||e[7]!==n.id||e[8]!==n.tree||e[9]!==l?(m=async F=>{F.stopPropagation(),F.preventDefault(),l({title:"Delete file",description:`Are you sure you want to delete ${n.data.name}?`,confirmAction:h.jsx(o4,{onClick:async()=>{await n.tree.delete(n.id)},"aria-label":"Confirm",children:"Delete"})})},e[6]=n.data.name,e[7]=n.id,e[8]=n.tree,e[9]=l,e[10]=m):m=e[10];const _=m;let g;e[11]!==n||e[12]!==c||e[13]!==d?(g=async()=>{n.open(),c({title:"Folder name",onConfirm:async F=>{d==null||d.createFolder(F,n.id)}})},e[11]=n,e[12]=c,e[13]=d,e[14]=g):g=e[14];const p=tt(g);let b;e[15]!==n||e[16]!==c||e[17]!==d?(b=async()=>{n.open(),c({title:"File name",onConfirm:async F=>{d==null||d.createFile(F,n.id)}})},e[15]=n,e[16]=c,e[17]=d,e[18]=b):b=e[18];const y=tt(b);let x;e[19]!==i||e[20]!==y||e[21]!==p||e[22]!==_||e[23]!==f||e[24]!==n||e[25]!==d?(x=()=>{const F={size:14,strokeWidth:1.5,className:"mr-2"};return h.jsxs(Hs,{align:"end",className:"no-print w-[220px]",onClick:rF,onCloseAutoFocus:sF,children:[!n.data.isDirectory&&h.jsxs(sn,{onSelect:()=>n.select(),children:[h.jsx(eg,{...F}),"Open file"]}),!n.data.isDirectory&&!En()&&h.jsxs(sn,{onSelect:()=>{yH({path:n.data.path})},children:[h.jsx(Sc,{...F}),"Open file in external editor"]}),n.data.isDirectory&&h.jsxs(h.Fragment,{children:[h.jsxs(sn,{onSelect:()=>y(),children:[h.jsx(Aa,{...F}),"Create file"]}),h.jsxs(sn,{onSelect:()=>p(),children:[h.jsx(Qc,{...F}),"Create folder"]}),h.jsx(zo,{})]}),h.jsxs(sn,{onSelect:()=>n.edit(),children:[h.jsx(Bp,{...F}),"Rename"]}),h.jsxs(sn,{onSelect:async()=>{await xn(n.data.path),lt({title:"Copied to clipboard"})},children:[h.jsx(Rs,{...F}),"Copy path"]}),d&&h.jsxs(sn,{onSelect:async()=>{await xn(d.relativeFromRoot(n.data.path)),lt({title:"Copied to clipboard"})},children:[h.jsx(Rs,{...F}),"Copy relative path"]}),h.jsxs(sn,{onSelect:async()=>{lt({title:"Copied to clipboard",description:"Code to open the file has been copied to your clipboard. You can also drag and drop this file into the editor"});const{path:V}=n.data,R=wH[i](V);await xn(R)},children:[h.jsx(xH,{...F}),"Copy snippet for reading file"]}),n.data.isMarimoFile&&!En()&&h.jsxs(h.Fragment,{children:[h.jsx(zo,{}),h.jsxs(sn,{onSelect:f,children:[h.jsx(Jp,{...F}),"Open notebook"]})]}),h.jsx(zo,{}),!n.data.isDirectory&&h.jsxs(h.Fragment,{children:[h.jsxs(sn,{onSelect:async()=>{const V=(await gS({path:n.data.path})).contents||"";la(new Blob([V]),n.data.name)},children:[h.jsx(Nm,{...F}),"Download"]}),h.jsx(zo,{})]}),h.jsxs(sn,{onSelect:_,variant:"danger",children:[h.jsx(cm,{...F}),"Delete"]})]})},e[19]=i,e[20]=y,e[21]=p,e[22]=_,e[23]=f,e[24]=n,e[25]=d,e[26]=x):x=e[26];const v=x;let S,k,E;e[27]===Symbol.for("react.memo_cache_sentinel")?(S=Oe("flex items-center cursor-pointer ml-1 text-muted-foreground whitespace-nowrap group"),e[27]=S):S=e[27],e[28]!==n?(k=F=>{F.stopPropagation(),n.data.isDirectory&&n.toggle()},E=h.jsx(eF,{node:n}),e[28]=n,e[29]=k,e[30]=E):(k=e[29],E=e[30]);const j=n.willReceiveDrop&&n.data.isDirectory&&"bg-accent/80 hover:bg-accent/80 text-accent-foreground";let I,T,M,L,B,O,z;return e[31]!==j?(I=Oe("flex items-center pl-1 py-1 cursor-pointer hover:bg-accent/50 hover:text-accent-foreground rounded-l flex-1 overflow-hidden group",j),e[31]=j,e[32]=I):I=e[32],e[33]!==a||e[34]!==n.data.isMarimoFile?(T=n.data.isMarimoFile?h.jsx("img",{src:"./favicon.ico",className:"w-5 h-5 flex-shrink-0 mr-2 filter grayscale",alt:"Marimo"}):h.jsx(a,{className:"w-5 h-5 flex-shrink-0 mr-2",strokeWidth:1.5}),e[33]=a,e[34]=n.data.isMarimoFile,e[35]=T):T=e[35],e[36]!==f||e[37]!==n?(M=n.isEditing?h.jsx(ZL,{node:n}):h.jsx(XL,{node:n,onOpenMarimoFile:f}),e[36]=f,e[37]=n,e[38]=M):M=e[38],e[39]===Symbol.for("react.memo_cache_sentinel")?(L=h.jsx(Vs,{asChild:!0,tabIndex:-1,onClick:iF,children:h.jsx(Pe,{"data-testid":"file-explorer-more-button",variant:"text",tabIndex:-1,size:"xs",className:"mb-0","aria-label":"More options",children:h.jsx(Zc,{strokeWidth:2,className:"w-5 h-5 hidden group-hover:block"})})}),e[39]=L):L=e[39],e[40]!==v?(B=h.jsxs(Us,{modal:!1,children:[L,v()]}),e[40]=v,e[41]=B):B=e[41],e[42]!==I||e[43]!==T||e[44]!==M||e[45]!==B?(O=h.jsxs("span",{className:I,children:[T,M,B]}),e[42]=I,e[43]=T,e[44]=M,e[45]=B,e[46]=O):O=e[46],e[47]!==r||e[48]!==o||e[49]!==O||e[50]!==k||e[51]!==E?(z=h.jsxs("div",{style:o,ref:r,className:S,draggable:!0,onClick:k,children:[E,O]}),e[47]=r,e[48]=o,e[49]=O,e[50]=k,e[51]=E,e[52]=z):z=e[52],z},eF=t=>{const e=X.c(3),{node:n}=t;if(!n.data.isDirectory){let r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx("span",{className:"w-5 h-5 flex-shrink-0"}),e[0]=r):r=e[0],r}let o;return e[1]!==n.isOpen?(o=n.isOpen?h.jsx(ra,{className:"w-5 h-5 flex-shrink-0"}):h.jsx(bc,{className:"w-5 h-5 flex-shrink-0"}),e[1]=n.isOpen,e[2]=o):o=e[2],o};function p3(t,e){t.stopPropagation(),t.preventDefault(),window.open(`/?file=${e}`,"_blank")}function tF(){return null}function nF(t){const{parentNode:e}=t;return!e.data.isDirectory}function oF(t){return t.stopPropagation()}function rF(t){return t.stopPropagation()}function sF(t){return t.preventDefault()}function iF(t){return t.stopPropagation()}let g3,_3,b3;g3=()=>{const t=X.c(20),{ref:e,height:n}=dp(),o=n===void 0?1:n;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={noClick:!0,noKeyboard:!0},t[0]=r):r=t[0];const{getRootProps:s,getInputProps:i,isDragActive:a}=f3(r);let l,c,d,u,f,m,_,g;return t[1]!==s?(l=s(),t[1]=s,t[2]=l):l=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(c=Oe("flex flex-col flex-1 overflow-hidden relative"),t[3]=c):c=t[3],t[4]!==i?(d=i(),t[4]=i,t[5]=d):d=t[5],t[6]!==d?(u=h.jsx("input",{...d}),t[6]=d,t[7]=u):u=t[7],t[8]!==a?(f=a&&h.jsx("div",{className:"absolute inset-0 flex items-center uppercase justify-center text-xl font-bold text-primary/90 bg-accent/85 z-10 border-2 border-dashed border-primary/90 rounded-lg pointer-events-none",children:"Drop files here"}),t[8]=a,t[9]=f):f=t[9],t[10]!==o?(m=h.jsx(YL,{height:o}),t[10]=o,t[11]=m):m=t[11],t[12]!==e||t[13]!==m?(_=h.jsx("div",{ref:e,className:"flex flex-col flex-1 overflow-hidden",children:m}),t[12]=e,t[13]=m,t[14]=_):_=t[14],t[15]!==l||t[16]!==u||t[17]!==f||t[18]!==_?(g=h.jsxs("div",{...l,className:c,children:[u,f,_]}),t[15]=l,t[16]=u,t[17]=f,t[18]=_,t[19]=g):g=t[19],g},cp=t=>{const e=X.c(6),n=t.dataTestId;let o,r;return e[0]!==t.className?(o=Oe("text-xs font-semibold text-accent-foreground",t.className),e[0]=t.className,e[1]=o):o=e[1],e[2]!==t.dataTestId||e[3]!==t.onClick||e[4]!==o?(r=h.jsx("button",{type:"button","data-testid":n,className:o,onClick:t.onClick,children:"Clear"}),e[2]=t.dataTestId,e[3]=t.onClick,e[4]=o,e[5]=r):r=e[5],r},_3=()=>{const t=X.c(9),e=vH(),{clearLogs:n}=Ft();if(e.length===0){let i,a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx("code",{className:"border rounded px-1",children:"stdout"}),t[0]=i):i=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(On,{title:"No logs",description:h.jsxs("span",{children:[i," and"," ",h.jsx("code",{className:"border rounded px-1",children:"stderr"})," logs will appear here."]}),icon:h.jsx(im,{})}),t[1]=a):a=t[1],a}let o,r,s;return t[2]!==n?(o=h.jsx("div",{className:"flex flex-row justify-end px-2 py-1",children:h.jsx(cp,{dataTestId:"clear-logs-button",onClick:n})}),t[2]=n,t[3]=o):o=t[3],t[4]!==e?(r=h.jsx("div",{className:"overflow-auto flex-1",children:h.jsx(b3,{logs:e,className:"min-w-[300px]"})}),t[4]=e,t[5]=r):r=t[5],t[6]!==o||t[7]!==r?(s=h.jsxs(h.Fragment,{children:[o,r]}),t[6]=o,t[7]=r,t[8]=s):s=t[8],s},b3=t=>{const e=X.c(10),{logs:n,className:o}=t;let r,s,i,a,l;return e[0]!==o?(r=Oe("flex flex-col",o),e[0]=o,e[1]=r):r=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(s={whiteSpace:"pre-wrap"},e[2]=s):s=e[2],e[3]!==n?(i=n.map(cF),e[3]=n,e[4]=i):i=e[4],e[5]!==i?(a=h.jsx("pre",{className:"grid text-xs font-mono gap-1 whitespace-break-spaces font-semibold align-left",children:h.jsx("div",{className:"grid grid-cols-[30px,1fr]",style:s,children:i})}),e[5]=i,e[6]=a):a=e[6],e[7]!==r||e[8]!==a?(l=h.jsx("div",{className:r,children:a}),e[7]=r,e[8]=a,e[9]=l):l=e[9],l};function aF(t){const e=kH(t.timestamp),n=lF[t.level],o=t.level.toUpperCase();return h.jsxs(h.Fragment,{children:[h.jsxs("span",{className:"flex-shrink-0 text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:["[",e,"]"]}),h.jsx("span",{className:Oe("flex-shrink-0",n),children:o}),h.jsxs("span",{className:"flex-shrink-0 text-[var(--gray-10)]",children:["(",h.jsx(_r,{cellId:t.cellId}),")"]}),t.message]})}const lF={stdout:"text-[var(--grass-9)]",stderr:"text-[var(--red-9)]"};function cF(t,e){return h.jsxs("div",{className:"contents group",children:[h.jsx("span",{className:Oe("opacity-70 group-hover:bg-[var(--gray-3)] group-hover:opacity-100","text-right col-span-1 py-1 pr-1"),children:e+1}),h.jsx("span",{className:Oe("opacity-70 group-hover:bg-[var(--gray-3)] group-hover:opacity-100","px-2 flex gap-x-1.5 py-1 flex-wrap"),children:aF(t)})]},e)}const dF=()=>{const t=X.c(7),{items:e}=$e(SH);let n,o;t[0]!==e?(o=S$(e),t[0]=e,t[1]=o):o=t[1],n=o;const r=n,{activeHeaderId:s,activeOccurrences:i}=C$(r);if(e.length===0){let l;return t[2]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(On,{title:"No outline",description:"Add markdown headings to your notebook to create an outline.",icon:h.jsx(sd,{})}),t[2]=l):l=t[2],l}let a;return t[3]!==s||t[4]!==i||t[5]!==e?(a=h.jsx(N$,{items:e,activeHeaderId:s,activeOccurrences:i}),t[3]=s,t[4]=i,t[5]=e,t[6]=a):a=t[6],a},y3=(t,e)=>{lt(e?{title:"Failed to add package",description:e,variant:"danger"}:{title:"Package added",description:h.jsxs("div",{children:[h.jsxs("div",{children:["The package ",h.jsx(pa,{className:"inline",children:t})," and its dependencies has been added to your environment."]}),h.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Some Python packages may require a kernel restart to see changes."})]})})},x3=(t,e)=>{lt(e?{title:"Failed to upgrade package",description:e,variant:"danger"}:{title:"Package upgraded",description:h.jsxs("div",{children:[h.jsxs("div",{children:["The package ",h.jsx(pa,{className:"inline",children:t})," has been upgraded."]}),h.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Some Python packages may require a kernel restart to see changes."})]})})},w3=(t,e)=>{lt(e?{title:"Failed to remove package",description:e,variant:"danger"}:{title:"Package removed",description:h.jsxs("div",{children:[h.jsxs("div",{children:["The package ",h.jsx(pa,{className:"inline",children:t})," has been removed from your environment."]}),h.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Some Python packages may require a kernel restart to see changes."})]})})},v3=t=>{const e=X.c(9),{onClick:n,loading:o,children:r,className:s}=t;if(o){let c;return e[0]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Jn,{size:"small",className:"h-4 w-4 shrink-0 opacity-50"}),e[0]=c):c=e[0],c}let i,a,l;return e[1]!==s?(i=Oe("px-2 h-full text-xs text-muted-foreground hover:text-foreground","invisible group-hover:visible",s),e[1]=s,e[2]=i):i=e[2],e[3]!==n?(a=$n.stopPropagation(n),e[3]=n,e[4]=a):a=e[4],e[5]!==r||e[6]!==i||e[7]!==a?(l=h.jsx("button",{type:"button",className:i,onClick:a,children:r}),e[5]=r,e[6]=i,e[7]=a,e[8]=l):l=e[8],l},uF=()=>{const t=X.c(16),[e]=zs(),n=e.package_management.manager;let o;t[0]!==n?(o=[n],t[0]=n,t[1]=o):o=t[1];const{data:r,error:s,refetch:i,isPending:a}=qn(gF,o);if(a){let m;return t[2]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsx(Jn,{size:"medium",centered:!0}),t[2]=m):m=t[2],m}if(s){let m;return t[3]!==s?(m=h.jsx(ni,{error:s}),t[3]=s,t[4]=m):m=t[4],m}let l;t[5]!==(r==null?void 0:r.packages)?(l=(r==null?void 0:r.packages)||[],t[5]=r==null?void 0:r.packages,t[6]=l):l=t[6];const c=l;let d,u,f;return t[7]!==n||t[8]!==i?(d=h.jsx(hF,{packageManager:n,onSuccess:i}),t[7]=n,t[8]=i,t[9]=d):d=t[9],t[10]!==c||t[11]!==i?(u=h.jsx(fF,{packages:c,onSuccess:i}),t[10]=c,t[11]=i,t[12]=u):u=t[12],t[13]!==d||t[14]!==u?(f=h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[d,u]}),t[13]=d,t[14]=u,t[15]=f):f=t[15],f},hF=({onSuccess:t,packageManager:e})=>{const[n,o]=K.useState(""),[r,s]=K.useState(!1),{handleClick:i}=Ca(),a=$e(bS),l=Zt(bS);K.useEffect(()=>{a&&(o(a),l(null))},[a,l]);const c=async()=>{try{s(!0);const d=n.split(",").map(u=>u.trim());for(const[u,f]of d.entries()){const m=await xS({package:f});m.success?y3(f):y3(f,m.error),u<d.length-1&&await new Promise(_=>setTimeout(_,1e3))}t()}finally{o(""),s(!1)}};return h.jsxs("div",{className:"flex items-center w-full border-b",children:[h.jsx(yS,{placeholder:`Install packages with ${e}...`,id:O1,icon:r?h.jsx(Jn,{size:"small",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}):h.jsx(Le,{content:"Change package manager",children:h.jsx(ka,{onClick:()=>i("packageManagement"),className:"mr-2 h-4 w-4 shrink-0 opacity-50 hover:opacity-80 cursor-pointer"})}),rootClassName:"flex-1 border-none",value:n,onKeyDown:d=>{d.key==="Enter"&&(d.preventDefault(),c())},onChange:d=>o(d.target.value)}),h.jsx(Le,{delayDuration:300,side:"left",align:"start",content:h.jsxs("div",{className:"text-sm flex flex-col w-full max-w-[360px]",children:["Packages are installed using the package manager specified in your user configuration. Depending on your package manager, you can install packages with various formats:",h.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-bold tracking-wide",children:"Package name:"})," A package name; this will install the latest version.",h.jsx("div",{className:"text-muted-foreground",children:"Example: httpx"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold tracking-wide",children:"Package and version:"})," ","A package with a specific version or version range.",h.jsx("div",{className:"text-muted-foreground",children:"Examples: httpx==0.27.0, httpx>=0.27.0"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold tracking-wide",children:"Git:"})," A Git repository",h.jsx("div",{className:"text-muted-foreground",children:"Example: git+https://github.com/encode/httpx"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold tracking-wide",children:"URL:"})," A remote wheel or source distribution.",h.jsx("div",{className:"text-muted-foreground",children:"Example: https://example.com/httpx-0.27.0.tar.gz"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold tracking-wide",children:"Path:"})," A local wheel, source distribution, or project directory.",h.jsx("div",{className:"text-muted-foreground",children:"Example: /example/foo-0.1.0-py3-none-any.whl"})]})]})]}),children:h.jsx(Ym,{className:"h-4 w-4 cursor-help text-muted-foreground hover:text-foreground bg-transparent"})}),h.jsx("button",{type:"button",className:Oe("float-right px-2 m-0 h-full text-sm text-secondary-foreground ml-2",n&&"bg-accent text-accent-foreground","disabled:cursor-not-allowed disabled:opacity-50"),onClick:c,disabled:!n,children:"Add"})]})},fF=t=>{const e=X.c(9),{onSuccess:n,packages:o}=t;if(o.length===0){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(On,{title:"No packages",description:"No packages are installed in this environment.",icon:h.jsx(ka,{})}),e[0]=a):a=e[0],a}let r,s,i;if(e[1]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(Qm,{children:h.jsxs(oi,{children:[h.jsx(Br,{children:"Name"}),h.jsx(Br,{children:"Version"}),h.jsx(Br,{})]})}),e[1]=r):r=e[1],e[2]!==n||e[3]!==o){let a;e[5]!==n?(a=l=>h.jsxs(oi,{className:"group",onClick:async()=>{await xn(`${l.name}==${l.version}`),lt({title:"Copied to clipboard"})},children:[h.jsx(Ur,{children:l.name}),h.jsx(Ur,{children:l.version}),h.jsxs(Ur,{className:"flex justify-end",children:[h.jsx(mF,{packageName:l.name,onSuccess:n}),h.jsx(pF,{packageName:l.name,onSuccess:n})]})]},l.name),e[5]=n,e[6]=a):a=e[6],s=o.map(a),e[2]=n,e[3]=o,e[4]=s}else s=e[4];return e[7]!==s?(i=h.jsxs(ep,{className:"overflow-auto flex-1",children:[r,h.jsx(tp,{children:s})]}),e[7]=s,e[8]=i):i=e[8],i},mF=({packageName:t,onSuccess:e})=>{const[n,o]=K.useState(!1);return En()?null:h.jsx(v3,{onClick:async()=>{try{o(!0);const r=await xS({package:t,upgrade:!0});r.success?(e(),x3(t)):x3(t,r.error)}finally{o(!1)}},loading:n,children:"Upgrade"})},pF=({packageName:t,onSuccess:e})=>{const[n,o]=K.useState(!1);return h.jsx(v3,{onClick:async()=>{try{o(!0);const r=await NH({package:t});r.success?(e(),w3(t)):w3(t,r.error)}finally{o(!1)}},loading:n,children:"Remove"})};function gF(){return CH()}const Zf=z3("marimo:scratchpadHistory:v1",[]),_F=en(!1),bF=en(null,(t,e,n)=>{if(!(n=n.trim()))return;const o=t(Zf),r=[n,...o.filter(s=>s!==n)].slice(0,15);e(Zf,r)}),yF={hide_code:!1,disabled:!1},xF=()=>{const t=X.c(69),e=Ec(),[n]=zs(),{theme:o}=Fo(),r=A.useRef(null),s=$s(),{createNewCell:i,updateCellCode:a}=Ft(),l=e.cellRuntime[br],c=l==null?void 0:l.output,d=l==null?void 0:l.status,u=l==null?void 0:l.consoleOutputs,f=e.cellData[br],m=(f==null?void 0:f.code)??"",_=Zt(bF),[g,p]=fn(_F),b=$e(Zf);let y;t[0]!==_||t[1]!==m?(y=()=>{wS({code:m}),_(m)},t[0]=_,t[1]=m,t[2]=y):y=t[2];const x=tt(y);let v;t[3]!==m||t[4]!==i||t[5]!==s?(v=()=>{m.trim()&&i({code:m,before:!1,cellId:s??"__end__"})},t[3]=m,t[4]=i,t[5]=s,t[6]=v):v=t[6];const S=tt(v);let k;t[7]!==a?(k=()=>{a({cellId:br,code:"",formattingChange:!1}),wS({code:""});const ae=r.current;ae&&ae.dispatch({changes:{from:0,to:ae.state.doc.length,insert:""}})},t[7]=a,t[8]=k):k=t[8];const E=tt(k);let j;t[9]!==p||t[10]!==a?(j=ae=>{p(!1),a({cellId:br,code:ae,formattingChange:!1});const Se=r.current;Se&&Se.dispatch({changes:{from:0,to:Se.state.doc.length,insert:ae}})},t[9]=p,t[10]=a,t[11]=j):j=t[11];const I=tt(j),[T,M]=A.useState();let L;t[12]!==m||t[13]!==u||t[14]!==x||t[15]!==T||t[16]!==c||t[17]!==o||t[18]!==n?(L=()=>h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"overflow-auto flex-shrink-0 max-h-[40%]",children:h.jsx(Gu,{theme:o,allowFocus:!1,showPlaceholder:!1,id:br,code:m,config:yF,status:"idle",serializedEditorState:null,runCell:x,userConfig:n,editorViewRef:r,setEditorView:ae=>{r.current=ae},hidden:!1,temporarilyShowCode:In.NOOP,languageAdapter:T,setLanguageAdapter:M})}),h.jsx("div",{className:"flex-1 overflow-auto flex-shrink-0",children:h.jsx(Uc,{allowExpand:!1,output:c,className:"output-area",cellId:br,stale:!1,loading:!1})}),h.jsx("div",{className:"overflow-auto flex-shrink-0 max-h-[35%]",children:h.jsx(ip,{consoleOutputs:u,className:"overflow-auto",stale:!1,cellName:jH,onSubmitDebugger:In.NOOP,cellId:br,debuggerActive:!1})})]}),t[12]=m,t[13]=u,t[14]=x,t[15]=T,t[16]=c,t[17]=o,t[18]=n,t[19]=L):L=t[19];const B=L;let O;t[20]!==I||t[21]!==b||t[22]!==g||t[23]!==o?(O=()=>g?h.jsx("div",{className:"absolute inset-0 z-100 bg-background p-3 border-none overflow-auto",children:h.jsx("div",{className:"overflow-auto flex flex-col gap-3",children:b.map((ae,Se)=>h.jsx("div",{className:"border rounded-md hover:shadow-sm cursor-pointer hover:border-input overflow-hidden",onClick:()=>I(ae),children:h.jsx(A.Suspense,{children:h.jsx(va,{language:"python",theme:o,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1},value:ae.trim(),editable:!1,readOnly:!0})})},Se))})}):null,t[20]=I,t[21]=b,t[22]=g,t[23]=o,t[24]=O):O=t[24];const z=O;let F,V,R,C,H,N,$,Y,Z,q,re;t[25]===Symbol.for("react.memo_cache_sentinel")?(F=Ps.create(br),V=h.jsx("p",{className:"mx-2 my-2 text-muted-foreground text-sm",children:"Use this scratchpad cell to experiment with code without restrictions on variable names. Scratchpad code is ephemeral: variables defined in the scratchpad aren't saved to notebook memory, and the code is not saved in the notebook file."}),t[25]=F,t[26]=V):(F=t[25],V=t[26]),t[27]===Symbol.for("react.memo_cache_sentinel")?(R=pn("cell.run"),t[27]=R):R=t[27],t[28]===Symbol.for("react.memo_cache_sentinel")?(C=h.jsx(ri,{color:"var(--grass-11)",size:16}),t[28]=C):C=t[28],t[29]!==x||t[30]!==g?(H=h.jsx(Le,{content:R,children:h.jsx(Pe,{"data-testid":"scratchpad-run-button",onClick:x,disabled:g,variant:"text",size:"xs",children:C})}),t[29]=x,t[30]=g,t[31]=H):H=t[31],t[32]===Symbol.for("react.memo_cache_sentinel")?(N=h.jsx(xp,{size:16}),t[32]=N):N=t[32],t[33]!==E||t[34]!==g?($=h.jsx(Le,{content:"Clear code and outputs",children:h.jsx(Pe,{disabled:g,size:"xs",variant:"text",onClick:E,children:N})}),t[33]=E,t[34]=g,t[35]=$):$=t[35],t[36]===Symbol.for("react.memo_cache_sentinel")?(Y=h.jsx(ii,{size:16}),t[36]=Y):Y=t[36],t[37]!==S||t[38]!==g?(Z=h.jsx(ci,{children:h.jsx(Le,{content:"Insert code",children:h.jsx(Pe,{disabled:g,size:"xs",variant:"text",onClick:S,children:Y})})}),t[37]=S,t[38]=g,t[39]=Z):Z=t[39],t[40]!==d?(q=(d==="running"||d==="queued")&&h.jsx(Jn,{className:"inline",size:"small"}),t[40]=d,t[41]=q):q=t[41],t[42]===Symbol.for("react.memo_cache_sentinel")?(re=h.jsx("div",{className:"flex-1"}),t[42]=re):re=t[42];const ne=g&&"bg-[var(--sky-3)] rounded-none";let oe,G;t[43]!==ne?(oe=Oe(ne),t[43]=ne,t[44]=oe):oe=t[44],t[45]!==g||t[46]!==p?(G=()=>p(!g),t[45]=g,t[46]=p,t[47]=G):G=t[47];const Q=b.length===0;let ce,me,de,ge,ie,we,ve;return t[48]===Symbol.for("react.memo_cache_sentinel")?(ce=h.jsx(jp,{size:16}),t[48]=ce):ce=t[48],t[49]!==oe||t[50]!==G||t[51]!==Q?(me=h.jsx(Le,{content:"Toggle history",children:h.jsx(Pe,{size:"xs",variant:"text",className:oe,onClick:G,disabled:Q,children:ce})}),t[49]=oe,t[50]=G,t[51]=Q,t[52]=me):me=t[52],t[53]!==H||t[54]!==$||t[55]!==Z||t[56]!==q||t[57]!==me?(de=h.jsxs("div",{className:"flex items-center flex-shrink-0",children:[H,$,Z,q,re,me]}),t[53]=H,t[54]=$,t[55]=Z,t[56]=q,t[57]=me,t[58]=de):de=t[58],t[59]!==B?(ge=B(),t[59]=B,t[60]=ge):ge=t[60],t[61]!==z?(ie=z(),t[61]=z,t[62]=ie):ie=t[62],t[63]!==ge||t[64]!==ie?(we=h.jsxs("div",{className:"flex-1 divide-y relative overflow-hidden flex flex-col",children:[ge,ie]}),t[63]=ge,t[64]=ie,t[65]=we):we=t[65],t[66]!==de||t[67]!==we?(ve=h.jsxs("div",{className:"flex flex-col h-full overflow-hidden divide-y",id:F,children:[V,de,we]}),t[66]=de,t[67]=we,t[68]=ve):ve=t[68],ve},wF=()=>{const t=X.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx(xF,{}),t[0]=e):e=t[0],e},vF=()=>{const t=X.c(23),{openModal:e,closeModal:n}=Wn();let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[0]=o):o=t[0];const{data:r,isPending:s,error:i,refetch:a}=qn(SF,o);if(s){let b;return t[1]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(Jn,{size:"medium",centered:!0}),t[1]=b):b=t[1],b}if(i){let b;return t[2]!==i?(b=h.jsx(ni,{error:i}),t[2]=i,t[3]=b):b=t[3],b}let l;t[4]!==r?(l=r.filter(CF).map(NF),t[4]=r,t[5]=l):l=t[5];const c=l;if(r.length===0){let b;return t[6]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(On,{title:"No environment variables",description:"No environment variables are available in this notebook.",icon:h.jsx(ed,{})}),t[6]=b):b=t[6],b}let d,u,f,m,_,g,p;return t[7]!==n||t[8]!==e||t[9]!==c||t[10]!==a?(d=()=>e(h.jsx(jg,{providerNames:c,onSuccess:()=>{a(),n()},onClose:n})),t[7]=n,t[8]=e,t[9]=c,t[10]=a,t[11]=d):d=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx(gr,{className:"h-4 w-4"}),t[12]=u):u=t[12],t[13]!==d?(f=h.jsx("div",{className:"flex justify-end h-8 border-b",children:h.jsx("button",{type:"button",className:"float-right border-l px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",onClick:d,children:u})}),t[13]=d,t[14]=f):f=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsx(Qm,{children:h.jsxs(oi,{children:[h.jsx(Br,{children:"Environment Variable"}),h.jsx(Br,{children:"Source"}),h.jsx(Br,{})]})}),t[15]=m):m=t[15],t[16]!==r?(_=r.map(jF),t[16]=r,t[17]=_):_=t[17],t[18]!==_?(g=h.jsxs(ep,{className:"overflow-auto flex-1 mb-16",children:[m,h.jsx(tp,{children:_})]}),t[18]=_,t[19]=g):g=t[19],t[20]!==f||t[21]!==g?(p=h.jsxs("div",{className:"flex flex-col h-full",children:[f,g]}),t[20]=f,t[21]=g,t[22]=p):p=t[22],p},kF=t=>{const e=X.c(9),{className:n,ariaLabel:o,onCopy:r}=t,[s,i]=K.useState(!1);let a;e[0]!==r?(a=()=>{r(),i(!0),setTimeout(()=>i(!1),1e3)},e[0]=r,e[1]=a):a=e[1];const l=a;let c,d;return e[2]!==s?(c=s?h.jsx(kc,{className:"w-3 h-3 text-green-700 rounded"}):h.jsx(Rs,{className:"w-3 h-3 hover:bg-muted rounded"}),e[2]=s,e[3]=c):c=e[3],e[4]!==o||e[5]!==n||e[6]!==l||e[7]!==c?(d=h.jsx("button",{type:"button",className:n,onClick:l,"aria-label":o,children:c}),e[4]=o,e[5]=n,e[6]=l,e[7]=c,e[8]=d):d=e[8],d};async function SF(){return Ng((await OS.request({})).secrets)}function CF(t){return t.provider!=="env"}function NF(t){return t.name}function jF(t){return t.keys.map(e=>h.jsxs(oi,{className:"group",children:[h.jsx(Ur,{children:e}),h.jsx(Ur,{children:t.provider!=="env"&&h.jsx(oS,{variant:"outline",className:"select-none",children:t.name})}),h.jsx(Ur,{children:h.jsx(kF,{ariaLabel:`Copy ${e}`,onCopy:async()=>{await xn(`os.environ["${e}"]`),lt({title:"Copied to clipboard",description:`os.environ["${e}"] has been copied to your clipboard.`})},className:Oe("float-right px-2 h-full text-xs text-muted-foreground hover:text-foreground","invisible group-hover:visible")})})]},`${t.name}-${e}`))}const EF=t=>{const e=X.c(6),{children:n}=t,{openModal:o,closeModal:r}=Wn();let s,i;return e[0]!==r||e[1]!==o?(s=()=>o(h.jsx(AF,{onClose:r})),e[0]=r,e[1]=o,e[2]=s):s=e[2],e[3]!==n||e[4]!==s?(i=h.jsx(eS,{onClick:s,children:n}),e[3]=n,e[4]=s,e[5]=i):i=e[5],i},IF=[st.lineWrapping],AF=t=>{const e=X.c(23),{onClose:n}=t,[o,r]=A.useState(""),{theme:s}=Fo();let i,a,l,c,d,u;e[0]!==n?(i=async x=>{x.preventDefault();const v=new FormData(x.target),S=v.get("title"),k=v.get("description"),E=v.get("code");fetch("https://marimo.io/api/suggest-snippet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:S,description:k,code:E})}),n(),lt({title:"Snippet Submitted",description:"Thank you for contributing! We will review your snippet shortly."})},e[0]=n,e[1]=i):i=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(lr,{children:"Contribute a Snippet"}),e[2]=a):a=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsxs(Os,{children:[a,h.jsxs(Ds,{children:["Have a useful snippet you want to share with the community? Submit it here or make a pull request"," ",h.jsx("a",{href:to.githubPage,target:"_blank",className:"underline",children:"on GitHub"}),"."]})]}),e[3]=l):l=e[3],e[4]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(cr,{id:"title",name:"title",autoFocus:!0,placeholder:"Title",required:!0,autoComplete:"off"}),d=h.jsx(EH,{id:"description",name:"description",autoFocus:!0,placeholder:"Description",rows:5,required:!0,autoComplete:"off"}),e[4]=c,e[5]=d):(c=e[4],d=e[5]),e[6]!==o?(u=h.jsx("input",{type:"hidden",name:"code",value:o}),e[6]=o,e[7]=u):u=e[7];const f=s==="dark"?"dark":"light";let m,_,g,p,b,y;return e[8]!==o||e[9]!==f?(m=h.jsx(va,{theme:f,language:"python",className:"cm border rounded overflow-hidden",extensions:IF,value:o,onChange:r}),e[8]=o,e[9]=f,e[10]=m):m=e[10],e[11]!==u||e[12]!==m?(_=h.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[c,d,u,m]}),e[11]=u,e[12]=m,e[13]=_):_=e[13],e[14]!==n?(g=h.jsx(Pe,{"data-testid":"snippet-cancel-button",variant:"secondary",onClick:n,children:"Cancel"}),e[14]=n,e[15]=g):g=e[15],e[16]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(Pe,{"data-testid":"snippet-send-button","aria-label":"Save",variant:"default",type:"submit",children:"Send"}),e[16]=p):p=e[16],e[17]!==g?(b=h.jsxs(na,{children:[g,p]}),e[17]=g,e[18]=b):b=e[18],e[19]!==i||e[20]!==b||e[21]!==_?(y=h.jsx(dr,{className:"w-fit",children:h.jsxs("form",{onSubmit:i,children:[l,_,b]})}),e[19]=i,e[20]=b,e[21]=_,e[22]=y):y=e[22],y},TF=[st.lineWrapping],MF=()=>{const t=X.c(20),[e,n]=K.useState();let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[0]=o):o=t[0];const{data:r,error:s,isPending:i}=qn(RF,o);if(s){let b;return t[1]!==s?(b=h.jsx(ni,{error:s}),t[1]=s,t[2]=b):b=t[2],b}if(i||!r){let b;return t[3]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(Jn,{size:"medium",centered:!0}),t[3]=b):b=t[3],b}const a=e?"h-1/3":"h-full";let l,c,d,u,f,m,_,g,p;return t[4]!==a?(l=Oe("border-b rounded-none",a),t[4]=a,t[5]=l):l=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(sa,{placeholder:"Search snippets...",className:"h-6 m-1",rootClassName:"flex-1 border-r"}),t[6]=c):c=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsxs("div",{className:"flex items-center w-full",children:[c,h.jsx(EF,{children:h.jsx("button",{className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:h.jsx(gr,{className:"h-4 w-4"})})})]}),u=h.jsx(xc,{children:"No results"}),t[7]=d,t[8]=u):(d=t[7],u=t[8]),t[9]===Symbol.for("react.memo_cache_sentinel")?(f=b=>n(b),t[9]=f):f=t[9],t[10]!==r.snippets?(m=h.jsx(DF,{onSelect:f,snippets:r.snippets}),t[10]=r.snippets,t[11]=m):m=t[11],t[12]!==l||t[13]!==m?(_=h.jsxs(Nc,{className:l,children:[d,u,m]}),t[12]=l,t[13]=m,t[14]=_):_=t[14],t[15]!==e?(g=h.jsx(A.Suspense,{children:h.jsx("div",{className:"h-2/3 snippet-viewer flex flex-col",children:e?h.jsx(OF,{snippet:e},e.title):h.jsx(On,{title:"",description:"Click on a snippet to view its content."})})}),t[15]=e,t[16]=g):g=t[16],t[17]!==_||t[18]!==g?(p=h.jsxs("div",{className:"flex-1 overflow-hidden",children:[_,g]}),t[17]=_,t[18]=g,t[19]=p):p=t[19],p},OF=t=>{const e=X.c(27),{snippet:n}=t,{theme:o}=Fo(),{createNewCell:r}=Ft(),s=$s();let i;e[0]!==r||e[1]!==s||e[2]!==n.sections?(i=()=>{for(const p of[...n.sections].reverse())p.code&&r({code:p.code,before:!1,cellId:s??"__end__",skipIfCodeExists:!0})},e[0]=r,e[1]=s,e[2]=n.sections,e[3]=i):i=e[3];const a=i;let l;e[4]!==r||e[5]!==s?(l=p=>{r({code:p,before:!1,cellId:s??"__end__"})},e[4]=r,e[5]=s,e[6]=l):l=e[6];const c=l;let d,u,f,m,_,g;if(e[7]!==n.title?(d=h.jsx("div",{className:"text-sm font-semibold bg-muted border-y px-2 py-1",children:n.title}),e[7]=n.title,e[8]=d):d=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx(ii,{className:"ml-2 h-4 w-4"}),e[9]=u):u=e[9],e[10]!==a?(f=h.jsx("div",{className:"flex justify-end",children:h.jsx(ci,{children:h.jsxs(Pe,{className:"float-right",size:"xs",variant:"outline",onClick:a,children:["Insert snippet",u]})})}),e[10]=a,e[11]=f):f=e[11],e[12]!==c||e[13]!==n.sections||e[14]!==n.title||e[15]!==o){let p;e[17]!==c||e[18]!==n.title||e[19]!==o?(p=b=>{const{code:y,html:x,id:v}=b;return x?h.jsx("div",{children:Xm({html:x})},`${n.title}-${v}`):y?h.jsxs("div",{className:"relative hover-actions-parent pr-2",children:[h.jsx(ci,{children:h.jsx(Le,{content:"Insert snippet",children:h.jsx(Pe,{className:"absolute -top-2 -right-1 z-10 hover-action px-2 bg-background",size:"sm",variant:"outline",onClick:()=>{c(y)},children:h.jsx(ii,{className:"h-5 w-5"})})})}),h.jsx(A.Suspense,{children:h.jsx(va,{theme:o==="dark"?"dark":"light",language:"python",className:"cm border rounded overflow-hidden",extensions:TF,value:y,readOnly:!0},`${n.title}-${v}`)})]},`${n.title}-${v}`):null},e[17]=c,e[18]=n.title,e[19]=o,e[20]=p):p=e[20],m=n.sections.map(p),e[12]=c,e[13]=n.sections,e[14]=n.title,e[15]=o,e[16]=m}else m=e[16];return e[21]!==f||e[22]!==m?(_=h.jsxs("div",{className:"px-2 py-2 space-y-4 overflow-auto flex-1",children:[f,m]}),e[21]=f,e[22]=m,e[23]=_):_=e[23],e[24]!==d||e[25]!==_?(g=h.jsxs(h.Fragment,{children:[d,_]}),e[24]=d,e[25]=_,e[26]=g):g=e[26],g},DF=t=>{const e=X.c(7),{snippets:n,onSelect:o}=t;let r,s;if(e[0]!==o||e[1]!==n){let i;e[3]!==o?(i=a=>h.jsx(go,{className:"rounded-none",onSelect:()=>o(a),children:h.jsx("div",{className:"flex flex-row gap-2 items-center",children:h.jsx("span",{className:"mt-1 text-accent-foreground",children:a.title})})},a.title),e[3]=o,e[4]=i):i=e[4],r=n.map(i),e[0]=o,e[1]=n,e[2]=r}else r=e[2];return e[5]!==r?(s=h.jsx(Fm,{className:"flex flex-col overflow-auto",children:r}),e[5]=r,e[6]=s):s=e[6],s};function RF(){return IH()}const PF=K.lazy(()=>zm(()=>import("./tracing-CQm8yTjH.js").then(async t=>(await t.__tla,t)),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122]),import.meta.url).then(t=>({default:t.Tracing}))),LF=()=>{const t=X.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx(K.Suspense,{fallback:h.jsx(FF,{}),children:h.jsx(PF,{})}),t[0]=e):e=t[0],e},FF=()=>{const t=X.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:h.jsx(Jn,{})}),t[0]=e):e=t[0],e},k3="name",S3="type-value",Qf="defs-refs",zF=[{id:k3,accessorFn:t=>[t.name,t.declaredBy],enableSorting:!0,sortingFn:"alphanumeric",header:({column:t})=>h.jsx(np,{header:"Name",column:t}),cell:({getValue:t})=>{const[e,n]=t();return h.jsx(uf,{name:e,declaredBy:n})}},{id:S3,accessorFn:t=>[t.dataType,t.value],enableSorting:!0,sortingFn:"alphanumeric",header:({column:t})=>h.jsx(np,{header:h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("span",{children:"Type"}),h.jsx("span",{children:"Value"})]}),column:t}),cell:({getValue:t})=>{const[e,n]=t();return h.jsxs("div",{className:"max-w-[150px]",children:[h.jsx("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap text-muted-foreground font-mono text-xs",children:e}),h.jsx("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap",title:n??"",children:n})]})}},{id:Qf,accessorFn:t=>[t.declaredBy,t.usedBy,t.name,t.declaredByNames,t.usedByNames],enableSorting:!0,sortingFn:"basic",header:({column:t})=>h.jsx(np,{header:h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("span",{children:"Declared By"}),h.jsx("span",{children:"Used By"})]}),column:t}),cell:({getValue:t})=>{const[e,n,o]=t(),r=s=>{const i=mc(s);i&&Zm(i,o)};return h.jsxs("div",{className:"flex flex-col gap-1 py-1",children:[h.jsxs("div",{className:"flex flex-row overflow-auto gap-2 items-center",children:[h.jsx("span",{title:"Declared by",children:h.jsx(Gp,{className:"w-3.5 h-3.5 text-muted-foreground"})}),e.length===1?h.jsx(_r,{variant:"focus",cellId:e[0],skipScroll:!0,onClick:()=>r(e[0])}):h.jsx("div",{className:"text-destructive flex flex-row gap-2",children:e.slice(0,3).map((s,i)=>h.jsxs("span",{className:"flex",children:[h.jsx(_r,{variant:"focus",cellId:s,skipScroll:!0,className:"whitespace-nowrap text-destructive",onClick:()=>r(s)},s),i<e.length-1&&", "]},s))})]}),h.jsxs("div",{className:"flex flex-row overflow-auto gap-2 items-baseline",children:[h.jsx("span",{title:"Used by",children:h.jsx(Oa,{className:"w-3.5 h-3.5 text-muted-foreground"})}),h.jsx(G2,{maxCount:3,cellIds:n,skipScroll:!0,onClick:r})]})]})}}],C3=A.memo(({className:t,cellIds:e,variables:n})=>{const[o,r]=K.useState([]),[s,i]=K.useState(""),a=AH(),l=A.useMemo(()=>{const u=f=>{const m=a[f];return RH(m)?`cell-${e.indexOf(f)}`:m??`cell-${e.indexOf(f)}`};return Object.values(n).map(f=>({...f,declaredByNames:f.declaredBy.map(u),usedByNames:f.usedBy.map(u)}))},[n,a,e]),c=A.useMemo(()=>{const u=new Map;return e.forEach((f,m)=>u.set(f,m)),function(f,m,_){m||(m={id:Qf,desc:!1});let g=[];switch(m.id){case k3:g=Na(f,p=>p.name);break;case S3:g=Na(f,p=>p.dataType);break;case Qf:g=Na(f,p=>_.get(p.declaredBy[0]))}return m.desc?g.reverse():g}(l,o[0],u)},[l,o,e]),d=TH({data:c,columns:zF,getCoreRowModel:DH(),onGlobalFilterChange:i,getFilteredRowModel:OH(),enableFilters:!0,enableGlobalFilter:!0,enableColumnPinning:!1,getColumnCanGlobalFilter:u=>u.columnDef.enableGlobalFilter??!0,globalFilterFn:"auto",manualSorting:!0,onSortingChange:r,getSortedRowModel:MH(),state:{sorting:o,globalFilter:s}});return h.jsxs(h.Fragment,{children:[h.jsx(yS,{className:"w-full",placeholder:"Search",value:s,onChange:u=>i(u.target.value)}),h.jsxs(ep,{className:Oe("w-full text-sm flex-1 border-separate border-spacing-0",t),children:[h.jsx(Qm,{children:h.jsx(oi,{className:"whitespace-nowrap text-xs",children:d.getFlatHeaders().map(u=>h.jsx(Br,{className:"sticky top-0 bg-background border-b",children:vS(u.column.columnDef.header,u.getContext())},u.id))})}),h.jsx(tp,{children:d.getRowModel().rows.map(u=>h.jsx(oi,{className:"hover:bg-accent",children:u.getVisibleCells().map(f=>h.jsx(Ur,{className:"border-b",children:vS(f.column.columnDef.cell,f.getContext())},f.id))},u.id))})]})]})});C3.displayName="VariableTable";const BF=()=>{const t=X.c(4),e=sS(),n=$c();if(Object.keys(e).length===0){let r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(On,{title:"No variables",description:"Global variables will appear here.",icon:h.jsx(uc,{})}),t[0]=r):r=t[0],r}let o;return t[1]!==n.inOrderIds||t[2]!==e?(o=h.jsx(C3,{className:"flex-1",cellIds:n.inOrderIds,variables:e}),t[1]=n.inOrderIds,t[2]=e,t[3]=o):o=t[3],o},UF=K.lazy(()=>zm(()=>import("./terminal-BKOpNk0B.js"),__vite__mapDeps([123,1,2,124]),import.meta.url)),VF=t=>{const e=X.c(121),{children:n}=t,{isSidebarOpen:o,isTerminalOpen:r,selectedPanel:s}=vc(),{setIsSidebarOpen:i,setIsTerminalOpen:a}=aa(),l=K.useRef(null),c=K.useRef(null);let d,u,f,m,_;e[0]!==o?(d=()=>{if(!l.current)return;const ye=l.current.isCollapsed();o&&ye&&l.current.expand(),o||ye||l.current.collapse(),requestAnimationFrame($F)},u=[o],e[0]=o,e[1]=d,e[2]=u):(d=e[1],u=e[2]),A.useEffect(d,u),e[3]!==r?(f=()=>{if(!c.current)return;const ye=c.current.isCollapsed();r&&ye&&c.current.expand(),r||ye||c.current.collapse(),requestAnimationFrame(qF)},m=[r],e[3]=r,e[4]=f,e[5]=m):(f=e[4],m=e[5]),A.useEffect(f,m),e[6]!==n?(_=h.jsx(qc,{id:"app",className:"relative h-full",children:h.jsx(A.Suspense,{children:n})},"app"),e[6]=n,e[7]=_):_=e[7];const g=_,p=o?"resize-handle":"resize-handle-collapsed";let b,y;e[8]!==p?(b=Oe("border-border no-print z-10",p,"vertical"),e[8]=p,e[9]=b):b=e[9],e[10]!==b?(y=h.jsx(kS,{onDragging:SS,className:b}),e[10]=b,e[11]=y):y=e[11];const x=y,v=r?"resize-handle":"resize-handle-collapsed";let S,k;e[12]!==v?(S=Oe("border-border no-print z-20",v,"horizontal"),e[12]=v,e[13]=S):S=e[13],e[14]!==S?(k=h.jsx(kS,{onDragging:SS,className:S}),e[14]=S,e[15]=k):k=e[15];const E=k;let j,I,T,M,L,B,O,z,F,V,R,C,H,N,$,Y,Z,q,re,ne,oe;e[16]!==s?(j=h.jsx("div",{className:"text-sm text-[var(--slate-11)] uppercase tracking-wide font-semibold flex-1",children:s}),e[16]=s,e[17]=j):j=e[17],e[18]!==i?(I=()=>i(!1),e[18]=i,e[19]=I):I=e[19],e[20]===Symbol.for("react.memo_cache_sentinel")?(T=h.jsx(no,{className:"w-4 h-4"}),e[20]=T):T=e[20],e[21]!==I?(M=h.jsx(Pe,{"data-testid":"close-helper-pane",className:"m-0",size:"xs",variant:"text",onClick:I,children:T}),e[21]=I,e[22]=M):M=e[22],e[23]!==j||e[24]!==M?(L=h.jsxs("div",{className:"p-3 border-b flex justify-between items-center",children:[j,M]}),e[23]=j,e[24]=M,e[25]=L):L=e[25],e[26]!==s?(B=s==="files"&&h.jsx(g3,{}),e[26]=s,e[27]=B):B=e[27],e[28]!==s?(O=s==="errors"&&h.jsx(FL,{}),e[28]=s,e[29]=O):O=e[29],e[30]!==s?(z=s==="variables"&&h.jsx(BF,{}),e[30]=s,e[31]=z):z=e[31],e[32]!==s?(F=s==="dependencies"&&h.jsx(kL,{}),e[32]=s,e[33]=F):F=e[33],e[34]!==s?(V=s==="packages"&&h.jsx(uF,{}),e[34]=s,e[35]=V):V=e[35],e[36]!==s?(R=s==="outline"&&h.jsx(dF,{}),e[36]=s,e[37]=R):R=e[37],e[38]!==s?(C=s==="datasources"&&h.jsx(PL,{}),e[38]=s,e[39]=C):C=e[39],e[40]!==s?(H=s==="documentation"&&h.jsx(LL,{}),e[40]=s,e[41]=H):H=e[41],e[42]!==s?(N=s==="snippets"&&h.jsx(MF,{}),e[42]=s,e[43]=N):N=e[43],e[44]!==s?($=s==="scratchpad"&&h.jsx(wF,{}),e[44]=s,e[45]=$):$=e[45],e[46]!==s?(Y=s==="chat"&&h.jsx(UD,{}),e[46]=s,e[47]=Y):Y=e[47],e[48]!==s?(Z=s==="logs"&&h.jsx(_3,{}),e[48]=s,e[49]=Z):Z=e[49],e[50]!==s?(q=s==="tracing"&&h.jsx(LF,{}),e[50]=s,e[51]=q):q=e[51],e[52]!==s?(re=s==="secrets"&&h.jsx(vF,{}),e[52]=s,e[53]=re):re=e[53],e[54]!==B||e[55]!==O||e[56]!==z||e[57]!==F||e[58]!==V||e[59]!==R||e[60]!==C||e[61]!==H||e[62]!==N||e[63]!==$||e[64]!==Y||e[65]!==Z||e[66]!==q||e[67]!==re?(ne=h.jsx(A.Suspense,{children:h.jsxs(Vc,{children:[B,O,z,F,V,R,C,H,N,$,Y,Z,q,re]})}),e[54]=B,e[55]=O,e[56]=z,e[57]=F,e[58]=V,e[59]=R,e[60]=C,e[61]=H,e[62]=N,e[63]=$,e[64]=Y,e[65]=Z,e[66]=q,e[67]=re,e[68]=ne):ne=e[68],e[69]!==L||e[70]!==ne?(oe=h.jsx(jc,{children:h.jsxs("div",{className:"flex flex-col h-full flex-1 overflow-hidden mr-[-4px]",children:[L,ne]})}),e[69]=L,e[70]=ne,e[71]=oe):oe=e[71];const G=oe,Q=o&&"border-r border-l border-[var(--slate-7)]";let ce,me,de,ge,ie,we;e[72]!==Q?(ce=Oe("dark:bg-[var(--slate-1)] no-print print:hidden hide-on-fullscreen",Q),e[72]=Q,e[73]=ce):ce=e[73],e[74]===Symbol.for("react.memo_cache_sentinel")?(me=(ye,Ne)=>{var Be;Ne===0&&ye===10&&((Be=l.current)==null||Be.resize(30))},e[74]=me):me=e[74],e[75]!==i?(de=()=>i(!1),ge=()=>i(!0),e[75]=i,e[76]=de,e[77]=ge):(de=e[76],ge=e[77]),e[78]!==G||e[79]!==x?(ie=h.jsxs("span",{className:"flex flex-row h-full",children:[G," ",x]}),e[78]=G,e[79]=x,e[80]=ie):ie=e[80],e[81]!==ce||e[82]!==de||e[83]!==ge||e[84]!==ie?(we=h.jsx(qc,{ref:l,id:"helper",collapsedSize:0,collapsible:!0,className:ce,minSize:10,defaultSize:0,maxSize:75,onResize:me,onCollapse:de,onExpand:ge,children:ie},"helper"),e[81]=ce,e[82]=de,e[83]=ge,e[84]=ie,e[85]=we):we=e[85];const ve=we,ae=r&&"border-[var(--slate-7)]";let Se,pe,Te,Re,We,ze,Ce,qe,Ze;e[86]!==ae?(Se=Oe("dark:bg-[var(--slate-1)] no-print print:hidden hide-on-fullscreen",ae),e[86]=ae,e[87]=Se):Se=e[87],e[88]===Symbol.for("react.memo_cache_sentinel")?(pe=(ye,Ne)=>{var Be;Ne===0&&ye===10&&((Be=c.current)==null||Be.resize(30))},e[88]=pe):pe=e[88],e[89]!==a?(Te=()=>a(!1),Re=()=>a(!0),e[89]=a,e[90]=Te,e[91]=Re):(Te=e[90],Re=e[91]),e[92]===Symbol.for("react.memo_cache_sentinel")?(We=h.jsx("div",{}),e[92]=We):We=e[92],e[93]!==a?(ze=()=>a(!1),e[93]=a,e[94]=ze):ze=e[94],e[95]!==r||e[96]!==ze?(Ce=h.jsx(A.Suspense,{fallback:We,children:h.jsx(UF,{visible:r,onClose:ze})}),e[95]=r,e[96]=ze,e[97]=Ce):Ce=e[97],e[98]!==r||e[99]!==Ce?(qe=h.jsx(SL,{isOpen:r,children:Ce}),e[98]=r,e[99]=Ce,e[100]=qe):qe=e[100],e[101]!==Se||e[102]!==Te||e[103]!==Re||e[104]!==qe||e[105]!==E?(Ze=h.jsxs(qc,{ref:c,id:"terminal",collapsedSize:0,collapsible:!0,className:Se,minSize:10,defaultSize:0,maxSize:75,onResize:pe,onCollapse:Te,onExpand:Re,children:[E,qe]},"terminal"),e[101]=Se,e[102]=Te,e[103]=Re,e[104]=qe,e[105]=E,e[106]=Ze):Ze=e[106];const at=Ze;let te,je,Me,Ue,J,he,_e,ue;return e[107]===Symbol.for("react.memo_cache_sentinel")?(te=j$(),e[107]=te):te=e[107],e[108]===Symbol.for("react.memo_cache_sentinel")?(je=h.jsx(Vc,{children:h.jsx(kO,{})}),e[108]=je):je=e[108],e[109]!==at?(Me=h.jsx(Bx,{capability:"terminal",children:at}),e[109]=at,e[110]=Me):Me=e[110],e[111]!==g||e[112]!==Me?(Ue=h.jsx(qc,{children:h.jsxs(CS,{autoSaveId:"marimo:chrome:v1:l1",direction:"vertical",children:[g,Me]})}),e[111]=g,e[112]=Me,e[113]=Ue):Ue=e[113],e[114]===Symbol.for("react.memo_cache_sentinel")?(J=h.jsx(PH,{}),e[114]=J):J=e[114],e[115]!==ve||e[116]!==Ue?(he=h.jsxs(CS,{autoSaveId:"marimo:chrome:v1:l2",direction:"horizontal",storage:te,children:[je,ve,Ue,J]}),e[115]=ve,e[116]=Ue,e[117]=he):he=e[117],e[118]===Symbol.for("react.memo_cache_sentinel")?(_e=h.jsx(jc,{children:h.jsx(Vc,{children:h.jsx(bO,{})})}),e[118]=_e):_e=e[118],e[119]!==he?(ue=h.jsxs(E$,{children:[he,_e]}),e[119]=he,e[120]=ue):ue=e[120],ue};function HF(){window.dispatchEvent(new Event("resize"))}function $F(){requestAnimationFrame(HF)}function WF(){window.dispatchEvent(new Event("resize"))}function qF(){requestAnimationFrame(WF)}let N3;N3=new URL(window.location.href).searchParams.get(LH.showChrome)==="false",HS=Object.freeze(Object.defineProperty({__proto__:null,default:t=>{const e=X.c(10);if(N3){let s,i,a;return e[0]!==t?(s=h.jsx(zx,{hideControls:!0,...t}),e[0]=t,e[1]=s):s=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(ig,{}),e[2]=i):i=e[2],e[3]!==s?(a=h.jsxs(h.Fragment,{children:[s,i]}),e[3]=s,e[4]=a):a=e[4],a}let n,o,r;return e[5]!==t?(n=h.jsx(zx,{...t}),e[5]=t,e[6]=n):n=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(ig,{}),e[7]=o):o=e[7],e[8]!==n?(r=h.jsxs(VF,{children:[n,o]}),e[8]=n,e[9]=r):r=e[9],r}},Symbol.toStringTag,{value:"Module"}))});export{cp as C,Gc as E,On as P,M$ as __tla,Yc as a,HS as e,ja as f,dp as u};
